"include []";class MCurveLegendAttributeDlg{constructor(){var t=this,e=!1;function i(e){"small"==e?t.curve.setLegendIconSize(new Misc.Size(t.defaultIconSize.height-4,t.defaultIconSize.height-4)):"medium"==e?t.curve.setLegendIconSize(new Misc.Size(t.defaultIconSize.height,t.defaultIconSize.height)):t.curve.setLegendIconSize(new Misc.Size(t.defaultIconSize.height+4,t.defaultIconSize.height+4))}this.curveAttributeCb=function(i){e||($("body").append($('                    <div class="modal fade" id="curveLegendAttributeModal" role="dialog">                    <div class="modal-dialog modal-sm">                    <div class="modal-content">                    <div class="modal-header">                    <button type="button" class="close" data-dismiss="modal">&times;</button>                    <h4 class="modal-title">Curve Legend Attribute</h4>                    </div>                    <div class="modal-body">                    <div class="row">                    <div class="col-sm-5">Attribute:</div>                    <div class="col-sm-7">                    <select id="curveAttribute">                    <option value="default">Pen color(Default)</option>                    <option value="line">Line</option>                    <option value="symbol">Symbol</option>                    <option value="lineAndSymbol">Line and Symbol</option>                    </select>                    </div>                    </div>                    <br>                    <div class="row" id="iconSizeRow">                    <div class="col-sm-5">Icon size:</div>                    <div class="col-sm-7">                    <select id="iconSize">                    <option value="small">Small</option>                    <option value="medium">Medium</option>                    <option value="large">Large</option>                    </select>                    </div>                    </div>                    <br>                    <div class="modal-footer">                    <button id="curveAttributeDlg_ok" type="button" class="btn btn-default"  data-dismiss="modal">Ok</button>                    </div>                    </div>                    </div>                    </div>                    </div>                    ')),t.init(),t.defaultIconSize=new Misc.Size(i.getLegendIconSize()),e=!0),t.curve=i,t.curveAttributeDlg(),"line"==$("#curveAttribute").val()||"symbol"==$("#curveAttribute").val()||"lineAndSymbol"==$("#curveAttribute").val()?$("#iconSizeRow").hide():$("#iconSizeRow").show()},this.init=function(){var t=this;$("#curveAttribute").change(function(){Utility.setLegendAttribute(t.curve,$(this).val(),t.defaultIconSize),"line"==$(this).val()?$("#iconSizeRow").hide():"symbol"==$(this).val()?$("#iconSizeRow").hide():"lineAndSymbol"==$(this).val()?$("#iconSizeRow").hide():(i($("#iconSize").val()),$("#iconSizeRow").show())}),$("#iconSize").change(function(){i($(this).val())})},this.curveAttributeDlg=function(){t.curve.testLegendAttribute(Static.LegendShowLine)&&t.curve.testLegendAttribute(Static.LegendShowSymbol)?$("#curveAttribute").val("lineAndSymbol"):t.curve.testLegendAttribute(Static.LegendShowSymbol)?$("#curveAttribute").val("symbol"):t.curve.testLegendAttribute(Static.LegendShowLine)?$("#curveAttribute").val("line"):$("#curveAttribute").val("default"),$("#curveLegendAttributeModal").modal({backdrop:"static"}),t.curve.getLegendIconSize().width==t.defaultIconSize.width-4?$("#iconSize").val("small"):t.curve.getLegendIconSize().width==t.defaultIconSize.width?$("#iconSize").val("medium"):t.curve.getLegendIconSize().width==t.defaultIconSize.width+4&&$("#iconSize").val("large")}}}define("curveLegendAttributeDlg",function(){});class MSettings{constructor(){Static.silentIgnore=0,Static.warnIgnore=1,Static.warn=2,Static.errorResponse=Static.warn,Static.errorResponseChanged=!1;var t=["Arial,Arial,Helvetica,sans-serif","Arial Black,Arial Black,Gadget,sans-serif","Comic Sans MS,Comic Sans MS,cursive","Courier New,Courier New,Courier,monospace","Georgia,Georgia,serif","Impact,Charcoal,sans-serif","Lucida Console,Monaco,monospace","Lucida Sans Unicode,Lucida Grande,sans-serif","Palatino Linotype,Book Antiqua,Palatino,serif","Tahoma,Geneva,sans-serif","Times New Roman,Times,serif","Trebuchet MS,Helvetica,sans-serif","Verdana,Geneva,sans-serif","Gill Sans,Geneva,sans-serif"],e=null,i=new MPointEntryDlg;this.shadeWatchArea=!0;var n=$('<div class="modal fade" id="myModal" role="dialog">                <div class="modal-dialog">                                <div class="modal-content">                <div class="modal-header">                <button type="button" class="close" data-dismiss="modal">&times;</button>                <h4 class="modal-title">Plot Settings</h4>                </div>                <div class="modal-body">                <div class="panel-group" id="accordion">                                <div class="panel panel-default">                <div class="panel-heading">                <h4 class="panel-title">                <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">General Settings</a>                </h4>                </div>                <div id="collapse1" class="panel-collapse collapse in">                <div class="panel-body">                                <ul class="nav nav-tabs">                <li class="active"><a data-toggle="tab" href="#plotTitle">Title</a></li>                <li><a data-toggle="tab" href="#plotFooter">Footer</a></li>                <li><a data-toggle="tab" href="#plotBackground">Background</a></li>                <li><a data-toggle="tab" href="#plotLegend">Legend</a></li>                </ul>                <div class="tab-content">                <div id="plotTitle" class="tab-pane fade in active">                <div class="row">                <div class="col-sm-3">Plot Title:</div>                <input id="title" type="text" class="col-sm-9" value="Title"/>                </div>                                                \x3c!--font start--\x3e                <div class="row">                <div class="col-sm-1">Font:</div>                <div class="col-sm-4">                <select id="fontSelector">                <option value="Arial">Arial</option>                <option value="ArialBlack">Arial Black</option>                <option value="ComicSansMS">Comic Sans MS</option>                <option value="CourierNew">Courier New</option>                <option value="Georgia">Georgia</option>                <option value="Impact">Impact</option>                <option value="LucidaConsole">Lucida Console</option>                <option value="LucidaSansUnicode">Lucida Sans Unicode</option>                <option value="PalatinoLinotype">Palatino Linotype</option>                <option value="Tahoma">Tahoma</option>                <option value="TimesNewRoman">Times New Roman</option>                <option value="TrebuchetMS">Trebuchet MS</option>                <option value="Verdana">Verdana</option>                <option value="GillSans">Gill Sans</option>                </select>                </div>                <div class="col-sm-1">Color:</div>                <div class="col-sm-2">                <input type="color" id="colorTitle">                </div>                <div class="col-sm-2">Font size:</div>                <div class="col-sm-1">                <select id="pointSelector">                <option value="6">6</option>                <option value="7">7</option>                <option value="8">8</option>                <option value="9">9</option>                <option value="10">10</option>                <option value="11">11</option>                <option value="12">12</option>                <option value="13">13</option>                <option value="14">14</option>                <option value="15">15</option>                <option value="16">16</option>                <option value="17">17</option>                <option value="18">18</option>                <option value="19">19</option>                <option value="20">20</option>                <option value="21">21</option>                <option value="22">22</option>                <option value="23">23</option>                <option value="24">24</option>                <option value="25">25</option>                <option value="26">26</option>                <option value="27">27</option>                <option value="28">28</option>                <option value="29">29</option>                <option value="30">30</option>                <option value="31">31</option>                <option value="32">32</option>                </select>                </div>                </div>                <div class="row">                <div class="col-sm-7">                <label class="noSelect"><input id="bold_title" type="checkbox" checked name="bold">Bold</label><span> </span>                </div>                <div class="col-sm-4">                </div>                </div>                \x3c!--font end--\x3e                                                </div>                <div id="plotFooter" class="tab-pane fade">                <div class="row">                <div class="col-sm-3">Plot Footer:</div>                <input id="footer" type="text" class="col-sm-9" value="Footer"/>                </div>                <div class="row">                <div class="col-sm-1">Font:</div>                <div class="col-sm-4">                <select id="fontSelector_footer">                <option value="Arial">Arial</option>                <option value="ArialBlack">Arial Black</option>                <option value="ComicSansMS">Comic Sans MS</option>                <option value="CourierNew">Courier New</option>                <option value="Georgia">Georgia</option>                <option value="Impact">Impact</option>                <option value="LucidaConsole">Lucida Console</option>                <option value="LucidaSansUnicode">Lucida Sans Unicode</option>                <option value="PalatinoLinotype">Palatino Linotype</option>                <option value="Tahoma">Tahoma</option>                <option value="TimesNewRoman">Times New Roman</option>                <option value="TrebuchetMS">Trebuchet MS</option>                <option value="Verdana">Verdana</option>                <option value="GillSans">Gill Sans</option>                </select>                </div>                <div class="col-sm-1">Color:</div>                <div class="col-sm-2">                <input type="color" id="colorSelector_footer">                </div>                <div class="col-sm-2">Font size:</div>                <div class="col-sm-1">                <select id="pointSelector_footer">                <option value="6">6</option>                <option value="7">7</option>                <option value="8">8</option>                <option value="9">9</option>                <option value="10">10</option>                <option value="11">11</option>                <option value="12">12</option>                <option value="13">13</option>                <option value="14">14</option>                <option value="15">15</option>                <option value="16">16</option>                <option value="17">17</option>                <option value="18">18</option>                <option value="19">19</option>                <option value="20">20</option>                <option value="21">21</option>                <option value="22">22</option>                <option value="23">23</option>                <option value="24">24</option>                <option value="25">25</option>                <option value="26">26</option>                <option value="27">27</option>                <option value="28">28</option>                <option value="29">29</option>                <option value="30">30</option>                <option value="31">31</option>                <option value="32">32</option>                </select>                </div>                </div>                <div class="row">                <div class="col-sm-7">                <label class="noSelect"><input id="bold_footer" type="checkbox" checked name="bold">Bold</label><span> </span>                </div>                <div class="col-sm-4">                \x3c!--div class="col-sm-8">Font Size:</div>                <select id="pointSelector_footer">                <option value="6">6</option>                <option value="7">7</option>                <option value="8">8</option>                <option value="9">9</option>                <option value="10">10</option>                <option value="11">11</option>                <option value="12">12</option>                <option value="13">13</option>                <option value="14">14</option>                <option value="15">15</option>                <option value="16">16</option>                <option value="17">17</option>                <option value="18">18</option>                <option value="19">19</option>                <option value="20">20</option>                <option value="21">21</option>                <option value="22">22</option>                <option value="23">23</option>                <option value="24">24</option>                <option value="25">25</option>                <option value="26">26</option>                <option value="27">27</option>                <option value="28">28</option>                <option value="29">29</option>                <option value="30">30</option>                <option value="31">31</option>                <option value="32">32</option>                </select--\x3e                </div>                </div>                </div>                <div id="plotBackground" class="tab-pane fade">                <div class="row">                <br>                <div class="col-sm-4">Background color:</div>                <div class="col-sm-2">                <input type="color" id= "colorSelector_background">                </div>                </div>                </div>                                <div id="plotLegend" class="tab-pane fade">                <div class="row">                <br>                <div class="col-sm-3">Background:</div>                <div class="col-sm-2">                <input type="color" id= "colorSelector_legend" value="#ffffff">                </div>                </div>                <div class="row">                <div class="col-sm-3">Show line:</div>                <div class="col-sm-2">                <input type="checkbox" id= "showline">                </div>                </div>                <div class="row">                <div class="col-sm-3">Show symbol:</div>                <div class="col-sm-2">                <input type="checkbox" id= "showsymbol">                </div>                </div>                </div>                                </div>                </div>                </div>                </div>                                                <div class="panel panel-default">                <div class="panel-heading">                <h4 class="panel-title">                <a data-toggle="collapse" data-parent="#accordion" href="#collapse2">Scale Settings</a>                </h4>                </div>                <div id="collapse2" class="panel-collapse collapse">                <div class="panel-body">                <ul class="nav nav-tabs">                <li class="active"><a data-toggle="tab" href="#title_scale">Title</a></li>                <li><a data-toggle="tab" href="#type">Type</a></li>                <li><a data-toggle="tab" href="#user">Limits</a></li>                <li><a data-toggle="tab" href="#exponent">Exp notation</a></li>                <li><a data-toggle="tab" href="#margins">Margins</a></li>                <li><a data-toggle="tab" href="#components">Components</a></li>                </ul>                <div class="tab-content">                                <div id="title_scale" class="tab-pane fade in active">                <div class="row">                <div class="col-sm-2">Bottom:</div>                <input id="bottomScale_title" type="text" class="col-sm-3" value=""/>                <div class="col-sm-2">Top:</div>                <input id="topScale_title" type="text" class="col-sm-3" value=""/>                </div>                <div class="row">                <div class="col-sm-2">Left:</div>                <input id="leftScale_title" type="text" class="col-sm-3" value=""/>                <div class="col-sm-2">Right:</div>                <input id="rightScale_title" type="text" class="col-sm-3" value=""/>                </div>                \x3c!--font start--\x3e                <div class="row">                <div class="col-sm-1">Font:</div>                <div class="col-sm-4">                <select id="axisTitleFontSelector">                <option value="Arial">Arial</option>                <option value="ArialBlack">Arial Black</option>                <option value="ComicSansMS">Comic Sans MS</option>                <option value="CourierNew">Courier New</option>                <option value="Georgia">Georgia</option>                <option value="Impact">Impact</option>                <option value="LucidaConsole">Lucida Console</option>                <option value="LucidaSansUnicode">Lucida Sans Unicode</option>                <option value="PalatinoLinotype">Palatino Linotype</option>                <option value="Tahoma">Tahoma</option>                <option value="TimesNewRoman">Times New Roman</option>                <option value="TrebuchetMS">Trebuchet MS</option>                <option value="Verdana">Verdana</option>                <option value="GillSans">Gill Sans</option>                </select>                </div>                <div class="col-sm-1">Color:</div>                <div class="col-sm-2">                <input type="color" id="axisColorTitle">                </div>                <div class="col-sm-2">Font size:</div>                <div class="col-sm-1">                <select id="axisTitlePointSelector">                <option value="6">6</option>                <option value="7">7</option>                <option value="8">8</option>                <option value="9">9</option>                <option value="10">10</option>                <option value="11">11</option>                <option value="12">12</option>                <option value="13">13</option>                <option value="14">14</option>                <option value="15">15</option>                <option value="16">16</option>                <option value="17">17</option>                <option value="18">18</option>                <option value="19">19</option>                <option value="20">20</option>                <option value="21">21</option>                <option value="22">22</option>                <option value="23">23</option>                <option value="24">24</option>                <option value="25">25</option>                <option value="26">26</option>                <option value="27">27</option>                <option value="28">28</option>                <option value="29">29</option>                <option value="30">30</option>                <option value="31">31</option>                <option value="32">32</option>                </select>                </div>                </div>                <div class="row">                <div class="col-sm-7">                <label class="noSelect"><input id="axis_bold_title" type="checkbox" name="bold">Bold</label><span> </span>                </div>                <div class="col-sm-4">                </div>                </div>                \x3c!--font end--\x3e                </div>                                                <div id="type" class="tab-pane fade">                \x3c!--div class="row"--\x3e                <div class="col-sm-2">Bottom:</div>                <div class="col-sm-20">                <form>                <label class="radio-inline">                <input id="bottom_linear" type="radio" checked name="optradio">Linear                </label>                <label class="radio-inline">                <input id="bottom_log" type="radio" name="optradio">Log                </label>                <label class="radio-inline">                Base                 <input id="bottom_logBase" type="number" min=2 max=10 value=10 readonly=true>                <span> </span>                Decimal                 <input id="bottom_decimalPlaces" type="number" min=0 max=10 value=3>                </label>                </form>                \x3c!--/div--\x3e                </div>                \x3c!--div class="row"--\x3e                <div class="col-sm-2">Top:</div>                <div class="col-sm-20">                <form>                <label class="radio-inline">                <input id="top_linear" type="radio" checked name="optradio">Linear                </label>                <label class="radio-inline">                <input id="top_log" type="radio" name="optradio">Log                </label>                <label class="radio-inline">                Base                 <input id="top_logBase" type="number" min=2 max=10 value=10 readonly=true>                <span> </span>                Decimal                 <input id="top_decimalPlaces" type="number" min=0 max=10 value=3>                </label>                </form>                \x3c!--/div--\x3e                </div>                \x3c!--div class="row"--\x3e                <div class="col-sm-2">Left:</div>                <div class="col-sm-20">                <form>                <label class="radio-inline">                <input id="left_linear" type="radio" checked name="optradio">Linear                </label>                <label class="radio-inline">                <input id="left_log" type="radio" name="optradio">Log                </label>                <label class="radio-inline">                Base                 <input id="left_logBase" type="number" min=2 max=10 value=10 readonly=true>                <span> </span>                Decimal                 <input id="left_decimalPlaces" type="number" min=0 max=10 value=3>                </label>                </form>                \x3c!--/div--\x3e                </div>                \x3c!--div class="row"--\x3e                <div class="col-sm-2">Right:</div>                <div class="col-sm-20">                <form>                <label class="radio-inline">                <input id="right_linear" type="radio" checked name="optradio">Linear                </label>                <label class="radio-inline">                <input id="right_log" type="radio" name="optradio">Log                </label>                <label class="radio-inline">                Base                 <input id="right_logBase" type="number" min=2 max=10 value=10 readonly=true>                <span> </span>                Decimal                 <input id="right_decimalPlaces" type="number" min=0 max=10 value=3>                </label>                </form>                </div>                \x3c!--/div--\x3e                </div>                                <div id="exponent" class="tab-pane fade">                <div class="row">                <br>                <div class="col-sm-8">Use exponent notation for values less than:</div>                <input id="exponent_lower" type="number" max=0 value=-10000>                <br>                <div class="col-sm-8">Use exponent notation for values greater than:</div>                <input id="exponent_upper" type="number" min=0 value=10000>                </div>                </div>                                <div id="margins" class="tab-pane fade">                <div class="row">                <div class="col-sm-4">Left axis:</div>                <input id="margin_left" type="number" min= 0.0 value=0.0>                <br>                <div class="col-sm-4">Right axis:</div>                <input id="margin_right" type="number" min= 0.0 value=0.0>                <br>                <div class="col-sm-4">Bottom axis:</div>                <input id="margin_bottom" type="number" min= 0.0 value=0.0>                <br>                <div class="col-sm-4">Top:</div>                <input id="margin_top" type="number" min= 0.0 value=0.0>                </div>                </div>                                <div id="components" class="tab-pane fade">                <div class="row">                <br>                <div class="col-sm-4">                Show backbone: <input type="checkbox" checked id= "show_backbone"></div>                <div class="col-sm-4">                Show labels: <input type="checkbox" checked id= "show_labels"></div>                <div class="col-sm-4">                Show ticks: <input type="checkbox" checked id= "show_ticks"></div>                <br>                <div id="tickLengthRow">                <div class="col-sm-4">Tick length:                 <select id= "tick_length">                <option value="small">Small</option>                <option value="medium" selected>Medium</option>                <option value="large">Large</option>                </select></div>                </div>                </div>                </div>                                <div id="user" class="tab-pane fade">                <div class="row">                <div class="col-sm-4">Enable user scale:</div>                <input id="enableUserScale" type="checkbox">                </div>                <div class="row">                <div class="col-sm-2">Bottom:</div>                <div class="col-sm-1">min:</div>                <input id="bottom_min" type="text" readonly value=0> max:                <input id="bottom_max" type="text" readonly value=1000>                </div>                <div class="row">                <div class="col-sm-2">Left:</div>                <div class="col-sm-1">min:</div>                <input id="left_min" type="text" readonly value=0> max:                <input id="left_max" type="text" readonly value=1000>                </div>                <div class="row">                <div class="col-sm-2">Top:</div>                <div class="col-sm-1">min:</div>                <input id="top_min" type="text" readonly value=0> max:                <input id="top_max" type="text" readonly value=1000>                </div>                <div class="row">                <div class="col-sm-2">Right:</div>                <div class="col-sm-1">min:</div>                <input id="right_min" type="text" readonly value=0> max:                <input id="right_max" type="text" readonly value=1000>                </div>                </div>                                </div>                </div>                </div>                </div>                                                <div class="panel panel-default">                <div class="panel-heading">                <h4 class="panel-title">                <a data-toggle="collapse" data-parent="#accordion" href="#collapse4">Point Operation Settings</a>                </h4>                </div>                <div id="collapse4" class="panel-collapse collapse">                <div class="panel-body">                <div class="col-sm-5">When a point is selected</div>                <select id="point_selection">                <option value="display_data">display data</option>                <option value="remove_it">remove it</option>                <option value="modify_it">modify it</option>                </select>\t\t\t\t<br>\t\t\t\t<br>\t\t\t\t<div class="col-sm-5">Add/Remove point:</div>                <input id="addRemovePoint" type="checkbox" checked>                </div>                </div>                </div>                                                <div class="panel panel-default">                <div class="panel-heading">                <h4 class="panel-title">                <a data-toggle="collapse" data-parent="#accordion" href="#collapse14">Error Settings</a>                </h4>                </div>                <div id="collapse14" class="panel-collapse collapse">                <div class="panel-body">                <div class="col-sm-5">When an error occurs,</div>                <select id="errorResponse">                <option value="stopWarn">stop and warn</option>                <option value="silentIgnore">silently ignore</option>                <option value="warnIgnore">allow for ignore</option>                </select>                <br>                <br>                </div>                </div>                </div>                                                <div class="panel panel-default">                <div class="panel-heading">                <h4 class="panel-title">                <a data-toggle="collapse" data-parent="#accordion" href="#collapse7">Zoomer Settings</a>                </h4>                </div>                <div id="collapse7" class="panel-collapse collapse">                <div class="panel-body">\t\t\t\t<div id="zoomAxesContainer">                Zoom according to                 <select id="zoomAxisHorizontal">                <option value="bottomAxis">Bottom axis</option>                <option value="topAxis">Top axis</option>                </select> and                 <select id="zoomAxisVertical">                <option value="leftAxis">Left axis</option>                <option value="rightAxis">Right axis</option>                </select>\t\t\t\t</div>\t\t\t\t<div class="row">                <div class="col-sm-8">Zoom according to the current curve axes</div>                <input id="zoomAccordingToCurve" type="checkbox" checked class="col-sm-1"/>                </div>                </div>                </div>                </div>                                                <div class="panel panel-default">                <div class="panel-heading">                <h4 class="panel-title">                <a data-toggle="collapse" data-parent="#accordion" href="#collapse5">Magnifier Settings</a>                </h4>                </div>                <div id="collapse5" class="panel-collapse collapse">                <div class="panel-body">                <div>Enabled axes.</div>                <br>                <div class="col-sm-1">Left:</div>                <input id= "leftAxis" type="checkbox" checked class="col-sm-1"/>                <div class="col-sm-1">Right:</div>                <input id= "rightAxis" type="checkbox" class="col-sm-1"/>                <div class="col-sm-1">Bottom:</div>                <input id= "bottomAxis" type="checkbox" checked class="col-sm-1"/>                <div class="col-sm-1">Top:</div>                <input id= "topAxis" type="checkbox" class="col-sm-1"/>                </div>                </div>                </div>                                                <div class="panel panel-default">                <div class="panel-heading">                <h4 class="panel-title">                <a data-toggle="collapse" data-parent="#accordion" href="#collapse9">Watch Settings</a>                </h4>                </div>                <div id="collapse9" class="panel-collapse collapse">                <div class="panel-body">                <div>Calculation accuracy.</div>                <br>                <div class="col-sm-1">Low:</div>                <input id= "lowAccuracy" type="radio" name="accuracy" value= "lowAccuracy" class="col-sm-1"/>                <div class="col-sm-2">Moderate:</div>                <input id= "moderateAccuracy" type="radio" name="accuracy" value= "moderateAccuracy" checked class="col-sm-1"/>                <div class="col-sm-1">High:</div>                <input id= "highAccuracy" type="radio" name="accuracy" value= "highAccuracy" class="col-sm-1"/>                <br>                <br>                <div>Shading.</div>                <br>                <div class="col-sm-4">Shade Watch Area:</div>                <input id= "watchArea" type="checkbox" checked class="col-sm-1"/>                <div id= "shadeColorDiv">                <div class="col-sm-3">Shade color:</div>                <div class="col-sm-2">                <input type="color" id="shadeColor" value="#a9a9a9">                </div>                </div>                </div>                </div>                </div>                                                <div class="panel panel-default">                <div class="panel-heading">                <h4 class="panel-title">                <a data-toggle="collapse" data-parent="#accordion" href="#collapse3">Grid Settings</a>                </h4>                </div>                <div id="collapse3" class="panel-collapse collapse">                <div class="panel-body">                <ul class="nav nav-tabs">                <li class="active"><a data-toggle="tab" href="#minor">Minor lines</a></li>                <li><a data-toggle="tab" href="#major">Major lines</a></li>                <li><a data-toggle="tab" href="#gridAxes">Grid axes</a></li>                </ul>                <div class="tab-content">                <div id="minor" class="tab-pane fade in active">                <div class="row">                <div class="col-sm-1">Show:</div>                <input id="minor_gridLines" type="checkbox" checked class="col-sm-1"/>                </div>                <div class="row">                <div class="col-sm-8">Maximum number of minor divisions per major division:</div>                <input id="minor_divisions" type="number" class="col-sm-2" min=2 max=20 value="5"/>                </div>                <div class="row">                <div class="col-sm-2">Color:</div>                <input id="minor_line_color" type="color" class="col-sm-2"/>                </div>                </div>                <div id="gridAxes" class="tab-pane fade"><br>\t\t\t\t<div id="gridAxesContainer">                Draw gridlines according to the                 <select id="gridAxisHorizontal">                <option value="bottomAxis">Bottom axis</option>                <option value="topAxis">Top axis</option>                </select> and                 <select id="gridAxisVertical">                <option value="leftAxis">Left axis</option>                <option value="rightAxis">Right axis</option>                </select>\t\t\t\t</div>\t\t\t\t<div class="row">                <div class="col-sm-8">Draw gridlines according to the current curve axes</div>                <input id="gridlinesAccordingToCurve" type="checkbox" checked class="col-sm-1"/>                </div>                </div>                <div id="major" class="tab-pane fade">                <div class="row">                <div class="col-sm-1">Show:</div>                <input id="major_gridLines" type="checkbox" checked class="col-sm-1"/>                </div>                <div class="row">                <div class="col-sm-6">Maximum number of major divisions:</div>                <div class="col-sm-2">                <input input id="major_divisions" type="number" min=1 max=40 value="8">                </div>                </div>                <div class="row">                </div>                <div class="row">                <div class="col-sm-1">Color:</div>                <div class="col-sm-10">                <input id="major_line_color" type="color">                </div>                </div>                </div>                </div>                </div>                </div>                </div>                </div>                </div>                <div class="modal-footer">                <button id="okButton" type="button" class="btn btn-default" data-dismiss="modal">Ok</button>                </div                </div>                </div>                </div>');function o(t){$("#bottom_min").attr("readonly",t),$("#bottom_max").attr("readonly",t),$("#left_min").attr("readonly",t),$("#left_max").attr("readonly",t),$("#top_min").attr("readonly",t),$("#top_max").attr("readonly",t),$("#right_min").attr("readonly",t),$("#right_max").attr("readonly",t)}this.setFontSize=function(t){n.css("font-size",t)},this.setPlot=function(s){var a=this;if(e=s){$("body").append(n);var r=e.titleFont(),l=e.axisTitleFont(xBottom),c=null;function u(){(c=e.axisLabelFont(xBottom)).th=.86*l.th,e.setAxisLabelFont(xBottom,c),e.setAxisLabelFont(xTop,c),e.setAxisLabelFont(yLeft,c),e.setAxisLabelFont(yRight,c),e.setAxisTitleFont(xBottom,l),e.setAxisTitleFont(xTop,l),e.setAxisTitleFont(yLeft,l),e.setAxisTitleFont(yRight,l)}$("#axisHorizontal").change(function(){"bottomAxis"==$(this).val()?e.zoomer.setAxis(xBottom,e.zoomer.yAxis()):e.zoomer.setAxis(xTop,e.zoomer.yAxis())}),$("#errorResponse").change(function(){"silentIgnore"==$(this).val()?Static.errorResponse=Static.silentIgnore:"warnIgnore"==$(this).val()?Static.errorResponse=Static.warnIgnore:Static.errorResponse=Static.warn}),$("#addRemovePoint").change(function(){e.addRemovePoint.activate(this.checked),this.checked?e.zm.setTrackerMode(Static.AlwaysOff):e.zm.setTrackerMode(Static.ActiveOnly)}),$("#point_selection").change(function(){"remove_it"==$(this).val()?e.curveClosestPoint.setCb(function(t,e){t.removePoint(e)}):"modify_it"==$(this).val()?e.curveClosestPoint.setCb(function(t,n){i.pointEntryCb("Modify/Remove Point",e,t.title(),n)}):e.curveClosestPoint.setCb(null)}),$("input[name*='accuracy']").change(function(){for(var t=document.getElementsByName("accuracy"),e=0,i=t.length;e<i;e++)if(t[e].checked){"lowAccuracy"==t[e].value?Static.accuracyMaxSteps=.5*Static.accuracyBase*.5:"moderateAccuracy"==t[e].value?Static.accuracyMaxSteps=.5*Static.accuracyBase:Static.accuracyMaxSteps=Static.accuracyBase;break}}),$("#axisVertical").change(function(){"leftAxis"==$(this).val()?e.zoomer.setAxis(e.zoomer.xAxis(),yLeft):e.zoomer.setAxis(e.zoomer.xAxis(),yRight)}),$("#watchArea").change(function(){a.shadeWatchArea=this.checked,$("#shadeColorDiv").toggle(this.checked),Static.trigger("shadeWatchArea",a.shadeWatchArea)}),$("#shadeColor").change(function(){Static.trigger("curveShapeColorChanged",$("#shadeColor")[0].value)}),$("#leftAxis").change(function(){e.magnifier.setAxisEnabled(yLeft,this.checked)}),$("#rightAxis").change(function(){e.magnifier.setAxisEnabled(yRight,this.checked)}),$("#bottomAxis").change(function(){e.magnifier.setAxisEnabled(xBottom,this.checked)}),$("#topAxis").change(function(){e.magnifier.setAxisEnabled(xTop,this.checked)}),$("#minor_divisions").change(function(){var t=Math.min(Math.max(2,$(this).val()),20);$("#minor_divisions").val(t),e.setAxisMaxMinor(yLeft,t),e.setAxisMaxMinor(yRight,t),e.setAxisMaxMinor(xTop,t),e.setAxisMaxMinor(xBottom,t)}),$("#major_divisions").change(function(){var t=Math.min(Math.max(1,$(this).val()),40);$("#major_divisions").val(t),e.setAxisMaxMajor(yLeft,$(this).val()),e.setAxisMaxMajor(yRight,$(this).val()),e.setAxisMaxMajor(xTop,$(this).val()),e.setAxisMaxMajor(xBottom,$(this).val())}),$("#minor_line_color").change(function(){e.itemList(Static.Rtti_PlotGrid)[0].setMinorPen($("#minor_line_color")[0].value)}),$("#major_line_color").change(function(){e.itemList(Static.Rtti_PlotGrid)[0].setMajorPen($("#major_line_color")[0].value)}),$("#major_gridLines").click(function(){var t=e.itemList(Static.Rtti_PlotGrid)[0];Utility.majorGridLines(t,$(this)[0].checked),$("#minor_gridLines").prop("checked",$(this)[0].checked)}),$("#minor_gridLines").click(function(){var t=e.itemList(Static.Rtti_PlotGrid)[0];Utility.minorGridLines(t,$(this)[0].checked)}),$("#gridAxisVertical").change(function(){var t=e.itemList(Static.Rtti_PlotGrid)[0];"leftAxis"==$(this).val()?t.setYAxis(yLeft):t.setYAxis(yRight)}),$("#gridAxisHorizontal").change(function(){var t=e.itemList(Static.Rtti_PlotGrid)[0];"bottomAxis"==$(this).val()?t.setXAxis(xBottom):t.setXAxis(xTop)}),$("#gridAxesContainer").hide(),$("#gridlinesAccordingToCurve").click(function(){if($(this)[0].checked)$("#gridAxesContainer").hide();else{$("#gridAxesContainer").show();var t=e.itemList(Static.Rtti_PlotGrid)[0];"bottomAxis"==$("#gridAxisHorizontal").val()?t.setXAxis(xBottom):t.setXAxis(xTop),"leftAxis"==$("#gridAxisVertical").val()?t.setYAxis(yLeft):t.setYAxis(yRight)}Static.trigger("gridlinesAccordingToCurve",$(this)[0].checked)}),$("#zoomAxisVertical").change(function(){var t=e.zm;"leftAxis"==$(this).val()?t.setAxis(t.xAxis(),yLeft):t.setAxis(t.xAxis(),yRight)}),$("#zoomAxisHorizontal").change(function(){var t=e.zm;"bottomAxis"==$(this).val()?t.setAxis(xBottom,t.yAxis()):t.setAxis(xTop,t.yAxis())}),$("#zoomAxesContainer").hide(),$("#zoomAccordingToCurve").click(function(){if($(this)[0].checked)$("#zoomAxesContainer").hide();else{$("#zoomAxesContainer").show();var t=e.zm;"bottomAxis"==$("#zoomAxisHorizontal").val()?t.setAxis(xBottom,t.yAxis()):t.setAxis(xTop,t.yAxis()),"leftAxis"==$("#zoomAxisVertical").val()?t.setAxis(t.xAxis(),yLeft):t.setAxis(t.xAxis(),yRight)}Static.trigger("zoomAccordingToCurve",$(this)[0].checked)}),$("#margin_left").change(function(){var t=0,i=e.axisScaleEngine(yLeft);if(i instanceof LogScaleEngine){e.axisScaleDiv(yLeft);t=Static.mLog(i.base(),$(this).val())}else{e.axisInterval(yLeft);t=$(this).val()}e.axisScaleEngine(yLeft).setMargins(t,t),e.autoRefresh()}),$("#margin_right").change(function(){var t=0,i=e.axisScaleEngine(yRight);if(i instanceof LogScaleEngine){e.axisScaleDiv(yRight);t=Static.mLog(i.base(),$(this).val())}else{e.axisInterval(yRight);t=$(this).val()}e.axisScaleEngine(yRight).setMargins(t,t),e.autoRefresh()}),$("#margin_bottom").change(function(){var t=0,i=e.axisScaleEngine(xBottom);if(i instanceof LogScaleEngine){e.axisScaleDiv(xBottom);t=Static.mLog(i.base(),$(this).val())}else{e.axisInterval(xBottom);t=$(this).val()}e.axisScaleEngine(xBottom).setMargins(t,t),e.autoRefresh()}),$("#margin_top").change(function(){var t=0,i=e.axisScaleEngine(xTop);if(i instanceof LogScaleEngine){e.axisScaleDiv(xTop);t=Static.mLog(i.base(),$(this).val())}else{e.axisInterval(xTop);t=$(this).val()}e.axisScaleEngine(xTop).setMargins(t,t),e.autoRefresh()}),$("#exponent_lower").change(function(){e.setNonExponentNotationLimits($(this).val(),$("#exponent_upper").val())}),$("#exponent_upper").change(function(){e.setNonExponentNotationLimits($("#exponent_lower").val(),$(this).val())}),$("#axis_bold_title").click(function(){$(this)[0].checked?l.weight="bold":l.weight="normal",u()}),$("#axisColorTitle").change(function(){l.fontColor=$("#axisColorTitle")[0].value,u()}),$("#axisTitleFontSelector").change(function(){l.name=t[this.selectedIndex],u()}),$("#axisTitlePointSelector").change(function(){l.th=parseInt($(this[this.selectedIndex]).val()),u()}),$("#bold_title").click(function(){$(this)[0].checked?r.weight="bold":r.weight="normal",e.setTitleFont(r)}),$("#bold_footer").click(function(){$(this)[0].checked?footerFont.weight="bold":footerFont.weight="normal",e.setFooterFont(footerFont)}),$("#colorTitle").change(function(){r.fontColor=$("#colorTitle")[0].value,e.setTitleFont(r)}),$("#fontSelector").change(function(){r.name=t[this.selectedIndex],e.setTitleFont(r)}),$("#pointSelector").change(function(){r.th=$(this[this.selectedIndex]).val(),e.setTitleFont(r)}),$("#colorSelector_footer").change(function(){var t=e.footerFont();t.fontColor=$("#colorSelector_footer")[0].value,e.setFooterFont(t)}),$("#colorSelector_background").change(function(){e.setPlotBackground($("#colorSelector_background")[0].value)}),$("#colorSelector_legend").change(function(){var t=e.getLayout().getLegendDiv().children()[0];$(t).css("background-color",$("#colorSelector_legend")[0].value)}),$("#fontSelector_footer").change(function(){var i=e.footerFont();i.name=t[this.selectedIndex],e.setFooterFont(i)}),$("#pointSelector_footer").change(function(){var t=$(this[this.selectedIndex]).val(),i=e.footerFont();i.th=t,e.setFooterFont(i)}),$("#footer").change(function(){e.setFooter($(this).val())}),$("#title").change(function(){e.setTitle($(this).val())}),$("#bottomScale_title").change(function(){e.setAxisTitle(xBottom,$(this).val())}),$("#topScale_title").change(function(){e.setAxisTitle(xTop,$(this).val())}),$("#leftScale_title").change(function(){e.setAxisTitle(yLeft,$(this).val())}),$("#rightScale_title").change(function(){e.setAxisTitle(yRight,$(this).val())}),$("#show_backbone").change(function(){Utility.enableComponent(e,Enum.ScaleComponent.Backbone,this.checked)}),$("#show_ticks").change(function(){Utility.enableComponent(e,Enum.ScaleComponent.Ticks,this.checked),$("#tickLengthRow").toggle(this.checked)}),$("#tick_length").change(function(){Utility.setTickLength(e,$(this).val())}),$("#show_labels").change(function(){Utility.enableComponent(e,Enum.ScaleComponent.Labels,this.checked)}),$("#showline").change(function(){Static.showline=this.checked}),$("#showsymbol").change(function(){Static.showsymbol=this.checked}),$("#enableUserScale").change(function(){o(!this.checked)}),$("#okButton").click(function(){$("#enableUserScale")[0].checked&&(e.setAxisScale(xBottom,parseFloat($("#bottom_min").val()),parseFloat($("#bottom_max").val())),e.setAxisScale(yLeft,parseFloat($("#left_min").val()),parseFloat($("#left_max").val())),e.setAxisScale(xTop,parseFloat($("#top_min").val()),parseFloat($("#top_max").val())),e.setAxisScale(yRight,parseFloat($("#right_min").val()),parseFloat($("#right_max").val())))}),$("#bottom_log").change(function(){$("#bottom_logBase").attr("readonly",!1),e.setAxisScaleEngine(xBottom,new LogScaleEngine),$("#margin_bottom").val(0)}),$("#bottom_logBase").change(function(){e.axisScaleEngine(yLeft).setBase($(this).val()),e.autoRefresh()}),$("#bottom_linear").change(function(){$("#bottom_logBase").attr("readonly",!0),e.setAxisScaleEngine(xBottom,new LinearScaleEngine),$("#margin_bottom").val(0)}),$("#left_log").change(function(){$("#left_logBase").attr("readonly",!1),$("#margin_left").val(0),e.setAxisScaleEngine(yLeft,new LogScaleEngine)}),$("#left_logBase").change(function(){e.axisScaleEngine(yLeft).setBase($(this).val()),e.autoRefresh()}),$("#left_linear").change(function(){$("#left_logBase").attr("readonly",!0),e.setAxisScaleEngine(yLeft,new LinearScaleEngine),$("#margin_left").val(0)}),$("#top_log").change(function(){$("#top_logBase").attr("readonly",!1),e.setAxisScaleEngine(xTop,new LogScaleEngine),$("#margin_top").val(0)}),$("#top_logBase").change(function(){e.axisScaleEngine(yLeft).setBase($(this).val()),e.autoRefresh()}),$("#top_linear").change(function(){$("#top_logBase").attr("readonly",!0),e.setAxisScaleEngine(xTop,new LinearScaleEngine),$("#margin_top").val(0)}),$("#right_log").change(function(){$("#right_logBase").attr("readonly",!1),e.setAxisScaleEngine(yRight,new LogScaleEngine),$("#margin_right").val(0)}),$("#right_logBase").change(function(){e.axisScaleEngine(yLeft).setBase($(this).val()),e.autoRefresh()}),$("#right_linear").change(function(){$("#right_logBase").attr("readonly",!0),e.setAxisScaleEngine(yRight,new LinearScaleEngine),$("#margin_right").val(0)}),$("#bottom_decimalPlaces").change(function(){e.setAxisDecimalPlaces(xBottom,parseInt($(this).val()))}),$("#top_decimalPlaces").change(function(){e.setAxisDecimalPlaces(xTop,parseInt($(this).val()))}),$("#left_decimalPlaces").change(function(){e.setAxisDecimalPlaces(yLeft,parseInt($(this).val()))}),$("#right_decimalPlaces").change(function(){e.setAxisDecimalPlaces(yRight,parseInt($(this).val()))})}},this.plot=function(){return e},this.settingsDlg=function(){$("#myModal").modal({backdrop:"static"});var i=e.titleFont(),n=t.indexOf(i.name);-1==n&&(n=0),$("#fontSelector")[0].selectedIndex=n,$("#pointSelector").val(i.th),$("#colorTitle").val(i.fontColor),$("#title").val(e.title());var s=e.footerFont();-1==(n=t.indexOf(s.name))&&(n=0),$("#fontSelector_footer")[0].selectedIndex=n,$("#pointSelector_footer").val(s.th),$("#colorSelector_footer").val(s.fontColor),$("#footer").val(e.footer());var a=e.axisTitleFont(xBottom);-1==(n=t.indexOf(a.name))&&(n=0),$("#axisTitleFontSelector")[0].selectedIndex=n,$("#axisTitlePointSelector").val(a.th),$("#axisColorTitle").val(a.fontColor),$("#colorSelector_background").val(Static.RGB2HTML(e.plotBackground())),$("#bottomScale_title").val(e.axisTitle(xBottom)),$("#topScale_title").val(e.axisTitle(xTop)),$("#leftScale_title").val(e.axisTitle(yLeft)),$("#rightScale_title").val(e.axisTitle(yRight)),$("#footer").val(e.footer());var r=e.axisInterval(xBottom);$("#bottom_min").val(r.minValue()),$("#bottom_max").val(r.maxValue()),r=e.axisInterval(yLeft),$("#left_min").val(r.minValue()),$("#left_max").val(r.maxValue()),r=e.axisInterval(xTop),$("#top_min").val(r.minValue()),$("#top_max").val(r.maxValue()),r=e.axisInterval(yRight),$("#right_min").val(r.minValue()),$("#right_max").val(r.maxValue()),"[LogScaleEngine]"==e.axisScaleEngine(xBottom).toString()&&($("#bottom_log")[0].checked=!0),"[LogScaleEngine]"==e.axisScaleEngine(xTop).toString()&&($("#top_log")[0].checked=!0),"[LogScaleEngine]"==e.axisScaleEngine(yLeft).toString()&&($("#left_log")[0].checked=!0),"[LogScaleEngine]"==e.axisScaleEngine(yRight).toString()&&($("#right_log")[0].checked=!0),"[LinearScaleEngine]"==e.axisScaleEngine(xBottom).toString()&&($("#bottom_linear")[0].checked=!0),"[LinearScaleEngine]"==e.axisScaleEngine(xTop).toString()&&($("#top_linear")[0].checked=!0),"[LinearScaleEngine]"==e.axisScaleEngine(yLeft).toString()&&($("#left_linear")[0].checked=!0),"[LinearScaleEngine]"==e.axisScaleEngine(yRight).toString()&&($("#right_linear")[0].checked=!0);var l=e.axisAutoScale(xBottom);$("#enableUserScale")[0].checked=!l,o(l)}}}define("settings",function(){});class MCurveSettings{constructor(t){let e=null,i=null,n=null,o=null,s=null;function a(){let e=$("#curveSelect").children();for(let t=0;t<e.length;++t)$("#curveSelect")[0].removeChild(e[t]);let i=t.itemList(Static.Rtti_PlotCurve);for(let t=0;t<i.length;++t)if(i[t].isVisible()){let e=$("<option>"+i[t].title()+"</option>");e.attr("value",i[t].title()),$("#curveSelect").append(e)}return $("#sizeSymbol").val(10),i.length?i[0]:null}function r(t){t.brush().color==Static.NoBrush?$("#clearBrush").hide():$("#clearBrush").show()}function l(t){if(!t)return;$("#penColor").val(Static.colorNameToHex(t.pen().color)),$("#penWidth")[0].selectedIndex=t.pen().width-1,$("#penStyle")[0].selectedIndex=["solid","dot","dash","dashDot","dashDotDot"].indexOf(t.pen().style),$("#horizontalAxis")[0].selectedIndex=t.xAxis()-2,$("#verticalAxis")[0].selectedIndex=t.yAxis(),t.fitType?$("#fitInfo").show():$("#fitInfo").hide(),r(t);let e=t.symbol();if(e){let t=e.style();t==MRect&&$("#symbolType").val("MRect"),t==Cross&&$("#symbolType").val("Cross"),t==Diamond&&$("#symbolType").val("Diamond"),t==Ellipse&&$("#symbolType").val("Ellipse"),t==XCross&&$("#symbolType").val("XCross")}else $("#symbolType").val("None");"None"==$("#symbolType").val()?$("#symbolContainer").hide():($("#symbolContainer").show(),$("#penColorSymbol").val(e.pen().color),$("#penWidthSymbol").val(e.pen().width),$("#fillBrushSymbol").val(e.brush().color),$("#sizeSymbol").val(e.size().width))}$("body").append($('                \x3c!-- Modal --\x3e                <div class="modal fade" id="curveSettingsModal" role="dialog">                <div class="modal-dialog">                                \x3c!-- Modal content--\x3e                <div class="modal-content">                <div class="modal-header">                \x3c!--button type="button" class="close" data-dismiss="modal">&times;</button--\x3e                <h4 class="modal-title">Curve attributes</h4>                </div>                <div class="modal-body">                                                <div class="row">                <div class="col-sm-3">Curve name:</div>                <div class="col-sm-5"><select id="curveSelect" style="width:100%"></select></div>                <div class="col-sm-2"><button id="remove">Remove</button></div>                <div class="col-sm-2"><button id="rename">Rename</button></div>                </div>                                <br>                <div class="row">                <div class="col-sm-3">Pen color:<input id="penColor" type="color"/></div>                <div class="col-sm-4">Pen width:<select id="penWidth" style="width:50%"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option></select></div>                <div class="col-sm-5">Pen style:<select id="penStyle" style="width:60%"><option>solid</option><option>dot</option><option>dash</option><option>dashDot</option><option>dashDotDot</option></select></div>                </div>                                <br>                <div class="row">                <div class="col-sm-6">Horizontal axis:<select id="horizontalAxis" style="width:50%"><option value="2">Bottom</option><option value="3">Top</option></select></div>                <div class="col-sm-5">Vertical axis:<select id="verticalAxis" style="width:60%"><option value="0">Left</option><option value="1">Right</option></select></div>                </div>                                <br>                <div class="row">                <div class="col-sm-1"><button id="fit">Fit</button></div><div class="col-sm-3"><button id="legendAttribute">Legend attribute</button></div><div class="col-sm-3"><button id="curveStyle">Curve style</button></div><div class="col-sm-2"><button id="curveBrush"> Brush</button></div><div class="col-sm-3"><button id="clearBrush">No brush</button></div>\x3c!--div class="col-sm-2"><button id="curveAxis">Axis</button></div--\x3e                <div class="col-sm-3"><button id="fitInfo">Curve Fit Info...</button></div>                </div>                                <br>                <div class="row">                <div class="col-sm-2">Symbols</div>                <div class="col-sm-8"><select id="symbolType"><option value="None">None</option><option value="MRect">Rectangle</option><option value="Cross">Cross</option><option value="Diamond">Diamond</option><option value="Ellipse">Ellipse</option><option value="XCross">Diagonal cross</option></select></div>                </div>                                <br>                <div id="symbolContainer">                <div class="row">                <div class="col-sm-6">Symbol pen color:<input id="penColorSymbol" type="color"/></div>                <div class="col-sm-6">Symbol pen width:<select id="penWidthSymbol" style="width:50%"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option></select></div>                </div>                <br>                <div class="row">                <div class="col-sm-6">Symbol fill brush:<input id="fillBrushSymbol" type="color"/></div>                <div class="col-sm-6">Symbol size:<select id="sizeSymbol" style="width:50%"><option value="5">5x5</option><option value="6">6x6</option><option value="8">8x8</option><option value="10">10x10</option><option value="12">12x12</option><option value="15">15x15</option></select></div>                </div>                </div>                                                </div>                <div class="modal-footer">                <button id="cancelAxisDlg" type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>                <button type="button" class="btn btn-default" data-dismiss="modal">Ok</button>                </div>                </div>                                </div>                </div>                ')),$("#curveSelect").change(function(){l(t.findPlotCurve($("#curveSelect").val()))}),$("#remove").click(function(){if(t.findPlotCurve($("#curveSelect").val()).detach(),!t.hasPlotCurve())return void $("#cancelAxisDlg").click();let e=$("#curveSelect").children();$("#curveSelect")[0].removeChild(e[$("#curveSelect")[0].selectedIndex]),l(t.findPlotCurve($("#curveSelect").val()))}),$("#rename").click(function(){return Utility.curveRenameDlg($("#curveSelect").val(),t,function(){let t=$("#curveSelect")[0].selectedIndex;return a(),$("#curveSelect")[0].selectedIndex=t,!0}),!0}),$("#fit").click(function(){e(t.findPlotCurve($("#curveSelect").val()))}),$("#legendAttribute").click(function(){n(t.findPlotCurve($("#curveSelect").val()))}),$("#clearBrush").click(function(){Utility.removeCurveBrush(t.findPlotCurve($("#curveSelect").val())),r(t.findPlotCurve($("#curveSelect").val()))}),$("#curveBrush").click(function(){Utility.setCurveBrush(t.findPlotCurve($("#curveSelect").val()),r)}),$("#curveStyle").click(function(){o(t.findPlotCurve($("#curveSelect").val()))}),$("#curveAxis").click(function(){s(t.findPlotCurve($("#curveSelect").val()))}),$("#fitInfo").click(function(){let e=t.findPlotCurve($("#curveSelect").val()),n=i(e);n.length?Static.alert(n):Static.alert('No curve fitting equation found for "'+e.title()+'."')}),$("#penColor").change(function(){let e=t.findPlotCurve($("#curveSelect").val()),i=e.pen();i.color=$(this).val(),e.setPen(i)}),$("#penWidth").change(function(){let e=t.findPlotCurve($("#curveSelect").val()),i=e.pen();i.width=$(this).val(),e.setPen(i)}),$("#penStyle").change(function(){let e=t.findPlotCurve($("#curveSelect").val()),i=e.pen();i.style=$(this).val(),e.setPen(i)}),$("#horizontalAxis").change(function(){let e=t.findPlotCurve($("#curveSelect").val());e.setXAxis($(this).val()),Static.trigger("axisChanged",[$(this).val(),e])}),$("#verticalAxis").change(function(){let e=t.findPlotCurve($("#curveSelect").val());e.setYAxis($(this).val()),Static.trigger("axisChanged",[$(this).val(),e])}),$("#symbolType").change(function(){let e=t.findPlotCurve($("#curveSelect").val());"None"==$("#symbolType").val()?($("#symbolContainer").hide(),$("#penWidthSymbol").val(1),$("#penColorSymbol").val(Static.colorNameToHex("black")),$("#fillBrushSymbol").val(Static.colorNameToHex("transparent")),$("#sizeSymbol").val(10)):$("#symbolContainer").show(),function(t,e){if("None"==e)return void t.setSymbol(null);let i=-1;"MRect"==e&&(i=MRect);"Cross"==e&&(i=Cross);"Diamond"==e&&(i=Diamond);"Ellipse"==e&&(i=Ellipse);"XCross"==e&&(i=XCross);Utility.addSymbol(t,i)}(e,$(this).val())}),$("#penColorSymbol").change(function(){let e=t.findPlotCurve($("#curveSelect").val()),i=e.symbol();if(!i)return;let n=i.pen();n.color=$(this).val(),i.setPen(n),e.plot().autoRefresh(),e.plot().updateLegend(e)}),$("#penWidthSymbol").change(function(){!function(t,e){Utility.setSymbolPenWidth(t,e)}(t.findPlotCurve($("#curveSelect").val()),parseInt($(this).val()))}),$("#fillBrushSymbol").change(function(){let e=t.findPlotCurve($("#curveSelect").val()),i=e.symbol();if(!i)return;let n=i.brush();n.color=$(this).val(),i.setBrush(n),e.plot().autoRefresh(),e.plot().updateLegend(e)}),$("#sizeSymbol").change(function(){!function(t,e){Utility.setSymbolSize(t,e)}(t.findPlotCurve($("#curveSelect").val()),parseInt($(this).val()))}),this.init=function(){e=t.curveFitDlg.curveFitCb,i=t.curveFitDlg.curveFitInfoCb,n=t.curveAttributeDlg.curveAttributeCb,o=t.curveStyleDlg.curveStyleCb,s=t.axisDlg.axisCb},this.curveSettingsDlg=function(){t.itemList(Static.Rtti_PlotCurve).length?(l(a()),$("#curveSettingsModal").modal({backdrop:"static"})):Static.alert("No curves found","small")},this.init()}}define("curveSettings",function(){});class MFunctionDlg{constructor(){var t=$('<div class="modal fade" id="functionModal" role="dialog">    <div class="modal-dialog modal-md">      <div class="modal-content">        <div class="modal-header">          \x3c!--button type="button" class="close" data-dismiss="modal">&times;</button--\x3e          <h4 class="modal-title">Curve Function</h4>        </div>        <div class="modal-body">\t  <div class="row">          <div class="col-sm-2">Curve title:</div>          <div class="col-sm-4"><input id="fnDlg_title" style="width:100%" type="text" value="curve_1"/></div>          <div class="col-sm-2">Function:</div>          <div class="col-sm-4"><input id="fnDlg_function" style="width:100%" type="text" value="x^2"/></div>    </div>\t  <br>    <div id="limits" class="row">          \t<div class="col-sm-3">Lower limit:</div>            <div class="col-sm-3"><input id="fnDlg_lowerLimit" style="width:100%" type="text" value="-10.0"/></div>            <div class="col-sm-3">Upper limit:</div>            <div class="col-sm-3"><input id="fnDlg_upperLimit" style="width:100%" type="text" value="10.0"/></div>    </div>    <br>          <div class="row">            <div class="col-sm-3">Unbounded range:</div>            <div class="col-sm-3"><input id="fnDlg_unboundedRange" type="checkbox"/></div>            <div class="col-sm-3">Number of points:</div>            <div class="col-sm-3"><input id="fnDlg_numberOfPoints" style="width:100%" type="number" min="2" max="200" value="100"/></div>          </div>          <br>          <div id="cont_variable" class="row">            <div class="col-sm-3">Enter variable:</div>            <div class="col-sm-1"><input id="fnDlg_variable" style="width:100%" type="text" value="x" /></div>          </div>          <br>        <div class="modal-footer">          <button id="fnDlg_ok" type="button" class="btn btn-default" >Ok</button>          <button id="fnDlg_cancel" type="button" class="btn btn-default"  data-dismiss="modal">Cancel</button>        </div>      </div>    </div>  </div></div>');function e(t){var e=[];t=purgeKewords(t);for(var i=0;i<t.length;++i)Static.isAlpha(t[i])&&-1==e.indexOf(t[i])&&e.push(t[i]);return e}function i(t){if(function(t){for(var e=0;e<keywords.length;++e)for(;-1!=t.indexOf(keywords[e]);)return!0;return!1}(t))return t;var e="";e+=t[0];for(var i=1;i<t.length;++i)Static.isAlpha(t[i-1])&&Static.isAlpha(t[i])&&(e+="*"),e+=t[i];return e}this.init=function(n){var o=this;$("body").append(t),$("#cont_variable").hide(),$("#fnDlg_unboundedRange").change(function(){$(this)[0].checked?$("#limits").hide():$("#limits").show()}),$("#fnDlg_ok").click(function(){if($("#fnDlg_numberOfPoints").val()>200||$("#fnDlg_numberOfPoints").val()<2)$("#fnDlg_numberOfPoints").val(60),Static.alert('"Number of points" cannot be \nless than 2 or greater than 200');else{var t=e($("#fnDlg_function").val());if(t.length>0&&-1==t.indexOf($("#fnDlg_variable").val()))return Static.alert("Please enter a valid variable."),void $("#cont_variable").show();o.title=$("#fnDlg_title").val(),o.variable=$("#fnDlg_variable").val(),o.fn=i($("#fnDlg_function").val());try{o.lowerLimit=math.eval($("#fnDlg_lowerLimit").val())}catch(t){return void Static.alert("Please enter a valid lower limit.")}try{o.upperLimit=math.eval($("#fnDlg_upperLimit").val())}catch(t){return void Static.alert("Please enter a valid upper limit.")}if(s=parseFloat(o.lowerLimit),a=parseFloat(o.upperLimit),s>=a&&(Static.alert("Upper limit must be greater than Lower limit."),1))return;o.numOfPoints=$("#fnDlg_numberOfPoints").val(),o.unboundedRange=$("#fnDlg_unboundedRange")[0].checked,o.coeffs=function(){var t=[],e=$("#fnDlg_function").val();e=purgeKewords(e);for(var i=$("#fnDlg_variable").val();-1!=e.indexOf(i);)e=e.replace(i,"");for(var n=0;n<e.length;++n)Static.isAlpha(e[n])&&-1==t.indexOf(e[n])&&t.push(e[n]);return t}(),n()}var s,a}),$("#fnDlg_function").on("input",function(){var t=$(this).val();e(t).length>1||-1==t.indexOf($("#fnDlg_variable").val())?$("#cont_variable").show():$("#cont_variable").hide()})},this.functionDlg=function(t){$("#functionModal").modal({backdrop:"static"}),$("#fnDlg_title").val(t)},this.close=function(){$("#fnDlg_cancel").click()}}}define("functionDlg",function(){});class MCurveFitDlg{constructor(){var t=this,e="",i=!1,n=!1,o="",s="",a=-1,r=!1,l=-1,c=-1,u=null,h=null,d={precision:2},p=$('                <div class="modal fade" id="curveFitModal" role="dialog">                <div class="modal-dialog modal-sm">                <div class="modal-content">                <div class="modal-header">                <button type="button" class="close" data-dismiss="modal">&times;</button>                <h4 class="modal-title">Curve Fitter</h4>                </div>                <div class="modal-body">                <div class="row">                <div class="col-sm-5">Fitter type:</div>                <div class="col-sm-7">                <select id="curveFitDlg_type">                <option value="natural">Natural spline</option>                <option value="periodic">Periodic spline</option>                <option value="weeding">Weeding</option>                <option value="linear">Linear</option>                <option value="polynomial">Polynomial</option>                <option value="noFitting">No fitting</option>                </select>                </div>                </div>                <br>                                                <div id="cont_origin">                <div class="row">                <div class="col-sm-7">Through origin:</div>                <div class="col-sm-2"><input id="origin" type="checkbox"/></div>                </div>                <br>                </div>                                <div id="cont_order">                <div class="row">                <div class="col-sm-2">Order:</div>                <div class="col-sm-3"><input id="order" type="number" style="width:100%" value="2" min="1" max="20"/></div><div>Precision: <input id="curveFitDlg_precision" type="number" min="1" max="10" value="2" /></div>                <br>                                               </div>                <br>                </div>                                <div id="cont_tolerance">                <div class="row">                <div class="col-sm-5">Tolerance:</div>                <div class="col-sm-4"><input id="tolerance" type="number" style="width:100%" value="10.0" min="0.0" max="200.0"/></div>                </div>                <br>                </div>                                <div id="cont_chunksize">                <div class="row">                <div class="col-sm-5">Chunk size:</div>                <div class="col-sm-4"><input id="chunksize" type="number" style="width:100%" value="0" min="0" /></div>                </div>                <br>                </div>                \t\t\t\t<div id="cont_retain">                <div class="row">                <div class="col-sm-7">Retain original curve:</div>                <div class="col-sm-2"><input id="curveFitDlg_retain" type="checkbox"/></div>                </div>                <br>\t\t\t\t</div>                                <div id="cont_generate">\t\t\t\t<div class="row">                <div class="col-sm-7">Generate points:</div>                <div class="col-sm-2"><input id="curveFitDlg_generate" type="checkbox" checked/></div>                </div>                <br>\t\t\t\t</div>                                                <div id="attributes">                <div class="row">                <div class="col-sm-6">Fitted curve name:</div>                <div class="col-sm-6"><input id="curveFitDlg_name" type="text" style="width:100%"/></div>                </div>                <br>                <div class="row">                <div class="col-sm-6">Fitted curve color:</div>                <div class="col-sm-2"><input id="curveFitDlg_color" type="color"/></div>                </div>                <br>                </div>                </div>                <div class="modal-footer">                <button id="curveFitDlg_ok" type="button" class="btn btn-default" >Ok</button>                </div>                </div>                </div>                </div>                </div>                ');$("body").append(p),$("#cont_origin").hide(),$("#cont_order").hide(),$("#cont_tolerance").hide(),$("#cont_chunksize").hide(),$("#curveFitDlg_type").change(function(){"linear"==$(this).val()?$("#cont_origin").show():$("#cont_origin").hide(),"polynomial"==$(this).val()?($("#order").val(h.dataSize()-1),$("#cont_order").show()):$("#cont_order").hide(),"natural"==$(this).val()||"periodic"==$(this).val()||"weeding"==$(this).val()?$("#cont_generate").show():$("#cont_generate").hide(),"weeding"==$(this).val()?($("#cont_tolerance").show(),$("#cont_chunksize").show()):($("#cont_tolerance").hide(),$("#cont_chunksize").hide()),"noFitting"!==$(this).val()?($("#cont_retain").show(),$("#cont_retain").show()):($("#curveFitDlg_retain").prop("checked",!1),$("#cont_retain").hide(),$("#attributes").hide())}),$("#attributes").hide(),$("#curveFitDlg_retain")[0].checked=!1,$("#curveFitDlg_retain").change(function(){$(this)[0].checked?$("#attributes").show():$("#attributes").hide()}),this.curveFitCb=function(e){return $("#curveFitModal").css("zIndex",$("#curveSettingsModal").css("zIndex")+1),t.curveFitDlgInit,void 0==t.curveFitDlgInit&&(t.init(),t.curveFitDlgInit=!0),u=e.plot(),h=e,t.curveFitDlg(),t},this.cb=function(){if(i){var p=o;if(u.findPlotCurve(p))return void Static.alert(p+" already exist")}var v=u.autoReplot();u.setAutoReplot(!1);var f=new MyCurve;if(f.setPen(new Misc.Pen(s)),f.fn=h.fn,f.variable=h.variable,f.setAxes(h.xAxis(),h.yAxis()),f.origin=r,f.setStyle(h.style()),"natural"==e||"periodic"==e){f.setData(h.data());var m=new SplineCurveFitter,g=m.spline();if("periodic"==e?g.setSplineType(Static.SplineType.Periodic):g.setSplineType(Static.SplineType.Natural),f.setCurveFitter(m),n){for(var b=u.axisScaleDraw(h.xAxis()).scaleMap(),S=u.axisScaleDraw(h.yAxis()).scaleMap(),y=h.data().samples(),x=[],w=0;w<y.length;w++)x.push(new Misc.Point(b.transform(y[w].x),S.transform(y[w].y)));x=m.fitCurve(x),f.setCurveFitter(null);var M=[];for(w=0;w<x.length;w++)M.push(new Misc.Point(b.invTransform(x[w].x),S.invTransform(x[w].y)));f.setSamples(M)}else f.setSamples(h.data().samples())}else if("weeding"==e){f.setData(h.data());var _=new WeedingCurveFitter(10);if(_.setChunkSize(parseInt(c)),_.setTolerance(parseInt(l)),f.setCurveFitter(_),n){for(b=u.axisScaleDraw(h.xAxis()).scaleMap(),S=u.axisScaleDraw(h.yAxis()).scaleMap(),y=h.data().samples(),x=[],w=0;w<y.length;w++)x.push(new Misc.Point(b.transform(y[w].x),S.transform(y[w].y)));x=_.fitCurve(x),f.setCurveFitter(null);for(M=[],w=0;w<x.length;w++)M.push(new Misc.Point(b.invTransform(x[w].x),S.invTransform(x[w].y)));f.setSamples(M)}else f.setSamples(h.data().samples())}else if("noFitting"==e)f.setData(h.data()),f.setCurveFitter(null);else{for(var P=regress(h,e,parseInt(a),r,d),k=h.data().boundingRect(),A=P.string;-1!=A.indexOf("+ -");)A=A.replace("+ -","- ");f.equation=A,A=A.replace("y =",""),f.setSamples(Utility.makeSamples({fx:A,lowerX:k.left(),upperX:k.right(),numOfSamples:60}))}i?f.setTitle(p):(f.setTitle(h.title()),h.detach()),f.fitType=e,f.attach(u),u.setAutoReplot(v),u.autoRefresh(),t.close()},this.init=function(){var t=this;$("#curveFitDlg_ok").click(function(){e=$("#curveFitDlg_type").val(),i=$("#curveFitDlg_retain")[0].checked,n=$("#curveFitDlg_generate")[0].checked,o=$("#curveFitDlg_name").val(),s=$("#curveFitDlg_color").val(),a=$("#order").val()||1,d={precision:parseInt($("#curveFitDlg_precision").val())},r=$("#origin")[0].checked,l=$("#tolerance").val(),c=$("#chunksize").val(),t.cb()})},this.curveFitDlg=function(){$("#curveFitDlg_name").val(Utility.generateCurveName(u,h.title()+"_fit")),$("#curveFitDlg_color").val(Static.colorNameToHex(h.pen().color)),$("#curveFitModal").modal({backdrop:"static"})},this.curveFitInfoCb=function(t){var e="";return"natural"==t.fitType?e+="Fit type:Natural Spline":"periodic"==t.fitType?e+="Fit type:Periodic Spline":"polynomial"==t.fitType?(e+="Fit type:Polynomial",e+="; Equation:"+t.equation):"weeding"==t.fitType?(e+="Fit type:Weeding",e+="; Tolerance:"+l):"linear"==t.fitType&&(t.origin?e+="Fit type:Linear Through Origin":e+="Fit type:Linear",e+="; Equation:"+t.equation),e},this.close=function(){$(".close").click()}}}define("curveFitDlg",function(){});class MCurveStyleDlg{constructor(){var t=this,e={Lines:Lines,Sticks:Sticks,Steps:Steps,Dots:Dots,NoCurve:NoCurve},i=_.invert(e);this.curveStyleCb=function(e){t.curveStyleDlgInit,void 0==t.curveStyleDlgInit&&($("body").append($('                    <div class="modal fade" id="curveStyleModal" role="dialog">                    <div class="modal-dialog modal-sm">                    <div class="modal-content">                    <div class="modal-header">                    <button type="button" class="close" data-dismiss="modal">&times;</button>                    <h4 class="modal-title">Curve Style</h4>                    </div>                    <div class="modal-body">                    <div class="row">                    <div class="col-sm-5">Curve style:</div>                    <div class="col-sm-7">                    <select id="style">                    <option value="Lines">Lines (Default)</option>                    <option value="Sticks">Sticks</option>                    <option value="Steps">Steps</option>                    <option value="Dots">Dots</option>                    <option value="NoCurve">NoCurve</option>                    </select>                    </div>                    </div>                    <br>                    <div class="row">                    <div class="col-sm-7">                    </div>                    </div>                    <br>                    <div class="modal-footer">                    <button id="curveStyleDlg_ok" type="button" class="btn btn-default"  data-dismiss="modal">Ok</button>                    </div>                    </div>                    </div>                    </div>                    </div>                    ')),t.init(),t.curveStyleDlgInit=!0),t.curve=e,t.curveStyleDlg()},this.init=function(){$("#style").change(function(){var i=e[$(this).val()];t.curve.setStyle(i),Static.trigger("styleChanged",i)})},this.curveStyleDlg=function(){$("#style").val(i[t.curve.style()]),$("#curveStyleModal").modal({backdrop:"static"})}}}define("curveStyleDlg",function(){});class MAxisDlg{constructor(){var t=null,e=_.once(function(){$("body").append($('                        <div class="modal fade" id="axisModal" role="dialog">                        <div class="modal-dialog modal-sm">                        <div class="modal-content">                        <div class="modal-header">                        <button type="button" class="close" data-dismiss="modal">&times;</button>                        <h4 class="modal-title">Curve Axis</h4>                        </div>                        <div class="modal-body">                        <div class="row">                        <div class="col-sm-5">Horizontal:</div>                        <div class="col-sm-7">                        <select id="axisHorizontal1">                        <option value="bottomAxis">Bottom axis</option>                        <option value="topAxis">Top axis</option>                        </select>                        </div>                        </div>                        <br>                        <div class="row">                        <div class="col-sm-5">Vertical:</div>                        <div class="col-sm-7">                        <select id="axisVertical1">                        <option value="leftAxis">Left axis</option>                        <option value="rightAxis">Right axis</option>                        </select>                        </div>                        </div>                        <br>                        <div class="modal-footer">                        <button id="axisDlg_ok" type="button" class="btn btn-default"  data-dismiss="modal">Ok</button>                        </div>                        </div>                        </div>                        </div>                        </div>                        ')),$("#axisHorizontal1").change(function(){"bottomAxis"==$(this).val()?(t.setXAxis(xBottom),Static.trigger("axisChanged",[xBottom,t])):(t.setXAxis(xTop),Static.trigger("axisChanged",[xTop,t]))}),$("#axisVertical1").change(function(){"leftAxis"==$(this).val()?(t.setYAxis(yLeft),Static.trigger("axisChanged",[yLeft,t])):(t.setYAxis(yRight),Static.trigger("axisChanged",[yRight,t]))})});this.axisCb=function(i){e(),(t=i).xAxis()==xBottom?$("#axisHorizontal1").val("bottomAxis"):$("#axisHorizontal1").val("topAxis"),t.yAxis()==yLeft?$("#axisVertical1").val("leftAxis"):$("#axisVertical1").val("rightAxis"),$("#axisModal").modal({backdrop:"static"})}}}define("axisDlg",function(){});class MPointEntryDlg{constructor(){const t=this;let e=_.once(function(){$("#pointEntryModal").remove(),$("body").append($('                        <div class="modal fade" id="pointEntryModal" role="dialog">                        <div class="modal-dialog modal-sm">                        <div class="modal-content">                        <div class="modal-header">                        <button type="button" class= "close" id="closePointEntryDlg">&times;</button>                        <h4 id="pointEntryTitle" class="modal-title">Add/Romve Point</h4>                        </div>                        <div class="modal-body">                        <div class="row">                        <div class="col-sm-4">Name:</div>                        <input id="curve_name" type="text" value="curve_1">                        </div>                        <br>                        <div class="row">                        <div class="col-sm-4">Abscissa(X):</div>                        <input id="abscissa" type="text" value=0.0>                        </div>                        <br>                        <div class="row">                        <div class="col-sm-4">Ordinate(Y):</div>                        <input id="ordinate" type="text" value=0.0>                        </div>                        <br>                        <div class="modal-footer">                        <button id="pointEntryDlg_enter" type="button" class="btn btn-default" >Add</button>                        <button id="pointEntryDlg_remove" type="button" class="btn btn-default" >Remove</button>                        <button id="pointEntryDlg_ok" type="button" class="btn btn-default"  data-dismiss="modal">Finish</button>                        </div>                        </div>                        </div>                        </div>                        </div>                        ')),$("#pointEntryDlg_enter").click(a),$("#pointEntryDlg_remove").click(s),$("#closePointEntryDlg").click(o),$("#curve_name, #abscissa, #ordinate").keyup(n)});function i(){var e=t.plot.findPlotCurve($("#curve_name").val());e&&e.data().samples().length>1?$("#pointEntryDlg_remove").attr("disabled",!1):$("#pointEntryDlg_remove").attr("disabled",!0)}function n(){$("#curve_name").val().length&&_.isString($("#curve_name").val())&&$("#abscissa").val().length&&_.isFinite($("#abscissa").val())&&$("#ordinate").val().length&&_.isFinite($("#ordinate").val())?(i(),$("#pointEntryDlg_enter").attr("disabled",!1)):($("#pointEntryDlg_remove").attr("disabled",!0),$("#pointEntryDlg_enter").attr("disabled",!0))}function o(){$("#pointEntryDlg_ok").click()}function s(){t.plot.findPlotCurve($("#curve_name").val()).removePoint(new Misc.Point(parseFloat($("#abscissa").val()),parseFloat($("#ordinate").val()))),Static.trigger("curveAdjusted")}function a(){let e=t.plot.findPlotCurve($("#curve_name").val());if(e)"Modify/Remove Point"==t.dlgTitle()&&(e.removePoint(t.point,!0),Static.trigger("curveAdjusted"));else{(e=new MyCurve($("#curve_name").val())).attach(t.plot);let i=Utility.randomColor();e.setPen(new Misc.Pen(i));let n=new Symbol(MRect,new Misc.Brush(Static.invert(i)),new Misc.Pen(i),new Misc.Size(8,8));e.setSymbol(n);let o="";Static.showline&&Static.showsymbol?o="lineAndSymbol":Static.showline?o="line":Static.showsymbol&&(o="symbol"),Utility.setLegendAttribute(e,o,e.getLegendIconSize())}let n=e.data().samples(),o=new Misc.Point(parseFloat($("#abscissa").val()),parseFloat($("#ordinate").val()));t.point=o,n.containsPoint(o)||n.push(o),n.sort(function(t,e){return t.x-e.x}),e.setSamples(n),t.plot.autoRefresh(),Static.trigger("pointAdded",e),Static.trigger("curveAdjusted"),i()}this.setDlgTitle=function(t){$("#pointEntryTitle").html(t),"Modify/Remove Point"==t?$("#pointEntryDlg_enter").html("Modify"):$("#pointEntryDlg_enter").html("Add")},this.dlgTitle=function(t){return $("#pointEntryTitle").html()},this.pointEntryCb=function(n,o,s,a){t.curveName=s,t.point=a,e(),t.setDlgTitle(n),void 0!==s&&$("#curve_name").val(s),void 0!==a&&($("#abscissa").val(a.x),$("#ordinate").val(a.y)),t.plot=o,i(),$("#pointEntryModal").modal({backdrop:"static"}),"Modify/Remove Point"==n?$("#curve_name").attr("disabled",!0):$("#curve_name").attr("disabled",!1)}}}define("pointEntryDlg",function(){});class ToolBar{constructor(t){var e=[];function i(){console.log("No callback defined for button")}t=t||{};var n=$('<div id="toolBar1" style="position:relative; border-style: ridge; background-color: lightBlue"></div>');function o(t){for(var i=0;i<e.length;++i)if(e[i][0].innerText.trim().split(" ")[0]==t)return i;return-1}void 0!==t.zIndex&&n.css("zIndex",t.zIndex),n.insertBefore($("#plotDiv")),$("#plotDiv").removeClass("noToolBar"),$("#plotDiv").addClass("toolBar");this.disable=function(t){"string"==typeof t&&(t=o(t)),e[t].attr("disabled",!0)},this.enable=function(t){"string"==typeof t&&(t=o(t)),e[t].attr("disabled",!1)},this.hide=function(i){"string"==typeof i&&(i=o(i)),void 0==i&&(i=-1),i>-1&&i<e.length?e[i].hide():(n.hide(),$("#plotDiv").removeClass("toolBar"),$("#plotDiv").addClass("noToolBar")),t.refreshCb&&refreshCb()},this.show=function(i){"string"==typeof i&&(i=o(i)),void 0==i&&(i=-1),i>-1&&i<e.length?e[i].show():(n.show(),$("#plotDiv").removeClass("noToolBar"),$("#plotDiv").addClass("toolBar")),t.refreshCb&&refreshCb()};this.addToolButton=function(t,o){return"pushbutton"==t?function(t){t.text=t.text,t.class=t.class||"btn btn-primary",t.innerHtmlId=t.innerHtmlId||"elem_"+e.length,t.duration=t.duration||40;var i=$("<button id="+t.innerHtmlId+' type="button" data-toggle="tooltip">');if(i.addClass(t.class),void 0!==t.icon){void 0!==t.text&&t.text.length&&i.text(t.text+" ");var o=$("<img src="+t.icon+' alt="Img" width=18px>');i.append(o)}else i.text(t.text);n.append(i),i.attr("title",t.tooltip);var s=t.cb||function(){console.log("No callback defined for button")},a="click",r="mousedown",l="mouseup";return Static.isMobile()&&(a="tap",r="touchstart",l="touchend"),t.repeat?(i.interval=null,i.bind(r,function(e){"mousedown"==r&&0!=e.button||(i.interval=setInterval(s,t.duration))}),$(window).bind(l,function(){clearInterval(i.interval)})):i.bind(a,s),e.push(i),e.length-1}(o):"checkbox"==t?function(t){var i=t.label||"Option 1";t.innerHtmlId=t.innerHtmlId||"elem_"+e.length;var o=$('<label data-toggle="tooltip" class="checkbox-inline">                                    <input id='+t.innerHtmlId+'  type="checkbox" value="">'+i+"                                  </label>");o.css("marginLeft",t.marginLeft||8),o.css("marginRight",t.marginRight||8),n.append(o),o.attr("title",t.tooltip);var s=t.cb||function(){console.log("No callback defined for button")};return o.click(function(){s($("#"+t.innerHtmlId).is(":checked"))}),e.push(o),e.length-1}(o):"radio"==t?function(t){var o=t.label||"Option 1";t.value=t.value||o,t.innerHtmlId=t.innerHtmlId||"elem_"+e.length;var s=t.name||"optradio",a=$('<label data-toggle="tooltip" class="checkbox-inline">                                    <input id='+t.innerHtmlId+' type="radio" value='+t.value+" name="+s+">"+o+"                                  </label>");a.css("marginLeft",t.marginLeft||0),a.css("marginRight",t.marginRight||0),n.append(a),a.attr("title",t.tooltip),a.addClass(t.class);var r=t.cb||i;return a.click(r),e.push(a),e.length-1}(o):"dropdown"==t?function(t){t.label;t.text=t.text||"Button",t.innerHtmlId=t.innerHtmlId||"elem_"+e.length;var o=$('<span data-toggle="tooltip" class="dropdown">                              <button id='+t.innerHtmlId+' class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">'+t.text+'                              <span class="caret"></span></button>                              <ul class="dropdown-menu">'+function(t){for(var e="",i=t.hasCheckbox||!1,n=t.listElements||[],o=0;o<n.length;++o)n[o].icon=n[o].icon||"",n[o].checked=n[o].checked||"unchecked",i&&!n[o].icon.length&&(n[o].tooltip?e+='<li title="'+n[o].tooltip+'"><a href="#"><label><input type="checkbox" '+n[o].checkboxState+" value="+o+">"+n[o].text+"</label></a></li>":e+='<li><a href="#"><label><input type="checkbox" '+n[o].checkboxState+" value="+o+">"+n[o].text+"</label></a></li>"),!i&&n[o].icon.length&&(n[o].tooltip?e+='<li title="'+n[o].tooltip+'"><a href="#"><label><img src='+n[o].icon+' alt="Img" width=20px> '+n[o].text+"</label></a></li>":e+='<li><a href="#"><label>'+n[o].icon+n[o].text+"</label></a></li>"),i&&n[o].icon.length&&(n[o].tooltip?e+='<li title="'+n[o].tooltip+'"><a href="#"><label><img src='+n[o].icon+' alt="Img" width=20px><input type="checkbox" '+n[o].checkboxState+' value="">'+n[o].text+"</label></a></li>":e+='<li><a href="#"><label><input type="checkbox" '+n[o].checkboxState+' value="">'+n[o].icon+n[o].text+"</label></a></li>"),i||n[o].icon.length||(n[o].tooltip?e+='<li title="'+n[o].tooltip+'"><a href="#"><label>'+n[o].text+"</label></a></li>":e+='<li><a href="#"><label>'+n[o].text+"</label></a></li>");return e}(t)+"</ul>                          </span>");return o.css("marginLeft",t.marginLeft||0),o.css("marginRight",t.marginRight||0),o.addClass(t.class),o.attr("title",t.tooltip),n.append(o),t.cb=t.cb||i,o.on("click",function(e){if($(e.target).parent().parent().parent().hasClass("disabled"))return!1;if(!t.hasCheckbox){var i=$(e.target).closest("li").index();-1!=i&&t.cb(e,i)}}),o.on("change",function(e){var i=$(e.target);i.prop("checked"),t.cb(e,i.closest("li").index(),i.prop("checked"))}),e.push(o),e.length-1}(o):"select"==t?function(t){t.label=t.label||"Select One",t.innerHtmlId=t.innerHtmlId||"elem_"+e.length;var i=$('<span data-toggle="tooltip"><label for="sel1">'+t.label+":</label>                            <select>                              <option>1</option>                              <option>23456789101112</option>                              <option>3</option>                              <option>4</option>                            </select></span>");i.css("marginLeft",t.marginLeft||8),i.css("marginRight",t.marginRight||8),i.addClass(t.class),i.attr("title",t.tooltip),n.append(i);var o=t.cb||function(){console.log("No callback defined for button")};return i.click(o),e.push(i),e.length-1}(o):"number"==t?function(t){t.label=t.label||"Select One",t.innerHtmlId=t.innerHtmlId||"elem_"+e.length,t.min=t.min||-1e6,t.max=t.max||1e6,t.value=t.value||t.min,t.value>t.max&&(t.value=t.max),t.value<t.min&&(t.value=t.min);var i=$('<span data-toggle="tooltip"><label for="sel1">'+t.label+":</label>                                   </span>"),o=$("<input id="+t.innerHtmlId+'  type="number"                            value="10" name="some-name"/>');i.append(o),n.append(i),o.attr({width:200,min:t.min,max:t.max,step:t.step,value:t.value}),i.attr("title",t.tooltip),i.css("marginLeft",t.marginLeft||8),i.css("marginRight",t.marginRight||8),i.addClass(t.class);var s=t.cb||function(){console.log("No callback defined for button")};return i.click(s),e.push(i),e.length-1}(o):"upload"==t?function(t){t.label=t.label||"Select One",t.innerHtmlId=t.innerHtmlId||"elem_"+e.length;var i=$("<input id="+t.innerHtmlId+'  type="file" name="files[]" multiple />'),o=$('<button data-toggle="tooltip"></button>');i.css("marginLeft",-8),i.css("marginRight",-8),i.css("marginTop",-3),i.css("marginBottom",-3),o.append(i),o.css("marginLeft",t.marginLeft||8),o.css("marginRight",t.marginRight||8),o.addClass(t.class),o.attr("title",t.tooltip),n.append(o),e.push(o);var s=!1;return o.click(function(){if(!s)return s=!0,i.trigger("click"),!1}),e.length-1}(o):"link"==t?function(t){t.text=t.text||"Button",t.innerHtmlId=t.innerHtmlId||"elem_"+e.length;var i=$("<A HREF="+t.href+"></a>");i.text(t.text),n.append(i),i.addClass(t.class),i.attr("title",t.tooltip),i.attr("target",t.target);var o=t.cb||function(){console.log("No callback defined for button")};return i.click(o),e.push(i),e.length-1}(o):void 0},this.setButtonCheck=function(t,i){"string"==typeof t&&(t=o(t)),e[t].children().prop("checked",i)},this.isDropdownItemChecked=function(t,i){return"string"==typeof t&&(t=o(t)),$($(e[t].children()[1]).children()[i]).children().children().children().prop("checked")},this.setDropdownItemCheck=function(t,i,n){"string"==typeof t&&(t=o(t)),$($(e[t].children()[1]).children()[i]).children().children().children().prop("checked",n)},this.hideDropdownItem=function(t,i){"string"==typeof t&&(t=o(t)),$($(e[t].children()[1]).children()[i]).hide()},this.showDropdownItem=function(t,i){"string"==typeof t&&(t=o(t)),$($(e[t].children()[1]).children()[i]).show()},this.enableDropdownItem=function(t,i,n){"string"==typeof t&&(t=o(t));var s=$($(e[t].children()[1]).children()[i]).addClass("disabled");n?s.removeClass("disabled"):s.addClass("disabled")}}}define("toolBar",function(){});class MToolBar extends ToolBar{constructor(t,e){super(e);var i=this,n=new Watches(t).watchElements();function o(){var e=$("input[name=optradio]").filter(":checked").val();"Zoom"==e&&(t.pan.setEnabled(!1),Utility.setAutoScale(t,!1),t.zm.setEnabled(!0),t.zm.setZoomBase(t.zm.scaleRect())),"Pan"==e&&(t.pan.setEnabled(!0),t.zm.setEnabled(!1),Utility.setAutoScale(t,!1)),"Auto"==e&&(t.pan.setEnabled(!1),t.zm.setEnabled(!1),Utility.setAutoScale(t,!0))}var s,a=[function(e){t.curveClosestPoint.setEnabled(e)},function(e){t.enableAxis(yLeft,e)},function(e){t.enableAxis(xBottom,e)},function(e){t.enableAxis(yRight,e)},function(e){t.enableAxis(xTop,e)},function(e){Utility.majorGridLines(t.grid,e)},function(e){Utility.minorGridLines(t.grid,e)},function(e){e?t.showTitle():t.hideTitle()},function(e){e?t.showFooter():t.hideFooter()},function(e){t.enableLegend(e)},function(e){t.itemList(Static.Rtti_PlotCurve).length&&(t.sidebar.showSidebar(e),t.rv.updateWatchesAndTable())}];var r=[t.file.save,t.curveSettings.curveSettingsDlg,t.settings().settingsDlg,function(){t._functionDlg.functionDlg(Utility.generateCurveName(t))},function(){t.pointEntryDlg.pointEntryCb("Add/Romve Point",t)},function(){s&&!s.closed||(s=window.open("https://www.tcsion.com/OnlineAssessment/ScientificCalculator/Calculator.html#nogo","_blank","width=480,height=345, top=200, left=200")),s.focus()},Static.printFn];this.addToolButton("dropdown",{text:"File",cb:function(t,e){r[e]()},listElements:[{text:"Save",icon:"images/save.png",tooltip:"Save the current graph."},{text:"Curve settings",icon:"images/curveSettings.png",tooltip:"Launches the curve settings dialog."},{text:"Plot settings",icon:"images/settings.png",tooltip:"Launches the plot settings dialog."},{text:"Function",icon:"images/function.png",tooltip:"Launches the function dialog."},{text:"Point entry",icon:"images/pointEntry.png",tooltip:"Launches the point entry dialog."},{text:"Calculator",icon:"images/calculator.png",tooltip:"Launches the calculator."},{text:"Print",icon:"images/print.png",tooltip:"Print the current graph."}]}),this.addToolButton("upload",{innerHtmlId:"fileInput",class:"btn btn-primary",tooltip:"Upload data files"}),this.addToolButton("radio",{label:"Zoom",tooltip:"Enable zooming. Press the mouse left button and drag.",cb:o}),this.addToolButton("radio",{label:"Pan",tooltip:"Allow dragging of all plot items to new positions. Press the mouse left button and drag.",cb:o}),this.addToolButton("radio",{label:"Auto",tooltip:"Determine and and apply the scale that\nallows the extent of all curves to be shown.",cb:o}),this.addToolButton("dropdown",{text:"View",hasCheckbox:!0,cb:function(t,e,i){a[e](i)},listElements:[{text:"Point selection",icon:"images/pointSelection.png",tooltip:"Turn on point selection. This may affect response."},{text:"Left axis",icon:"images/axis.png",tooltip:"Enable left axis",checkboxState:"checked"},{text:"Bottom axis",icon:"images/axis.png",tooltip:"Enable bottom axis",checkboxState:"checked"},{text:"Right axis",icon:"images/axis.png",tooltip:"Enable right axis"},{text:"Top axis",icon:"images/axis.png",tooltip:"Enable top axis"},{text:"Major gridlines",icon:"images/major_grid.png",tooltip:"Enable major gridlines",checkboxState:"checked"},{text:"Minor gridlines",icon:"images/minor_grid.png",tooltip:"Enable minor gridlines",checkboxState:"checked"},{text:"Title",icon:"images/title.png",tooltip:"Enable title",checkboxState:"checked"},{text:"Footer",icon:"images/footer.png",tooltip:"Enable footor",checkboxState:"checked"},{text:"Legend",icon:"images/legend.png",tooltip:"Enable the legend (at least one curve should be present)",checkboxState:"checked"},{text:"Sidebar",icon:"images/side_bar.png",tooltip:"Display the sidebar"}]}),this.addToolButton("pushbutton",{text:"+",icon:"images/zoom_in.png",repeat:!0,tooltip:"Zoom in.",cb:function(e){for(var i=0;i<axisCnt;i++){t.axisScaleDiv(i).range()>1e-9&&t.magnifier.rescale(.995)}}}),this.addToolButton("pushbutton",{text:"-",icon:"images/zoom_out.png",repeat:!0,tooltip:"Zoom out",cb:function(e){t.magnifier.rescale(1/.98)}}),this.addToolButton("dropdown",{text:"Watch",tooltip:"Enable/disable watches.",hasCheckbox:!0,cb:function(e,i,n){t.rv.watch(i).setEnable(n),t.rv.updateWatchesAndTable()},listElements:n}),this.addToolButton("link",{text:"Help",cb:function(){},href:"grapherHelp/Grapher.html",target:"_blank",class:"noSelect",tooltip:"Launches online help."}),Static.bind("visibilityChange",function(e,i,n){i.rtti==Static.Rtti_PlotCurve&&(t.sidebar.initSidebar(),t.hasVisiblePlotCurve()?(t.tbar.showDropdownItem("View",10),t.sidebar.sidebarReDisplay()&&(t.tbar.setDropdownItemCheck("View",10,!0),t.sidebar.showSidebar(!0),t.sidebar.setSidebarReDisplay(!1))):(t.tbar.setDropdownItemCheck("View",10,!1),t.tbar.hideDropdownItem("View",10),t.sidebar.isSideBarVisible()&&(Static.alert("Ooops!! No visible curves to watch."),t.sidebar.showSidebar(!1),t.sidebar.setSidebarReDisplay(!0))))}),Static.bind("itemChanged",function(e,i,n){i.rtti==Static.Rtti_PlotGrid&&(n?t.tbar.showDropdownItem("View",6):t.tbar.hideDropdownItem("View",6))}),Static.bind("rescaled",function(){i.setButtonCheck("Auto",!1)}),""==t.title()&&i.hideDropdownItem("View",7),Static.bind("titleAdded",function(t,e){e?i.showDropdownItem("View",7):i.hideDropdownItem("View",7)}),""==t.footer()&&i.hideDropdownItem("View",8),Static.bind("footerAdded",function(t,e){e?i.showDropdownItem("View",8):i.hideDropdownItem("View",8)}),Static.bind("itemAttached",function(e,n,o){n.rtti==Static.Rtti_PlotCurve&&(o?i.showDropdownItem("View",10):t.itemList(Static.Rtti_PlotCurve).length&&t.hasVisiblePlotCurve()||(i.setDropdownItemCheck("View",10,!1),i.hideDropdownItem("View",10)),Static.trigger("visibilityChange",[n,o]))}),void 0!==t.sidebar?t.sidebar.setTop(parseInt($("#toolBar1").css("height"))+2):Static.bind("sidebarCreated",function(e,i){t.sidebar=i,i.setTop(parseInt($("#toolBar1").css("height"))+2),Static.unbind("sidebarCreated")}),$(window).resize(function(e){t.sidebar.setTop(parseInt($("#toolBar1").css("height"))+2)}),this.hideDropdownItem("View",10),this.setButtonCheck("Auto",!0)}}define("mtoolBar",["toolBar","curveSettings"],function(){});class UpLoad{constructor(t,e,i){var n=this;this.cb=null,this.reset=function(t){t[0].value=""},this.setInputElement=function(t){Static.bind("itemAttached",function(t,e,i){e.rtti==Static.Rtti_PlotCurve&&$("#fileInput").val().includes(e.title())&&!i&&n.reset($("#fileInput"))}),t.change(function(t){for(var e,i=t.target.files,o=0;e=i[o];o++){var s=e.name.split(".")[1];if("txt"==s||"plt"==s){var a=new FileReader;a.onload=function(t){return function(e){n.cb?n.cb({fileName:t.name,content:e.target.result}):console.log({fileName:t.name,content:e.target.result})}}(e),a.readAsText(e)}}})}}}define("upload",function(){});class MFile{constructor(t,e){var i=new UpLoad,n=this,o=null;function s(t){var n=JSON.parse(t.content),s=n[0];"[LogScaleEngine]"==s.rightScaleEngineType&&o.setAxisScaleEngine(yRight,new LogScaleEngine),"[LogScaleEngine]"==s.leftScaleEngineType&&o.setAxisScaleEngine(yLeft,new LogScaleEngine),"[LogScaleEngine]"==s.bottomScaleEngineType&&o.setAxisScaleEngine(xBottom,new LogScaleEngine),"[LogScaleEngine]"==s.topScaleEngineType&&o.setAxisScaleEngine(xTop,new LogScaleEngine),"[LinearScaleEngine]"==s.rightScaleEngineType&&o.setAxisScaleEngine(yRight,new LinearScaleEngine),"[LinearScaleEngine]"==s.leftScaleEngineType&&o.setAxisScaleEngine(yLeft,new LinearScaleEngine),"[LinearScaleEngine]"==s.bottomScaleEngineType&&o.setAxisScaleEngine(xBottom,new LinearScaleEngine),"[LinearScaleEngine]"==s.topScaleEngineType&&o.setAxisScaleEngine(xTop,new LinearScaleEngine),s.autoScale?setAutoScale(!0):(o.setAxisScale(xBottom,s.xBottomMin,s.xBottomMax),o.setAxisScale(yLeft,s.yLeftMin,s.yLeftMax),o.setAxisScale(xTop,s.xTopMin,s.xTopMax),o.setAxisScale(yRight,s.yRightMin,s.yRightMax)),o.setTitleFont(new Misc.Font(s.titleFont)),o.setFooterFont(new Misc.Font(s.footerFont)),o.setAxisTitleFont(xBottom,new Misc.Font(s.axisTitleFont)),o.setAxisTitleFont(xTop,new Misc.Font(s.axisTitleFont)),o.setAxisTitleFont(yLeft,new Misc.Font(s.axisTitleFont)),o.setAxisTitleFont(yRight,new Misc.Font(s.axisTitleFont)),o.setTitle(s.title),o.setFooter(s.footer),o.setAxisTitle(xBottom,s.xBottomAxisTitle),o.setAxisTitle(xTop,s.xTopAxisTitle),o.setAxisTitle(yLeft,s.yLeftAxisTitle),o.setAxisTitle(yRight,s.yRightAxisTitle);for(var a=1;a<n.length;++a)if(o.findPlotCurve(n[a].title))return Static.alert(n[a].title+" already exist"),void i.reset($("#fileInput"));for(a=1;a<n.length;++a){var r=new e(n[a].title);if(n[a].symbolType!==NoSymbol){var l=new Symbol;l.setStyle(n[a].symbolType),l.setSize(new Misc.Size(n[a].symbolWidth,n[a].symbolWidth)),l.setPen(new Misc.Pen(n[a].symbolPenColor,n[a].symbolPenWidth)),l.setBrush(new Misc.Brush(n[a].symbolBrushColor)),r.setSymbol(l)}if(n[a].fitType&&(r.fitType=n[a].fitType),r.setSamples(Utility.pointsFromXYObjectArray(n[a].samples)),"natural"==n[a].fitType||"periodic"==n[a].fitType){var c=new SplineCurveFitter,u=c.spline();"periodic"==n[a].fitType?u.setSplineType(Static.SplineType.Periodic):u.setSplineType(Static.SplineType.Natural),r.setCurveFitter(c)}r.setPen(new Misc.Pen(n[a].pen.color,n[a].pen.width,n[a].pen.style)),r.setAxes(n[a].xAxis,n[a].yAxis),r.attach(o)}i.reset($("#fileInput"))}this.init=function(t){o=t,i.cb=this.upload},this.setInputElement=function(t){i.setInputElement(t)},this.upload=function(t){var e=t.fileName.split(".")[1];if("txt"==e){var a=Utility.makePoints(Utility.toArrays(t.content));Static.trigger("addCurve",[t.fileName,a,!0])}else if("plt"==e){var r=o.itemList(Static.Rtti_PlotCurve);r.length?Static.alertYesNo("Do you want to save the changes to the Grapher?",function(e){if(e!=Static.Cancel){if(e==Static.Yes)return n.save(),void i.reset($("#fileInput"));if(e!=Static.No);else{for(var o=0;o<r.length;++o)r[o].detach();s(t)}}else i.reset($("#fileInput"))}):s(t)}},this.save=function(){Static.prompt("Enter a filename without extensions","plot_1",function(t){return t+=".plt",function(t,e){var i=document.createElement("a");document.body.appendChild(i),i.style="display: none";var n=JSON.stringify(t),o=new Blob([n],{type:"octet/stream"}),s=window.URL.createObjectURL(o);i.href=s,i.download=e,i.click(),window.URL.revokeObjectURL(s)}(function(){var t=[],e={};e.bottomScaleEngineType=o.axisScaleEngine(xBottom).toString(),e.leftScaleEngineType=o.axisScaleEngine(yLeft).toString(),e.topScaleEngineType=o.axisScaleEngine(xTop).toString(),e.rightScaleEngineType=o.axisScaleEngine(yRight).toString(),e.title=o.title(),e.titleFont=o.titleFont(),e.footer=o.footer(),e.footerFont=o.footerFont(),e.axisTitleFont=o.axisTitleFont(xBottom),e.xBottomAxisTitle=o.axisTitle(xBottom),e.xTopAxisTitle=o.axisTitle(xTop),e.yLeftAxisTitle=o.axisTitle(yLeft),e.yRightAxisTitle=o.axisTitle(yRight),e.autoScale=o.axisAutoScale(xBottom),e.autoScale||(e.xBottomMin=o.axisInterval(xBottom).minValue(),e.xBottomMax=o.axisInterval(xBottom).maxValue(),e.yLeftMin=o.axisInterval(yLeft).minValue(),e.yLeftMax=o.axisInterval(yLeft).maxValue(),e.xTopMin=o.axisInterval(xTop).minValue(),e.xTopMax=o.axisInterval(xTop).maxValue(),e.yRightMin=o.axisInterval(yRight).minValue(),e.yRightMax=o.axisInterval(yRight).maxValue()),t.push(e);for(var i=o.itemList(Static.Rtti_PlotCurve),n=0;n<i.length;++n){var s={};s.title=i[n].title(),s.samples=Utility.pointsToXYObjectArray(i[n].data().samples()),s.fn=i[n].fn,s.pen=i[n].pen(),s.fitType=i[n].fitType;var a=i[n].symbol();a&&(s.symbolType=a.style(),s.symbolWidth=a.size().width,s.symbolPenColor=a.pen().color,s.symbolPenWidth=a.pen().width,s.symbolBrushColor=a.brush().color),s.xAxis=i[n].xAxis(),s.yAxis=i[n].yAxis(),t.push(s)}return t}(),t),!0},"small")},this.init(t)}}define("file",function(){});class Watch{constructor(t,e){this._dependentRuler=e||Static.NoRuler,this._rulerGroup=t;var i=!0;this._curveName="",this._curve=null,this._rulerLeft=Number.MAX_VALUE,this._rulerRight=Number.MAX_VALUE,this._rulerBottom=Number.MAX_VALUE,this._rulerTop=Number.MAX_VALUE,this._value,this.name=function(){},this.computeWatch=function(){},this.value=function(){return this._value},this.setCurveName=function(t){this._curveName=t},this.setCurve=function(t){this._curve=t},this.setRulerLeft=function(t){this._curve&&this._curve.plot()&&(t=Static.adjustForDecimalPlaces(t,this._curve.plot().axisDecimalPlaces(this._curve.xAxis()))),this._rulerLeft=t},this.setRulerRight=function(t){this._curve&&this._curve.plot()&&(t=Static.adjustForDecimalPlaces(t,this._curve.plot().axisDecimalPlaces(this._curve.xAxis()))),this._rulerRight=t},this.setRulerBottom=function(t){this._curve&&this._curve.plot()&&(t=Static.adjustForDecimalPlaces(t,this._curve.plot().axisDecimalPlaces(this._curve.yAxis()))),this._rulerBottom=t},this.setRulerTop=function(t){this._curve&&this._curve.plot()&&(t=Static.adjustForDecimalPlaces(t,this._curve.plot().axisDecimalPlaces(this._curve.yAxis()))),this._rulerTop=t},this.setEnable=function(t){i=t,Static.trigger("watchEnabled",[this,t])},this.isEnable=function(){return i}}}define("watch",function(){});var MoveToElement=0,LineToElement=1,CurveToElement=2,CurveToDataElement=3,Misc={Pen:function(t,e,i){if("object"==typeof t)return new Misc.Pen(t.color,t.width,t.style);this.color="black",this.width=1,this.style="solid",void 0!==i&&(this.style=i),void 0!==e&&(this.width=e),void 0!==t&&(this.color=t)}};Misc.Pen.prototype.toString=function(){return"[color:"+this.color+", width:"+this.width+", style:"+this.style+"]"},Misc.Pen.prototype.isEqual=function(t){return this.color==t.color&&this.style==t.style&&this.width==t.width},Misc.Brush=function(t){this.color=Static.NoBrush,void 0!==t&&(this.color=t)},Misc.Brush.prototype.toString=function(){return"[Brush: "+this.color+"]"},Misc.Brush.prototype.isEqual=function(t){return this.color==t.color},Misc.Line=function(t,e){var i=t,n=e;this.p1=function(){return i},this.p2=function(){return n}},Misc.Line.prototype.x1=function(){return this.p1().x},Misc.Line.prototype.x2=function(){return this.p2().x},Misc.Line.prototype.y1=function(){return this.p1().y},Misc.Line.prototype.y2=function(){return this.p2().y},Misc.Line.prototype.x2=function(){return this.p2().x},Misc.Line.prototype.length=function(){return Math.sqrt((this.p2().x-this.p1().x)*(this.p2().x-this.p1().x)+(this.p2().y-this.p1().y)*(this.p2().y-this.p1().y))},Misc.Size=function(t,e){t instanceof Misc.Size&&(e=t.height,t=t.width),this.width=0,this.height=0,void 0!==e&&(this.width=t,this.height=e)},Misc.Size.prototype.isValid=function(){return!(this.width<0||this.height<0)},Misc.Size.prototype.isEqual=function(t){return this.width==t.width&&this.height==t.height},Misc.Size.prototype.expandedTo=function(t){return new Misc.Size(Math.max(this.width,t.width),Math.max(this.height,t.height))},Misc.Size.prototype.toString=function(){return"["+this.width+", "+this.height+"]"},Misc.Point=function(t,e){this.x=0,this.y=0,void 0!==e&&(this.y=e),void 0!==t&&(this.x=t)},Misc.Point.prototype.interpolatedPoint=function(t,e){if(e==t.x)return t;if(e==this.x)return this;var i=(this.y-t.y)/(this.x-t.x)*(e-t.x)+t.y;return new Misc.Point(e,i)},Misc.Point.prototype.isEqual=function(t){return this.x===t.x&&this.y===t.y},Misc.Point.prototype.toString=function(){return"("+this.x+", "+this.y+")"},Misc.Rect=function(t,e,i,n){var o=0,s=0,a=-1,r=-1,l=-1,c=-1;void 0!==n?(a=(o=t)+(l=i),r=(s=e)+(c=n)):void 0!==i?(o=t.x,s=t.y,a=o+(l=e),r=s+(c=i)):void 0!==e&&(o=t.x,s=t.y,void 0!==e.x?(a=e.x,r=e.y,l=a-o,c=r-s):(l=e.width,c=e.height,a=o+l,r=s+c)),this.left=function(){return o},this.setLeft=function(t){o!==t&&(l=a-(o=t))},this.top=function(){return s},this.setTop=function(t){s!==t&&(c=r-(s=t))},this.right=function(){return a},this.setRight=function(t){a!==t&&(l=(a=t)-o)},this.bottom=function(){return r},this.setBottom=function(t){r!==t&&(c=(r=t)-s)},this.width=function(){return l},this.height=function(){return c}},Misc.Rect.prototype.setWidth=function(t){this.width()!==t&&this.setRight(this.left()+t)},Misc.Rect.prototype.setHeight=function(t){this.height()!==t&&this.setBottom(this.top()+t)},Misc.Rect.prototype.size=function(){return new Misc.Size(this.width(),this.height())},Misc.Rect.prototype.setSize=function(t){this.setWidth(t.width),this.setHeight(t.height)},Misc.Rect.prototype.setRect=function(t,e,i,n){this.setLeft(t),this.setTop(e),this.setWidth(i),this.setHeight(n)},Misc.Rect.prototype.united=function(t){return new Misc.Rect(Math.min(this.left(),t.left()),Math.min(this.top(),t.top()),Math.max(this.right(),t.right())-Math.min(this.left(),t.left()),Math.max(this.bottom(),t.bottom())-Math.min(this.top(),t.top()))},Misc.Rect.prototype.normalized=function(){var t=new Misc.Rect(this.left(),this.top(),this.width(),this.height());if(t.width()<0){var e=t.right();t.setRight(t.left()),t.setLeft(e)}if(this.height()<0){e=t.bottom();t.setBottom(t.top()),t.setTop(e)}return t},Misc.Rect.prototype.center=function(){return new Misc.Point(.5*(this.left()+this.right()),.5*(this.top()+this.bottom()))},Misc.Rect.prototype.moveTopLeft=function(t){var e=this.width(),i=this.height();this.setLeft(t.x),this.setTop(t.y),this.setRight(t.x+e),this.setBottom(t.y+i)},Misc.Rect.prototype.moveBottomRight=function(t){var e=this.width(),i=this.height();this.setRight(t.x),this.setBottom(t.y),this.setLeft(t.x-e),this.setTop(t.y-i)},Misc.Rect.prototype.moveCenter=function(t){var e=this.width(),i=this.height();this.setRight(t.x+.5*e),this.setBottom(t.y+.5*i),this.setLeft(t.x-.5*e),this.setTop(t.y-.5*i)},Misc.Rect.prototype.intersects=function(t){var e=Math.max(this.left(),t.left()),i=this.left()+this.width(),n=t.left()+t.width();if(Math.min(i,n)>e){var o=Math.max(this.top(),t.top()),s=this.top()+this.height(),a=t.top()+t.height();if(Math.min(s,a)>o)return!0}return!1},Misc.Rect.prototype.adjusted=function(t,e,i,n){var o=new Misc.Point(this.left()+t,this.top()+e),s=new Misc.Point(this.right()+i,this.bottom()+n);return new Misc.Rect(o,s)},Misc.Rect.prototype.contains=function(t,e){return void 0===e||!0===e?t.x>this.left()&&t.y>this.top()&&t.x<this.right()&&t.y<this.bottom():t.x>=this.left()&&t.y>=this.top()&&t.x<=this.right()&&t.y<=this.bottom()},Misc.Rect.prototype.isEqual=function(t){return this.left()==t.left()&&this.right()==t.right()&&this.top()==t.top()&&this.bottom()==t.bottom()},Misc.Rect.prototype.leftTop=function(){return new Misc.Point(this.left(),this.top())},Misc.Rect.prototype.topLeft=function(){return this.leftTop()},Misc.Rect.prototype.rightTop=function(){return new Misc.Point(this.right(),this.top())},Misc.Rect.prototype.leftBottom=function(){return new Misc.Point(this.left(),this.bottom())},Misc.Rect.prototype.rightBottom=function(){return new Misc.Point(this.right(),this.bottom())},Misc.Rect.prototype.bottomRight=function(){return this.rightBottom()},Misc.Rect.prototype.toString=function(){return"["+this.left()+", "+this.top()+", "+this.width()+", "+this.height()+"]"},Misc.Font=function(t,e,i,n,o){"object"==typeof t?(this.th=t.th,this.name=t.name,this.style=t.style,this.weight=t.weight,this.fontColor=t.fontColor):(this.th=12,this.name="Arial",this.style="normal",this.weight="normal",this.fontColor="black"),"object"!=typeof t&&(void 0!==o&&(this.fontColor=o),void 0!==n&&(this.weight=n),void 0!==i&&(this.style=i),void 0!==e&&(this.name=e),void 0!==t&&(this.th=t))},Misc.Font.prototype.textSize=function(t){if(""==t||void 0===t)return new Misc.Size(0,0);var e=$("<canvas />"),i=e[0].getContext("2d");i.font=this.weight+" "+this.style+" "+this.th+"px "+this.name;var n=1.16*i.measureText(t).width,o=i.measureText("M").width;return e.remove(),new Misc.Size(n,o)},Misc.Font.prototype.toString=function(){return"[th:"+this.th+", name:"+this.name+", style:"+this.style+", weight:"+this.weight+", color:"+this.fontColor+"]"},Misc.MPathElement=function(t,e,i){this.type=MoveToElement,this.x=0,this.y=0,void 0!==e&&(this.x=e),void 0!==i&&(this.y=i),void 0!==t&&(this.type=t)},Misc.MPathElement.prototype.toString=function(){return"[MPathElement: type("+this.type+"), point"+new Misc.Point(this.x,this.y)+"]"},Misc.MPath=function(){var t=[];this.data={},this.elements=function(){return t}},Misc.MPath.prototype.elementCount=function(){return this.elements().length},Misc.MPath.prototype.elementAt=function(t){return t<0||t>=this.elements().length?null:this.elements()[t]},Misc.MPath.prototype.moveTo=function(t,e){this.elements().push(new Misc.MPathElement(MoveToElement,t,e))},Misc.MPath.prototype.lineTo=function(t,e){this.elements().push(new Misc.MPathElement(LineToElement,t,e))},Misc.MPath.prototype.cubicTo=function(t,e,i,n,o,s){var a=this.elements();a.push(new Misc.MPathElement(CurveToElement,t,e)),a.push(new Misc.MPathElement(CurveToElement,i,n)),a.push(new Misc.MPathElement(CurveToElement,o,s))},Misc.MPath.prototype.toString=function(){return"[MPath: elementCount = "+this.elements().length+"]"},Misc.MPath.prototype.isEmpty=function(){return 0==this.elements().length},Misc.MPath.prototype.addRect=function(t){var e=this.elements();e.push(new Misc.MPathElement(MoveToElement,t.left(),t.top())),e.push(new Misc.MPathElement(LineToElement,t.right(),t.top())),e.push(new Misc.MPathElement(LineToElement,t.right(),t.bottom())),e.push(new Misc.MPathElement(LineToElement,t.left(),t.bottom())),e.push(new Misc.MPathElement(LineToElement,t.left(),t.top()))},Misc.MPath.prototype.addPolygon=function(t){if(t&&t.length){this.elements().push(new Misc.MPathElement(MoveToElement,t[0].x,t[0].y));for(var e=1;e<t.length;++e)this.elements().push(new Misc.MPathElement(LineToElement,t[e].x,t[e].y))}},Misc.MPath.prototype.boundingRect=function(){for(var t=0,e=0,i=0,n=0,o=!1,s=0;s<this.elements().length;s++){var a=this.elements()[s];switch(a.type){case LineToElement:case MoveToElement:case CurveToElement:o||(t=a.x,e=a.y,i=a.x,n=a.y,o=!0),t=Math.min(t,a.x),i=Math.max(i,a.x),e=Math.min(e,a.y),n=Math.max(n,a.y)}}return new Misc.Rect(t,e,i-t,n-e)},define("miscObjects",function(){}),function(t,e){"function"==typeof define&&define.amd?define("regression",e):"undefined"!=typeof module?module.exports=e():t.regression=e()}(this,function(){"use strict";function t(t,e){var i=t.reduce(function(t,e){return t+e[1]},0)/t.length,n=t.reduce(function(t,e){var n=e[1]-i;return t+n*n},0);return 1-t.reduce(function(t,i,n){var o=e[n],s=i[1]-o[1];return t+s*s},0)/n}function e(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i}var i={linear:function(i,n,o){for(var s,a,r,l=[0,0,0,0,0],c=i.length,u=0;u<c;u++)null!==i[u][1]&&(l[0]+=i[u][0],l[1]+=i[u][1],l[2]+=i[u][0]*i[u][0],l[3]+=i[u][0]*i[u][1],l[4]+=i[u][1]*i[u][1]);return a=(c*l[3]-l[0]*l[1])/(c*l[2]-l[0]*l[0]),r=l[1]/c-a*l[0]/c,{r2:t(i,s=i.map(function(t){var e=t[0];return[e,a*e+r]})),equation:[a,r],points:s,string:"y = "+e(a,o.precision)+"x + "+e(r,o.precision)}},linearthroughorigin:function(i,n,o){for(var s,a,r=[0,0],l=0;l<i.length;l++)null!==i[l][1]&&(r[0]+=i[l][0]*i[l][0],r[1]+=i[l][0]*i[l][1]);return s=r[1]/r[0],{r2:t(i,a=i.map(function(t){var e=t[0];return[e,s*e]})),equation:[s],points:a,string:"y = "+e(s,o.precision)+"x"}},exponential:function(i,n,o){for(var s,a,r,l,c=[0,0,0,0,0,0],u=0;u<i.length;u++)null!==i[u][1]&&(c[0]+=i[u][0],c[1]+=i[u][1],c[2]+=i[u][0]*i[u][0]*i[u][1],c[3]+=i[u][1]*Math.log(i[u][1]),c[4]+=i[u][0]*i[u][1]*Math.log(i[u][1]),c[5]+=i[u][0]*i[u][1]);return s=c[1]*c[2]-c[5]*c[5],a=Math.exp((c[2]*c[3]-c[5]*c[4])/s),r=(c[1]*c[4]-c[5]*c[3])/s,{r2:t(i,l=i.map(function(t){var e=t[0];return[e,a*Math.exp(r*e)]})),equation:[a,r],points:l,string:"y = "+e(a,o.precision)+"e^("+e(r,o.precision)+"x)"}},logarithmic:function(i,n,o){for(var s,a,r,l=[0,0,0,0],c=i.length,u=0;u<c;u++)null!==i[u][1]&&(l[0]+=Math.log(i[u][0]),l[1]+=i[u][1]*Math.log(i[u][0]),l[2]+=i[u][1],l[3]+=Math.pow(Math.log(i[u][0]),2));return a=(c*l[1]-l[2]*l[0])/(c*l[3]-l[0]*l[0]),s=(l[2]-a*l[0])/c,{r2:t(i,r=i.map(function(t){var e=t[0];return[e,s+a*Math.log(e)]})),equation:[s,a],points:r,string:"y = "+e(s,o.precision)+" + "+e(a,o.precision)+" ln(x)"}},power:function(i,n,o){for(var s,a,r,l=[0,0,0,0],c=i.length,u=0;u<c;u++)null!==i[u][1]&&(l[0]+=Math.log(i[u][0]),l[1]+=Math.log(i[u][1])*Math.log(i[u][0]),l[2]+=Math.log(i[u][1]),l[3]+=Math.pow(Math.log(i[u][0]),2));return a=(c*l[1]-l[2]*l[0])/(c*l[3]-l[0]*l[0]),s=Math.exp((l[2]-a*l[0])/c),{r2:t(i,r=i.map(function(t){var e=t[0];return[e,s*Math.pow(e,a)]})),equation:[s,a],points:r,string:"y = "+e(s,o.precision)+"x^"+e(a,o.precision)}},polynomial:function(i,n,o){var s,a,r,l,c,u,h,d,p=[],v=[],f=0,m=0,g=i.length;for(a=void 0===n?3:n+1,r=0;r<a;r++){for(c=0;c<g;c++)null!==i[c][1]&&(f+=Math.pow(i[c][0],r)*i[c][1]);for(p.push(f),f=0,s=[],l=0;l<a;l++){for(c=0;c<g;c++)null!==i[c][1]&&(m+=Math.pow(i[c][0],r+l));s.push(m),m=0}v.push(s)}for(v.push(p),h=function(t,e){var i=0,n=0,o=0,s=0,a=0,r=t.length-1,l=new Array(e);for(i=0;i<r;i++){for(s=i,n=i+1;n<r;n++)Math.abs(t[i][n])>Math.abs(t[i][s])&&(s=n);for(o=i;o<r+1;o++)a=t[o][i],t[o][i]=t[o][s],t[o][s]=a;for(n=i+1;n<r;n++)for(o=r;o>=i;o--)t[o][n]-=t[o][i]*t[i][n]/t[i][i]}for(n=r-1;n>=0;n--){for(a=0,o=n+1;o<r;o++)a+=t[o][n]*l[o];l[n]=(t[r][n]-a)/t[n][n]}return l}(v,a),u=i.map(function(t){var e=t[0],i=h.reduce(function(t,i,n){return t+i*Math.pow(e,n)},0);return[e,i]}),d="y = ",r=h.length-1;r>=0;r--)d+=r>1?e(h[r],o.precision)+"x^"+r+" + ":1===r?e(h[r],o.precision)+"x + ":e(h[r],o.precision);return{r2:t(i,u),equation:h,points:u,string:d}},lastvalue:function(i,n,o){for(var s=[],a=null,r=0;r<i.length;r++)null!==i[r][1]&&isFinite(i[r][1])?(a=i[r][1],s.push([i[r][0],i[r][1]])):s.push([i[r][0],a]);return{r2:t(i,s),equation:[a],points:s,string:""+e(a,o.precision)}}};return function(t,e,n,o){var s="object"==typeof n&&void 0===o?n:o||{};return s.precision||(s.precision=2),"string"==typeof t?i[t.toLowerCase()](e,n,s):null}});var Static={},Enum={MousePatternCode:{MouseSelect1:0,MouseSelect2:1,MouseSelect3:2,MouseSelect4:3,MouseSelect5:4,MouseSelect6:5,MousePatternCount:6},KeyPatternCode:{KeySelect1:0,KeySelect2:1,KeyAbort:2,KeyLeft:3,KeyRight:4,KeyUp:5,KeyDown:6,KeyRedo:7,KeyUndo:8,KeyHome:9,KeyPatternCount:10},ScaleComponent:{Backbone:1,Ticks:2,Labels:4},Format:{RGB:0,Indexed:1},Mode:{FixedColors:0,ScaledColors:1},FitMode:{Auto:0,Spline:1,ParametricSpline:2}};Static.makeAbstract=function(t,e){if(t.constructor==e)throw new Error("Abstract classes can't be instantiated.")},Static.qBound=function(t,e,i){return Math.max(t,Math.min(e,i))},Array.prototype.mid=function(t,e=-1){return-1==e?this.slice(t+1):(e=Math.max(e,0),this.slice(t,t+e))},String.prototype.insertAt=function(t,e,i){return this.slice(0,t)+i+this.slice(t+Math.abs(e))},String.prototype.replaceAt=function(t,e){return this.substr(0,t)+e+this.substr(t+e.length)},Array.prototype.resize=function(t,e){for(;t>this.length;)this.push(e)},Array.prototype.containsPoint=function(t){for(var e=0;e<this.length;++e)if(this[e].isEqual(t))return!0;return!1},Static.MagnifierEnabled=1,Static.ZoomEnabled=2,Static.PanEnabled=4,Static.Locked=8,Static.LeftButtonDown=16,Static.DragCursor=32,Static.PanningInProgress=64,Static.MagnifierSearch=128,Static.ZoomerSearch=256,Static.PannerSearch=512,Static.NoRuler=1024,Static.Left=0,Static.Right=1,Static.Bottom=2,Static.Top=3,Static.LeftAndRight=75776,Static.BottomAndTop=153088,Static.NoTrackingText=0,Static.FullTrackingText=1,Static.PartialTrackingText=2,Static.ReadOnly=0,Static.Clickable=1,Static.Checkable=2,Static.ModeRole=0,Static.TitleRole=1,Static.IconRole=2,Static.UserRole=32,Static.NoRubberBand=0,Static.HLineRubberBand=1,Static.VLineRubberBand=2,Static.CrossRubberBand=3,Static.RectRubberBand=4,Static.EllipseRubberBand=5,Static.PolygonRubberBand=6,Static.UserRubberBand=100,Static.NoSelection=-1,Static.PointSelection=0,Static.RectSelection=1,Static.PolygonSelection=2,Static.AlwaysOff=0,Static.AlwaysOn=1,Static.ActiveOnly=2,Static.NoPen="noPen",Static.NoBrush="noBrush",Static.accuracyBase=3e5,Static.accuracyMaxSteps=.5*Static.accuracyBase;var _eps=1e-6,NoTick=-1,MinorTick=0,MediumTick=1,MajorTick=2,NTickTypes=3,BottomScale=0,TopScale=1,LeftScale=2,RightScale=3,Horizontal=1,Vertical=2,ScaleInterest=1,IncludeBorders=0,ExcludeMinimum=1,ExcludeMaximum=2,ExcludeBorders=3,yLeft=0,yRight=1,xBottom=2,xTop=3,axisCnt=4,Legend=1,AutoScale=2,Margins=4,NoCurve=-1,Lines=0,Sticks=1,Steps=2,Dots=3,UserCurve=100,Inverted=1,Fitted=2,RoundPoints=1,WeedOutPoints=2,FilterPoints=1,MinimizeMemory=2,NoLine=0,NoSymbol=-1,Ellipse=0,MRect=2,Diamond=3,Triangle=4,DTriangle=5,UTriangle=6,LTriangle=7,RTriangle=8,Cross=9,XCross=10,HLine=11,VLine=12,Star1=13,Star2=14,Hexagon=15,Path=16,Pixmap=17,MGraphic=18,SvgDocument=19,UserStyle=1e3;function insertLogBase(t,e){var i=t;if(t.includes(e))for(var n=e.replace("log","");-1!==i.indexOf(e);)for(var o=i.indexOf(e)+e.length,s=0,a=0;o<i.length;++o)if("("==i[o]&&s++,")"==i[o]&&a++,s==a){i=(i=i.insertAt(o,0,","+n)).replace(e,"log");break}return i}function logBaseAdjust(t){for(var e=["log2","log3","log4","log5","log6","log7","log8","log9","log10"],i=0;i<e.length;i++)t=insertLogBase(t,e[i]);return t}function EvaluateExp(t){var e,i=t;this.error=!1;var n=this;function o(){try{e=math.parse(i),i.includes("log")||(e=math.simplify(e))}catch(t){Static.alert(t.message),n.error=!0}}void 0!==i&&(i=logBaseAdjust(i),o()),this.setExpString=function(t){i=t,o()},this.getExpString=function(){return i},this.eval=function(t){this.error=!1;try{return e.eval(t)}catch(t){return this.errorMessage=t.message,this.error=!0,0}}}Static.NoButton=-1,Static.LeftButton=0,Static.MiddleButton=1,Static.MidButton=1,Static.RightButton=2,Static.Key_Escape=27,Static.Key_Plus=107,Static.Key_Minus=109,Static.Key_Ctrl=17,Static.Key_Shift=16,Static.Key_Return=13,Static.Key_Space=32,Static.Key_Left=37,Static.Key_Right=39,Static.Key_Up=38,Static.Key_Down=40,Static.Key_Undo=90,Static.Key_Redo=89,Static.Key_Home=36,Static.Key_I=73,Static.Key_O=79,Static.Key_unknown=-1,Static.NoModifier=0,Static.ShiftModifier=33554432,Static.ControlModifier=67108864,Static.AltModifier=134217728,Static.AlignRight=1,Static.AlignLeft=2,Static.AlignBottom=4,Static.AlignTop=8,Static.AlignCenter=16,Static.adjustForDecimalPlaces=function(t,e){void 0==e&&(e=5);var i=Math.pow(10,e);return Math.round(t*i)/i},Static.mFuzzyCompare=function(t,e){return Math.abs(t-e)<_eps},Static.m3FuzzyCompare=function(t,e,i){var n=Math.abs(1e-6*i);return e-t>n?-1:t-e>n?1:0},Static.bind=function(t,e,i){$(window).on(t,e,i)},Static.unbind=function(t,e){$(window).off(t,e)},Static.trigger=function(t,e){$(window).trigger(t,e)},Static.invert=function(t){t=[].slice.call(arguments).join(",").replace(/rgb\(|\)|rgba\(|\)|\s/gi,"").split(",");for(var e=0;e<t.length;e++)t[e]=(3===e?1:255)-t[e];return"rgb("+t.join(", ")+")"},Static.RGB2HTML=function(t,e,i){if("string"==typeof t){var n=t;n=n.replace("rgb(",""),t=parseInt(n),n=(n=n.replace(",","")).replace(t,""),e=parseInt(n),n=(n=n.replace(",","")).replace(e,""),i=parseInt(n)}if(void 0!==t.r){var o=t;t=t.r,e=o.g,i=o.b}return"#"+(16777216+i+256*e+65536*t).toString(16).substr(1)},Static.HTMLToRGB=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},Static.mRgb=function(t,e,i){return{r:t,g:e,b:i}},Static.colorNameToHex=function(t){var e={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return"r"==t[0]&&"g"==t[1]&&"b"==t[2]?Static.RGB2HTML(t):"#"==t[0]?t:void 0!==e[t.toLowerCase()]?e[t.toLowerCase()]:"#000000"},Static.sqr=function(t){return Math.pow(t,2)},Static.setElementIndex=function(t,e){var i=$(t).parent().children(),n=i[e];$(t).index()>e?(null==n&&(n=i[0]),n!=t&&null!=n&&$(n).before(t)):(null==n&&(n=i[i.length-1]),n!=t&&null!=n&&$(n).after(t))},Static.elementsFromPoint=function(t,e,i){var n,o=i[0],s=[];do{(n=document.elementFromPoint(t,e))!==o?(s.push(n),n.style.pointerEvents="none"):n=!1}while(n);return s.forEach(function(t){return t.style.pointerEvents="all"}),$(s)},Static.stopkeyPressPropagation=function(t){t.keydown(function(t){t.stopPropagation()})},window.matchMedia("print").addListener(function(t){t.matches?Static.trigger("beforePrint"):Static.trigger("afterPrint")}),window.onbeforeprint=function(t){Static.trigger("beforePrint")},window.onafterprint=function(t){Static.trigger("afterPrint")},Static.Cancel=0,Static.No=1,Static.Yes=2,Static.alertDlg=function(){var t=$('<div class="modal fade" id="alert_Modal" role="dialog">    <div id="dlg" class="modal-dialog">      \x3c!-- Modal content--\x3e      <div class="modal-content">        <div class="modal-header">          <button type="button" class="close" data-dismiss="modal">&times;</button>          <h4 class="modal-title"><b>Alert</b></h4>        </div>        <div class="modal-body">          <p id="msg"></p>        </div>        <div id="alertDlgFooter1" class="modal-footer">          <button type="button" class="btn btn-default" data-dismiss="modal">Ok</button>        </div>        <div id="alertDlgFooter2" class="modal-footer">          <button id="yes" type="button" class="btn btn-default">Yes</button>          <button id="no" type="button" class="btn btn-default">No</button>          <button id="cancel" type="button" class="btn btn-default">Cancel</button>        </div>      </div>    </div>  </div>');$("body").append(t),t.css("z-index",1e9),this.alert=function(e,i){$("#alertDlgFooter2").hide(),$("#alertDlgFooter1").show(),$("#msg").text(e),"small"==i?$("#dlg").addClass("modal-sm"):$("#dlg").removeClass("modal-sm"),t.modal({backdrop:"static"})};var e=this;this.alertYesNo=function(e,i,n){$(".close").hide(),this.alertYesCb=i,$("#alertDlgFooter1").hide(),$("#alertDlgFooter2").show(),$("#msg").text(e),"small"==n?$("#dlg").addClass("modal-sm"):$("#dlg").removeClass("modal-sm"),t.modal({backdrop:"static"})},$("#yes").click(function(){$(".close").click(),e.alertYesCb(Static.Yes)}),$("#no").click(function(){$(".close").click(),e.alertYesCb(Static.No)}),$("#cancel").click(function(){$(".close").click(),e.alertYesCb(Static.Cancel)})},Static.alert=function(t,e){void 0==Static.alertObj&&(Static.alertObj=new Static.alertDlg),Static.alertObj.alert(t,e)},Static.alertYesNo=function(t,e,i){void 0==Static.alertObj&&(Static.alertObj=new Static.alertDlg),Static.alertObj.alertYesNo(t,e,i)},Static.promptDlg=function(){var t=$('<div class="modal fade" id="promptModal" role="dialog">    <div id="prompt_dlg" class="modal-dialog">      \x3c!-- Modal content--\x3e      <div class="modal-content">        <div class="modal-header">          <button type="button" class="close" data-dismiss="modal"></button>          <h4 class="modal-title" id="prompt_title">Alert</h4>        </div>        <div class="modal-body">          <input id="prompt_msg" style="width:100%" autofocus />        </div>        <div class="modal-footer">          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>          <button id="prompt_ok" type="button" class="btn btn-default">Ok</button>        </div>      </div>    </div>  </div>');$("body").append(t);var e=this;this.prompt=function(e,i,n,o){"small"==o&&$("#prompt_dlg").addClass("modal-sm"),$("#prompt_title").text(e),$("#prompt_msg").val(i),$("#prompt_msg").select(),this.cb=n,t.modal({backdrop:"static"})},$("#prompt_ok").on("click",function(){e.cb($("#prompt_msg").val())?$(".close").click():$("#prompt_msg").select()})},Static.prompt=function(t,e,i,n){void 0==Static.promptObj&&(Static.promptObj=new Static.promptDlg),Static.promptObj.prompt(t,e,i,n)},Static.isMobile=function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(navigator.userAgent||navigator.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent||navigator.vendor||window.opera).substr(0,4))};var keywords=["asinh","acosh","atanh","acoth","asech","acsch","asin","acos","atan","acot","asec","acsc","sinh","cosh","tanh","coth","sech","csch","sin","cos","tan","sec","csc","cot","log2","log3","log4","log5","log6","log7","log8","log9","log10","deg","pi","PI","e","E"];function purgeKewords(t){for(var e=0;e<keywords.length;++e)for(;-1!=t.indexOf(keywords[e]);)t=t.replace(keywords[e],"");return t}function findIndepVar(t){for(var e=0,i=purgeKewords(t);e<i.length;){for(var n=i.charAt(e),o="";-1!="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(n)&&e<i.length;)o+=n,++e,n=i.charAt(e);if(1===o.length)return o;++e}}function regress(t,e,i,n,o){"linear"==e&&n&&(e="linearthroughorigin");for(var s=t.data().samples(),a=[],r=0;r<s.length;++r)a.push([s[r].x,s[r].y]);return Static.regression(e,a,i,o)}function integrate(t,e,i,n,o){Static.total_area=0,Static.total_volume=0,n=n||!1;for(var s=e;s<i;s+=o){var a=s+o/2;a>i&&(o-=a-i);var r=t(s+o/2);n?Static.total_volume+=r*o*r*Math.PI:Static.total_area+=r*o}return n?Static.total_volume:Static.total_area}define("static",["regression"],function(t){Static.regression=t}),$("body").on("contextmenu",function(t){t.preventDefault()}),integrate.transform=function(t,e,i){if(!(t[1]instanceof e.expression.node.SymbolNode))throw new Error("Second argument must be a symbol");var n=t[1].name,o=t[2].compile().eval(i),s=t[3].compile().eval(i),a=t[4]&&t[4].compile().eval(i),r=t[5]&&t[5].compile().eval(i),l=Object.create(i),c=t[0].compile();return integrate(function(t){return l[n]=t,c.eval(l)},o,s,a,r)},integrate.transform.rawArgs=!0,math.import({integrate:integrate}),Static.isAlpha=function(t){return(t=t.toLowerCase().charCodeAt(0))>96&&t<122},Static.printFn=function(){window.print()},Static.calcStep=function(t){return(t.maxXValue()-t.minXValue())/Static.accuracyMaxSteps},Static.addCSS=function(t){var e=document.getElementsByTagName("head")[0],i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.href=t,i.media="all",e.appendChild(i)};class WatchCurveName extends Watch{constructor(){super(),this.name=function(){return"Curve name"},this.computeWatch=function(){this._value=this._curveName}}}class WatchLeftRulerPosition extends Watch{constructor(t){super(t,Static.Left);var e=this;this.name=function(){return"Left ruler position"},this.valueType="number",this.computeWatch=function(){this._rulerLeft==Number.MAX_VALUE?this._value="Invalid":this._value=this._rulerLeft},this.cb=function(){var t=e._value,i=e._rulerGroup.setPosition(0,$(this).val());t!==i?Static.trigger("positionChanged",[e._rulerGroup.ruler(0),i]):$(this).val(i)}}}class WatchRightRulerPosition extends Watch{constructor(t){super(t,Static.Right);var e=this;this.name=function(){return"Right ruler position"},this.valueType="number",this.computeWatch=function(){this._rulerLeft==Number.MAX_VALUE?this._value="Invalid":this._value=this._rulerRight},this.cb=function(){var t=e._value,i=e._rulerGroup.setPosition(1,$(this).val());t!==i?Static.trigger("positionChanged",[e._rulerGroup.ruler(1),i]):$(this).val(i)}}}class WatchBottomRulerPosition extends Watch{constructor(t){super(t,Static.Bottom);var e=this;this.valueType="number",this.name=function(){return"Bottom ruler position"},this.computeWatch=function(){this._rulerBottom==Number.MAX_VALUE?this._value="Invalid":this._value=this._rulerBottom},this.cb=function(){var t=e._value,i=e._rulerGroup.setPosition(2,$(this).val());t!==i?Static.trigger("positionChanged",[e._rulerGroup.ruler(2),i]):$(this).val(i)}}}class WatchTopRulerPosition extends Watch{constructor(t){super(t,Static.Top);var e=this;this.valueType="number",this.name=function(){return"Top ruler position"},this.computeWatch=function(){this._rulerTop==Number.MAX_VALUE?this._value="Invalid":this._value=this._rulerTop},this.cb=function(){var t=e._value,i=e._rulerGroup.setPosition(3,$(this).val());t!==i?Static.trigger("positionChanged",[e._rulerGroup.ruler(3),i]):$(this).val(i)}}}class WatchSlope extends Watch{constructor(){super(Static.Left),this.name=function(){return"Slope at left ruler"},this.computeWatch=function(){if(this._rulerLeft!=Number.MAX_VALUE&&isFinite(this._rulerLeft)){if(this._curve.fn&&!this._curve.fn.includes("log")){var t=this._curve.fn;if("z"!=this._curve.variable)for(;-1!=t.indexOf(this._curve.variable);)t=t.replace(this._curve.variable,"z");if(this._curve.coeffs)for(var e=0;e<this._curve.coeffs.length;++e)for(;-1!=t.indexOf(this._curve.coeffs[e]);)t=t.replace(this._curve.coeffs[e],this._curve.coeffsVal[e]);var i=Math.max(this._curve.plot().axisDecimalPlaces(this._curve.yAxis()),this._curve.plot().axisDecimalPlaces(this._curve.xAxis()));return this._value=math.derivative(t,"z").eval({z:this._rulerLeft}),this._value=Static.adjustForDecimalPlaces(this._value,i),void((this._value>1e4||this._value<-1e4)&&(this._value=this._value.toExponential(i)))}var n=this._curve.dataSize(),o=this._rulerLeft;for(i=Math.max(this._curve.plot().axisDecimalPlaces(this._curve.yAxis()),this._curve.plot().axisDecimalPlaces(this._curve.xAxis())),e=0;e<n;++e)if(this._curve.sample(e).x>o){var s=this._curve.sample(e),a=this._curve.sample(e-1);return this._value=(s.y-a.y)/(s.x-a.x),this._value=Static.adjustForDecimalPlaces(this._value,i),void((this._value>1e4||this._value<-1e4)&&(this._value=this._value.toExponential(i)))}}else this._value="Invalid"}}}class WatchAreaBelowCurve extends Watch{constructor(){super(Static.LeftAndRight),this.name=function(){return"Area below curve"},this.computeWatch=function(){if(this._rulerLeft!=Number.MAX_VALUE&&isFinite(this._rulerLeft)&&this._rulerRight!=Number.MAX_VALUE&&isFinite(this._rulerRight)){if(this._curve.fn){if(a=logBaseAdjust(a=this._curve.fn),"z"!=this._curve.variable)for(;-1!=a.indexOf(this._curve.variable);)a=a.replace(this._curve.variable,"z");if(this._curve.coeffs)for(var t=0;t<this._curve.coeffs.length;++t)for(;-1!=a.indexOf(this._curve.coeffs[t]);)a=a.replace(this._curve.coeffs[t],this._curve.coeffsVal[t]);var e=this._curve.plot().axisDecimalPlaces(this._curve.yAxis())+this._curve.plot().axisDecimalPlaces(this._curve.xAxis()),i=Static.calcStep(this._curve);return this._value=math.eval("integrate("+a+", z,"+this._rulerLeft+","+this._rulerRight+",false,"+i+")"),this._value=Static.adjustForDecimalPlaces(this._value,e),void((this._value>1e4||this._value<-1e4)&&(this._value=this._value.toExponential(e)))}var n=this._curve.dataSize();this._value=0;for(t=1;t<n;++t){var o=this._curve.sample(t),s=this._curve.sample(t-1),a=Utility.linearEquationFromPoints(s,o),r=s.x;if(!(o.x<this._rulerLeft)&&!(s.x>this._rulerRight)){r<this._rulerLeft&&(r=this._rulerLeft);var l=o.x;l>this._rulerRight&&(l=this._rulerRight);e=this._curve.plot().axisDecimalPlaces(this._curve.yAxis())+this._curve.plot().axisDecimalPlaces(this._curve.xAxis()),i=Static.calcStep(this._curve);this._value+=math.eval("integrate("+a+", x,"+r+","+l+",false,"+i+")"),this._value=Static.adjustForDecimalPlaces(this._value,e),(this._value>1e4||this._value<-1e4)&&(this._value=this._value.toExponential(e))}}}else this._value="Invalid"}}}class WatchVolumeOfRevolution extends Watch{constructor(){function t(t,e,i){var n=t*i*Math.PI*t;return n+=.5*(e-t)*i*(t+(e-t)/3)*2*Math.PI}super(Static.LeftAndRight),this.name=function(){return"Volume of revolution"},this.computeWatch=function(){if(this._rulerLeft!=Number.MAX_VALUE&&isFinite(this._rulerLeft)){if(this._curve.fn){var e=this._curve.fn;if(e=logBaseAdjust(e),"x"!=this._curve.variable)for(;-1!=e.indexOf(this._curve.variable);)e=e.replace(this._curve.variable,"x");if(this._curve.coeffs)for(var i=0;i<this._curve.coeffs.length;++i)for(;-1!=e.indexOf(this._curve.coeffs[i]);)e=e.replace(this._curve.coeffs[i],this._curve.coeffsVal[i]);var n=2*this._curve.plot().axisDecimalPlaces(this._curve.yAxis())+this._curve.plot().axisDecimalPlaces(this._curve.xAxis()),o=Static.calcStep(this._curve);return this._value=math.eval("integrate("+e+", x,"+this._rulerLeft+","+this._rulerRight+",true,"+o+")"),this._value=Static.adjustForDecimalPlaces(this._value,n),void((this._value>1e4||this._value<-1e4)&&(this._value=this._value.toExponential(n)))}var s=this._curve.dataSize(),a=this._rulerLeft,r=this._rulerRight,l=0,c=0,u=0;for(i=1;i<s;++i){var h=this._curve.sample(i),d=this._curve.sample(i-1);if(!l&&h.x>a&&h.x<=r)l=t(d.y+(h.y-d.y)*(a-d.x)/(h.x-d.x),h.y,h.x-a);else if(l&&h.x<=r)u+=t(h.y,d.y,h.x-d.x);else if(h.x>r){if(d.x>=a){c=t(h.y+(h.y-d.y)*(r-h.x)/(h.x-d.x),d.y,r-d.x);break}c=t(h.y+(h.y-d.y)*(r-h.x)/(h.x-d.x),d.y+(h.y-d.y)*(a-d.x)/(h.x-d.x),r-a);break}}n=2*this._curve.plot().axisDecimalPlaces(this._curve.yAxis())+this._curve.plot().axisDecimalPlaces(this._curve.xAxis());this._value=Static.adjustForDecimalPlaces(l+u+c,n),(this._value>1e4||this._value<-1e4)&&(this._value=this._value.toExponential(n))}else this._value="Invalid"}}}define("basicWatch",["static","watch"],function(){}),function(t,e,i,n){"use strict";var o;t.single=(o=t({}),function(t){return o[0]=t,o}),t.fn.contextMenu=function(e,i,n){s[e]?i&&(i instanceof Array||"string"==typeof i||i.nodeType||i.jquery||(n=i,i=null)):(n=i,i=e,e="popup"),i instanceof Array&&"update"!=e&&(e="menu");var o=n;return t.inArray(e,["menu","popup","close","destroy"])>-1?(n=a.optionOtimizer(e,n),this.each(function(){var a=t(this);(o=t.extend({},t.fn.contextMenu.defaults,n)).baseTrigger||(o.baseTrigger=a),s[e].call(a,i,o)})):s[e].call(this,i,o),this},t.fn.contextMenu.defaults={triggerOn:"click",subMenuTriggerOn:"hover click",displayAround:"cursor",mouseClick:"left",verAdjust:0,horAdjust:0,top:"auto",left:"auto",closeOther:!0,containment:e,winEventClose:!0,position:"auto",closeOnClick:!0,onOpen:function(t,e){},afterOpen:function(t,e){},onClose:function(t,e){}};var s={menu:function(t,e){t=a.createMenuList(this,t,e),a.contextMenuBind.call(this,t,e,"menu")},popup:function(e,i){t(e).addClass("iw-contextMenu"),a.contextMenuBind.call(this,e,i,"popup")},update:function(e,i){var n=this;i=i||{},this.each(function(){var o=t(this),s=o.data("iw-menuData");s||(n.contextMenu("refresh"),s=o.data("iw-menuData"));var r=s.menu;if("object"==typeof e)for(var l=0;l<e.length;l++){var c=e[l].name,u=e[l].disable,h=e[l].fun,d=e[l].icon,p=e[l].img,v=e[l].title,f=e[l].className,m=r.children("li").filter(function(){return t(this).contents().filter(function(){return 3==this.nodeType}).text()==c}),g=e[l].subMenu;void 0!=u&&(u?m.addClass("iw-mDisable"):m.removeClass("iw-mDisable")),h&&m.unbind("click.contextMenu").bind("click.contextMenu",h),void 0!=v&&m.attr("title",v),void 0!=f&&m.attr("class",f);var b=m.find(".iw-mIcon");b.length&&b.remove(),p?m.prepend('<img src="'+p+'" align="absmiddle" class="iw-mIcon" />'):d&&m.prepend('<span align="absmiddle" class="iw-mIcon '+d+'" />'),g&&m.contextMenu("update",g)}a.onOff(r);var S=i.triggerOn;if(S){o.unbind(".contextMenu");for(var y=[],x=(l=0,(S=S.split(" ")).length);l<x;l++)y.push(S[l]+".contextMenu");o.bind(y.join(" "),a.eventHandler)}s.option=t.extend({},s.option,i),o.data("iw-menuData",s)})},refresh:function(){var e=this.filter(function(){return!!t(this).data("iw-menuData")}).data("iw-menuData"),i=this.filter(function(){return!t(this).data("iw-menuData")});e.option.baseTrigger=this,a.contextMenuBind.call(i,e.menuSelector,e.option)},open:function(e,i){var n=(i=i||{}).event||t.Event("click");i.top&&(n.clientY=i.top),i.left&&(n.clientX=i.left),this.each(function(){a.eventHandler.call(this,n)})},close:function(){var t=this.data("iw-menuData");t&&a.closeContextMenu(t.option,this,t.menu,null)},value:function(t){var e=this.data("iw-menuData");return e[t]?e[t]:e.option?e.option[t]:null},destroy:function(){var e=this.data("iw-menuData").menuId,i=t(".iw-contextMenu[menuId="+e+"]"),n=i.data("iw-menuData");n&&(1==n.noTrigger?i.hasClass("iw-created")?i.remove():(i.removeClass("iw-contextMenu "+e).removeAttr("menuId").removeData("iw-menuData"),i.find("li.iw-mTrigger").contextMenu("destroy")):(n.noTrigger--,i.data("iw-menuData",n)),this.unbind(".contextMenu").removeClass("iw-mTrigger").removeData("iw-menuData"))}},a={contextMenuBind:function(e,i,n){var o=this,s=t(e),r=s.data("iw-menuData");if(0!=s.length||0!=(s=o.find(e)).length){"menu"==n&&a.menuHover(s);var l=i.baseTrigger;if(r)r.noTrigger++,s.data("iw-menuData",r);else{var c;l.data("iw-menuData")?c=l.data("iw-menuData").menuId:(c=Math.ceil(1e5*Math.random()),l.data("iw-menuData",{menuId:c}));var u=s.clone();u.appendTo("body"),r={menuId:c,menuWidth:u.outerWidth(!0),menuHeight:u.outerHeight(!0),noTrigger:1,trigger:o},s.data("iw-menuData",r).attr("menuId",c),u.remove()}o.addClass("iw-mTrigger").data("iw-menuData",{menuId:r.menuId,option:i,menu:s,menuSelector:e,method:n});var h=i.triggerOn;-1!=h.indexOf("hover")&&(h=h.replace("hover","mouseenter"),-1!=l.index(o)&&l.add(s).bind("mouseleave.contextMenu",function(e){0==t(e.relatedTarget).closest(".iw-contextMenu").length&&t('.iw-contextMenu[menuId="'+r.menuId+'"]').fadeOut(100)})),o.delegate("input,a,.needs-click","click",function(t){t.stopImmediatePropagation()});for(var d=[],p=0,v=(h=h.split(" ")).length;p<v;p++)d.push(h[p]+".contextMenu");o.bind(d.join(" "),a.eventHandler),s.bind("click mouseenter",function(t){t.stopPropagation()}),s.delegate("li","click",function(e){i.closeOnClick&&!t.single(this).hasClass("iw-has-submenu")&&a.closeContextMenu(i,o,s,e)})}},eventHandler:function(n){n.preventDefault();var o=t(this),s=o.data("iw-menuData"),r=s.menu,l=r.data("iw-menuData"),c=s.option,u=c.containment,h={trigger:o,menu:r},d=u==e,p=-1==c.baseTrigger.index(o);!p&&c.closeOther&&t(".iw-contextMenu").css("display","none"),r.find(".iw-mSelected").removeClass("iw-mSelected"),c.onOpen.call(this,h,n);var v,f,m,g,b=t(u),S=b.innerHeight(),y=b.innerWidth(),x=0,w=0,M=l.menuHeight,_=l.menuWidth,P=0,k=0,A=v=parseInt(c.verAdjust),C=f=parseInt(c.horAdjust);if(d||(x=b.offset().top,w=b.offset().left,"static"==b.css("position")&&b.css("position","relative")),"cursor"==c.displayAround)g=(P=d?n.clientX:n.clientX+t(e).scrollLeft()-w)+_,(m=(k=d?n.clientY:n.clientY+t(e).scrollTop()-x)+M)>S&&(k-M<0?m-S<M-k?(k=S-M,v*=-1):(k=0,v=0):(k-=M,v*=-1)),g>y&&(P-_<0?g-y<_-P?(P=y-_,f*=-1):(P=0,f=0):(P-=_,f*=-1));else if("trigger"==c.displayAround){var L=o.outerHeight(!0),T=o.outerWidth(!0),R=d?o.offset().left-b.scrollLeft():o.offset().left-w,D=d?o.offset().top-b.scrollTop():o.offset().top-x,E=T;g=(P=R+T)+_,(m=(k=D)+M)>S&&(k-M<0?m-S<M-k?(k=S-M,v*=-1):(k=0,v=0):(k=k-M+L,v*=-1)),g>y&&(P-_<0?g-y<_-P?(P=y-_,f*=-1,E=-T):(P=0,f=0,E=0):(P=P-_-T,f*=-1,E=-T)),"top"==c.position?(k=D-M,v=A,P-=E):"left"==c.position?(P=R-_,f=C):"bottom"==c.position?(k=D+L,v=A,P-=E):"right"==c.position&&(P=R+T,f=C)}var $={position:d||p?"fixed":"absolute",display:"inline-block",height:"",width:""};if("auto"!=c.left&&(P=a.getPxSize(c.left,y)),"auto"!=c.top&&(k=a.getPxSize(c.top,S)),!d){var B=o.offsetParent().offset();p?(P=P+w-t(e).scrollLeft(),k=k+x-t(e).scrollTop()):(P-=w-B.left,k-=x-B.top)}$.left=P+f+"px",$.top=k+v+"px",r.css($),c.afterOpen.call(this,h,n),0==o.closest(".iw-contextMenu").length&&(t(".iw-curMenu").removeClass("iw-curMenu"),r.addClass("iw-curMenu"));var F={trigger:o,menu:r,option:c,method:s.method};t("html").unbind("click",a.clickEvent).click(F,a.clickEvent),t(i).unbind("keydown",a.keyEvent).keydown(F,a.keyEvent),c.winEventClose&&t(e).bind("scroll resize",F,a.scrollEvent)},scrollEvent:function(t){a.closeContextMenu(t.data.option,t.data.trigger,t.data.menu,t)},clickEvent:function(e){e.data.trigger.get(0)!==e.target&&0==t(e.target).closest(".iw-contextMenu").length&&a.closeContextMenu(e.data.option,e.data.trigger,e.data.menu,e)},keyEvent:function(e){e.preventDefault();var i=e.data.menu,n=e.data.option,o=e.keyCode;if(27==o&&a.closeContextMenu(n,e.data.trigger,i,e),"menu"==e.data.method){var s=t(".iw-curMenu"),r=s.children("li:not(.iw-mDisable)"),l=r.filter(".iw-mSelected"),c=r.index(l),u=function(t){a.selectMenu(s,t),t.data("iw-menuData")&&a.eventHandler.call(t[0],e)},h=function(){u(r.filter(":first"))},d=function(){u(r.filter(":last"))};switch(o){case 13:l.click();break;case 40:c==r.length-1||0==l.length?h():u(r.filter(":eq("+(c+1)+")"));break;case 38:0==c||0==l.length?d():u(r.filter(":eq("+(c-1)+")"));break;case 33:h();break;case 34:d();break;case 37:!function(){var t=s.data("iw-menuData").trigger.closest(".iw-contextMenu");0!=t.length&&(s.removeClass("iw-curMenu").css("display","none"),t.addClass("iw-curMenu"))}();break;case 39:!function(){var t=l.data("iw-menuData");if(t){a.eventHandler.call(l[0],e);var i=t.menu;i.addClass("iw-curMenu"),s.removeClass("iw-curMenu"),r=(s=i).children("li:not(.iw-mDisable)"),l=r.filter(".iw-mSelected"),h()}}()}}},closeContextMenu:function(n,o,s,r){t(i).unbind("keydown",a.keyEvent),t("html").unbind("click",a.clickEvent),t(e).unbind("scroll resize",a.scrollEvent),t(".iw-contextMenu").css("display","none"),t(i).focus(),n.onClose.call(this,{trigger:o,menu:s},r)},getPxSize:function(t,e){return isNaN(t)?-1!=t.indexOf("%")?parseInt(t)*e/100:parseInt(t):t},selectMenu:function(t,e){var i=t.find("li.iw-mSelected"),n=i.find(".iw-contextMenu");0!=n.length&&i[0]!=e[0]&&n.fadeOut(100),i.removeClass("iw-mSelected"),e.addClass("iw-mSelected")},menuHover:function(e){Date.now();e.children("li").bind("mouseenter.contextMenu click.contextMenu",function(i){t(".iw-curMenu").removeClass("iw-curMenu"),e.addClass("iw-curMenu"),a.selectMenu(e,t(this))})},createMenuList:function(i,n,o){var s=o.baseTrigger,r=Math.floor(1e4*Math.random());if("object"==typeof n&&!n.nodeType&&!n.jquery){var l=t('<ul class="iw-contextMenu iw-created iw-cm-menu" id="iw-contextMenu'+r+'"></ul>'),c=o.zIndex||i.css("zIndex");if(l.css("zIndex",c),t.each(n,function(e,i){var n=i.name,r=i.fun||function(){},c=i.subMenu,u=i.img||"",h=i.icon||"",d=i.title||"",p=i.className||"",v=i.disable,f=t('<li title="'+d+'" class="'+p+'">'+n+"</li>");u?f.prepend('<img src="'+u+'" align="absmiddle" class="iw-mIcon" />'):h&&f.prepend('<span align="absmiddle" class="iw-mIcon '+h+'" />'),v&&f.addClass("iw-mDisable"),c||f.bind("click.contextMenu",function(t){r.call(this,{trigger:s,menu:l},t)}),l.append(f),c&&(f.addClass("iw-has-submenu").append('<div class="iw-cm-arrow-right" />'),a.subMenu(f,c,s,o))}),-1==s.index(i[0]))i.append(l);else{var u=o.containment==e?"body":o.containment;t(u).append(l)}return a.onOff(t("#iw-contextMenu"+r)),"#iw-contextMenu"+r}if(0!=t(n).length){var h=t(n);return h.removeClass("iw-contextMenuCurrent").addClass("iw-contextMenu iw-cm-menu iw-contextMenu"+r).attr("menuId","iw-contextMenu"+r).css("display","none"),h.find("ul").each(function(e,i){var n=t(this),r=n.parent("li");r.append('<div class="iw-cm-arrow-right" />'),n.addClass("iw-contextMenuCurrent"),a.subMenu(r,".iw-contextMenuCurrent",s,o)}),a.onOff(t(".iw-contextMenu"+r)),".iw-contextMenu"+r}},subMenu:function(t,e,i,n){t.contextMenu("menu",e,{triggerOn:n.subMenuTriggerOn,displayAround:"trigger",position:"auto",mouseClick:"left",baseTrigger:i,containment:n.containment})},onOff:function(e){e.find(".iw-mOverlay").remove(),e.find(".iw-mDisable").each(function(){var e=t(this);e.append('<div class="iw-mOverlay"/>'),e.find(".iw-mOverlay").bind("click mouseenter",function(t){t.stopPropagation()})})},optionOtimizer:function(e,i){if(i)return"menu"==e&&(i.mouseClick||(i.mouseClick="right")),"right"==i.mouseClick&&"click"==i.triggerOn&&(i.triggerOn="contextmenu"),-1!=t.inArray(i.triggerOn,["hover","mouseenter","mouseover","mouseleave","mouseout","focusin","focusout"])&&(i.displayAround="trigger"),i}}}(jQuery,window,document),define("contextMenu",function(){});class LegendMenu{constructor(t){var e=null,i=null,n=[{name:"style",subMenu:[{name:"Rectangle",fun:function(){Utility.addSymbol(i,MRect)}},{name:"Cross",fun:function(){Utility.addSymbol(i,Cross)}},{name:"Diamond",fun:function(){Utility.addSymbol(i,Diamond)}},{name:"Ellipse",fun:function(){Utility.addSymbol(i,Ellipse)}},{name:"Diagonal cross",fun:function(){Utility.addSymbol(i,XCross)}},{name:"None",fun:function(){i&&i.setSymbol(null)}}]}],o=[{name:"style",subMenu:[{name:"Rectangle",fun:function(){Utility.addSymbol(i,MRect)}},{name:"Cross",fun:function(){Utility.addSymbol(i,Cross)}},{name:"Diamond",fun:function(){Utility.addSymbol(i,Diamond)}},{name:"Ellipse",fun:function(){Utility.addSymbol(i,Ellipse)}},{name:"Diagonal cross",fun:function(){Utility.addSymbol(i,XCross)}},{name:"None",fun:function(){i&&i.setSymbol(null)}}]},{name:"size",subMenu:[{name:"5x5",fun:function(){Utility.setSymbolSize(i,5)}},{name:"6x6",fun:function(){Utility.setSymbolSize(i,6)}},{name:"8x8",fun:function(){Utility.setSymbolSize(i,8)}},{name:"10x10",fun:function(){Utility.setSymbolSize(i,10)}},{name:"12x12",fun:function(){Utility.setSymbolSize(i,12)}},{name:"15x15",fun:function(){Utility.setSymbolSize(i,15)}}]},{name:"fill brush",fun:function(){var e=$('<input type="color" style="opacity:0;">'),n=i;if(n){var o=n.symbol();if(o){var s=o.brush(),a=s.color;"noBrush"==a&&(a="#000000"),e.val(Static.colorNameToHex(a)),e.change(function(){$(this).remove(),s.color=$(this).val(),o.setBrush(s),t.autoRefresh(),t.updateLegend(n)}),e.trigger("click")}}}},{name:"pen",subMenu:[{name:"color",fun:function(){var e=$('<input type="color" style="opacity:0;">'),n=i;if(n){var o=n.symbol();o&&(e.val(Static.colorNameToHex(o.pen().color)),e.change(function(){var e=o.pen();e.color=$(this).val(),o.setPen(e),t.autoRefresh(),t.updateLegend(n)}),e.trigger("click"))}}},{name:"pen width",subMenu:[{name:"1",fun:function(){Utility.setSymbolPenWidth(i,1)}},{name:"2",fun:function(){Utility.setSymbolPenWidth(i,2)}},{name:"3",fun:function(){Utility.setSymbolPenWidth(i,3)}},{name:"4",fun:function(){Utility.setSymbolPenWidth(i,4)}},{name:"5",fun:function(){Utility.setSymbolPenWidth(i,5)}}]}]}],s=[{pos:0,name:"curve brush",img:"images/brush.png",title:"Set the fill color.",fun:function(){Utility.setCurveBrush(i)}},{pos:4,name:"remove",img:"images/scissors.png",title:"Removes the curve from the plot.",fun:function(){i&&i.detach()}},{pos:5,name:"rename",img:"images/rename.png",title:"Renames the curve.",fun:function(){var t=i;t&&Utility.curveRenameDlg(t.title(),t.plot())}},{pos:7,name:"symbol",img:"images/symbol.png",title:"attach/modify curve symbol",subMenu:null},{pos:8,name:"pen",img:"images/pen.png",title:"modify/change curve pen",subMenu:[{name:"color",fun:function(){var t=$('<input type="color" style="opacity:0;">'),e=i;e&&(t.val(Static.colorNameToHex(e.pen().color)),t.change(function(){var t=e.pen();t.color=$(this).val(),e.setPen(t)}),t.trigger("click"))}},{name:"line style",subMenu:[{name:"solid",fun:function(){var t=i;if(t){var e=t.pen();e.style="solid",t.setPen(e)}}},{name:"dot",fun:function(){var t=i;if(t){var e=t.pen();e.style="dot",t.setPen(e)}}},{name:"dash",fun:function(){var t=i;if(t){var e=t.pen();e.style="dash",t.setPen(e)}}},{name:"dashDot",fun:function(){var t=i;if(t){var e=t.pen();e.style="dashDot",t.setPen(e)}}},{name:"dashDotDot",fun:function(){var t=i;if(t){var e=t.pen();e.style="dashDotDot",t.setPen(e)}}}]},{name:"pen width",subMenu:[{name:"1",fun:function(){var t=i;if(t){var e=t.pen();e.width=1,t.setPen(e)}}},{name:"2",fun:function(){var t=i;if(t){var e=t.pen();e.width=2,t.setPen(e)}}},{name:"3",fun:function(){var t=i;if(t){var e=t.pen();e.width=3,t.setPen(e)}}},{name:"4",fun:function(){var t=i;if(t){var e=t.pen();e.width=4,t.setPen(e)}}},{name:"5",fun:function(){var t=i;if(t){var e=t.pen();e.width=5,t.setPen(e)}}}]}]}];this.getCurve=function(){return i};var a=function(){};this.setMenuModificationCb=function(t){a=t};var r=function(){var r="";function l(t){return t.name==r}$(t.getLayout().getLegendDiv().children()[0]).mousedown(function(c){if(2==c.button){for(var u=c.pageX,h=c.pageY,d=[],p=document.elementFromPoint(u,h);p&&"BODY"!=p.tagName&&"HTML"!=p.tagName;)d.push(p),p.style.display="none",p=document.elementFromPoint(u,h);for(var v=0;v<d.length;v++)d[v].style.display="";e&&void 0!==e.menuAppended&&e.menuAppended&&e.contextMenu("destroy"),(e=$(d[0]).parent()).menuAppended=!0;var f=i=function(){if(void 0==e)return null;var i=e.text().replace(" ","");return t.findPlotCurve(i)}();if(f){a();var m=(r="symbol",s.findIndex(l));m>-1&&(s[m].subMenu=n,f&&f.symbol()&&(s[m].subMenu=o)),e.contextMenu(s,{triggerOn:"contextmenu touchstart",zIndex:1})}}})};function l(){s=s.sort(function(t,e){return t.pos-e.pos})}this.modifyMenu=function(t,e){if(null!=t){var i,n=-1,o=_.find(s,function(e,i){return n=i,e.name==t});if(void 0!=o)if(_.isEmpty(e))(i=n)>-1&&s.splice(i,1);else o.pos=e.pos||o.pos,o.name=e.name||o.name,o.img=e.img||o.img,o.title=e.title||o.title,o.fun=e.fun||o.fun,s=l()}else{_.isArray(e)?function(t){for(var e=0;e<t.length;++e)void 0===_.find(s,function(i){return i.name==t[e].name})?s.push(t[e]):console.warn('Multiple menu items with name "'+t[e].name+'"')}(e):void 0==_.find(s,function(t){return t.name==e.name})&&s.push(e),l()}},t.legend()?r():Static.bind("legendInserted",function(){r(),Static.unbind("legendInserted")})}}define("legendMenu",["static","contextMenu"],function(){});class HObject{constructor(t){let e=this,i=!1,n=$("body");this.m_objectName="jObject",this.m_mouseTracking=!0,this.m_filterObjs=[],void 0!==t&&(n=t&&t instanceof HObject?t.getElement():t);let o="click",s="mousedown",a="mouseup",r="mousemove";Static.isMobile()&&(o="tap",s="touchstart",a="touchend",r="touchmove"),this.mapToElement=function(t){if(!n)return;let e=new Misc.Point,i=n[0].getBoundingClientRect();return e.x=t.x-i.left,e.y=t.y-i.top,e},this.setElement=function(t){n=t},this.getElement=function(){return n},this.setEnabled_1=function(t){i!=t&&(i=t,this.elementEvent(i),i&&Static.trigger("enabled"))},this.event=function(t){return!0},this.elementEventOnCb=function(t){if(!e.m_filterObjs.length)return e.event(t);e.m_filterObjs.forEach(function(i){if(!i.eventFilter(e,t))return e.event(t)})},this.elementEvent=function(t){if(this instanceof HObject){let e=this;t?(e.getElement().on(s+" "+a+" "+r+" mouseenter mouseleave mousewheel",function(t){e.elementEventOnCb(t)}),$("body").on("keydown keyup",function(t){if(!e.m_filterObjs.length)return e.event(t);e.m_filterObjs.forEach(function(i){if(!i.eventFilter(e,t))return e.event(t)})})):(e.getElement().off(s+" "+a+" "+r+" mouseenter mouseleave mousewheel"),$("body").off("keydown keyup"))}},this.installEventFilter=function(t){this.m_filterObjs.push(t)},this.removeEventFilter=function(t){let e=this.m_filterObjs.indexOf(t);e>-1&&this.m_filterObjs.splice(e,1)},this.hasSameElement=function(t){return this.getElement()==t.getElement()},this.isEnabled=function(){return i},this.toString=function(){return"[HObject]"}}eventFilter(t,e){console.log("eventFilter() called")}setMouseTracking(t){if(this.getElement()&&t){let t=this;this.getElement().on("mousemove touchmove",function(e){t.elementEventOnCb(e)}),this.m_mouseTracking=!0}else this.getElement().off("mousemove touchmove"),this.m_mouseTracking=!1}hasMouseTracking(){return this.m_mouseTracking}setObjectName(t){this.m_objectName=t}objectName(){return this.m_objectName}isWidget(){return"[Widget]"==this.toString()}}define("hObject",function(){});class Widget extends HObject{constructor(t){super(t);let e=!0,i=0;var n=new Misc.Font(12);let o=$("<canvas />").attr({style:"position: absolute; background-color: transparent"});this.getElement()&&this.getElement().append(o),this.clearCanvas=function(){let t=this.getContext();t&&t.clearRect(0,0,o[0].width,o[0].height)},this.getContext=function(){let t=null;return this.getElement()?(o[0].width=parseFloat(this.getElement().css("width")),o[0].height=parseFloat(this.getElement().css("height")),t=o[0].getContext("2d")):null},this.width=function(){return o[0].width},this.height=function(){return o[0].height},this.setCanvasParent=function(t){this.getElement().append(o)},this.getCanvas=function(){return o},this.contentsRect=function(){let t=this.getElement();return new Misc.Rect(0,0,parseFloat(t.css("width")),parseFloat(t.css("height")))},this.setVisible=function(t){t||void 0===t?(this.getCanvas().show(),e=!0):(this.getCanvas().hide(),e=!1)},this.hide=function(){this.setVisible(!1)},this.show=function(){this.setVisible(!0)},this.font=function(){return n},this.setFont=function(t){n=t},this.isVisible=function(){return e},this.setZ=function(t){i!==t&&(i=t,o&&o.css("zIndex",i))},this.getZ=function(t){return i},this.toString=function(){return"[Widget]"}}setElement(t){this.super(t),this.setCanvasParent(t)}}define("widget",["static","hObject"],function(){});class WidgetOverlay extends Widget{constructor(t){super(t);this.draw=function(){let t=new PaintUtil.Painter(this);this.drawOverlay(t),t=null},this.toString=function(){return"[WidgetOverlay]"}}updateOverlay(){this.draw()}drawOverlay(t){console.warn("drawOverlay() not reimplemented")}}define("widgetOverlay",["static","widget"],function(){});class MousePattern{constructor(t,e){this.button=Static.NoButton,this.modifiers=Static.NoModifier,void 0!==t&&(this.button=t),void 0!==e&&(this.modifiers=e)}}function KeyPattern(t,e){this.key=Static.Key_unknown,this.modifiers=Static.NoModifier,void 0!==t&&(this.key=t),void 0!==e&&(this.modifiers=e)}class EventPattern extends HObject{constructor(t){super(t);const e=Enum.MousePatternCode.MouseSelect1,i=Enum.MousePatternCode.MouseSelect2,n=Enum.MousePatternCode.MouseSelect3,o=Enum.MousePatternCode.MouseSelect4,s=Enum.MousePatternCode.MouseSelect5,a=Enum.MousePatternCode.MouseSelect6,r=Enum.MousePatternCode.MousePatternCount;var l=[],c=[];this.initMousePattern=function(t){for(var c=0;c<r;++c)l.push(new MousePattern);switch(t){case 1:this.setMousePattern(e,Static.LeftButton),this.setMousePattern(i,Static.LeftButton,Static.ControlModifier),this.setMousePattern(n,Static.LeftButton,Static.AltModifier);break;case 2:this.setMousePattern(e,Static.LeftButton),this.setMousePattern(i,Static.RightButton),this.setMousePattern(n,Static.LeftButton,Static.AltModifier);break;default:this.setMousePattern(e,Static.LeftButton),this.setMousePattern(i,Static.RightButton),this.setMousePattern(n,Static.MidButton)}this.setMousePattern(o,l[e].button,l[e].modifiers|Static.ShiftModifier),this.setMousePattern(s,l[i].button,l[i].modifiers|Static.ShiftModifier),this.setMousePattern(a,l[n].button,l[n].modifiers|Static.ShiftModifier)},this.initKeyPattern=function(){for(var t=0;t<Enum.KeyPatternCode.KeyPatternCount;++t)c.push(new KeyPattern);this.setKeyPattern(Enum.KeyPatternCode.KeySelect1,Static.Key_Return),this.setKeyPattern(Enum.KeyPatternCode.KeySelect2,Static.Key_Space),this.setKeyPattern(Enum.KeyPatternCode.KeyAbort,Static.Key_Escape),this.setKeyPattern(Enum.KeyPatternCode.KeyLeft,Static.Key_Left),this.setKeyPattern(Enum.KeyPatternCode.KeyRight,Static.Key_Right),this.setKeyPattern(Enum.KeyPatternCode.KeyUp,Static.Key_Up),this.setKeyPattern(Enum.KeyPatternCode.KeyDown,Static.Key_Down),this.setKeyPattern(Enum.KeyPatternCode.KeyRedo,Static.Key_Plus),this.setKeyPattern(Enum.KeyPatternCode.KeyUndo,Static.Key_Minus),this.setKeyPattern(Enum.KeyPatternCode.KeyHome,Static.Key_Escape)},this.setMousePattern=function(t,e,i){void 0==e?l=t:(void 0==i&&(i=Static.NoModifier),t>=0&&t<r&&(l[t].button=e,l[t].modifiers=i))},this.setKeyPattern=function(t,e,i){void 0==e?l=t:(void 0==i&&(i=Static.NoModifier),t>=0&&t<Enum.KeyPatternCode.KeyPatternCount&&(c[t].key=e,c[t].modifiers=i))},this.mouseMatch=function(t,e){return t>=0&&t<r&&this.mouseMatch2(l[t],e)},this.mouseMatch2=function(t,e){return null!=e&&(t.button==Utility.button(e)&&t.modifiers==Utility.modifiers(e))},this.keyPattern=function(){return c},this.key=function(t){return null!=t&&t.keyCode},this.keyMatch=function(t,e){return t>=0&&t<Enum.KeyPatternCode.KeyPatternCount&&this.keyMatch2(c[t],e)},this.keyMatch2=function(t,e){return null!=e&&(t.key==this.key(e)&&t.modifiers==Utility.modifiers(e))},this.initKeyPattern(),this.initMousePattern(3)}}define("eventpattern",function(){});class PickerMachine{constructor(t){Static.Begin=0,Static.Append=1,Static.Move=2,Static.Remove=3,Static.End=4;var e=t,i=0;this.selectionType=function(){return e},this.state=function(){return i},this.setState=function(t){i=t},this.reset=function(){this.setState(0)}}}class PickerTrackerMachine extends PickerMachine{constructor(){super(Static.NoSelection),this.transition=function(t,e){var i=[];switch(e.type){case"mouseenter":case"mousemove":case"touchmove":0==this.state()?(i.push(Static.Begin),i.push(Static.Append),this.setState(1)):i.push(Static.Move);break;case"mouseleave":i.push(Static.Remove),i.push(Static.End),this.setState(0)}return i}}}class PickerClickPointMachine extends PickerMachine{constructor(){super(Static.PointSelection),this.transition=function(t,e){var i=[];switch(e.type){case"mousedown":case"touchstart":t.mouseMatch(Enum.MousePatternCode.MouseSelect1,e)&&(i.push(Static.Begin),i.push(Static.Append),i.push(Static.End));break;case"keydown":var n=e;t.keyMatch(Enum.KeyPatternCode.KeySelect1,n)&&(i.push(Static.Begin),i.push(Static.Append),i.push(Static.End))}return i}}toString(){return"[PickerClickPointMachine]"}}class PickerDragPointMachine extends PickerMachine{constructor(){super(Static.PointSelection),this.transition=function(t,e){var i=[];switch(e.type){case"mousedown":case"touchstart":t.mouseMatch(Enum.MousePatternCode.MouseSelect1,e)&&0==this.state()&&(i.push(Static.Begin),i.push(Static.Append),this.setState(1));break;case"mousemove":case"touchmove":case"mousewheel":0!=this.state()&&i.push(Static.Move);break;case"mouseup":case"touchend":0!=this.state()&&(i.push(Static.End),this.setState(0));break;case"keydown":var n=e;t.keyMatch(Enum.KeyPatternCode.KeySelect1,n)&&(0==this.state()?(i.push(Static.Begin),i.push(Static.Append),this.setState(1)):(i.push(Static.End),this.setState(0)))}return i}}toString(){return"[PickerDragPointMachine]"}}class PickerClickRectMachine extends PickerMachine{constructor(){super(Static.RectSelection),this.transition=function(t,e){var i=[];switch(e.type){case"mousedown":case"touchstart":if(t.mouseMatch(Enum.MousePatternCode.MouseSelect1,e))switch(this.state()){case 0:i.push(Static.Begin),i.push(Static.Append),this.setState(1);break;case 1:break;default:i.push(Static.End),this.setState(0)}break;case"mousemove":case"touchmove":case"mousewheel":0!=this.state()&&i.push(Static.Move);break;case"mouseup":case"touchend":t.mouseMatch(Enum.MousePatternCode.MouseSelect1,e)&&1==this.state()&&(i.push(Static.Append),this.setState(2));break;case"keydown":var n=e;t.keyMatch(Enum.KeyPatternCode.KeySelect1,n)&&(0==this.state()?(i.push(Static.Begin),i.push(Static.Append),this.setState(1)):1==this.state()?(i.push(Static.Append),this.setState(2)):2==this.state()&&(i.push(Static.End),this.setState(0)))}return i}}toString(){return"[PickerClickRectMachine]"}}class PickerDragRectMachine extends PickerMachine{constructor(){super(Static.RectSelection),this.transition=function(t,e){var i=[];switch(e.type){case"mousedown":case"touchstart":("touchstart"==e.type||t.mouseMatch(Enum.MousePatternCode.MouseSelect1,e))&&0==this.state()&&(i.push(Static.Begin),i.push(Static.Append),i.push(Static.Append),this.setState(2));break;case"mousemove":case"touchmove":case"mousewheel":0!=this.state()&&i.push(Static.Move);break;case"mouseup":case"touchend":2==this.state()&&(i.push(Static.End),this.setState(0));break;case"keydown":t.keyMatch(Enum.KeyPatternCode.KeySelect1,e)&&(0==this.state()?(i.push(Static.Begin),i.push(Static.Append),i.push(Static.Append),this.setState(2)):(i.push(Static.End),this.setState(0)))}return i}}toString(){return"[PickerDragRectMachine]"}}class PickerPolygonMachine extends PickerMachine{constructor(){super(Static.PolygonSelection),this.transition=function(t,e){var i=[];switch(e.type){case"mousedown":case"touchstart":t.mouseMatch(Enum.MousePatternCode.MouseSelect1,e)&&(0==this.state()?(i.push(Static.Begin),i.push(Static.Append),i.push(Static.Append),this.setState(1)):i.push(Static.Append)),t.mouseMatch(Enum.MousePatternCode.MouseSelect2,e)&&1==this.state()&&(i.push(Static.End),this.setState(0));break;case"mousemove":case"touchmove":case"mousewheel":0!=this.state()&&i.push(Static.Move);break;case"keydown":var n=e;t.keyMatch(Enum.KeyPatternCode.KeySelect1,n)?0==this.state()?(i.push(Static.Begin),i.push(Static.Append),i.push(Static.Append),this.setState(1)):i.push(Static.Append):t.keyMatch(Enum.KeyPatternCode.KeySelect2,n)&&1==this.state()&&(i.push(Static.End),this.setState(0))}return i}}toString(){return"[PickerPolygonMachine]"}}class PickerDragLineMachine extends PickerMachine{constructor(){super(Static.PolygonSelection),this.transition=function(t,e){var i=[];switch(e.type){case"mousedown":case"touchstart":t.mouseMatch(Enum.MousePatternCode.MouseSelect1,e)&&0==this.state()&&(i.push(Static.Begin),i.push(Static.Append),i.push(Static.Append),this.setState(1));break;case"keydown":t.keyMatch(Enum.KeyPatternCode.KeySelect1,e)&&(0==this.state()?(i.push(Static.Begin),i.push(Static.Append),i.push(Static.Append),this.setState(1)):(i.push(Static.End),this.setState(0)));break;case"mousemove":case"touchmove":case"mousewheel":0!=this.state()&&i.push(Static.Move);break;case"mouseup":case"touchend":0!=this.state()&&(i.push(Static.End),this.setState(0))}return i}}toString(){return"[PickerDragLineMachine]"}}define("pickermachine",["static","eventpattern"],function(){});class PickerRubberband extends WidgetOverlay{constructor(t,e){super(e),this.setZ(30);var i=t;this.drawOverlay=function(t){t.setPen(i.rubberBandPen()),t.setBrush(Static.NoBrush),i.drawRubberBand(t)}}}class PickerTracker extends WidgetOverlay{constructor(t,e){super(e),this.setZ(30);var i=t;this.drawOverlay=function(t){i.trackerOverlay().clearCanvas(),t.save(),t.setPen(i.trackerPen()),i.drawTracker(t),t.restore()}}}function PickerPrivateData(){this.enabled=!1,this.stateMachine=null,this.resizeMode,this.rubberBand=Static.NoRubberBand,this.rubberBandPen=new Misc.Pen("red",1,"solid"),this.trackerMode=Static.AlwaysOff,this.trackerPen=new Misc.Pen("red"),this.trackerFont,this.pickedPoints=[],this.isActive=!1,this.trackerPosition=new Misc.Point,this.mouseTracking=!1,this.rubberBandOverlay=null,this.trackerOverlay=null}class Picker extends EventPattern{constructor(t,e,i){super(i);let n="click",o="mousedown",s="mouseup",a="mousemove";var r;Static.isMobile()&&(n="tap",o="touchstart",s="touchend",a="touchmove");var l=[],c=null;void 0!==i&&"[Widget]"==i.toString()&&(c=i),this.init=function(t,e,i){(r=new PickerPrivateData).rubberBand=e,t&&(r.trackerFont=new Misc.Font(12),this.setEnabled_1(!0)),this.setTrackerMode(i),Picker.pickers.push(this)},this.getPickerData=function(){return r},this.setStateMachine=function(t){r.stateMachine!=t&&(this.reset(),r.stateMachine=t,r.stateMachine&&r.stateMachine.reset())},this.stateMachine=function(){return r.stateMachine},this.parentWidget=function(){return c},this.setRubberBand=function(t){r.rubberBand=t},this.rubberBand=function(){return r.rubberBand},this.setTrackerMode=function(t){r.trackerMode!=t&&(r.trackerMode=t)},this.trackerMode=function(){return r.trackerMode},this.setEnabled=function(t){if(r.enabled!=t){r.enabled=t;var e=this.parentWidget();e&&(t?e.installEventFilter(this):e.removeEventFilter(this)),this.updateDisplay()}},this.isEnabled=function(){return r.enabled},this.setTrackerFont=function(t){t!=r.trackerFont&&(r.trackerFont=t,this.updateDisplay())},this.trackerFont=function(){return r.trackerFont},this.setTrackerPen=function(t){t!=r.trackerPen&&(r.trackerPen=t,this.updateDisplay())},this.trackerPen=function(){return r.trackerPen},this.setRubberBandPen=function(t){t!=r.rubberBandPen&&(r.rubberBandPen=t,this.updateDisplay())},this.rubberBandPen=function(){return r.rubberBandPen},this.drawRubberBand=function(t){if(this.isActive()&&this.rubberBand()!=Static.NoRubberBand&&this.rubberBandPen().style!=Static.NoPen){var e=this.adjustedPoints(r.pickedPoints),i=Static.NoSelection;switch(r.stateMachine&&(i=r.stateMachine.selectionType()),i){case Static.NoSelection:case Static.PointSelection:if(e.length<1)return;var n=e[0],o=this.pickArea();switch(this.rubberBand()){case Static.VLineRubberBand:t.drawLine(n.x,o.top(),n.x,o.bottom());break;case Static.HLineRubberBand:t.drawLine(o.left(),n.y,o.right(),n.y);break;case Static.CrossRubberBand:t.drawLine(n.x,o.top(),n.x,o.bottom()),t.drawLine(o.left(),n.y,o.right(),n.y)}break;case Static.RectSelection:if(e.length<2)return;var s=new Misc.Rect(e[0],e[e.length-1]);switch(s=s.normalized(),this.rubberBand()){case Static.EllipseRubberBand:t.drawEllipse(s);break;case Static.RectRubberBand:t.drawRect(s)}break;case Static.PolygonSelection:if(e.length<2)return;this.rubberBand()==Static.PolygonRubberBand&&t.drawPolyline(e)}}},this.drawTracker=function(t){var e=this.trackerRect(this.trackerFont());if(null!==e){var i=this.trackerText(r.trackerPosition);""!==i&&(t.setFont(r.trackerFont),t.drawText(i,e.left(),e.bottom()))}},this.adjustedPoints=function(t){return t},this.selection=function(){return this.adjustedPoints(r.pickedPoints)},this.trackerPosition=function(){return r.trackerPosition},this.trackerRect=function(t){if(this.trackerMode()===Static.AlwaysOff)return null;if(this.trackerPosition().x<0||this.trackerPosition().y<0)return null;var e=this.trackerText(this.trackerPosition());if(""==e)return null;var i=t.textSize(e),n=new Misc.Rect(new Misc.Point,i.width,i.height),o=this.trackerPosition(),s=0;if(l.length.length>1&&this.rubberBand()!=Static.NoRubberBand){var a=l[0];s|=o.x>=a.x?Static.AlignRight:Static.AlignLeft,s|=o.y>a.y?Static.AlignBottom:Static.AlignTop}else s=Static.AlignTop|Static.AlignRight;var r=o.x;s&Static.AlignLeft?r-=n.width()+5:s&Static.AlignRight&&(r+=5);var c=o.y;s&Static.AlignBottom?c+=5:s&Static.AlignTop&&(c-=n.height()+5),n.moveTopLeft(new Misc.Point(r,c));var u=new Misc.Rect(new Misc.Point,this.trackerOverlay().width(),this.trackerOverlay().height()),h=Math.min(n.right(),u.right()-5),d=Math.min(n.bottom(),u.bottom()-5);n.moveBottomRight(new Misc.Point(h,d));var p=Math.max(n.left(),u.left()+5),v=Math.max(n.top(),u.top()+5);return n.moveTopLeft(new Misc.Point(p,v)),n},this.eventFilter=function(t,e){if(!this.isEnabled())return!1;if(t&&t==this.parentWidget())switch(e.type){case"mouseenter":this.widgetEnterEvent(e);break;case"mouseleave":this.widgetLeaveEvent(e);break;case o:this.widgetMousePressEvent(e);break;case s:this.widgetMouseReleaseEvent(e);break;case"dblclick":this.widgetMouseDoubleClickEvent(e);break;case a:this.widgetMouseMoveEvent(e);break;case"keydown":this.widgetKeyPressEvent(e);break;case"keyup":this.widgetKeyReleaseEvent(e);break;case"mousewheel":this.widgetWheelEvent(e)}return!1},this.transition=function(t){if(r.stateMachine){var e=r.stateMachine.transition(this,t);switch(t.type){case o:case s:case a:var i=t,n=new Misc.Point(i.clientX,i.clientY);Static.isMobile()&&(n=new Misc.Point(t.originalEvent.changedTouches[0].clientX,t.originalEvent.changedTouches[0].clientY)),n=this.parentWidget().mapToElement(n);break;default:n=this.parentWidget().mapToElement(new Misc.Point(0,0))}for(var l=0;l<e.length;l++)switch(e[l]){case Static.Begin:this.begin();break;case Static.Append:this.append(n);break;case Static.Move:this.move(n);break;case Static.Remove:this.remove();break;case Static.End:this.end()}}},this.reset=function(){r.stateMachine&&r.stateMachine.reset(),this.isActive()&&this.end(!1)},this.append=function(t){r.isActive&&(r.pickedPoints.push(t),this.updateDisplay(),Static.trigger("appended",t))},this.move=function(t){if(r.isActive){var e=r.pickedPoints.length-1;e>=0&&r.pickedPoints[e]!=t&&(r.pickedPoints[e]=t,this.updateDisplay(),Static.trigger("moved",t))}},this.remove=function(){if(r.isActive&&r.pickedPoints.length-1>0){var t=r.pickedPoints.pop();this.updateDisplay(),Static.trigger("removed",t)}},this.accept=function(t){return!0},this.isActive=function(){return r.isActive},this.pickedPoints=function(){return r.pickedPoints},this.setMouseTracking=function(t){var e=this.parentWidget();e&&(t?(r.mouseTracking=e.hasMouseTracking(),e.setMouseTracking(!0)):e.setMouseTracking(r.mouseTracking))},this.pickArea=function(){var t=this.parentWidget();return t?t.contentsRect():null},this.updateDisplay=function(){var t=this.parentWidget(),e=!1,i=!1;t&&t.isVisible()&&r.enabled&&(this.rubberBand()!==Static.NoRubberBand&&this.isActive()&&this.rubberBandPen().style!==Static.NoPen&&(e=!0),(this.trackerMode()==Static.AlwaysOn||this.trackerMode()==Static.ActiveOnly&&this.isActive())&&this.trackerPen()!=Static.NoPen&&(i=!0));var n=r.rubberBandOverlay;e?(null==n&&((n=new PickerRubberband(this,t)).setObjectName("PickerRubberBand"),r.rubberBandOverlay=n),n.updateOverlay()):n&&(r.rubberBandOverlay.getCanvas().hide(),r.rubberBandOverlay.getCanvas(),r.rubberBandOverlay=null);var o=r.trackerOverlay;i?(null==o&&((o=new PickerTracker(this,t)).setObjectName("PickerTracker"),r.trackerOverlay=o),o.setFont(r.trackerFont),o.updateOverlay()):o&&(r.trackerOverlay.getCanvas().hide(),r.trackerOverlay.getCanvas(),r.trackerOverlay=null)},this.rubberBandOverlay=function(){return r.rubberBandOverlay},this.trackerOverlay=function(){return r.trackerOverlay},void 0==t&&void 0==e?this.init(i,Static.NoRubberBand,Static.AlwaysOff):this.init(i,t,e)}widgetEnterEvent(t){this.transition(t)}widgetLeaveEvent(t){this.transition(t),this.getPickerData().trackerPosition=new Misc.Point(-1,-1),this.isActive()||this.updateDisplay()}widgetKeyReleaseEvent(t){this.transition(t)}widgetWheelEvent(t){var e=new Misc.Point(t.clientX,t.clientY);this.pickArea().contains(e)?this.getPickerData().trackerPosition=e:this.getPickerData().trackerPosition=new Misc.Point(-1,-1),this.updateDisplay(),this.transition(t)}widgetMouseDoubleClickEvent(t){this.transition(t)}widgetMouseMoveEvent(t){var e=new Misc.Point(t.clientX,t.clientY);Static.isMobile()&&(e=new Misc.Point(t.originalEvent.changedTouches[0].clientX,t.originalEvent.changedTouches[0].clientY)),e=this.mapToElement(e),this.pickArea().contains(e)?this.getPickerData().trackerPosition=e:this.getPickerData().trackerPosition=new Misc.Point(-1,-1),this.isActive()||this.updateDisplay(),this.transition(t)}widgetMousePressEvent(t){this.transition(t)}widgetKeyPressEvent(t){var e=0,i=0;if(this.keyMatch(Enum.KeyPatternCode.KeyLeft,t)?e=-1:this.keyMatch(Enum.KeyPatternCode.KeyRight,t)?e=1:this.keyMatch(Enum.KeyPatternCode.KeyUp,t)?i=-1:this.keyMatch(Enum.KeyPatternCode.KeyDown,t)?i=1:this.keyMatch(Enum.KeyPatternCode.KeyAbort,t)?this.reset():this.transition(t),0!==e||0!==i){var n=pickArea(),o=this.parentWidget().mapToElement(new Misc.Point(clientX,clientY)),s=o.x+e;s=Math.max(n.left(),s),s=Math.min(n.right(),s);var a=o.y+i;a=Math.max(n.top(),a),a=Math.min(n.bottom(),a)}}widgetMouseReleaseEvent(t){this.transition(t)}end(t){var e=this.getPickerData();return e.isActive?(this.setMouseTracking(!1),e.isActive=!1,Static.trigger("activated",!1),this.trackerMode()==Static.ActiveOnly&&(e.trackerPosition=new Misc.Point(-1,-1)),t&&(t=this.accept(e.pickedPoints)),t?Static.trigger("selected",e.pickedPoints):e.pickedPoints=[],this.updateDisplay()):t=!1,t}begin(){var t=this.getPickerData();if(t&&!t.isActive){if(t.pickedPoints=[],t.isActive=!0,Static.trigger("activated",!0),this.trackerMode()!==Static.AlwaysOff&&(t.trackerPosition.x<0||t.trackerPosition.y<0)){var e=this.parentWidget();e&&(t.trackerPosition=e.mapToElement(new Misc.Point(0,0)))}this.updateDisplay(),this.setMouseTracking(!0)}}trackerText(t){var e;switch(this.rubberBand()){case Static.HLineRubberBand:e=t.y.toString();break;case Static.VLineRubberBand:e=t.x.toString();break;default:e=t.x.toString()+", "+t.y.toString()}return e}}Picker.pickers=[],define("picker",["static","widgetOverlay","pickermachine"],function(){});class PlotPicker extends Picker{constructor(t,e,i,n,o){var s=0;if("number"!=typeof t&&(o=t,t=-1,e=-1,i=Static.NoRubberBand,n=Static.AlwaysOff,s=1),"number"!=typeof i&&(o=i,i=Static.NoRubberBand,n=Static.AlwaysOff,s=2),o instanceof Plot&&(o=o.getCentralWidget()),super(i,n,o),this.d_xAxis=-1,this.d_yAxis=-1,1==s){var a=this.plot();t=xBottom;a&&!a.axisEnabled(xBottom)&&a.axisEnabled(xTop)&&(t=xTop);e=yLeft;a&&!a.axisEnabled(yLeft)&&a.axisEnabled(yRight)&&(e=yRight),this.setAxis(t,e)}else this.d_xAxis=t,this.d_yAxis=e;this.setEnabled(!0),o&&o.setEnabled_1(!0)}setAxis(t,e){this.plot()&&(t==this.d_xAxis&&e==this.d_yAxis||(this.d_xAxis=t,this.d_yAxis=e))}xAxis(){return this.d_xAxis}yAxis(){return this.d_yAxis}plot(){var t=this.parentWidget();return t?t.plot:null}canvas(){return this.parentWidget()}scaleRect(){var t=null;if(this.plot()){var e=this.plot().axisScaleDiv(this.xAxis()),i=this.plot().axisScaleDiv(this.yAxis());t=(t=new Misc.Rect(e.lowerBound(),i.lowerBound(),e.range(),i.range())).normalized()}return t}invTransform(t){var e=this.plot().canvasMap(this.d_xAxis),i=this.plot().canvasMap(this.d_yAxis);if(void 0!==t.x){var n=t;return new Misc.Point(e.invTransform(n.x),i.invTransform(n.y))}return ScaleMap.invTransform_Rect(e,i,t)}transform(t){var e=this.plot().canvasMap(this.d_xAxis),i=this.plot().canvasMap(this.d_yAxis);if(void 0!==t.x){var n=t;return new Misc.Point(e.transform(n.x),i.transform(n.y))}return Static.mTransform(e,i,t)}trackerText(t){var e;switch(t=this.invTransform(t),this.rubberBand()){case Static.HLineRubberBand:e=t.y.toString();break;case Static.VLineRubberBand:e=t.x.toString();break;default:e=t.x.toString()+", "+t.y.toString()}return e}move(t){super.method(move(t)),Static.trigger("moved",invTransform(t))}append(t){super.method(append(t)),Static.trigger("appended",invTransform(t))}end(t=!0){if(!(t=super.end(t)))return!1;if(!this.plot())return!1;var e=this.selection();if(0==e.length)return!1;var i=Static.NoSelection;switch(this.stateMachine()&&(i=this.stateMachine().selectionType()),i){case Static.PointSelection:var n=this.invTransform(e[0]);Static.trigger("selected",n);break;case Static.RectSelection:if(e.length>=2){var o=e[0],s=e[e.length-1],a=new Misc.Rect(o,s).normalized();Static.trigger("selected",this.invTransform(a))}break;case Static.PolygonSelection:for(var r=[],l=0;l<e.length;l++)r.push(this.invTransform(e[l]));Static.trigger("selected",r)}return!0}}define("plotpicker",["static","picker"],function(){});class MPicker extends PlotPicker{constructor(t,e,i){super(t);var n=this;this._rulerPos=e,this._ruler=i;var o=0,s=0,a=0,r="",l=null,c=null,u=!1,h=0;this._ruler&&this._ruler.setAxes(this.xAxis(),this.yAxis());var d=Static.FullTrackingText;this.plot()&&(r=this.plot().cursor()),this.preventDragging=function(t){u=t},this.controlFlag=function(t){return Boolean(h&t)},this.setControlFlag=function(t,e){e?h|=t:h&=~t},this.prohibit=function(){o&&this.controlFlag(Static.ZoomerSearch)&&(this.setControlFlag(Static.ZoomEnabled,o.isEnabled()),this.controlFlag(Static.ZoomEnabled)&&o.setEnabled(!1)),s&&this.controlFlag(Static.PannerSearch)&&(this.setControlFlag(Static.PanEnabled,s.isEnabled()),this.controlFlag(Static.PanEnabled)&&s.setEnabled(!1)),a&&this.controlFlag(Static.MagnifierSearch)&&(this.setControlFlag(Static.MagnifierEnabled,a.isEnabled()),this.controlFlag(Static.MagnifierEnabled)&&a.setEnabled(!1))},this.restore=function(){o&&this.controlFlag(Static.ZoomEnabled)&&(o.setEnabled(!0),this.setControlFlag(Static.ZoomEnabled,!1)),s&&this.controlFlag(Static.PanEnabled)&&(s.setEnabled(!0),this.setControlFlag(Static.PanEnabled,!1)),a&&this.controlFlag(Static.MagnifierEnabled)&&(a.setEnabled(!0),this.setControlFlag(Static.MagnifierEnabled,!1))},this.setDragCursor=function(){u||this.controlFlag(Static.DragCursor)||t.cursor()==r&&(l=t.cursor(),c=this._dragCursorShape,t.setCursor(c),this.setControlFlag(Static.DragCursor,!0),this.prohibit(),Static.trigger("rulerSelected",n._ruler))},this.clearDragCursor=function(){this.controlFlag(Static.DragCursor)&&(this._ruler.plot().setCursor(l),this.setControlFlag(Static.DragCursor,!1),this.restore(),Static.trigger("rulerDeselected",n._ruler))},this.setTrackingTextStyle=function(t){d=t},this.trackerText=function(t){if(this._ruler.lock()||d==Static.NoTrackingText||!this.controlFlag(Static.LeftButtonDown)&&!this.controlFlag(Static.ZoomEnabled))return"";if(d==Static.FullTrackingText){var e=this.axisTitle();return e.length?e+"="+this._rulerPos:this._rulerPos}return d==Static.PartialTrackingText?this._rulerPos:""},this.panningFinished=function(){this.setControlFlag(Static.PanningInProgress,!1)},this.panningStarted=function(){this.setControlFlag(Static.PanningInProgress,!0)},$("#plotDivContainer").on("mouseup touchend",function(){Static.LeftButtonDown&&(Static.isMobile()&&n.clearDragCursor(),n.setControlFlag(Static.LeftButtonDown,!1))}),this.initMagnifier=function(){this.controlFlag(Static.MagnifierSearch)&&!a&&t.magnifier&&(a=t.magnifier)},this.initZoomer=function(){!this.controlFlag(Static.ZoomerSearch)&&o||t.zoomer&&(o=t.zoomer)},this.initPanner=function(){!this.controlFlag(Static.PannerSearch)&&s||t.panner&&(s=t.panner)},this.doMouseReleaseEvent=function(t){this._ruler.isVisible()&&!this.controlFlag(Static.PanningInProgress)&&t.button==Static.LeftButton&&(this.controlFlag(Static.LeftButtonDown)&&Static.trigger("positionChanged",[this._ruler,this._rulerPos]),this.setControlFlag(Static.LeftButtonDown,!1))}}widgetMouseReleaseEvent(t){this.doMouseReleaseEvent(t),super.widgetMouseReleaseEvent(t)}widgetLeaveEvent(t){this.doMouseReleaseEvent(t),super.widgetMouseReleaseEvent(t)}}class PickerV extends MPicker{constructor(t,e,i){super(t,e,i),this._dragCursorShape="w-resize",this.axisTitle=function(){return this._ruler.plot().axisTitle(this.xAxis())}}widgetMousePressEvent(t){if(this._ruler.isVisible()&&!this.controlFlag(Static.PanningInProgress)){if(2==t.button)return this.controlFlag(Static.DragCursor),!0;if(Static.isMobile()){var e=this._ruler.plot().transform(this.xAxis(),this._rulerPos),i=t.originalEvent.touches[0].clientX,n=t.originalEvent.touches[0].clientY,o=this.mapToElement(new Misc.Point(i,n)).x;!this.controlFlag(Static.LeftButtonDown)&&o<e+12&&o>e-12&&(this.setDragCursor(),this.setControlFlag(Static.LeftButtonDown,!0))}else if(t.button==Static.LeftButton||Static.isMobile())return this.controlFlag(Static.DragCursor)&&this.setControlFlag(Static.LeftButtonDown,!0),!0}}widgetMouseMoveEvent(t){if(t.preventDefault(),this._ruler.isVisible()&&!this.controlFlag(Static.PanningInProgress)&&!this.controlFlag(Static.Locked)){var e=this._ruler.plot(),i=t.clientX,n=t.clientY;if(Static.isMobile()){var o=t.originalEvent.changedTouches[0];i=parseInt(o.clientX),n=parseInt(o.clientY)}var s=this.mapToElement(new Misc.Point(i,n)).x,a=this._ruler.plot().transform(this.xAxis(),this._rulerPos);this.controlFlag(Static.LeftButtonDown)&&(this._rulerPos=e.invTransform(this.xAxis(),s),this._rulerPos=this._ruler._rulers.setPosition(this._ruler._rulers.rulerId(this._ruler),this._rulerPos),Static.trigger("positionChanging",[this._ruler,this._ruler._pos])),!this.controlFlag(Static.LeftButtonDown)&&s<a+2&&s>a-2&&this.setDragCursor(),this.controlFlag(Static.LeftButtonDown)||s<a+2&&s>a-2||this.clearDragCursor()}}}class PickerH extends MPicker{constructor(t,e,i){super(t,e,i),this._dragCursorShape="s-resize",this.axisTitle=function(){return this._ruler.plot().axisTitle(this.yAxis())}}widgetMousePressEvent(t){if(this._ruler.isVisible()&&!this.controlFlag(Static.PanningInProgress)){if(2==t.button)return this.controlFlag(Static.DragCursor),!0;if(Static.isMobile()){var e=this._ruler.plot().transform(this.yAxis(),this._rulerPos),i=t.originalEvent.touches[0].clientX,n=t.originalEvent.touches[0].clientY,o=this.mapToElement(new Misc.Point(i,n)).y;!this.controlFlag(Static.LeftButtonDown)&&o<e+12&&o>e-12&&(this.setDragCursor(),this.setControlFlag(Static.LeftButtonDown,!0))}else if(t.button==Static.LeftButton||Static.isMobile())return this.controlFlag(Static.DragCursor)&&this.setControlFlag(Static.LeftButtonDown,!0),!0}}widgetMouseMoveEvent(t){if(t.preventDefault(),this._ruler.isVisible()&&!this.controlFlag(Static.PanningInProgress)&&!this.controlFlag(Static.Locked)){var e=this._ruler.plot(),i=t.clientX,n=t.clientY;if(Static.isMobile()){var o=t.originalEvent.changedTouches[0];i=parseInt(o.clientX),n=parseInt(o.clientY)}var s=this.mapToElement(new Misc.Point(i,n)).y,a=this._ruler.plot().transform(this.yAxis(),this._rulerPos);this.controlFlag(Static.LeftButtonDown)&&(this._rulerPos=e.invTransform(this.yAxis(),s),this._rulerPos=this._ruler._rulers.setPosition(this._ruler._rulers.rulerId(this._ruler),this._rulerPos),Static.trigger("positionChanging",[this._ruler,this._ruler._pos])),!this.controlFlag(Static.LeftButtonDown)&&s<a+2&&s>a-2&&this.setDragCursor(),this.controlFlag(Static.LeftButtonDown)||s<a+2&&s>a-2||this.clearDragCursor()}}}define("mpicker",["static","plotpicker"],function(){});class PlotItem{constructor(t){Static.Rtti_PlotItem=0,Static.Rtti_PlotGrid=1,Static.Rtti_PlotScale=2,Static.Rtti_PlotLegend=3,Static.Rtti_PlotMarker=4,Static.Rtti_PlotCurve=5,Static.Rtti_PlotSpectroCurve=6,Static.Rtti_PlotIntervalCurve=7,Static.Rtti_PlotHistogram=8,Static.Rtti_PlotSpectrogram=9,Static.Rtti_PlotSVG=10,Static.Rtti_PlotTradingCurve=11,Static.Rtti_PlotBarChart=12,Static.Rtti_PlotMultiBarChart=13,Static.Rtti_PlotShape=14,Static.Rtti_PlotTextLabel=15,Static.Rtti_PlotZone=16,Static.Rtti_PlotUserItem=1e3;this.plotId="";var e,i=null,n=null,o=($("#centralDiv"),!0),s=0,a=0,r=xBottom,l=yLeft,c=t||"";this.rtti=Static.Rtti_PlotItem;var u=new Misc.Size(10,10);this.getLegendIconSize=function(){return u},this.setLegendIconSize=function(t){u=t,i&&i.updateLegend(this)},this.setItemInterest=function(t,i){i?e|=t:e&=~t,this.itemChanged()},this.testItemInterest=function(t){return e&t},this.plot=function(){return i},this.title=function(){return c},this.setTitle=function(t){c!==t&&(c=t,this.legendChanged(),this.itemChanged(),Static.trigger("titleChange",[this,t]))},this.clearCanvas=function(){this.getContext().clearRect(0,0,n[0].width,n[0].height)},this.attach=function(t){t!=i&&(i&&(this.getContext().clearRect(0,0,n[0].width,n[0].height),n.hide(),n=null,i.attachItem(this,!1)),(i=t)&&(null===n&&(n=$("<canvas />").attr({style:"position: absolute; background-color: transparent"}),i.getLayout().getCentralDiv().append(n),n.css({"border-radius":"inherit"}),0!=a&&n.css("zIndex",a)),i.attachItem(this,!0)))},this.detach=function(){this.attach(null)},this.setZ=function(t){a!==t&&(a=t,n&&n.css("zIndex",a),this.itemChanged())},this.getZ=function(t){return a},this.getCanvas=function(){return n},this.syncSizes=function(){var t=i.getLayout().getCentralDiv();n[0].width=parseFloat(t.css("width")),n[0].height=parseFloat(t.css("height"))},this.getContext=function(){return this.syncSizes(),n[0].getContext("2d")},this._setAxes=function(t,e){t!=xBottom&&t!=xTop||(r=t),e!=yLeft&&e!=yRight||(l=e),this.itemChanged()},this.setItemAttribute=function(t,e){e?s|=t:s&=~t,t==Legend&&this.legendChanged(),this.itemChanged()},this.testItemAttribute=function(t){return s&t},this.show=function(){this.setVisible(!0)},this.hide=function(){this.setVisible(!1)},this.doSetVisible=function(t){t!==o&&(o=t,t?n.show():n.hide(),this.itemChanged(),Static.trigger("visibilityChange",[this,t]))},this.isVisible=function(){return o},this.itemChanged=function(){i&&i.autoRefresh()},this.legendChanged=function(){this.testItemAttribute(Legend)&&i&&i.updateLegend(this)},this._setXAxis=function(t){t!=xBottom&&t!=xTop||(r=t,this.itemChanged())},this._setYAxis=function(t){t!=yLeft&&t!=yRight||(l=t,this.itemChanged())},this.xAxis=function(){return r},this.yAxis=function(){return l},this.getCanvasRect=function(){return this.syncSizes(),new Misc.Rect(new Misc.Point,n[0].width,n[0].height)},this.draw=function(t,e){},this.legendIconSize=function(){return this.getLegendIconSize()},this.legendIcon=function(t,e){return null},this.defaultIcon=function(t,e){var i=null;if(e.width>0&&e.height>0){var n=new Misc.Rect(0,0,e.width,e.height);i=new GraphicUtil.Graphic(null,e.width+1,e.height+1),new GraphicPainter(i).fillRect(n,t)}return i},this.legendData=function(){var t=new LegendData,e=this.title();t.setValue(Static.TitleRole,e);var i=this.legendIcon(0,this.legendIconSize());return i&&t.setValue(Static.IconRole,i),[t]},this.toString=function(){return'[PlotItem "'+this.plotId+'"]'}}boundingRect(){return new Misc.Rect}setVisible(t){this.doSetVisible(t)}setXAxis(t){this._setXAxis(t)}setYAxis(t){this._setYAxis(t)}setAxes(t,e){this._setAxes(t,e)}}define("plotItem",["static"],function(){});class PlotMarker extends PlotItem{constructor(t){super(t);var e="",i=new Misc.Font,n=Static.AlignCenter,o=Horizontal,s=2,a=new Misc.Pen,r=null,l=NoLine,c=0,u=0;this.rtti=Static.Rtti_PlotMarker,this.labelFont=function(){return i},this.setLabelFont=function(t){i=t},this.value=function(){return new Misc.Point(c,u)},this.xValue=function(){return c},this.yValue=function(){return u},this.setValue=function(t,e){if("object"==typeof t){var i=t;t=i.x,e=i.y}t==c&&e==u||(c=t,u=e,this.plot()&&this.plot().autoRefresh())},this.setXValue=function(t){this.setValue(t,u)},this.setYValue=function(t){this.setValue(c,t)},this.setLabel=function(t){t!=e&&(e=t)},this.label=function(){return e},this.setLabelAlignment=function(t){t!==n&&(n=t)},this.labelAlignment=function(){return n},this.setLabelOrientation=function(t){t!=o&&(o=t)},this.labelOrientation=function(){return o},this.setSpacing=function(t){t<0&&(t=0),t!=s&&(s=t)},this.spacing=function(){return s},this.setSymbol=function(t){r=t},this.symbol=function(){return r},this.draw=function(t,e){var i=this.getCanvasRect(),n=new Misc.Point(t.transform(c),e.transform(u)),o=this.getContext();if(this.drawLines(o,i,n),r&&r.style()!==NoSymbol){var s=r.size();i.adjusted(-s.width,-s.height,s.width,s.height).contains(n)&&r.drawSymbol(o,n)}this.drawLabel(o,i,n)},this.drawLabel=function(t,c,u){if(""!==e){var h=n,d=u,p=new Misc.Size(0,0);switch(l){case VLine:n&Static.AlignTop?(d.y=c.top(),h&=~Static.AlignTop,h|=Static.AlignBottom):n&Static.AlignBottom?(d.y=c.bottom()-1,h&=~Static.AlignBottom,h|=Static.AlignTop):d.y=c.center().y;break;case HLine:n&Static.AlignLeft?(d.x=c.left(),h&=~Static.AlignLeft,h|=Static.AlignRight):n&Static.AlignRight?(d.x=c.right()-1,h&=~Static.AlignRight,h|=Static.AlignLeft):d.x=c.center().x;break;default:if(r&&r.style()!==NoSymbol){var v=r.size();p=new Misc.Size((v.width+1)/2,(v.height+1)/2)}}var f=a.width/2;0==f&&(f=.5);var m=s,g=Math.max(f,p.width),b=Math.max(f,p.height),S=i.textSize(e);h&Static.AlignLeft?(d.x-=g+m,d.x-=o==Vertical?S.height:S.width):h&Static.AlignRight?d.x+=g+m:d.x-=o==Vertical?S.height/2:S.width/2,h&Static.AlignTop?(d.y-=b+m,o!=Vertical&&(d.y-=S.height)):h&Static.AlignBottom?(d.y+=b+m,o==Vertical&&(d.y+=S.width)):o==Vertical?d.y+=S.width/2:d.y-=S.height/2;var y=new PaintUtil.Painter(t);y.translate(d.x,d.y),y.setFont(i);var x=new Misc.Rect(0,0,S.width,S.height);o==Vertical?y.drawVerticalText(e,x.left()+.3*S.height,x.bottom()-.75*S.width):y.drawText(e,x.left(),x.bottom()-2)}},this.drawLines=function(t,e,i){if(l!=NoLine){var n=new PaintUtil.Painter(t);if(n.setPen(a),l==HLine||l==Cross){var o=i.y;n.drawLine(e.left(),o,e.right()-1,o)}if(l==VLine||l==Cross){var s=i.x;n.drawLine(s,e.top(),s,e.bottom()-1)}n=null}},this.setLineStyle=function(t){t!=l&&(l=t)},this.lineStyle=function(){return l},this.setLinePen=function(t){a=t,this.plot()&&this.plot().autoRefresh()},this.linePen=function(){return a},this.setZ(30),this.toString=function(){return"[PlotMarker]"},this.legendIcon=function(t,e){if(0===e.width&&0===e.height)return null;var i=new GraphicUtil.Graphic(null,e.width,e.height),n=new PaintUtil.Painter(i);return this.lineStyle(),this.symbol()&&this.symbol().drawGraphicSymbol(n,new Misc.Point(e.width,e.height),e),n=null,i}}}define("plotMarker",["static","plotItem"],function(){});class Ruler extends PlotMarker{constructor(t,e,i){super(e),this._picker=0,this._pos=Number.MAX_VALUE,this._rightClickMenu=0,this._rulers=null,i!=VLine&&i!=HLine||(this.setLineStyle(i),this.setLinePen(new Misc.Pen("blue"))),this.attach(t),this.setMouseTracking=function(t){this._picker.setMouseTracking(t)}}}Ruler.prototype.toString=function(){return"[Ruler]"},Ruler.prototype.setPicker=function(t){return!!t&&(this._picker=t,!0)},Ruler.prototype.setZoomerSearch=function(t){this._picker.setControlFlag(Static.ZoomerSearch,t),this._picker.initZoomer()},Ruler.prototype.setPannerSearch=function(t){this._picker.setControlFlag(Static.PannerSearch,t)},Ruler.prototype.setLock=function(t){this._picker.setControlFlag(Static.Locked,t),this._picker.clearDragCursor()},Ruler.prototype.lock=function(){return this._picker.controlFlag(Static.Locked)},Ruler.prototype.setTrackingTextStyle=function(t){this._picker.setTrackingTextStyle(t)},Ruler.prototype.trackingTextStyle=function(){return this._picker.trackingTextStyle()},Ruler.prototype.setTrackingTextFont=function(t){this._picker.setTrackerFont(t)},Ruler.prototype.trackingTextFont=function(){return this._picker.trackerFont()},Ruler.prototype.setTrackingTextColor=function(t){var e=this._picker.trackerFont();e.fontColor=t,this._picker.setTrackerFont(e)},Ruler.prototype.trackingTextColor=function(){return this._picker.trackerFont().color},Ruler.prototype.validatePosition=function(t,e){},Ruler.prototype.dragCursorShape=function(){return this._picker.dragCursorShape()},Ruler.prototype.setDragCursorShape=function(t){this._picker.setDragCursorShape(t)},Ruler.prototype.setRightClickMenu=function(t){};class RulerV extends Ruler{constructor(t,e,i){super(t,e,VLine),i&&(this._rulers=i),this._picker=new PickerV(t,this._pos,this)}}RulerV.prototype.setPosition=function(t){this._pos=t,this._picker._rulerPos=t,this.setXValue(this._pos)};class RulerH extends Ruler{constructor(t,e,i){super(t,e,HLine),i&&(this._rulers=i),this._picker=new PickerH(t,this._pos,this)}}RulerH.prototype.setPosition=function(t){this._pos=t,this._picker._rulerPos=t,this.setYValue(this._pos)},define("ruler",["static","plotMarker"],function(){});class MRulerV extends RulerV{constructor(t,e,i){super(t,e,i),this.rulers=function(){return this._rulers},this.validatePosition=function(){var t=!1,e=this.plot(),i=e.axisInterval(this.xAxis()),n=i.minValue(),o=i.maxValue(),s=e.transform(this._picker.xAxis(),n),a=e.transform(this._picker.xAxis(),o),r=e.transform(this._picker.xAxis(),this._pos),l=this._rulers.minX(),c=this._rulers.maxX(),u=2;Static.isMobile()&&(u=12);var h,d=.5*(this.rulers().ruler(0).linePen().width+this.rulers().ruler(1).linePen().width)+u,p=this._rulers.rulerId(this);0==p&&(this._rulers.ruler(1).isVisible()?(r>=(h=e.transform(this._picker.xAxis(),this._rulers.ruler(1)._pos))-d&&(this._pos=e.invTransform(this._picker.xAxis(),h-d),t=!0),r<s&&(this._pos=e.invTransform(this._picker.xAxis(),s),t=!0),this._rulers._curve&&this._pos<l&&(this._pos=l,t=!0)):(r<s&&(this._pos=e.invTransform(this._picker.xAxis(),s),t=!0),r>a&&(this._pos=e.invTransform(this._picker.xAxis(),a),t=!0),this._rulers._curve&&this._pos<l&&(this._pos=l,t=!0),this._rulers._curve&&this._pos>c&&(this._pos=c,t=!0)));1==p&&(this._rulers.ruler(0).isVisible()?(r<=(h=e.transform(this._picker.xAxis(),this._rulers.ruler(0)._pos))+d&&(this._pos=e.invTransform(this._picker.xAxis(),h+d),t=!0),r>a&&(this._pos=e.invTransform(this._picker.xAxis(),a),t=!0),this._rulers._curve&&this._pos>c&&(this._pos=c,t=!0)):(r<s&&(this._pos=e.invTransform(this._picker.xAxis(),s),t=!0),r>a&&(this._pos=e.invTransform(this._picker.xAxis(),a),t=!0),this._rulers._curve&&this._pos<l&&(this._pos=l,t=!0),this._rulers._curve&&this._pos>c&&(this._pos=c,t=!0)));return t}}setVisible(t){if(super.setVisible(t),t&&this._rulers){var e=this._rulers.rulerId(this);0==e&&this._rulers.ruler(1).isVisible()||1==e&&this._rulers.ruler(0).isVisible()}else this._pos=Number.MAX_VALUE,this._rulers.updateWatchesAndTable()}setLockAt(t){this.setPosition(t),this.setLock(!0),Static.trigger("positionChanged",[this,t])}}class MRulerH extends RulerH{constructor(t,e,i){super(t,e,i),this.rulers=function(){return this._rulers},this.validatePosition=function(){var t=this.plot(),e=t.axisInterval(this.yAxis()),i=e.minValue(),n=e.maxValue(),o=t.transform(this.yAxis(),i),s=t.transform(this.yAxis(),n),a=t.transform(this.yAxis(),this._pos),r=this._rulers.minY(),l=this._rulers.maxY(),c=2;Static.isMobile()&&(c=12);var u,h=.5*(this.rulers().ruler(2).linePen().width+this.rulers().ruler(3).linePen().width)+c,d=this._rulers.rulerId(this);2==d&&(this._rulers.ruler(3).isVisible()?(a<=(u=t.transform(this.yAxis(),this._rulers.ruler(3)._pos))+h&&(this._pos=t.invTransform(this.yAxis(),u+h)),a>o&&(this._pos=t.invTransform(this.yAxis(),o)),this._rulers._curve&&this._pos<r&&(this._pos=r)):(a<s&&(this._pos=t.invTransform(this.yAxis(),s)),a>o&&(this._pos=t.invTransform(this.yAxis(),o)),this._rulers._curve&&this._pos<r&&(this._pos=r),this._rulers._curve&&this._pos>l&&(this._pos=l)));3==d&&(this._rulers.ruler(2).isVisible()?(a>=(u=t.transform(this.yAxis(),this._rulers.ruler(2)._pos))-h&&(this._pos=t.invTransform(this.yAxis(),u-h)),a<s&&(this._pos=t.invTransform(this.yAxis(),s)),this._rulers._curve&&this._pos>l&&(this._pos=l)):(a>o&&(this._pos=t.invTransform(this.yAxis(),o)),a<s&&(this._pos=t.invTransform(this.yAxis(),s)),this._rulers._curve&&this._pos<r&&(this._pos=r),this._rulers._curve&&this._pos>l&&(this._pos=l)))}}setVisible(t){if(super.setVisible(t),t&&this._rulers){var e=this._rulers.rulerId(this);2==e&&this._rulers.ruler(3).isVisible()||3==e&&this._rulers.ruler(2).isVisible()}else this._pos=Number.MAX_VALUE,this._rulers.updateWatchesAndTable()}setLockAt(t){this.setPosition(t),this.setLock(!0),Static.trigger("positionChanged",[this,t])}}function Rulers(t,e){var i=this,n=[{name:"hide...",img:"images/hide.png",title:"hide the ruler.",fun:function(){t.rv.currentRuler.setVisible(!1),t.rv.currentRuler._picker.clearDragCursor(),t.rv.hasVisibleRuler()}},{name:"lock...",img:"images/lock.png",title:"lock the ruler in its current position.",fun:function(){t.rv.currentRuler.setLock(!0),t.rv.hasLockedRuler()}},{name:"lock at...",img:"images/lockAt.png",title:"lock the ruler at a specific position.",fun:function(){var e=0;e=t.rv.currentRuler instanceof RulerH?t.rv.currentRuler.yValue():t.rv.currentRuler.xValue(),Static.prompt("Enter a position",e,function(e){return t.rv.currentRuler.setLockAt(parseFloat(e)),!0},"small")}}],o=[{name:"Hide rulers",img:"images/hide.png",title:"Hide all rulers",fun:function(){t.rv.setVisible(!1)}},{name:"Show rulers",img:"images/show.png",title:"Show any hidden rulers",fun:function(){t.rv.setVisible(!0)}},{name:"Unlock rulers",img:"images/unlock.png",title:"Unlock any locked rulers",fun:function(){t.rv.unlockAllRulers()}}];if(this.setRulerDeselectMenu=function(t){o=t||[]},this._curve=0,this._watchTable=new WatchTable(this),this._editor=0,this._curveShapeItem=0,this._watchSetter=0,this._rulerList=null,this._watchList=[],this.sidebarVisible=!1,t.setAutoReplot(!0),this._rulerList=[new MRulerV(t,"v_ruler1",i),new MRulerV(t,"v_ruler2",i),new MRulerH(t,"h_ruler1",i),new MRulerH(t,"h_ruler2",i)],Static.isMobile())for(var s=0;s<4;++s){var a=this._rulerList[s].linePen();a.width=3*a.width}this._minX=0,this._maxX=0,this._minY=0,this._maxY=0,this.minX=function(){return this._minX},this.maxX=function(){return this._maxX},this.minY=function(){return this._minY},this.maxY=function(){return this._maxY},this.currentRuler=null;var r=t.getLayout().getCentralDiv(),l=!1;Static.bind("rulerSelected",function(t,e){i.currentRuler=e,l&&r.contextMenu("destroy"),l=!0,r.contextMenu(n,{triggerOn:"contextmenu",zIndex:1})}),Static.bind("rulerDeselected",function(){l&&r.contextMenu("destroy"),l=!0,r.contextMenu(o,{triggerOn:"contextmenu",zIndex:1})}),this.init(t),this.position=function(t){return t>-1&&t<4&&this._rulerList[t].isVisible()?this._rulerList[t]._pos:Number.MAX_VALUE},this.watch=function(t){return t>=0&&t<this._watchList.length?this._watchList[t]:null},this.addToWatchList=function(t){return this._watchList.push(t),this._watchList.length-1},this.setWatchEnabled=function(t,e){if(t>=0&&t<this._watchList.length){if(this._watchList[t].isEnable()==e)return;this._watchList[t].setEnable(e),e&&this.updateWatch(this._watchList[t]),this._watchTable.updateWatchTable()}},this.isWatchEnabled=function(t){return t>=0&&t<this._watchList.length&&this._watchList[t].isEnable()},Static.bind("showSidebar",function(t,e){i.sidebarVisible=e}),this.updateWatchesAndTable=function(){i.sidebarVisible&&this._curve&&(this.updateWatches(),this._watchTable&&this._watchTable.updateWatchTable())},this.setVisible=function(t){this._rulerList.forEach(function(e){e.setVisible(t)}),t&&Static.trigger("curveAdjusted"),this.refresh()},this.hasVisibleRuler=function(){for(var t=0;t<4;++t)if(this._rulerList[t].isVisible())return!0;return!1},this.hasLockedRuler=function(){for(var t=0;t<4;++t)if(this._rulerList[t].lock())return!0;return!1},this.updateWatch=function(e){if(e.isEnable()){var i=t.autoReplot();t.setAutoReplot(!1),e.setCurveName(this._curve.title()),e.setRulerLeft(this.position(0)),e.setRulerRight(this.position(1)),e.setRulerBottom(this.position(2)),e.setRulerTop(this.position(3)),this._curve&&e.setCurve(this._curve),t.setAutoReplot(i),t.autoRefresh(),e.computeWatch()}},this.updateWatches=function(){var e=t.autoReplot();t.setAutoReplot(!1),this._watchList.forEach(function(t){i.updateWatch(t)}),t.setAutoReplot(e),t.autoRefresh()},this.setEnabled=function(t){this._rulerList.forEach(function(e){e._picker.setEnabled(t)})},this.setMouseTracking=function(t){this._rulerList.forEach(function(e){e._picker.setMouseTracking(t)})},this.setZoomerSearch(!0),this.setPannerSearch(!0),this.setMouseTracking(!0),Static.bind("zoomerAdded",function(t,e){i.setZoomerSearch(i._rulerList[0]._picker.controlFlag(Static.ZoomerSearch)),i.setMouseTracking(!0)}),Static.bind("pannerAdded",function(t,e){i.setPannerSearch(i._rulerList[0]._picker.controlFlag(Static.PannerSearch)),i.setMouseTracking(!0)}),Static.bind("currentCurveChanged",function(t,e){i.setCurrentCurve(e)}),t.rv=this,Static.trigger("rulerDeselected")}Rulers.prototype.unlockAllRulers=function(){for(var t=0;t<this._rulerList.length;++t)this._rulerList[t].setLock(!1)},Rulers.prototype.setCurrentCurve=function(t){this._curve!=t&&this.doSetCurrentCurve(t)},Rulers.prototype.refresh=function(){var t=this._rulerList[0].plot();if(this._curve&&this._curve.isVisible()){var e=t.axisInterval(this._rulerList[0].xAxis()),i=e.minValue(),n=e.maxValue(),o=t.axisInterval(this._rulerList[0].yAxis()),s=o.minValue(),a=o.maxValue();i=this._minX<i?i:this._minX,this._rulerList[0].setPosition(i),n=this._maxX<n?this._maxX:n,this._rulerList[1].setPosition(n),s=this._minY<s?s:this._minY,this._rulerList[2].setPosition(s),a=this._maxY<a?this._maxY:a,this._rulerList[3].setPosition(a),this.updateWatchesAndTable()}else this.resetXPositions(),this.resetYPositions()},Rulers.prototype.doSetRulersAxes=function(t,e){var i=this._rulerList[0].plot(),n=i.autoReplot();i.setAutoReplot(!1);this._rulerList[0].xAxis(),this._rulerList[0].yAxis();for(var o=0;o<this._rulerList.length;++o)this._rulerList[o].setAxes(t,e),this._rulerList[o]._picker.setAxis(t,e);i.setAutoReplot(n),i.autoRefresh()},Rulers.prototype.adjustToCurve=function(t){this._curve=t,this._curve&&(this._curve.isVisible()&&(this._minX=this._curve.minXValue(),this._maxX=this._curve.maxXValue(),this._minY=this._curve.minYValue(),this._maxY=this._curve.maxYValue()),this.doSetRulersAxes(this._curve.xAxis(),this._curve.yAxis()),this._curveShapeItem),this.refresh()},Rulers.prototype.doSetCurrentCurve=function(t){this._curve;this.adjustToCurve(t)},Rulers.prototype.setCurrentCurve=function(t){this._curve!=t&&this.doSetCurrentCurve(t)},Rulers.prototype.currentCurve=function(){return this._curve},Rulers.prototype.init=function(t){var e=this;this._rulerList;Static.bind("positionChanged",function(t,i,n){e.updateWatchesAndTable()}),Static.bind("pointAdded pointRemoved",function(t,i){e.doSetCurrentCurve(i)}),Static.bind("axisChanged",function(t,i,n){e.currentCurve()===n&&e.adjustToCurve(n)}),this._rulerList[0].linePen().color="red",this._rulerList[2].linePen().color="red",this.resetXPositions(),this.resetYPositions()},Rulers.prototype.setZoomerSearch=function(t){this._rulerList.forEach(function(e){e.setZoomerSearch(t),e._picker.initZoomer()})},Rulers.prototype.setPannerSearch=function(t){this._rulerList.forEach(function(e){e.setPannerSearch(t),e._picker.initPanner()})},Rulers.prototype.setPosition=function(t,e){if(e=parseFloat(e),this._rulerList[t]._pos==e)return e;var i=this._rulerList[t]._pos;return this._rulerList[t]._pos=e,this._rulerList[t].validatePosition(),this._rulerList[t]._pos!==i&&this._rulerList[t].setPosition(this._rulerList[t]._pos),this._rulerList[t]._pos},Rulers.prototype.resetXPositions=function(){var t=this._rulerList[0].plot(),e=t.autoReplot();t.setAutoReplot(!1);var i=t.axisInterval(this._rulerList[0].xAxis());this._curve&&this._curve.isVisible()?(i.minValue()>this._minX?this._rulerList[0].setPosition(i.minValue()):this._rulerList[0].setPosition(this._minX),i.maxValue()<this._maxX?this._rulerList[1].setPosition(i.maxValue()):this._rulerList[1].setPosition(this._maxX)):(this._rulerList[0].setPosition(i.minValue()),this._rulerList[1].setPosition(i.maxValue())),t.setAutoReplot(e),t.autoRefresh()},Rulers.prototype.resetYPositions=function(){var t=this._rulerList[0].plot(),e=t.autoReplot();t.setAutoReplot(!1);var i=t.axisInterval(this._rulerList[0].yAxis());this._curve&&this._curve.isVisible()?(this._rulerList[2].setPosition(this._minY),this._rulerList[3].setPosition(this._maxY),i.minValue()>this._minY?this._rulerList[2].setPosition(i.minValue()):this._rulerList[2].setPosition(this._minY),i.maxValue()<this._maxY?this._rulerList[3].setPosition(i.maxValue()):this._rulerList[3].setPosition(this._maxY)):(this._rulerList[2].setPosition(i.minValue()),this._rulerList[3].setPosition(i.maxValue())),t.setAutoReplot(e),t.autoRefresh()},Rulers.prototype.ruler=function(t){return t<4&&t>=0?this._rulerList[t]:0},Rulers.prototype.rulerId=function(t){return t?this._rulerList.indexOf(t):-1},Rulers.prototype.preventDragging=function(t){for(var e=0;e<this._rulerList.length;++e)this._rulerList[e]._picker.preventDragging(t)},Rulers.prototype.setRulersXAxis=function(t){var e=this._rulerList[0].plot(),i=e.autoReplot();e.setAutoReplot(!1);for(var n=0;n<this._rulerList.length;++n)this._rulerList[n].setXAxis(t),this._rulerList[n]._picker.setAxis(t,this._rulerList[n].yAxis());this._curveShapeItem&&this._curveShapeItem.setAxes(t,this._rulerList[0].yAxis()),e.setAutoReplot(i),e.autoRefresh()},Rulers.prototype.setRulersYAxis=function(t){var e=this._rulerList[0].plot(),i=e.autoReplot();e.setAutoReplot(!1);for(var n=0;n<this._rulerList.length;++n)this._rulerList[n].setYAxis(t),this._rulerList[n]._picker.setAxis(this._rulerList[n].xAxis(),t);this._curveShapeItem&&this._curveShapeItem.setAxes(_rulerList[0].xAxis(),t),e.setAutoReplot(i),e.autoRefresh()};class WatchTable{constructor(t){this.removeAllRows=function(){for(var t=$("#watchTableBody").children(),e=0;e<t.length;++e)$("#watchTableBody")[0].removeChild(t[e])},this.insertInfoRow=function(t){!function(t){var e=t.name(),i=t.value();if("number"==t.valueType||"text"==t.valueType){for(var n=e;-1!=n.indexOf(" ");)n=n.replace(" ","");var o=$("<tr><td>"+e+"</td></tr>");$("#watchTableBody").append(o);var s=$("<td><input id="+n+" type="+t.valueType+'  style="width:100%" value='+i+" /></td>");o.append(s),$("#"+n).on("change",t.cb)}else $("#watchTableBody").append($("<tr><td>"+e+"</td><td>"+i+"</td></tr>"))}(t)},this.updateWatchTable=function(){if(this.removeAllRows(),t._curve&&t._curve.isVisible())for(var e=t._watchList.length,i=0;i<e;++i){var n=t.watch(i);n.isEnable()&&this.insertInfoRow(n)}}}}define("rulers",["static","mpicker","ruler"],function(){});class SideBar{constructor(t){var e=$('<div id="sideBar" style="position: absolute;  background-color:#ffc9ae;  border-style: solid; border-width:1px">                <div class="noSelect" style="text-align:center"><h4>Sidebar</h4></div>                <div style="margin:4px">                <select id="currentCurve" style="width:100%">                </select></div>                <div><input id="fnDisplay" style="width:100%" readonly /></div>                <div style="margin:4px"><label>onchcange: <input id="onchange" type="checkbox" readonly /> </label>\t\t\t\tdamp: <input id="damp" style="width:30%" type="number" min="1" value="80"/>\t\t\t\t</div>                                <div style="height:30%; overflow: auto">                <div id="coeff_cont0" style="background-color:lightBlue; margin:2px; border-radius:4px">                <div style="">Coefficient:<b><span id="coeff0">?</span></b></div>                <div style="margin:4px">                <div style="" title="A coefficient in the function that could be ajusted">                value:<input id="coeff_val0" style="width:60%" type="number" value="1" />                </div>                </div>                </div>                <br>                <div id="coeff_cont1" style="background-color:lightBlue; margin:2px; border-radius:4px">                <div style="">Coefficient:<b><span id="coeff1">?</span></b></div>                <div style="margin:4px">                <div style="" title="A coefficient in the function that could be ajusted">                value:<input id="coeff_val1" style="width:60%" type="number" value="1" />                </div>                </div>                </div>                <br>                <div id="coeff_cont2" style="background-color:lightBlue; margin:2px; border-radius:4px">                <div style="">Coefficient:<b><span id="coeff2">?</span></b></div>                <div style="margin:4px">                <div style="" title="A coefficient in the function that could be ajusted">                value:<input id="coeff_val2" style="width:60%" type="number" value="1" />                </div>                </div>                </div>                <br>                <div id="coeff_cont3" style="background-color:lightBlue; margin:2px; border-radius:4px">                <div style="">Coefficient:<b><span id="coeff3">?</span></b></div>                <div style="margin:4px">                <div style="" title="A coefficient in the function that could be ajusted">                value:<input id="coeff_val3" style="width:60%" type="number" value="1" />                </div>                </div>                </div>                <br>                <div id="coeff_cont4" style="background-color:lightBlue; margin:2px; border-radius:4px">                <div style="">Coefficient:<b><span id="coeff4">?</span></b></div>                <div style="margin:4px">                <div style="" title="A coefficient in the function that could be ajusted">                value:<input id="coeff_val4" style="width:60%" type="number" value="1" />                </div>                </div>                </div>                </div>                                <div style="text-align:center"><h4>Watches</h4></div>                <div class="table-responsive" style="height: 47%">                                                <table class="table table-bordered" id="watchTable">                <thead>                <tr>                <th>Watch</th>                <th>Value</th>                </tr>                </thead>                <tbody id="watchTableBody">                </tbody>                </table>                                                </div>                </div>');$("#plotDiv").parent().append(e),e.css("bottom",0),e.css("top",0);var i=this,n=!1,o=!1;function s(){t.itemList(Static.Rtti_PlotCurve);!function(){for(var t=0;t<5;++t)$("#coeff_cont"+t).hide()}();var e=t.findPlotCurve($("#currentCurve").val());if(e){$("#fnDisplay").val(""),e.fn&&$("#fnDisplay").val("f("+e.variable+")="+e.fn);var i=80,n=(e.upperX-e.lowerX)/i,o=e.coeffs||[],s=o.length;$("#damp").on("input",function(){var t=parseInt($("#damp").val());!_.isFinite(t)||t<1?$("#damp").val(i):i=t,n=(e.upperX-e.lowerX)/i;for(var o=0;o<s;++o)$("#coeff_val"+o).attr("step",n)}),s>5&&(s=5);for(var a=0;a<s;++a)$("#coeff"+a).html(o[a]),$("#coeff_val"+a).attr("step",n),$("#coeff_val"+a).val(e.coeffsVal[a]),$("#coeff_cont"+a).show()}}function a(){!function(){for(var e=$("#currentCurve").children(),i=0;i<e.length;++i)$("#currentCurve")[0].removeChild(e[i]);var n=t.itemList(Static.Rtti_PlotCurve);for(i=0;i<n.length;++i)if(n[i].isVisible()){var o=$("<option>"+n[i].title()+"</option>");o.attr("value",n[i].title()),$("#currentCurve").append(o)}}(),s(),Static.trigger("currentCurveChanged",t.findPlotCurve($("#currentCurve").val()))}Static.bind("beforePrint",function(){n&&(o=!0,c(!1))}),Static.bind("afterPrint",function(){o&&(o=!1,c(!0))}),$("#sideBar").hide();var r=!1;this.sidebarReDisplay=function(){return r},this.setSidebarReDisplay=function(t){r=t},this.setTop=function(t){e.css("top",t)},this.initSidebar=function(){a()},this.currentCurveName=function(){return $("#currentCurve").val()};var l=20;function c(e){Static.trigger("showSidebar",e),e?($("#sideBar").show(),$("#plotDiv").css("width",100-l-1+"%"),a()):($("#sideBar").hide(),$("#plotDiv").css("width","98%")),n=e,t.autoRefresh()}function u(){for(var e=t.findPlotCurve($("#currentCurve").val()),i=e.coeffs,n=e.fn,o=0;o<i.length;++o){for(;-1!=n.indexOf(i[o]);)n=n.replace(i[o],$("#coeff_val"+o).val());e.coeffsVal[o]=$("#coeff_val"+o).val()}var s=e.data();e.unboundedRange?s.setFn(n):s.setSamples(Utility.makeSamples({fx:n,lowerX:e.lowerX,upperX:e.upperX,numOfSamples:e.numOfSamples})),Static.trigger("curveAdjusted"),t.autoRefresh()}function h(e){var i;t.findPlotCurve($("#currentCurve").val()).coeffsVal,["coeff_val0","coeff_val1","coeff_val2","coeff_val3","coeff_val4"].indexOf(e[0].id);return i=e.val(),!!_.isFinite(parseFloat(i))}$("#sideBar").css("width",l-.2+"%"),$("#sideBar").css("left",100-l+.1+"%"),this.isSideBarVisible=function(){return n},this.showSidebar=function(t){c(t)},Static.bind("titleChange",function(){a()}),$("#currentCurve").change(function(){Static.total_volume=void 0,Static.total_area=void 0,Static.prevStart=void 0,Static.prevEnd=void 0,s(),Static.trigger("currentCurveChanged",t.findPlotCurve($("#currentCurve").val()))}),Static.bind("pointAdded pointRemoved",function(t,e){$("#currentCurve").val(e.title)}),Static.bind("itemAttached",function(e,n,o){n.rtti==Static.Rtti_PlotCurve&&(o||t.itemList(Static.Rtti_PlotCurve).length&&t.hasVisiblePlotCurve()||i.showSidebar(!1),Static.trigger("visibilityChange",[n,o]))}),$("#coeff_val0, #coeff_val1, #coeff_val2, #coeff_val3, #coeff_val4").on("input",function(){$("#onchange")[0].checked||h($(this))&&u()}),$("#coeff_val0, #coeff_val1, #coeff_val2, #coeff_val3, #coeff_val4").on("change",function(){var e;h($(this))?$("#onchange")[0].checked&&u():$(this).val((e=$(this),t.findPlotCurve($("#currentCurve").val()).coeffsVal[["coeff_val0","coeff_val1","coeff_val2","coeff_val3","coeff_val4"].indexOf(e[0].id)]))}),Static.trigger("sidebarCreated",i)}}define("sideBar",function(){});class MyOverlay extends WidgetOverlay{constructor(t,e){super(t);this.eventObject=e,this.curve=null,this.toString=function(){return"[MyOverlay]"}}drawOverlay(t){let e=this.curve.plot().canvasMap(this.curve.xAxis()),i=this.curve.plot().canvasMap(this.curve.yAxis()),n=e.transform(this.eventObject.p.x),o=i.transform(this.eventObject.p.y);t.setBrush(new Misc.Brush("lightGrey")),t.drawCircle(n,o,8)}}class MyObject extends HObject{constructor(t,e){super();var i=this;this._plot=t,this._dmin=10,this._cb,this.selected=!1,this.button=Static.LeftButton,this.modifiers=Static.NoModifier,void 0!==e&&(this._cb=e),this.selectorWidgetOverlay=new MyOverlay(t.getCentralWidget(),this),Static.bind("visibilityChange",function(t,e,n){i.selectorWidgetOverlay.curve===e&&(n||(i.selectorWidgetOverlay.clearCanvas(),this.selected=!1))}),this.toString=function(){return"[MyObject]"},this.mouseDown=function(t){return t.button==this.button&&Utility.modifiers(t)==this.modifiers&&this.selected&&(null==this._cb?alert("Curve: "+this.selectorWidgetOverlay.curve.title()+"; point: ("+this.p.x+", "+this.p.y+")"):this._cb(this.selectorWidgetOverlay.curve,this.p)),!0},this.showMarker=function(e){var n=t.autoReplot();t.setAutoReplot(!1);var o=this.selectorWidgetOverlay.curve;i.mPos.setAxes(o.xAxis(),o.yAxis()),function(e){var n=i.selectorWidgetOverlay.curve,o=t.axisScaleDiv(n.xAxis()),s=t.axisScaleDiv(n.yAxis()),a=new Misc.Rect(o.lowerBound(),s.lowerBound(),o.range(),s.range());a=a.normalized();var r=0;r|=e.x<a.left()+.3*a.width()?Static.AlignRight:Static.AlignLeft,r|=e.y-.3*a.height()>a.top()?Static.AlignBottom:Static.AlignTop,i.mPos.setLabelAlignment(r)}(e),i.mPos.setVisible(!0),i.mPos.setValue(e),i.mPos.setLabel("("+Static.adjustForDecimalPlaces(e.x,t.axisDecimalPlaces(o.xAxis())).toString()+", "+Static.adjustForDecimalPlaces(e.y,t.axisDecimalPlaces(o.yAxis())).toString()+")"),t.setAutoReplot(n),t.autoRefresh()},this.hideMarker=function(){i.mPos.setVisible(!1)}}eventFilter(t,e){if(!Static.isMobile()){if("mousedown"==e.type)this.mouseDown(e);else if("mouseleave"==e.type)this.selected&&(this.selectorWidgetOverlay.clearCanvas(),this.selected=!1);else if("mousemove"==e.type){e.preventDefault();let o=this._plot.itemList(Static.Rtti_PlotCurve);if(!o.length)return;i=t.mapToElement({x:e.clientX,y:e.clientY});let s={distance:-1},a=-1,r=-1,l=1e10,c=-1;for(n=0;n<o.length;++n)(o[n].isVisible()||"[SyntheticPointData]"!=o[n].data().toString())&&(a=o[n].closestPoint(i,s),s.distance<l&&(l=s.distance,c=n,r=a));if(-1==r)return;if("[SyntheticPointData]"==o[c].data().toString())return;this.p=o[c].data().samples()[r],this.selected||this.selectorWidgetOverlay.clearCanvas(),l<this._dmin?(this.selectorWidgetOverlay.curve=o[c],this.selected||(this.selectorWidgetOverlay.draw(),this.selected=!0,this.showMarker(this.p),Static.trigger("pointSelected"))):(this.selected=!1,this.hideMarker(),Static.trigger("pointNotSelected"))}return!0}if("touchstart"==e.type){let o=this._plot.itemList(Static.Rtti_PlotCurve);if(!o.length)return;var i=t.mapToElement({x:e.originalEvent.touches[0].clientX,y:e.originalEvent.touches[0].clientY});let s={distance:-1},a=-1,r=-1,l=1e10,c=-1;for(var n=0;n<o.length;++n)(o[n].isVisible()||"[SyntheticPointData]"!=o[n].data().toString())&&(a=o[n].closestPoint(i,s),s.distance<l&&(l=s.distance,c=n,r=a));if(-1==r)return;this.p=o[c].data().samples()[r],l<this._dmin&&(null==this._cb?alert("Curve: "+o[c].title()+"; point: ("+this.p.x+", "+this.p.y+")"):this._cb(o[c],this.p))}}}class CurveClosestPoint{constructor(t,e){this.eventHandlingObject=new MyObject(t,e),void 0!==e&&(this.eventHandlingObject.cb=e),this.cw=t.getCentralWidget(),this.cw.setEnabled_1(!0),this.eventHandlingObject.mPos=new PlotMarker("Marker");var i=this.eventHandlingObject.mPos.labelFont();i.th=14,i.fontColor="red",this.eventHandlingObject.mPos.setLabelFont(i),this.eventHandlingObject.mPos.setLabel("AAAAAb"),this.eventHandlingObject.mPos.attach(t),this.eventHandlingObject.mPos.setVisible(!1)}setDistance(t){this.eventHandlingObject._dmin=t}setEnabled(t){t?this.cw.installEventFilter(this.eventHandlingObject):(this.cw.removeEventFilter(this.eventHandlingObject),this.eventHandlingObject.selectorWidgetOverlay.clearCanvas())}setCb(t){this.eventHandlingObject._cb=t}setMousePattern(t,e){this.eventHandlingObject.button=t,this.eventHandlingObject.modifiers=e}}define("curveClosestPoint",["static","widgetOverlay"],function(){});class ScaleWidget extends Widget{constructor(t,e,i){super(e);var n=this.getElement(),o=null,s="",a=t,r=[],l=[],c=new Misc.Font(14),u=new Misc.Font(12);this.setBorderDist=function(t,e){t==l[0]&&e==l[1]||(l[0]=t,l[1]=e)},this.getBorderDistHint=function(t){o.getBorderDistHint(u,t),t.start<r[0]&&(t.start=r[0]),t.end<r[1]&&(t.end=r[1])},this.setLabelFont=function(t){t.th<0||""===t.name||""===t.style||(u=t,a.getLayout().adjustLayout(e,t.th))},this.labelFont=function(){return u},this.setTitleFont=function(t){t.th<0||""===t.name||""===t.style||(c=t,a.getLayout().adjustLayout(e,t.th))},this.titleFont=function(){return c},this.setScaleDraw=function(t){if(void 0!==t&&t!=o){if(o){t.setScaleDiv(o.scaleDiv());var e=null;o.scaleMap().transformation()&&(e=o.scaleMap().transformation().copy()),t.setTransformation(e)}o=t}},this.scaleDraw=function(){return o},this.initScale=function(t){(o=new ScaleDraw).setAlignment(t);var e=new LinearScaleEngine;o.setScaleDiv(e.divideScale(0,100,10,5))},void 0===i?this.initScale(LeftScale):this.initScale(i),this.setTitle=function(t){s!==t&&(""!==t?(""===s&&(this.alignment()===LeftScale||this.alignment()===RightScale?a.getLayout().adjustLayout(n,parseFloat(n.css("width"))+c.th):a.getLayout().adjustLayout(n,parseFloat(n.css("height"))+c.th),Static.trigger("axisTitleAdded",!0)),s=t):(this.alignment()===LeftScale||this.alignment()===RightScale?a.getLayout().adjustLayout(n,parseFloat(n.css("width"))-c.th):a.getLayout().adjustLayout(n,parseFloat(n.css("height"))-c.th),s="",Static.trigger("axisTitleAdded",!1)),a.getLayout().updateLayout())},this.title=function(){return s},this.setAlignment=function(t){o&&o.setAlignment(t)},this.alignment=function(){return null==o?LeftScale:o.alignment()},this.labelWidth=function(t){return u.textSize(t).width},this.draw=function(){var t=o.maxTickLength(),e=o.spacing();if(o.orientation()===Vertical){var i=t+e+this.labelWidth(o.longestLabel())+10+(""!==s?c.th:0)+10;a.getLayout().adjustLayout(n,i)}if(o.orientation()===Horizontal){var r=t+e+10+(""!==s?c.th:0)+10;a.getLayout().adjustLayout(n,r)}a.getLayout().updateLayout();var l=new PaintUtil.Painter(this);l.setFont(u),o.draw(l),""!==s&&(l.setFont(c),this.drawTitle(l)),l=null},this.drawTitle=function(t){var e=t.canvasWidth(),i=t.canvasHeight();t.save(),t.setFont(c),o.alignment()===LeftScale?""!==s&&t.drawVerticalText(s,c.th,i/2):o.alignment()===RightScale?""!==s&&t.drawVerticalText(s,e-c.th,i/2,!0):o.alignment()===BottomScale?""!==s&&t.drawText(s,e/2,i-2,"center"):o.alignment()===TopScale&&""!==s&&t.drawText(s,e/2,c.th,"center"),t.restore()},this.setScaleDiv=function(t){o.scaleDiv()!==t&&(o.setScaleDiv(t),Static.trigger("scaleDivChanged"))},Static.bind("scaleDivChanged",this.scaleChange),this.setTransformation=function(t){o.setTransformation(t)},this.toString=function(){return"[ScaleWidget]"}}}ScaleWidget.prototype.scaleChange=function(){},define("scaleWidget",["static","widget"],function(){});class Utility{static generateCurveName(t,e){let i=1,n=e||"curve_",o=n.concat(i);for(;t.findPlotCurve(o);)o=n.concat(++i);return o}static modifiers(t){var e=Static.NoModifier;return t.altKey&&t.ctrlKey&&t.shiftKey?e|Static.AltModifier|Static.ControlModifier|Static.ShiftModifier:t.altKey&&t.ctrlKey?e|Static.AltModifier|Static.ControlModifier:t.altKey&&t.shiftKey?e|Static.AltModifier|Static.ShiftModifier:t.ctrlKey&&t.shiftKey?e|Static.ControlModifier|Static.ShiftModifier:t.altKey?e|Static.AltModifier:t.ctrlKey?e|Static.ControlModifier:t.shiftKey?e|Static.ShiftModifier:e}static button(t){return null!=t&&t.button}static colorList(){return["black","red","green","blue","yellow","brown"]}static makePoints(t){var e=[];return t.forEach(function(t){e.push(new Misc.Point(parseFloat(t[0]),parseFloat(t[1])))}),e}static pointsToXYObjectArray(t){var e=[];return t.forEach(function(t){e.push({x:t.x,y:t.y})}),e}static pointsFromXYObjectArray(t){var e=[];return t.forEach(function(t){e.push(new Misc.Point(t.x,t.y))}),e}static linearEquationFromPoints(t,e){var i=(e.y-t.y)/(e.x-t.x),n=-i*t.x+t.y,o=i.toString();return o+="x+",o+=n.toString()}static toArrays(t){for(var e=t.split("\n"),i=[],n=0;n<e.length;++n){var o=e[n].split(",");isNaN(parseFloat(o))||i.push(o)}return i}static setAutoScale(t,e){t.setAxisAutoScale(xBottom,e),t.setAxisAutoScale(yLeft,e),t.setAxisAutoScale(xTop,e),t.setAxisAutoScale(yRight,e)}static majorGridLines(t,e){t.enableX(e),t.enableY(e)}static minorGridLines(t,e){t.enableXMin(e),t.enableYMin(e)}static randomColor(t=0){var e=[256*Math.random(),256*Math.random(),256*Math.random()],i=[51*t,51*t,51*t];return"rgb("+[e[0]+i[0],e[1]+i[1],e[2]+i[2]].map(function(t){return Math.round(t/2)}).join(",")+")"}static setCurveBrush(t,e){var i=$('<input type="color" style="opacity:0;">');t&&(t.brush().color==Static.NoBrush?i.val(Static.colorNameToHex("rgb(255, 255, 254)")):i.val(Static.colorNameToHex(t.brush().color)),i.change(function(){var i=t.brush();i.color=$(this).val(),t.setBrush(i),void 0!==e&&e(t)}),i.trigger("click"))}static removeCurveBrush(t){var e=t.brush();e.color=Static.NoBrush,t.setBrush(e)}static setSymbolPenWidth(t,e){var i=t.symbol();i&&(i.pen().width=e,t.plot().autoRefresh(),Utility.updateLegendIconSize(t),t.plot().updateLegend(t))}static updateLegendIconSize(t){var e=t.getLegendIconSize();if(t.symbol()&&(e=t.symbol().boundingRect().size()),t.symbol()&&t.testLegendAttribute(Static.LegendShowSymbol)){if(t.testLegendAttribute(Static.LegendShowLine)){var i=Math.ceil(1.5*e.width);i%2&&i++,e.width=Math.max(40,i)}t.setLegendIconSize(e)}else t.testLegendAttribute(Static.LegendShowLine)&&(e.width=40,t.setLegendIconSize(e))}static setSymbolSize(t,e){var i=t.symbol();if(i){var n=i.size();n.width=e,n.height=e,i.setSize(n),t.plot().autoRefresh(),Utility.updateLegendIconSize(t),t.plot().updateLegend(t)}}static addSymbol(t,e){if("None"!=e){var i=t.symbol();null==i&&((i=new Symbol).setBrush(new Misc.Brush(Static.NoBrush)),i.setSize(new Misc.Size(10,10)),t.setSymbol(i)),i.size().width<=0&&i.setSize(new Misc.Size(10,10)),i.setStyle(e),t.itemChanged(),t.legendChanged()}else t.setSymbol(null)}static curveRenameDlg(t,e,i){Static.prompt('Enter a new name for "'+t+'"',t,function(n){if(t==n)return Static.alert("You did not change the name!"),!1;var o=e.findPlotCurve(t);return e.findPlotCurve(n)?(Static.alert(n+" already exist"),!1):(o.setTitle(n),void 0!==i&&i(),!0)},"small")}static setLegendAttribute(t,e,i){return"line"==e?(t.setLegendIconSize(new Misc.Size(i)),t.setLegendAttribute(Static.LegendShowSymbol,!1),void t.setLegendAttribute(Static.LegendShowLine,!0)):"symbol"==e?(t.setLegendIconSize(new Misc.Size(i)),t.setLegendAttribute(Static.LegendShowLine,!1),void t.setLegendAttribute(Static.LegendShowSymbol,!0)):"lineAndSymbol"==e?(t.setLegendIconSize(new Misc.Size(i)),t.setLegendAttribute(Static.LegendShowLine,!0),void t.setLegendAttribute(Static.LegendShowSymbol,!0)):(t.setLegendAttribute(Static.LegendShowLine,!1),void t.setLegendAttribute(Static.LegendShowSymbol,!1))}static enableComponent(t,e,i){for(var n=0;n<axisCnt;++n)t.axisScaleDraw(n).enableComponent(e,i);t.autoRefresh()}static setTickLength(t,e){for(var i=null,n=0;n<axisCnt;++n)i=t.axisScaleDraw(n),"small"==e?(i.setTickLength(MajorTick,6),i.setTickLength(MinorTick,3)):"medium"==e?(i.setTickLength(MajorTick,8),i.setTickLength(MinorTick,4)):"large"==e&&(i.setTickLength(MajorTick,12),i.setTickLength(MinorTick,6));t.autoRefresh()}static mVerifyRange(t,e,i){if(t<1)return 0;if((e=Math.max(0,Math.min(e,t-1)))>(i=Math.max(0,Math.min(i,t-1)))){var n=e;e=i,i=n}return i-e+1}static makeSamples(t){var e=t.fx,i=t.lowerX,n=t.upperX,o=t.numOfSamples;t.indepVarIsDegree;void 0===o&&(o=_numOfSamples);var s=findIndepVar(e);if("x"!==s)for(;-1!=e.indexOf(s);)e=e.replace(s,"x");var a=[],r=new EvaluateExp(e);if(r.error)return Static.alert(r.errorMessage),null;for(var l=(n-i)/(o-1),c=0;c<=o-1;++c){var u=i+c*l,h=r.eval({x:u});if(isFinite(h)){if(r.error)return Static.alert(r.errorMessage),null;a.push(new Misc.Point(u,h))}else{if(Static.errorResponse==Static.warn)return Static.alert("f("+u+'): yields infinity. Probably a "divide by zero" error. Try changing the limits or adjusting number of points.'),null;if(Static.errorResponse==Static.warnIgnore){Static.alertYesNo("Error found!!! Do you want to silently ignore errors?",function(t){return t==Static.Cancel?(console.log("C"),null):t==Static.Yes?(console.log("Y"),Static.errorResponse=Static.silentIgnore,Static.errorResponseChanged=!0,null):t==Static.No?(console.log("N"),null):void 0}),a=[];break}}}return Static.errorResponseChanged&&(Static.errorResponseChanged=!1,Static.errorResponse=Static.warnIgnore),a}}function PaintUtil(){function t(t){var e=t,i="",n=null;this.textSize=function(t){e.save(),e.font=n.weight+" "+n.style+" "+n.th+"px "+n.name;var i=e.measureText(t).width,o=e.measureText("M").width;return e.restore(),new Misc.Size(i,o)},this.context=function(){return e},this.canvasWidth=function(){return e.canvas.width},this.canvasHeight=function(){return e.canvas.height},this.save=function(){e.save()},this.restore=function(){e.restore()},this.translate=function(t,i){e.translate(t,i)},this.rotate=function(t){e.rotate(t*Math.PI/180)},this.scale=function(t,i){e.scale(t,i)},this.setPen=function(t){this.style==Static.NoPen?e.strokeStyle="transparent":e.strokeStyle=t.color,e.lineWidth=t.width,"dash"===t.style?e.setLineDash([10,5]):"dot"===t.style?e.setLineDash([3,8]):"dashDot"===t.style?e.setLineDash([12,5,3,5]):"dashDotDot"===t.style&&e.setLineDash([12,5,3,5,3,5]),i=t.style},this.pen=function(){var t="";return t="transparent"==e.strokeStyle?NoPen:e.strokeStyle,new Misc.Pen(t,e.lineWidth,i)},this.setBrush=function(t){void 0===t.color||t.color===Static.NoBrush?e.fillStyle="transparent":e.fillStyle=t.color},this.brush=function(){return e.fillStyle},this.setFont=function(t){e.font=t.weight+" "+t.style+" "+t.th+"px "+t.name,""!=typeof t.fontColor&&(e.fillStyle=t.fontColor),n=t},this.font=function(){return n},this.fillRect=function(t,i){i.style!==NoBrush&&(this.setBrush(i),e.rect(t.left(),t.top(),t.width(),t.height()),e.fill())},this.drawPath=function(t){e.beginPath();for(var i=0;i<t.elementCount();i++){var n=t.elementAt(i),o=n.x,s=n.y;switch(n.type){case MoveToElement:e.moveTo(o,s);break;case LineToElement:e.lineTo(o,s);break;case CurveToElement:var a=t.elementAt(++i),r=a.x,l=a.y,c=t.elementAt(++i),u=c.x,h=c.y;e.bezierCurveTo(o,s,r,l,u,h)}}e.stroke(),e.fill()},this.drawPoint=function(t){var i=this.pen().width;e.fillStyle=this.pen().color,e.fillRect(t.x-1*i,t.y-1*i,1.9*i,2*i)},this.drawPoints=function(t){e.fillStyle=this.pen().color;for(var i=this.pen().width,n=0;n<t.length;++n)e.fillRect(t[n].x-1*i,t[n].y-1*i,1.9*i,2*i)},this.drawLine=function(t,i,n,o){e.beginPath(),void 0!==o&&void 0!==n?(e.moveTo(t,i),e.lineTo(n,o),e.stroke()):(e.moveTo(t.x,t.y),e.lineTo(i.x,i.y)),e.stroke()},this.drawPolyline=function(t){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var i=1;i<t.length;++i)e.lineTo(t[i].x,t[i].y);e.stroke()},this.drawPolygon=function(t){t[0].x===t[t.length-1].x&&t[0].y===t[t.length-1].y||t.push(t[0]),e.beginPath(),this.drawPolyline(t),e.closePath(),e.fill()},this.drawRect=function(t,i,n,o){if(e.beginPath(),"number"==typeof t)e.rect(t,i,n,o);else{var s=t;e.rect(s.left(),s.top(),s.width(),s.height())}e.stroke(),e.fill(),e.closePath()},this.drawCircle=function(t,i,n){if(e.beginPath(),"number"==typeof t)e.arc(t,i,n,0,2*Math.PI,!1);else{var o=t;n=i,e.arc(o.x,o.y,n,0,2*Math.PI,!1)}e.stroke(),e.fill(),e.closePath()},this.drawEllipse=function(t){var i=(t.left()+t.right())/2,n=(t.top()+t.bottom())/2,o=t.width(),s=t.height();e.beginPath(),e.moveTo(i,n-s/2),e.bezierCurveTo(i+o/2,n-s/2,i+o/2,n+s/2,i,n+s/2),e.bezierCurveTo(i-o/2,n+s/2,i-o/2,n-s/2,i,n-s/2),e.stroke(),e.fill(),e.closePath(),e.closePath()},this.drawVerticalText=function(t,i,n,o){var s=-1;void 0!==o&&!0===o&&(s=1);var a=e.measureText(t);e.save();var r=i,l=n-s*a.width/2;e.translate(r,l),e.rotate(s*Math.PI/2),e.translate(-r,-l),-1===s&&(e.textAlign="left"),e.fillText(t,r,l),e.restore()},this.drawText=function(t,i,o,s,a){void 0!==a&&(t=function(t,e){for(var i=t,o=n.textSize(i).width;o>e&&i.substring;)i=i.substring(0,i.length-1),o=n.textSize(i).width;return i}(t,a)),void 0!==s&&(e.textAlign=s),e.fillText(t,i,o)},this.toString=function(){return"[Painter: "+e+"]"}}function e(t){var e="http://www.w3.org/2000/svg",i=t,n=new Misc.Pen;n.style=Static.NoPen;var o=new Misc.Brush,s=new Misc.Font,a=null;function r(){n.style===Static.NoPen?a.attr("stroke","transparent"):a.attr("stroke",n.color),a.attr("stroke-Width",n.width),"dash"===n.style?a.attr("stroke-dasharray",[10,5]):"dot"===n.style?a.attr("stroke-dasharray",[3,8]):"dashDot"===n.style?a.attr("stroke-dasharray",[12,5,3,5]):"dashDotDot"===n.style&&a.attr("stroke-dasharray",[12,5,3,5,3,5])}function l(){o.color===Static.NoBrush?a.attr("fill","transparent"):a.attr("fill",o.color)}this.setBrush=function(t){o=t},this.setPen=function(t){n=t},this.pen=function(){return n},this.rotate=function(t,e,i){xCenter=e||0,yCenter=i||0,t&&a.attr("transform"," rotate("+t+" "+xCenter+" "+yCenter+")")},this.transform=function(t){var e=t.translateX||0,i=t.translateY||0,n=t.scaleX||1,o=t.scaleY||1,s=t.rotation||0,r=t.rotationX||0,l=t.rotationY||0,c="";1==n&&1==o||(c+=" scale("+n+" "+o+")"),s&&(c+=" rotate("+s+" "+r+" "+l+")"),1==e&&1==i||(c+=" translate("+e+" "+i+")"),a.attr("transform",c)},this.drawRect=function(t,n,o,s){(a=$(document.createElementNS(e,"rect"))).attr("x",t),a.attr("y",n),a.attr("width",o),a.attr("height",s),l(),r(),a.appendTo($(i.svg()))},this.drawPath=function(t){a=$(document.createElementNS(e,"path"));for(var n=t.data,o="",s=0;s<t.elementCount();s++){var c=t.elementAt(s),u=c.x+n.xOffset,h=c.y+n.yOffset;switch(c.type){case MoveToElement:o+="M"+u+" "+h+" ";break;case LineToElement:o+="L"+u+" "+h+" ";break;case CurveToElement:var d=t.elementAt(++s),p=d.x+n.xOffset,v=d.y+n.yOffset,f=t.elementAt(++s);o+="C "+u+" "+h+" "+p+" "+v+" "+(f.x+n.xOffset)+" "+(f.y+n.yOffset)+" "}}a.attr("d",o),a.attr("transform"," scale("+n.scale+") rotate("+n.rotation+" "+n.xCenter+" "+n.yCenter+")"),l(),r(),a.appendTo($(i.svg()))},this.fillRect=function(t,n){(a=$(document.createElementNS(e,"rect"))).attr("x",t.left),a.attr("y",t.top),a.attr("width",t.width),a.attr("height",t.height),a.attr("fill",n.color),r(),a.appendTo($(i.svg()))},this.drawCircle=function(t,n,o){(a=$(document.createElementNS(e,"circle"))).attr("cx",t),a.attr("cy",n),a.attr("r",o),l(),r(),a.appendTo($(i.svg()))},this.drawLine=function(t,n,o,s){(a=$(document.createElementNS(e,"line"))).attr("x1",t),a.attr("y1",n),a.attr("x2",o),a.attr("y2",s),r(),a.appendTo($(i.svg()))},this.drawText=function(t,n,o){(a=$(document.createElementNS(e,"text"))).attr("x",n),a.attr("y",o),a.attr("font-size",s.th),a.attr("font-family",s.name),a.attr("font-weight",s.weight),a.attr("font-style",s.style),r(),l(),a[0].textContent=t,a.appendTo($(i.svg()))},this.textSize=function(t){return s.textSize(t)},this.setFont=function(t){s=t},this.font=function(){return s},this.toString=function(){return"[GraphicPainter]"}}PaintUtil.Painter=function(i){var n=null,o=!1;"[Graphic]"===i.toString()?(o=!0,n=new e(i)):n="[object CanvasRenderingContext2D]"===i.toString()?new t(i):new t(i.getContext()),this.isGraphicPainter=function(){return o},this.textSize=function(t){return n.textSize(t)},this.context=function(){if(!o)return n.context()},this.canvasWidth=function(){if(!o)return n.canvasWidth()},this.canvasHeight=function(){if(!o)return n.canvasHeight()},this.save=function(){o||n.save()},this.restore=function(){o||n.restore()},this.translate=function(t,e){o||n.translate(t,e)},this.scale=function(t,e){o||n.scale(t,e)},this.rotate=function(t,e,i){o||n.rotate(t,e,i)},this.transform=function(t){o&&n.transform(t)},this.setPen=function(t){n.setPen(t)},this.pen=function(){return n.pen()},this.setBrush=function(t){n.setBrush(t)},this.brush=function(){return n.brush()},this.setFont=function(t){n.setFont(t)},this.font=function(){return n.font()},this.fillRect=function(t,e){n.fillRect(t,e)},this.drawPath=function(t){n.drawPath(t)},this.drawPoint=function(t){o||n.drawPoint(t)},this.drawPoints=function(t){o||n.drawPoints(t)},this.drawLine=function(t,e,i,o){n.drawLine(t,e,i,o)},this.drawPolyline=function(t){o||n.drawPolyline(t)},this.drawPolygon=function(t){o||n.drawPolygon(t)},this.drawRect=function(t,e,i,o){n.drawRect(t,e,i,o)},this.drawVerticalText=function(t,e,i,s){o||n.drawVerticalText(t,e,i,s)},this.drawText=function(t,e,i,o,s){n.drawText(t,e,i,o,s)},this.drawCircle=function(t,e,i){n.drawCircle(t,e,i)},this.drawEllipse=function(t){n.drawEllipse(t)},this.toString=function(){return n.toString()}}}define("utility",function(){}),PaintUtil(),define("painter",function(){});var ScaleDiv=function(t,e,i,n,o){var s=0,a=0,r=[];if(void 0===t||void 0===e);else if(void 0===i&&"object"==typeof t&&"object"==typeof e){var l=t,c=e;s=l.minValue(),a=l.maxValue();for(var u=0;u<NTickTypes;u++)r[u]=c[u]}else if(void 0===n)for(lowerBound=t,upperBound=e,c=i,s=lowerBound,a=upperBound,u=0;u<NTickTypes;u++)r[u]=c[u];else void 0===t&&void 0===e&&void 0===i&&void 0===n&&void 0===o&&(lowerBound=t,upperBound=e,minorTicks=i,mediumTicks=n,majorTicks=o,s=lowerBound,a=upperBound,r[MinorTick]=minorTicks,r[MediumTick]=mediumTicks,r[MajorTick]=majorTicks);this.setInterval=function(t,e){"number"==typeof t&&"number"==typeof e?(lowerBound=t,upperBound=e,s=lowerBound,a=upperBound):"object"==typeof t&&void 0===e&&(s=(l=t).minValue(),a=l.maxValue())},this.interval=function(){return new Interval(s,a)},this.setLowerBound=function(t){s=t},this.lowerBound=function(){return s},this.setUpperBound=function(t){a=t},this.upperBound=function(){return a},this.range=function(){return a-s},this.isEmpty=function(){return s==a},this.isIncreasing=function(){return s<=a},this.contains=function(t){var e=Math.min(s,a),i=Math.max(s,a);return t>=e&&t<=i},this.invert=function(){var t=s;for(s=a,a=t,u=0;u<NTickTypes;u++){var e=r[u],i=e.count(),n=i/2;for(j=0;j<n;j++)t=e[j],e[j]=e[i-1-j],e[i-1-j]=t}},this.inverted=function(){var t=new ScaleDiv(s,a);return t.invert(),t},this.bounded=function(t,e){var i=Math.min(t,e),n=Math.max(t,e),o=new ScaleDiv;for(o.setInterval(t,e),tickType=0;tickType<NTickTypes;tickType++){var s=r[tickType],a=[];for(u=0;u<s.size();u++){var l=s[u];l>=i&&l<=n&&a.push(l)}o.setTicks(tickType,a)}return o},this.setTicks=function(t,e){t>=0&&t<NTickTypes&&(r[t]=e)},this.ticks=function(t){return t>=0&&t<NTickTypes?r[t]:[]}};ScaleDiv.prototype.toString=function(){return"[ScaleDiv]"},define("scaleDiv",function(){});class Interval{constructor(t,e,i){var n=0,o=-1,s=IncludeBorders;void 0!==t&&void 0!==e&&(n=t,o=e),void 0!==i&&(s=i),this.setBorderFlags=function(t){s=t},this.borderFlags=function(){return s},this.setMinValue=function(t){n=t},this.setMaxValue=function(t){o=t},this.minValue=function(){return n},this.maxValue=function(){return o}}toString(){return"[Interval]"}setInterval(t,e,i){this.setMinValue(t),this.setMaxValue(e),this.setBorderFlags(i)}isValid(){return 0==(this.borderFlags()&ExcludeBorders)?this.minValue()<=this.maxValue():this.minValue()<this.maxValue()}width(){return this.isValid()?this.maxValue()-this.minValue():0}isNull(){return this.isValid()&&this.minValue()>=this.maxValue()}invalidate(){this.setMinValue(0),this.setMaxValue(-1)}normalized(){return this.minValue()>this.maxValue()?this.inverted():this.minValue()==this.maxValue()&&this.borderFlags()==ExcludeMinimum?this.inverted():this}inverted(){var t=IncludeBorders;return this.borderFlags()&ExcludeMinimum&&(t|=ExcludeMaximum),this.borderFlags()&ExcludeMaximum&&(t|=ExcludeMinimum),new Interval(this.maxValue(),this.minValue(),t)}contains(t){return!!this.isValid()&&(!(t<this.minValue()||t>this.maxValue())&&(!(t==this.minValue()&&this.borderFlags()&ExcludeMinimum)&&!(t==this.maxValue()&&this.borderFlags()&ExcludeMaximum)))}limited(t,e){if(!this.isValid()||t>e)return new Interval;var i=Math.max(this.minValue(),t);i=Math.min(i,e);var n=Math.max(this.maxValue(),t);return n=Math.min(n,e),new Interval(i,n,this.borderFlags())}}define("interval",function(){});var Transform=function(){};Transform.prototype.toString=function(){return"[Transform]"},Transform.prototype.bounded=function(t){return t};var NullTransform=function(){Transform.call(this)};NullTransform.prototype=Object.create(Transform.prototype),NullTransform.prototype.constructor=NullTransform,NullTransform.prototype.toString=function(){return"[NullTransform]"},NullTransform.prototype.transform=function(t){return t},NullTransform.prototype.invTransform=function(t){return t},NullTransform.prototype.copy=function(){return new NullTransform};var LogTransform=function(){Transform.call(this)};LogTransform.prototype=Object.create(Transform.prototype),LogTransform.prototype.constructor=LogTransform,LogTransform.prototype.toString=function(){return"[LogTransform]"},LogTransform.prototype.transform=function(t){return Math.log(t)},LogTransform.prototype.invTransform=function(t){return Math.exp(t)},LogTransform.prototype.bounded=function(t){return t>Number.MAX_VALUE?Number.MAX_VALUE:t<Number.MIN_VALUE?Number.MIN_VALUE:t},LogTransform.prototype.copy=function(){return new LogTransform};var PowerTransform=function(t){Transform.call(this),this.d_exponent=t};PowerTransform.prototype=Object.create(Transform.prototype),PowerTransform.prototype.constructor=PowerTransform,PowerTransform.prototype.toString=function(){return"[PowerTransform]"},PowerTransform.prototype.transform=function(t){return t<0?-Math.pow(-t,1/d_exponent):Math.pow(t,1/d_exponent)},PowerTransform.prototype.invTransform=function(t){return t<0?-Math.pow(-t,d_exponent):Math.pow(t,d_exponent)},PowerTransform.prototype.copy=function(){return new PowerTransform(d_exponent)},define("transform",function(){});class ScaleMap{static invTransform_Rect(t,e,i){var n=t.invTransform(i.left()),o=t.invTransform(i.right()-1),s=e.invTransform(i.top()),a=e.invTransform(i.bottom()-1);return new Misc.Rect(new Misc.Point(n,s),o-n,a-s).normalized()}static transform_Rect(t,e,i){var n=t.transform(i.left()),o=t.transform(i.right()),s=e.transform(i.top()),a=e.transform(i.bottom());return new Misc.Rect(new Misc.Point(n,s),o-n,a-s).normalized()}static invTransform(t,e,i){return new Misc.Point(t.invTransform1(i.x),e.invTransform1(i.y))}static transform(t,e,i){return new Misc.Point(t.transform1(i.x),e.transform1(i.y))}static transformPath(t,e,i,n){for(var o=new Misc.MPath,s=0;s<i.elementCount();s++){var a=i.elementAt(s),r=t.transform(a.x),l=e.transform(a.y);switch(a.type){case MoveToElement:n&&(r=Math.round(r),l=Math.round(l)),o.moveTo(r,l);break;case LineToElement:n&&(r=Math.round(r),l=Math.round(l)),o.lineTo(r,l);break;case CurveToElement:var c=i.elementAt(++s),u=t.transform(c.x),h=e.transform(c.y),d=i.elementAt(++s),p=t.transform(d.x),v=e.transform(d.y);o.cubicTo(r,l,u,h,p,v)}}return o}constructor(){var t=0,e=1,i=0,n=1,o=1,s=0,a=null;this.setTransformation=function(i){i!==a&&(a=i),this.setScaleInterval(t,e)},this.transformation=function(){return a},this.setScaleInterval=function(i,n){t=i,e=n,a&&(t=a.bounded(t),e=a.bounded(e)),this.updateFactor()},this.setPaintInterval=function(t,e){i=t,n=e,this.updateFactor()},this.updateFactor=function(){s=t;var r=e;a&&(s=a.transform(s),r=a.transform(r)),o=1,s!=r&&(o=(n-i)/(r-s))},this.invTransform=function(t){return this.invTransform1(t)},this.transform=function(t){return this.transform1(t)},this.transform1=function(t){return a&&(t=a.transform(t)),i+(t-s)*o},this.invTransform1=function(t){var e=s+(t-i)/o;return a&&(e=a.invTransform(e)),e},this.toString=function(){return'[ScaleMap "'+o+'"]'}}}define("scaleMap",["static","transform"],function(){});class Layout{constructor(t,e){var i=e;if(t){t.parent()[0]===document.body&&t.css("position","absolute");var n=$("<div />").attr({id:"titleDiv"});t.append(n);var o=$("<div />").attr({id:"topScaleDiv"});t.append(o),"auto"!==o.css("top")&&parseFloat(o.css("top"));var s=$("<div />").attr({id:"leftScaleDiv"});t.append(s),"auto"!==s.css("left")&&parseFloat(s.css("left"));var a=$("<div />").attr({id:"centralDiv"});t.append(a),"auto"!==a.css("top")&&parseFloat(a.css("top")),"auto"!==a.css("bottom")&&parseFloat(a.css("bottom")),"auto"!==a.css("right")&&parseFloat(a.css("right")),"auto"!==a.css("left")&&parseFloat(a.css("left")),this.getCentralDiv=function(){return a};var r=$("<div />").attr({id:"rightScaleDiv"});t.append(r),"auto"!==r.css("right")&&parseFloat(r.css("right"));var l=$("<div/>").attr({id:"legendDiv"});t.append(l),"auto"!==l.css("right")&&parseFloat(l.css("right"));var c=$("<div />").attr({id:"bottomScaleDiv"});t.append(c),"auto"!==c.css("bottom")&&parseFloat(c.css("bottom"));var u=$("<div />").attr({id:"footerDiv"});t.append(u),"auto"!==u.css("bottom")&&parseFloat(u.css("bottom")),this.getPlotDiv=function(){return t},this.getLegendDiv=function(){return l},this.getTitleDiv=function(){return n},this.getFooterDiv=function(){return u};var h=[s,r,c,o];this.getScaleDivElement=function(t){return t<0||t>=axisCnt?null:h[t]},this.adjustLayout=function(t,e){var i="width";"footerDiv"!==t[0].id&&"titleDiv"!==t[0].id&&"topScaleDiv"!==t[0].id&&"bottomScaleDiv"!==t[0].id||(i="height"),t.css(i,e)},this.updateLayout=function(){var t,e,r;void 0!==i&&(t="none"==n.css("display"),i.axisEnabled(xTop)?t?d():p():t?v():f(),"none"!==n.css("display")?i.axisEnabled(xTop)?d():v():i.axisEnabled(xTop)?p():f(),e="none"==u.css("display"),i.axisEnabled(xBottom)?e?m():g():e?b():S(),"none"!=u.css("display")?i.axisEnabled(xBottom)?m():b():i.axisEnabled(xBottom)?g():S(),i.legend()&&l.css("width",i.legend().legendDivWidth()),i.axisEnabled(yRight)?i.isLegendEnabled()?y():x():i.isLegendEnabled()?w():M(),i.isLegendEnabled()?i.axisEnabled(yRight)?y():w():i.axisEnabled(yRight)?x():M(),r=parseFloat(s.css("width")),i.axisEnabled(yLeft)?(n.css("left",r),o.css("left",r),u.css("left",r),c.css("left",r),a.css("left",r)):(n.css("left",0),o.css("left",0),u.css("left",0),c.css("left",0),a.css("left",0)))},this.isLegendDivVisible=function(){return"block"===l[0].style.display},this.setPlot=function(t){i=t},this.toString=function(){return"[Layout]"}}function d(){var t=parseFloat(n.css("height")),e=parseFloat(o.css("height"));l.css("top",t),o.css("top",t),a.css("top",t+e),s.css("top",t+e),r.css("top",t+e)}function p(){var t=parseFloat(o.css("height"));l.css("top",0),o.css("top",0),a.css("top",t),s.css("top",t),r.css("top",t)}function v(){var t=parseFloat(n.css("height"));l.css("top",t),a.css("top",t),s.css("top",t),r.css("top",t)}function f(){l.css("top",0),a.css("top",0),s.css("top",0),r.css("top",0)}function m(){var t=parseFloat(u.css("height")),e=parseFloat(c.css("height"));l.css("bottom",t),c.css("bottom",t),a.css("bottom",t+e),s.css("bottom",t+e),r.css("bottom",t+e)}function g(){var t=parseFloat(c.css("height"));l.css("bottom",0),c.css("bottom",0),a.css("bottom",t),s.css("bottom",t),r.css("bottom",t)}function b(){var t=parseFloat(u.css("height"));l.css("bottom",t),a.css("bottom",t),s.css("bottom",t),r.css("bottom",t)}function S(){l.css("bottom",0),a.css("bottom",0),s.css("bottom",0),r.css("bottom",0)}function y(){var t=parseFloat(l.css("width")),e=parseFloat(r.css("width"));n.css("right",t+e+14+3),o.css("right",t+e+14+3),u.css("right",t+e+14+3),c.css("right",t+e+14+3),l.css("right",3),a.css("right",t+e+14+3),r.css("right",t+14+3)}function x(){var t=parseFloat(r.css("width"));n.css("right",t),o.css("right",t),u.css("right",t),c.css("right",t),a.css("right",t),r.css("right",0)}function w(){var t=parseFloat(l.css("width"));a.css("right",t+3+14),n.css("right",t+3+14),o.css("right",t+3+14),u.css("right",t+3+14),c.css("right",t+3+14),l.css("right",3)}function M(){n.css("right",0),o.css("right",0),u.css("right",0),c.css("right",0),a.css("right",0)}}}define("layout",function(){});class AbstractScaleDraw{constructor(){Static.makeAbstract(this,AbstractScaleDraw);var t=Enum.ScaleComponent.Backbone|Enum.ScaleComponent.Ticks|Enum.ScaleComponent.Labels,e=[];e[MinorTick]=4,e[MediumTick]=6,e[MajorTick]=8;var i=new ScaleMap,n=null,o=3,s=-1e4,a=1e4,r=4,l=1;this.data={},this.setNonExponentLimits=function(t,e){s=t,a=e},this.getNonExponentNotationLimits=function(){return{lower:s,upper:a}},this.decimalPlaces=function(){return o},this.setDecimalPlaces=function(t){o=t},this.longestLabel=function(){var t="",e=n.ticks(MajorTick);return e.forEach(function(i,r){0!==r&&r!==e.length-1&&n.contains(i)&&(((i=Static.adjustForDecimalPlaces(i,o))>a||i<s)&&(i=i.toExponential(o)),i.toString().length>t.length&&(t=i.toString()))}),t},this.enableComponent=function(e,i){i?t|=e:t&=~e},this.hasComponent=function(e){return t&e},this.setScaleDiv=function(t){n=t,i.setScaleInterval(n.lowerBound(),n.upperBound())},this.setTransformation=function(t){i.setTransformation(t)},this.scaleMap=function(){return i},this.scaleDiv=function(){return n},this.setPenWidth=function(t){t<=0&&(t=1),t!==l&&(l=t)},this.penWidth=function(){return l},this.draw=function(t){if(this.orientation()===Horizontal?i.setPaintInterval(0,t.canvasWidth()):i.setPaintInterval(t.canvasHeight(),0),this.hasComponent(Enum.ScaleComponent.Labels))for(var o=n.ticks(MajorTick),s=0;s<o.length;s++){var a=o[s];n.contains(a)&&this.drawLabel(t,a)}if(this.hasComponent(Enum.ScaleComponent.Ticks)){t.save(),t.setPen(new Misc.Pen("grey",l));for(var r=MinorTick;r<NTickTypes;r++){var c=n.ticks(r);for(s=0;s<c.length;s++){a=c[s];n.contains(a)&&this.drawTick(t,a,e[r])}}t.restore()}this.hasComponent(Enum.ScaleComponent.Backbone)&&(t.save(),t.setPen(new Misc.Pen("grey",l)),this.drawBackbone(t),t.restore())},this.setSpacing=function(t){t<0&&(t=0),r=t},this.spacing=function(){return r},this.setTickLength=function(t,i){if(!(t<MinorTick||t>MajorTick)){i<0&&(i=0);i>1e3&&(i=1e3),e[t]=i}},this.tickLength=function(t){return t<MinorTick||t>MajorTick?0:e[t]},this.maxTickLength=function(){for(var t=0,i=0;i<NTickTypes;i++)t=Math.max(t,e[i]);return t},this.label=function(t){return Static.mFuzzyCompare(t+1,1)&&(t=0),t.toString()},this.toString=function(){return"[AbstractScaleDraw]"}}}define("abstractScaleDraw",function(){});class ScaleDraw extends AbstractScaleDraw{constructor(){super();var t=BottomScale;this.orientation=function(){return t===TopScale||t===BottomScale?Horizontal:Vertical},this.alignment=function(){return t},this.setAlignment=function(e){t=e},this.getBorderDistHint=function(t,e){},this.toString=function(){return"[ScaleDraw]"},this.drawTick=function(t,e,i){if(!(i<=0)){var n=this.scaleMap().transform(e)+0,o=this.hasComponent(Enum.ScaleComponent.Backbone);switch(this.alignment()){case LeftScale:var s=t.canvasWidth();o&&(s-=2);var a=s-i;t.drawLine(s,n,a,n);break;case RightScale:s=0;o&&(s+=2);a=s+i;t.drawLine(s,n,a,n);break;case BottomScale:var r=0;o&&(r+=2);var l=r+i;t.drawLine(n,r,n,l);break;case TopScale:r=t.canvasHeight();o&&(r-=2);l=r-i;t.drawLine(n,r,n,l)}}},this.drawBackbone=function(t){var e=.5*t.pen().width,i=this.hasComponent(Enum.ScaleComponent.Backbone);switch(this.alignment()){case LeftScale:var n=t.canvasWidth()-e;i&&(n-=2),t.drawLine(n,0,n,t.canvasHeight());break;case RightScale:n=e;i&&(n+=2),t.drawLine(n,0,n,t.canvasHeight());break;case TopScale:var o=t.canvasHeight()-e;i&&(o-=2),t.drawLine(0,o,t.canvasWidth(),o);break;case BottomScale:o=e;i&&(o+=2),t.drawLine(0,o,t.canvasWidth(),o)}},this.labelPosition=function(t,e){t.save();var i=this.scaleMap().transform(e),n=this.spacing();this.hasComponent(Enum.ScaleComponent.Backbone)&&(n+=1),this.hasComponent(Enum.ScaleComponent.Ticks)&&(n+=this.tickLength(MajorTick));var o=0,s=0,a=t.measureText("M").width;switch(this.alignment()){case RightScale:o=n,s=i+.5*a+0;break;case LeftScale:o=t.canvas.width-n,s=i+.5*a+0;break;case BottomScale:o=i+0,s=n+a;break;case TopScale:o=i+0,s=t.canvas.height-n}return t.restore(),new Misc.Point(o,s)},this.drawLabel=function(t,e){e=Static.adjustForDecimalPlaces(e,this.decimalPlaces());var i=this.getNonExponentNotationLimits();(e>i.upper||e<i.lower)&&(e=e.toExponential(this.decimalPlaces()));var n=this.label(e);if(""!==n){var o=this.labelPosition(t.context(),e);if(this.orientation()!=Horizontal||0!==o.x&&o.x!=t.canvasWidth()){var s=t.textSize(n),a=s.height;if(this.orientation()!=Vertical||!(Math.abs(o.y-.5*a-0)<a||Math.abs(o.y-.5*a-t.canvasHeight())<a)){var r="center",l="undefined";if(this.alignment()===LeftScale)r="right",l="undefined";else if(this.alignment()===RightScale)r="left",l="undefined";else{l=t.canvasWidth()/(this.scaleDiv().ticks(MajorTick).length-1)-5;var c=s.width;if(c>l&&(c=l),o.x-c/2<0||o.x+c/2>t.canvasWidth())return}t.drawText(n,o.x,o.y,r,l)}}}}}}function ceilEps(t,e){return t=(t-_eps*e)/e,Math.ceil(t)*e}function floorEps(t,e){return t=(t+_eps*e)/e,Math.floor(t)*e}function divideEps(t,e){return 0===e||0===t?0:(t-_eps*t)/e}define("scaleDraw",["static","abstractScaleDraw"],function(){}),Static.mLog=function(t,e){return Math.log(e)/Math.log(t)},Static.mLogInterval=function(t,e){return new Interval(Static.mLog(t,e.minValue()),Static.mLog(t,e.maxValue()))},Static.mPowInterval=function(t,e){return new Interval(Math.pow(t,e.minValue()),Math.pow(t,e.maxValue()))},Static.mStepSize=function(t,e,i){if(e<=0)return 0;if(e>2)for(var n=e;n>1;n--)for(var o=t/n,s=Math.floor(Math.log(o)/Math.log(i)),a=Math.pow(i,s),r=i;r>1;r/=2){if(Static.mFuzzyCompare(o,r*a))return o;if(3===r&&i%2==0&&Static.mFuzzyCompare(o,2*a))return o}return.5*t},Static.divideInterval=function(t,e,i){if(e<=0)return 0;var n=divideEps(t,e);if(0===n)return 0;for(var o=Static.mLog(i,Math.abs(n)),s=Math.floor(o),a=Math.pow(i,o-s),r=i;r>1&&a<=r/2;)r/=2;var l=r*Math.pow(i,s);return n<0&&(l=-l),l};class ScaleEngine{constructor(t){var e=10,i=0,n=0;void 0!==t&&(e=t);var o=null,s=0;this.lowerMargin=function(){return i},this.upperMargin=function(){return n},this.setMargins=function(t,e){i=Math.max(t,0),n=Math.max(e,0)},this.setTransformation=function(t){t!==o&&(o=t)},this.transformation=function(){var t=null;return o&&(t=o.copy()),t},this.divideInterval=function(t,i){return Static.divideInterval(t,i,e)},this.contains=function(t,e){return!!t.isValid()&&(!(Static.m3FuzzyCompare(e,t.minValue(),t.width())<0)&&!(Static.m3FuzzyCompare(e,t.maxValue(),t.width())>0))},this.strip=function(t,e){if(!e.isValid()||0===t.length)return[];if(this.contains(e,t[0])&&this.contains(e,t[t.length-1]))return t;for(var i=[],n=0;n<t.length;n++)this.contains(e,t[n])&&i.push(t[n]);return i},this.buildInterval=function(t){var e=0===t?.5:Math.abs(.5*t);return Number.MAX_VALUE-e<t?new Interval(Number.MAX_VALUE-e,Number.MAX_VALUE):-Number.MAX_VALUE+e>t?new Interval(-Number.MAX_VALUE,-Number.MAX_VALUE+e):new Interval(t-e,t+e)},this.setBase=function(t){e=Math.max(t,2)},this.base=function(){return e},this.setReference=function(t){s=t},this.reference=function(){return s}}toString(){return"[ScaleEngine]"}}class LinearScaleEngine extends ScaleEngine{constructor(t){super(t),this.autoScale=function(t,e,i){var n=new Interval(e.x1,e.x2);(n=n.normalized()).setMinValue(n.minValue()-this.lowerMargin()),n.setMaxValue(n.maxValue()+this.upperMargin()),0===n.width()&&(n=this.buildInterval(n.minValue())),Static.divideInterval(n.width(),Math.max(t,1),this.base()),e.x1=n.minValue(),e.x2=n.maxValue()},this.divideScale=function(t,e,i,n,o){void 0===o&&(o=0);var s=new Interval(t,e).normalized();if(s.width()<=0)return new ScaleDiv;0===(o=Math.abs(o))&&(i<1&&(i=1),o=Static.divideInterval(s.width(),i,this.base()));var a=new ScaleDiv;if(0!==o){var r=[];this.buildTicks(s,o,n,r),a=new ScaleDiv(s,r)}return t>e&&a.invert(),a},this.buildTicks=function(t,e,i,n){var o=this.align(t,e);if(n[MajorTick]=this.buildMajorTicks(o,e),i>0){var s=[],a=[];this.buildMinorTicks(n[MajorTick],i,e,s,a),n[MinorTick]=s,n[MediumTick]=a}for(var r=0;r<NTickTypes;r++){var l=this.strip(n[r],t);n[r]=[],n[r]=l;for(var c=0;c<n[r].length;c++)0===Static.m3FuzzyCompare(n[r][c],0,e)&&(n[r][c]=0)}},this.buildMajorTicks=function(t,e){var i=Math.round(t.width()/e)+1;i>1e4&&(i=1e4);var n=[];n.push(t.minValue());for(var o=1;o<i-1;o++)n.push(t.minValue()+o*e);return n.push(t.maxValue()),n},this.buildMinorTicks=function(t,e,i,n,o){var s=Static.mStepSize(i,e,this.base());if(0!==s){var a=Math.ceil(Math.abs(i/s))-1,r=-1;a%2&&(r=a/2);for(var l=0;l<t.length;l++)for(var c=t[l],u=0;u<a;u++){var h=c+=s;0===Static.m3FuzzyCompare(c,0,i)&&(h=0),u==r?o.push(h):n.push(h)}}},this.align=function(t,e){var i=t.minValue(),n=t.maxValue();if(-Number.MAX_VALUE+e<=i){var o=floorEps(i,e);0!==Static.m3FuzzyCompare(i,o,e)&&(i=o)}if(Number.MAX_VALUE-e>=n){o=ceilEps(n,e);0!==Static.m3FuzzyCompare(n,o,e)&&(n=o)}return new Interval(i,n)}}toString(){return"[LinearScaleEngine]"}}class LogScaleEngine extends ScaleEngine{constructor(t){super(t),this.setTransformation(new LogTransform),this.autoScale=function(t,e,i){var n=this.base(),o=new Interval(e.x1/Math.pow(n,this.lowerMargin()),e.x2*Math.pow(n,this.upperMargin()));if(o.maxValue()/o.minValue()<n){var s=new LinearScaleEngine;s.setReference(this.reference()),s.setMargins(this.lowerMargin(),this.upperMargin()),s.autoScale(t,e,i);var a=new Interval(e.x1,e.x2);if(a.normalized(),(a=a.limited(1e-100,1e100)).maxValue()/a.minValue()<n)return void(i=i<0?-Static.mLog(n,Math.abs(i)):Static.mLog(n,i))}this.reference()>5e-101&&Math.min(this.reference(),5e99),0==(o=o.limited(1e-100,1e100)).width()&&(o=this.buildInterval(o.minValue())),(i=Static.divideInterval(Static.mLogInterval(n,o).width(),Math.max(t,1)))<1&&(i=1),e.x1=o.minValue(),e.x2=o.maxValue()},this.divideScale=function(t,e,i,n,o){var s=new Interval(t,e);if(s.normalized(),(s=s.limited(1e-100,1e100)).width()<=0)return new ScaleDiv;var a=this.base();if(s.maxValue()/s.minValue()<a){var r=new LinearScaleEngine;return r.setReference(this.reference()),r.setMargins(this.lowerMargin(),this.upperMargin()),0!=o&&(o=o<0?-Math.pow(a,-o):Math.pow(a,o)),r.divideScale(t,e,i,n,o)}0==(o=Math.abs(o))&&(i<1&&(i=1),(o=Static.divideInterval(Static.mLogInterval(a,s).width(),i,this.base()))<1&&(o=1));var l=new ScaleDiv;if(0!=o){var c=[];this.buildTicks(s,o,n,c),l=new ScaleDiv(s,c)}return t>e&&l.invert(),l},this.buildTicks=function(t,e,i,n){var o=this.align(t,e);if(n[MajorTick]=this.buildMajorTicks(o,e),i>0){var s=[],a=[];this.buildMinorTicks(n[MajorTick],i,e,s,a),n[MinorTick]=s,n[MediumTick]=a}for(var r=0;r<NTickTypes;r++){var l=this.strip(n[r],t);n[r]=[],n[r]=l;for(var c=0;c<n[r].length;c++)0===Static.m3FuzzyCompare(n[r][c],0,e)&&(n[r][c]=0)}},this.buildMajorTicks=function(t,e){var i=Static.mLogInterval(this.base(),t).width(),n=Math.round(i/e)+1;n>1e4&&(n=1e4);var o=Math.log(t.minValue()),s=(Math.log(t.maxValue())-o)/(n-1),a=[];a.push(t.minValue());for(var r=1;r<n-1;r++)a.push(Math.exp(o+r*s));return a.push(t.maxValue()),a},this.buildMinorTicks=function(t,e,i,n,o){var s=this.base();if(i<1.1){if(0==(h=this.divideInterval(i,e+1)))return;var a=Math.round(i/h),r=-1;for(a>2&&a%2==0&&(r=a/2),v=0;v<t.length-1;v++){var l=t[v],c=s/a;if(c>=1)for(f=2;f<a;f++)n.push(l*f*c);else for(f=1;f<a;f++){var u=l+f*l*(s-1)/a;f==r?o.push(u):n.push(u)}}}else{var h;if(0==(h=this.divideInterval(i,e)))return;h<1&&(h=1);var d=Math.round(i/h)-1;if(Static.m3FuzzyCompare((d+1)*h,i,i)>0&&(d=0),d<1)return;r=-1;d>2&&d%2&&(r=d/2);for(var p=Math.max(Math.pow(s,h),s),v=0;v<t.length;v++){u=t[v];for(var f=0;f<d;f++)u*=p,f==r?o.push(u):n.push(u)}}},this.align=function(t,e){var i=Static.mLogInterval(this.base(),t),n=floorEps(i.minValue(),e);0==Static.m3FuzzyCompare(t.minValue(),n,e)&&(n=t.minValue());var o=ceilEps(i.maxValue(),e);return 0==Static.m3FuzzyCompare(t.maxValue(),o,e)&&(o=t.maxValue()),Static.mPowInterval(this.base(),new Interval(n,o))}}toString(){return"[LogScaleEngine]"}}function PointMapper(){var t=0,e=new Misc.Rect;this.setBoundingRect=function(t){e=t},this.boundingRect=function(){return e},this.setFlag=function(e,i){i?t|=e:t&=~e},this.testFlag=function(e){return t&e},this.toPolygonF=function(e,i,n,o,s){return t&WeedOutPoints?t&RoundPoints?mToPolylineFiltered(e,i,n,o,s,!0):mToPolylineFiltered(e,i,n,o,s,!1):t&RoundPoints?Static.mToPoints(new Misc.Rect(0,0,-1,-1),e,i,n,o,s,!0):Static.mToPoints(new Misc.Rect(0,0,-1,-1),e,i,n,o,s,!1)},this.toPointsF=function(i,n,o,s,a){return t&WeedOutPoints?t&RoundPoints?e.left()<=e.right()&&e.top()<=e.bottom()?Static.mToPointsFiltered(e,i,n,o,s,a):mToPolylineFiltered(i,n,o,s,a,!0):Static.mToPolylineFiltered(i,n,o,s,a,!1):t&RoundPoints?Static.mToPoints(e,i,n,o,s,a,!0):Static.mToPoints(e,i,n,o,s,a,!1)}}define("scaleEngine",["static"],function(){}),Static.mToPolylineFiltered=function(t,e,i,n,o,s){var a=[],r=i.sample(n);a[0]=new Misc.Point(Math.round(t.transform(r.x)),Math.round(e.transform(r.y)));for(var l=0,c=n+1;c<=o;c++){var u,h=i.sample(c);u=s?new Misc.Point(Math.round(t.transform(h.x)),Math.round(e.transform(h.y))):new Misc.Point(t.transform(h.x),e.transform(h.y)),a[l].x===u.x&&a[l].y===u.y||(a[++l]=u)}return a},Static.mToPoints=function(t,e,i,n,o,s,a){var r=[];if(t.left()<=t.right()&&t.top()<=t.bottom())for(h=o;h<=s;h++){var l=n.sample(h),c=e.transform(l.x),u=i.transform(l.y);c>=t.left()&&c<=t.right()&&u>=t.top()&&u<=t.bottom()&&(a?r.push(new Misc.Point(Math.round(c),Math.round(u))):r.push(new Misc.Point(c,u)),0)}else for(var h=o;h<=s;h++){l=n.sample(h),c=e.transform(l.x)-1,u=i.transform(l.y)-1;a?r.push(new Misc.Point(Math.round(c),Math.round(u))):r.push(new Misc.Point(c,u)),0}return r},PointMapper.prototype.toString=function(){return"[PointMapper]"},define("pointMapper",["static"],function(){});class AxisData{constructor(){this.axisName="",this.isEnabled=!1,this.doAutoScale=!0,this.minValue,this.maxValue,this.stepSize,this.maxMajor,this.maxMinor,this.isValid=!0,this.scaleDiv=null,this.scaleEngine=null,this.scaleWidget=null,this.scaleDomDiv=null,this.canvas=null}toString(){return"[AxisData]"}}class Plot{constructor(t,e){var i;i=t||$("#plotDiv");var n=this,o=[],s=[],a=!1,r="",l="",c=!1,u="",h="",p=!1,v=null,f=new Misc.Font;this.zoomer=null,this.panner=null,this.isSidebarVisible=function(){return a},Static.bind("showSidebar",function(t,e){a=e}),this.setLegendFont=function(t){f=t},this.legendFont=function(){return f},this.autoRefresh=function(){p&&this.replot()},this.setAutoReplot=function(t){p=t},this.autoReplot=function(){return p},this.plotItemStore=function(){return o};var m=new Misc.Font(12),g=new Misc.Font(12),b=new Layout(i,this);this.getLayout=function(){return b},this.axisInterval=function(t){return this.axisValid(t)?s[t].scaleDiv.interval():new Interval},this.setAxisDecimalPlaces=function(t,e){this.axisValid(t)&&(this.axisScaleDraw(t).setDecimalPlaces(e),this.autoRefresh())},this.setNonExponentNotationLimits=function(t,e){for(var i=0;i<axisCnt;++i)this.axisScaleDraw(i).setNonExponentLimits(t,e);this.autoRefresh()},this.axisDecimalPlaces=function(t){return this.axisValid(t)?this.axisScaleDraw(t).decimalPlaces():3};var S=new Widget(b.getCentralDiv()),y=new Widget(b.getTitleDiv()),x=new Widget(b.getFooterDiv());S.setEnabled_1(!0),S.plot=this,this.getCentralWidget=function(){return S},this.getTitleWidget=function(){return y},this.getFooterWidget=function(){return x},this.initAxesData=function(){var t;for(t=0;t<axisCnt;t++)s[t]=new AxisData;for(s[yLeft].axisName="AxisYLeft",s[yRight].axisName="AxisYRight",s[xTop].axisName="AxisXTop",s[xBottom].axisName="AxisXBottom",s[yLeft].scaleWidget=new ScaleWidget(this,b.getScaleDivElement(yLeft),LeftScale),s[yRight].scaleWidget=new ScaleWidget(this,b.getScaleDivElement(yRight),RightScale),s[xTop].scaleWidget=new ScaleWidget(this,b.getScaleDivElement(xTop),TopScale),s[xBottom].scaleWidget=new ScaleWidget(this,b.getScaleDivElement(xBottom),BottomScale),t=0;t<axisCnt;t++){var e=s[t];e.scaleEngine=new LinearScaleEngine,e.scaleWidget.setTransformation(e.scaleEngine.transformation()),e.doAutoScale=!0,e.minValue=0,e.maxValue=1e3,e.stepSize=0,e.maxMinor=5,e.maxMajor=8,e.isValid=!1}s[yLeft].isEnabled=!0,s[yRight].isEnabled=!0,s[xBottom].isEnabled=!0,s[xTop].isEnabled=!0},this.axisMaxMinor=function(t){return this.axisValid(t)?s[t].maxMinor:0},this.axisMaxMajor=function(t){return this.axisValid(t)?s[t].maxMajor:0},this.setAxisMaxMinor=function(t,e){if(this.axisValid(t)){e=Static.qBound(0,e,100);var i=s[t];e!=i.maxMinor&&(i.maxMinor=e,i.isValid=!1,this.autoRefresh())}},this.setAxisMaxMajor=function(t,e){if(this.axisValid(t)){e=Static.qBound(1,e,1e4);var i=s[t];e!=i.maxMajor&&(i.maxMajor=e,i.isValid=!1,this.autoRefresh())}},this.axisValid=function(t){return t>=yLeft&&t<axisCnt},this.setAxisScaleEngine=function(t,e){if(this.axisValid(t)&&null!==e){var i=s[t];i.scaleEngine=e,s[t].scaleWidget.setTransformation(e.transformation()),i.isValid=!1,this.autoRefresh()}},this.legend=function(){return v},this.setLegend=function(t){v!==t&&(v=t).setPlot(this)},this.insertLegend=function(t){(v=t).setLegendDiv(b.getLegendDiv()),v.setPlot(this);for(var e=0;e<o.length;++e)this.insertLegendItem(o[e]);Static.trigger("legendInserted",v)},this.insertLegendItem=function(t,e){null!==v&&null!=t&&(t.testItemAttribute(Legend)&&v.addItem(t,e),v.isEmpty()||c&&v.legendDiv().show())},this.removeLegendItem=function(t){if(null!==v){var e=v.removeItem(t);return v.isEmpty()&&v.legendDiv().hide(),e}},this.updateLegend=function(t){if(null!=t&&t.testItemAttribute(Legend)){var e=this.removeLegendItem(t);this.insertLegendItem(t,e)}},this.axisScaleEngine=function(t){return this.axisValid(t)?s[t].scaleEngine:null},this.setAxisAutoScale=function(t,e){this.axisValid(t)&&s[t].doAutoScale!==e&&(s[t].doAutoScale=e,this.autoRefresh())},this.axisAutoScale=function(t){return!!this.axisValid(t)&&s[t].doAutoScale},this.setAxisScale=function(t,e,i,n){var o=0;if(void 0!==n&&(o=n),this.axisValid(t)){var a=s[t];a.doAutoScale=!1,a.isValid=!1,a.minValue=e,a.maxValue=i,a.stepSize=o,Static.trigger("rescaled"),this.autoRefresh()}},this.enableAxis=function(t,e){this.axisValid(t)&&e!==s[t].isEnabled&&(s[t].isEnabled=e,e?s[t].scaleWidget.show():s[t].scaleWidget.hide(),this.autoRefresh())},this.axisEnabled=function(t){return!!this.axisValid(t)&&s[t].isEnabled},this.setAxisTitle=function(t,e){this.axisValid(t)&&(s[t].scaleWidget.setTitle(e),this.autoRefresh())},this.axisTitle=function(t){return this.axisValid(t)?s[t].scaleWidget.title():""},this.axisScaleDiv=function(t){return s[t].scaleDiv},this.setAxisScaleDiv=function(t,e){this.axisValid(t)&&(d=s[t],d.doAutoScale=!1,d.scaleDiv=e,d.isValid=!0,this.autoRefresh())},this.axisScaleDraw=function(t){return this.axisValid(t)?this.axisWidget(t).scaleDraw():null},this.setAxisLabelFont=function(t,e){this.axisValid(t)&&(this.axisWidget(t).setLabelFont(e),this.autoRefresh())},this.axisLabelFont=function(t){return this.axisValid(t)?this.axisWidget(t).labelFont():null},this.setAxisTitleFont=function(t,e){this.axisValid(t)&&(this.axisWidget(t).setTitleFont(e),this.autoRefresh())},this.axisTitleFont=function(t){return this.axisValid(t)?this.axisWidget(t).titleFont():null},this.initAxesData(),this.isCursorSet=function(){return""!==u},this.cursor=function(t){return u},this.setCursor=function(t){t!=u&&(u=t,b.getCentralDiv().css("cursor",u))},this.setDefaultCursor=function(t){h!=t&&(h=t)},this.unsetCursor=function(){h!=u&&(u=h,b.getCentralDiv[0].style.cursor=u)},this.title=function(){return r},this.hideTitle=function(){""!=r&&(b.getTitleDiv().hide(),b.updateLayout(),this.autoRefresh())},this.showTitle=function(){""!=r&&(b.getTitleDiv().show(),b.updateLayout(),this.autoRefresh())},this.setTitle=function(t){r!==t&&(r=t,0==t.trim(" ").length&&(r=""),""!==r?(b.getTitleDiv().show(),Static.trigger("titleAdded",!0)):(b.getTitleDiv().hide(),Static.trigger("titleAdded",!1)),b.updateLayout(),this.autoRefresh())},this.setTitleFont=function(t){t.th<0||""===t.name||""===t.style||(m=t,b.adjustLayout(b.getTitleDiv(),2*t.th),this.autoRefresh())},this.setTitleFont(new Misc.Font(20,"Arial","normal","bold")),this.titleFont=function(){return m},this.footer=function(){return l},this.hideFooter=function(){""!=l&&(b.getFooterDiv().hide(),b.updateLayout(),this.autoRefresh())},this.showFooter=function(){""!=l&&(b.getFooterDiv().show(),b.updateLayout(),this.autoRefresh())},this.setFooter=function(t){l!==t&&(""!==(l=t)?(b.getFooterDiv().show(),Static.trigger("footerAdded",!0)):(b.getFooterDiv().hide(),Static.trigger("footerAdded",!1)),b.updateLayout(),this.autoRefresh())},this.setFooterFont=function(t){t.th<0||""===t.name||""===t.style||(g=t,b.adjustLayout(b.getFooterDiv(),2*t.th),this.autoRefresh())},this.setFooterFont(new Misc.Font(15,"Arial","normal","bold")),this.footerFont=function(){return g},this.enableLegend=function(t){c=t,v&&!v.isEmpty()&&(t?v.legendDiv().show():v.legendDiv().hide(),this.autoRefresh())},this.isLegendEnabled=function(t){return!!v&&!("none"==v.legendDiv()[0].style.display)},this.invTransform=function(t,e){return this.axisValid(t)?this.canvasMap(t).invTransform(e):0},this.transform=function(t,e){return this.axisValid(t)?this.canvasMap(t).transform(e):0};this.setPlotBackground=function(t){this.getCentralWidget().getElement().css("background-color",t)},this.setPlotBackground("rgb(238, 232, 170)"),this.plotBackground=function(t){return this.getCentralWidget().getElement().css("background-color")},this.setBorderRadius=function(t){this.getCentralWidget().getCanvas().css("border-radius",t)},this.borderRadius=function(t){return m_borderRadius},this.findPlotCurve=function(t){for(var e=this.itemList(Static.Rtti_PlotCurve),i=0;i<e.length;++i)if(e[i].title()===t)return e[i];return null},this.hasVisiblePlotCurve=function(){for(var t=this.itemList(Static.Rtti_PlotCurve),e=0;e<t.length;++e)if(t[e].isVisible())return!0;return!1},this.hasPlotCurve=function(){return this.itemList(Static.Rtti_PlotCurve).length>0},this.drawBackGround=function(){var t=new PaintUtil.Painter(S);t.fillRect(new Misc.Rect(0,0,S.width(),S.height()),""),t=null},this.drawTitle=function(){if(""!==r){var t=new PaintUtil.Painter(y);t.setFont(m),t.drawText(r,y.width()/2,2.6*m.th/2,"center"),t=null}},this.drawFooter=function(){if(""!==l){var t=new PaintUtil.Painter(x);t.setFont(g),t.drawText(l,x.width()/2,2.6*g.th/2,"center"),t=null}},this.itemList=function(t){return void 0===t?o:_.filter(o,function(e){return e.rtti===t})},this.insertItem=function(t){o.push(t)},this.removeItem=function(t){var e=o.indexOf(t);e>-1&&o.splice(e,1)},this.canvasMap=function(t){var e=new ScaleMap;e.setTransformation(this.axisScaleEngine(t).transformation());var i=this.axisScaleDiv(t);e.setScaleInterval(i.lowerBound(),i.upperBound());var n=this.axisWidget(t);if(t==yLeft||t==yRight){var o=n.height();e.setPaintInterval(o,0)}else{var s=n.width();e.setPaintInterval(0,s)}return e},this.axisWidget=function(t){return this.axisValid(t)?s[t].scaleWidget:null},this.updateAxes=function(){for(var t=[new Interval(Number.MAX_VALUE,-Number.MAX_VALUE),new Interval(Number.MAX_VALUE,-Number.MAX_VALUE),new Interval(Number.MAX_VALUE,-Number.MAX_VALUE),new Interval(Number.MAX_VALUE,-Number.MAX_VALUE)],e=0;e<o.length;++e){var i=o[e];if(i.testItemAttribute(AutoScale)&&(i.isVisible()&&(this.axisAutoScale(i.xAxis())||this.axisAutoScale(i.yAxis())))){var a=i.boundingRect();a.width()>=0&&(a.left()<t[i.xAxis()].minValue()&&t[i.xAxis()].setMinValue(a.left()),a.right()>t[i.xAxis()].maxValue()&&t[i.xAxis()].setMaxValue(a.right())),a.height()>=0&&(a.top()<t[i.yAxis()].minValue()&&t[i.yAxis()].setMinValue(a.top()),a.bottom()>t[i.yAxis()].maxValue()&&t[i.yAxis()].setMaxValue(a.bottom()))}}for(var r=0;r<axisCnt;r++){var l=s[r],c=l.minValue,u=l.maxValue,h=l.stepSize;if(l.doAutoScale&&t[r].isValid()){l.isValid=!1;var d={x1:c=t[r].minValue(),x2:u=t[r].maxValue()};l.scaleEngine.autoScale(l.maxMajor,d,h),c=d.x1,u=d.x2}l.isValid||(l.scaleDiv=l.scaleEngine.divideScale(c,u,l.maxMajor,l.maxMinor,h),l.isValid=!0);var p=this.axisWidget(r);p.setScaleDiv(l.scaleDiv);var v={start:void 0,end:void 0};p.getBorderDistHint(v),p.setBorderDist(v.start,v.end)}o.forEach(function(t){t.testItemInterest(ScaleInterest)&&t.updateScaleDiv(n.axisScaleDiv(t.xAxis()),n.axisScaleDiv(t.yAxis()))})},this.attachItem=function(t,e){e?(this.insertItem(t),t.testItemAttribute(Legend)&&this.insertLegendItem(t)):(t.testItemAttribute(Legend)&&this.removeLegendItem(t),this.removeItem(t)),Static.trigger("itemAttached",[t,e]),e||(t=null),this.autoRefresh()},this.replot=function(){var t=this.autoReplot();this.setAutoReplot(!1),this.updateAxes();for(var e=0;e<axisCnt;e++){var i=s[e].scaleWidget;i.scaleDraw().data.plotBorderWidth=parseFloat(this.getLayout().getCentralDiv().css("border-width")),i.draw()}this.drawTitle(),this.drawFooter();for(var n=0;n<o.length;++n)o[n].isVisible()&&o[n].draw(this.axisScaleDraw(o[n].xAxis()).scaleMap(),this.axisScaleDraw(o[n].yAxis()).scaleMap());Static.trigger("replot"),this.setAutoReplot(t)},this.setAutoReplot(!0),b.getTitleDiv().hide(),void 0!==e&&this.setTitle(e),h=b.getCentralDiv().css("cursor"),this.setCursor("crosshair"),this.enableAxis(yRight,!1),this.enableAxis(xTop,!1),b.getFooterDiv().hide(),v?v.legendDiv().hide():b.getLegendDiv().hide(),Static.bind("resize",function(){n.replot()}),this.setAutoReplot(!1),this.toString=function(){return'[Plot "'+r+'"]'},Static.bind("beforePrint",function(){n.replot()})}}define("plot",["static","widget","scaleWidget","utility","miscObjects","painter","scaleDiv","interval","scaleMap","scaleWidget","transform","layout","scaleDraw","scaleEngine","pointMapper"],function(){});class SeriesData{constructor(){this.d_boundingRect=new Misc.Rect,Static.mBoundingRectPoint=function(t){return new Misc.Rect(t.x,t.y,0,0)},Static.mBoundingRect=function(t,e,i){var n,o=new Misc.Rect;if(void 0===e&&(e=0),void 0===i&&(i=t.size()-1),i<e)return o;for(n=e;n<=i;n++){if((s=Static.mBoundingRectPoint(t.sample(n))).width()>=0&&s.height()>=0){o=s,n++;break}}for(;n<=i;n++){var s;(s=Static.mBoundingRectPoint(t.sample(n))).width()>=0&&s.height()>=0&&o.setRect(Math.min(o.left(),s.left()),Math.min(o.top(),s.top()),Math.max(o.right(),s.right())-Math.min(o.left(),s.left()),Math.max(o.bottom(),s.bottom())-Math.min(o.top(),s.top()))}return o},this.setRectOfInterest=function(t){},this.toString=function(){return"[SeriesData]"}}}class ArraySeriesData extends SeriesData{constructor(t){super();var e=[];void 0!==t&&(e=t),this.setSamples=function(t){this.d_boundingRect=new Misc.Rect,e=t},this.samples=function(){return e},this.size=function(){return e.length},this.sample=function(t){return e[t]},this.toString=function(){return"[ArraySeriesData]"}}}class PointSeriesData extends ArraySeriesData{constructor(t){super(t),this.boundingRect=function(){return this.d_boundingRect.width()<0&&(this.d_boundingRect=Static.mBoundingRect(this)),this.d_boundingRect},this.toString=function(){return"[PointSeriesData]"}}}class Point3DSeriesData extends ArraySeriesData{constructor(t){super(t),this.boundingRect=function(){return this.d_boundingRect.width()<0&&(this.d_boundingRect=Static.mBoundingRect(this)),this.d_boundingRect},this.toString=function(){return"[Point3DSeriesData]"}}}class PlotSeriesItem extends PlotItem{constructor(t){super(t);var e=null,i=Vertical;this.setOrientation=function(t){i!=t&&(i=t)},this.orientation=function(){return i},this.draw=function(t,e){this.drawSeries(t,e,0,-1)},this.boundingRect=function(){return this.dataRect()},this.updateScaleDiv=function(t,e){var i=new Misc.Rect(new Misc.Point(t.lowerBound(),e.lowerBound()),t.range(),e.range());this.setRectOfInterest(i)},this.data=function(){return e},this.sample=function(t){return e?e.sample(t):null},this.setData=function(t){e!=t&&(e=t)},this.dataSize=function(){return null==e?0:e.size()},this.dataRect=function(){return null==e?new Misc.Rect:e.boundingRect()},this.setRectOfInterest=function(t){e&&e.setRectOfInterest(t)},this.swapData=function(t){var i=e;return e=t,i},this.toString=function(){return"[PlotSeriesItem]"}}}define("seriesData",["static","plotItem"],function(){});class SyntheticPointData extends SeriesData{constructor(t,e){super();var i,n=t,o=e||new Interval,s=new Interval(0,10);this.setSize=function(t){n=t},this.size=function(){return n},this.setInterval=function(t){o=t.normalized()},this.interval=function(){return o},this.setRectOfInterest=function(t){i=t,s=new Interval(t.left(),t.right()).normalized()},this.rectOfInterest=function(){return i},this.boundingRect=function(){return 0==n||!o.isValid()&&!s.isValid()?new Misc.Rect(1,1,-2,-2):Static.mBoundingRect(this)},this.y=function(t){throw'subclass must implement "this.y"'},this.sample=function(t){if(t>=n)return new Misc.Point(0,0);var e=this.x(t),i=this.y(e);return new Misc.Point(e,i)},this.x=function(t){var e=o.isValid()?o:s;if(!e.isValid()||0==n||t>=n)return 0;var i=e.width()/n;return e.minValue()+t*i},this.toString=function(){return"[SyntheticPointData]"}}}define("pointData",["static","seriesData"],function(){});class FunctionData extends SyntheticPointData{constructor(t,e){super(e);var i=t,n=new EvaluateExp(i);this.setFn=function(t){i=t,n.setExpString(i)},this.y=function(t){return n.error?0:n.eval({x:t})}}}define("functionData",["pointData"],function(){});class PlotGrid extends PlotItem{constructor(t){super(t),this.setItemAttribute(AutoScale,!0);var e=!0,i=!0,n=!1,o=!1,s=null,a=null,r="grey",l="lightGrey";this.rtti=Static.Rtti_PlotGrid,this.setMajorPen=function(t){r!==t&&(r=t,this.itemChanged())},this.majorPen=function(){return r},this.setMinorPen=function(t){l!==t&&(l=t,this.itemChanged())},this.minorPen=function(){return l},this.enableX=function(t){e!=t&&(e=t,this.itemChanged(),Static.trigger("itemChanged",[this,t]))},this.enableY=function(t){i!=t&&(i=t,this.itemChanged(),Static.trigger("itemChanged",[this,t]))},this.enableXMin=function(t){n!=t&&(n=t,this.itemChanged())},this.enableYMin=function(t){o!=t&&(o=t,this.itemChanged())},this.setXDiv=function(t){s!==t&&(s=t)},this.xDiv=function(){return s},this.setYDiv=function(t){a!==t&&(a=t)},this.yDiv=function(){return a},this.draw=function(t,s){var a=this.plot(),c=a.axisScaleDiv(this.xAxis()),u=a.axisScaleDiv(this.yAxis()),h=this.getContext();h.strokeStyle=l,e&&n&&(this.drawLines(h,"vertical",t,c.ticks(MinorTick)),this.drawLines(h,"vertical",t,c.ticks(MediumTick))),i&&o&&(this.drawLines(h,"horizontal",s,u.ticks(MinorTick)),this.drawLines(h,"horizontal",s,u.ticks(MediumTick))),h.strokeStyle=r,e&&this.drawLines(h,"vertical",t,c.ticks(MajorTick)),i&&this.drawLines(h,"horizontal",s,u.ticks(MajorTick))},this.drawLines=function(t,e,i,n){for(var o=t.canvas.width-1,s=t.canvas.height-1,a=new PaintUtil.Painter(t),r=a.pen().width,l=0;l<n.length;l++){var c=i.transform(n[l]);"horizontal"===e?a.drawLine(0,c-r,o,c-r):a.drawLine(c-r,0,c-r,s)}a=null},this.updateScaleDiv=function(t,e){this.setXDiv(t),this.setYDiv(e)},this.toString=function(){return"[PlotGrid]"}}}define("plotGrid",["static","plotItem"],function(){});class MyPlot extends Plot{constructor(t,e){super(t,e);var i=this,n=!0;this.grid=new PlotGrid,this.grid.attach(this),Utility.minorGridLines(this.grid,!0),this.insertLegend(new MLegend),this.enableLegend(!0);var o=new MSettings;function s(t,e,n){if(!e||0==e.length)return!1;if(i.findPlotCurve(t))return Static.alert(t+" already exist"),!1;var o=new MyCurve(t);n||i.addCurveInit(o),o.setSamples(e),o.setPen(new Misc.Pen(Utility.randomColor())),i.curveAttributeDlg.defaultIconSize=new Misc.Size(o.getLegendIconSize());var s="";return Static.showline&&Static.showsymbol?s="lineAndSymbol":Static.showline?s="line":Static.showsymbol&&(s="symbol"),Utility.setLegendAttribute(o,s,o.getLegendIconSize()),o.attach(i),i.rv.setCurrentCurve(o),i.sidebar.initSidebar(),!0}this.settings=function(){return o},o.setPlot(this),this.file=new MFile(this,MyCurve),this.pointEntryDlg=new MPointEntryDlg,this._functionDlg=new MFunctionDlg,this.curveFitDlg=new MCurveFitDlg,this.curveStyleDlg=new MCurveStyleDlg,this.axisDlg=new MAxisDlg,this.curveAttributeDlg=new MCurveLegendAttributeDlg,this.curveSettings=new MCurveSettings(this),this.addCurveInit=function(t){t.coeffs=i._functionDlg.coeffs,t.variable=i._functionDlg.variable,t.coeffsVal=function(){for(var t=[],e=i._functionDlg.coeffs||[],n=0;n<e.length;++n)t.push(1);return t}(),t.fn=i._functionDlg.fn,t.unboundedRange=i._functionDlg.unboundedRange,t.lowerX=parseFloat(i._functionDlg.lowerLimit),t.upperX=parseFloat(i._functionDlg.upperLimit),t.numOfSamples=i._functionDlg.numOfPoints},Static.bind("addCurve",function(t,e,i,n){s(e,i,n)}),this._functionDlg.init(function(){var t=i._functionDlg.title,e=i._functionDlg.fn,n=(i._functionDlg.lowerLimit,i._functionDlg.upperLimit,i._functionDlg.numOfPoints),o=i._functionDlg.coeffs;if(i._functionDlg.coeffs.length)for(var a=0;a<o.length;++a)for(;-1!=e.indexOf(o[a]);)e=e.replace(o[a],1);i._functionDlg.unboundedRange?function(t,e,n){if(i.findPlotCurve(t))return Static.alert(t+" already exist"),!1;i.setAxisScale(xBottom,1,10),i.setAxisScale(yLeft,1,10);var o=new MyCurve(t);return i.addCurveInit(o),o.setData(new FunctionData(e,n)),o.setPen(new Misc.Pen(Utility.randomColor())),i.curveAttributeDlg.defaultIconSize=new Misc.Size(o.getLegendIconSize()),Static.showline&&o.setLegendAttribute(LegendShowLine,!0),Static.showsymbol&&o.setLegendAttribute(LegendShowSymbol,!0),o.attach(i),Utility.setAutoScale(i,!0),!0}(t,e,n)&&i._functionDlg.close():s(t,Utility.makeSamples({fx:e,lowerX:parseFloat(i._functionDlg.lowerLimit),upperX:parseFloat(i._functionDlg.upperLimit),numOfSamples:i._functionDlg.numOfPoints,ok_fn:i._functionDlg.ok}))&&i._functionDlg.close()}),this.addRemovePoint=new AddRemovePointPicker(this),this.addRemovePoint.setAddRemoveMousePattern(Enum.MousePatternCode.MouseSelect1,Static.LeftButton,Static.ShiftModifier),this.addRemovePoint.activate(!0);var a=new Rulers(this);this.sidebar=new SideBar(this),this.tbar=new MToolBar(this,{zIndex:1003}),this.curveClosestPoint=new CurveClosestPoint(this),this.curveClosestPoint.setMousePattern(Static.LeftButton,Static.AltModifier),this.cs=new CurveShapeItem(this),this.curveShapeEnabledByPlotSettings=function(){return n},this.setCurveShapeEnabledByPlotSettings=function(t){n=t},this.setAxisTitle(xBottom,"Bottom scale"),this.setAxisTitle(xTop,"Top scale"),this.setAxisTitle(yLeft,"Left scale"),this.setAxisTitle(yRight,"Right scale"),this.magnifier=new Magnifier(this),this.pan=new Panner(this),this.pan.setCursor("move"),this.pan.setEnabled(!1),this.zm=new MyPlotZoomer(this),this.setFooter("Footer");var r=new LegendMenu(this);r.modifyMenu(null,[{pos:1,name:"curve style",img:"images/style.png",title:"Sets the style of the curve.",fun:function(){var t=r.getCurve();t&&i.curveStyleDlg.curveStyleCb(t)}},{pos:2,name:"axis",img:"images/axis.png",title:"Sets the axes associated with the curve.",fun:function(){var t=r.getCurve();t&&i.axisDlg.axisCb(t)}},{pos:3,name:"legend attribute",img:"images/attribute.png",title:"Sets how the curve is represented on the legend.",fun:function(){var t=r.getCurve();t&&i.curveAttributeDlg.curveAttributeCb(t)}},{pos:6,name:"fit",img:"images/fit.png",title:"Defines a curve fitter.",fun:function(){var t=r.getCurve();t&&i.curveFitDlg.curveFitCb(t)}}]),r.setMenuModificationCb(function(){r.getCurve();r.getCurve().fitType?r.modifyMenu(null,{pos:100,name:"fit info...",title:"Displays information associated with curve fitting.",fun:function(){var t=r.getCurve();if(t){var e=i.curveFitDlg.curveFitInfoCb(t);e.length?Static.alert(e):Static.alert('No curve fitting equation found for "'+t.title()+'."')}}}):r.modifyMenu("fit info...",{})}),this.file.setInputElement($("#fileInput")),this.replot(),this.setAutoReplot(!0),Static.bind("visibilityChange",function(t,e,n){e.rtti==Static.Rtti_PlotCurve&&(i.hasVisiblePlotCurve()?i.watchAreaBelowCurve.setEnable(i.tbar.isDropdownItemChecked("Watch",6)):i.watchAreaBelowCurve.setEnable(!1))});var l=i.getLayout().getCentralDiv(),c=[{name:"Hide rulers",img:"images/hide.png",title:"Hide all rulers",fun:function(){i.rv.setVisible(!1)}},{name:"Show rulers",img:"images/show.png",title:"Show any hidden rulers",fun:function(){i.rv.setVisible(!0)}},{name:"Unlock rulers",img:"images/unlock.png",title:"Unlock any locked rulers",fun:function(){i.rv.unlockAllRulers()}},{name:"Remove all curves",title:"Permanently remove all curves",img:"images/scissors.png",fun:function(){i.itemList(Static.Rtti_PlotCurve).forEach(function(t){t.detach()})}}];Static.bind("rulerDeselected",function(){l.contextMenu(c,{triggerOn:"contextmenu",zIndex:1})});var u=!0;Static.bind("gridlinesAccordingToCurve",function(t,e){u=e;var n=a.currentCurve();n&&u&&i.grid.setAxes(n.xAxis(),n.yAxis())}),Static.bind("currentCurveChanged",function(t,e){e&&u&&i.grid.setAxes(e.xAxis(),e.yAxis()),e&&h&&i.zm.setAxis(e.xAxis(),e.yAxis())}),Static.bind("axisChanged",function(t,e,n){n&&u&&i.grid.setAxes(n.xAxis(),n.yAxis()),n&&h&&i.zm.setAxis(n.xAxis(),n.yAxis())});var h=!0;Static.bind("zoomAccordingToCurve",function(t,e){h=e;var n=a.currentCurve();n&&h&&i.zm.setAxis(n.xAxis(),n.yAxis())})}}define("myPlot",["curveClosestPoint","plot","functionData","plotGrid"],function(){});class Curve extends PlotSeriesItem{constructor(t){super(t),Static.LegendNoAttribute=0,Static.LegendShowLine=1,Static.LegendShowSymbol=2,Static.LegendShowBrush=4;var e=Lines,i=0,n=0,o=FilterPoints,s=Static.LegendNoAttribute,a=new Misc.Brush,r=new Misc.Pen,l=null,c=null;function u(t){return t*t}this.rtti=Static.Rtti_PlotCurve,this.setItemInterest(ScaleInterest,!0),this.minXValue=function(){return this.boundingRect().left()},this.maxXValue=function(){return this.boundingRect().right()},this.minYValue=function(){return this.boundingRect().top()},this.maxYValue=function(){return this.boundingRect().bottom()},this.setLegendAttribute=function(t,e){e!=this.testLegendAttribute(t)&&(e?s|=t:s&=~t,Utility.updateLegendIconSize(this),this.plot()&&this.plot().updateLegend(this))},this.testLegendAttribute=function(t){return s&t},this.legendAttributes=function(){return s},this.setSymbol=function(t){t!==c&&(c=t,Utility.updateLegendIconSize(this),this.legendChanged(),this.itemChanged())},this.symbol=function(){return c},this.setBrush=function(t){"string"==typeof t&&(t=new Misc.Brush(t)),a=t,this.legendChanged(),this.itemChanged()},this.brush=function(){return a},this.setPen=function(t){"object"==typeof t&&(r=t,this.legendChanged(),this.itemChanged())},this.pen=function(){return r},this.setPaintAttribute=function(t,e){e?o|=t:o&=~t},this.testPaintAttribute=function(t){return o&t},this.setSamples=function(t){this.setData(new PointSeriesData(t))},this.setCurveAttribute=function(t,e){void 0===e&&(e=!0),(i&t)!=e&&(e?i|=t:i&=~t,this.itemChanged())},this.curveAttributes=function(){return i},this.testCurveAttribute=function(t){return i&t},this.init=function(){this.setItemAttribute(Legend,!0),this.setItemAttribute(AutoScale,!0),this.setData(new PointSeriesData),this.setCurveAttribute(Fitted,!0),this.setZ(20)},this.setStyle=function(t){t!=e&&(e=t,this.legendChanged(),this.itemChanged())},this.style=function(){return e},this.drawSeries=function(t,i,n,o){var s=this.getContext(),l=new PaintUtil.Painter(s),u=this.dataSize();u<=0||(o<0&&(o=u-1),Utility.mVerifyRange(u,n,o)>0&&(l.save(),l.setPen(r),l.setBrush(a),this.drawCurve(l,e,t,i,n,o),l.restore(),c&&c.style()!==NoSymbol&&(l.save(),l.setPen(c.pen()),l.setBrush(c.brush()),this.drawSymbols(s,c,t,i,n,o),l.restore())),l=null)},this.drawSymbols=function(t,e,i,n,o,s){var a=new PointMapper;a.setFlag(WeedOutPoints,this.testPaintAttribute(FilterPoints));for(var r=o;r<=s;r+=500){var l=Math.min(500,s-r+1),c=a.toPointsF(i,n,this.data(),r,r+l-1);c.length>0&&e.drawSymbols(t,c)}},this.setBaseline=function(t){n!=t&&(n=t,this.itemChanged())},this.baseline=function(){return n},this.drawCurve=function(t,e,i,n,o,s){switch(e){case Lines:this.testCurveAttribute(Fitted)&&(o=0,s=this.dataSize()-1),this.drawLines(t,i,n,o,s);break;case Sticks:this.drawSticks(t,i,n,o,s);break;case Steps:this.drawSteps(t,i,n,o,s);break;case Dots:this.drawDots(t,i,n,o,s)}},this.setCurveFitter=function(t){l=t,this.itemChanged()},this.curveFitter=function(){return l},this.closestPoint=function(t,e){let i=this.dataSize();if(null==this.plot()||i<=0)return-1;let n=this.data(),o=this.plot().canvasMap(this.xAxis()),s=this.plot().canvasMap(this.yAxis()),a=-1,r=1e10;for(var l=0;l<i;l++){let e=n.sample(l),i=o.transform(e.x)-t.x,c=s.transform(e.y)-t.y,h=u(i)+u(c);h<r&&(a=l,r=h)}return e&&(e.distance=Math.sqrt(r)),a},this.fillCurve=function(t,e,i,n){a.color!=Static.NoBrush&&(this.closePolyline(e,i,n),n.length<=2||(t.setPen(new Misc.Pen(a.color)),t.drawPolygon(n)))},this.closePolyline=function(t,e,i){if(!(i.length<2)){var o=n;if(this.orientation()==Vertical){e.transformation()&&(o=e.transformation().bounded(o));var s=e.transform(o);i.push(new Misc.Point(i[i.length-1].x,s)),i.push(new Misc.Point(i[0].x,s))}else{t.transformation()&&(o=t.transformation().bounded(o));var a=t.transform(o);i.push(new Misc.Point(a,i[i.length-1].y)),i.push(new Misc.Point(a,i[0].y))}}},this.drawSteps=function(t,e,n,o,s){for(var a=[],r=2*(s-o)+1,l=0;l<r;++l)a.push(new Misc.Point);var c=this.orientation()==Vertical;i&Inverted&&(c=!c);var u,h=this.data();for(l=o,u=0;l<=s;l++,u+=2){var d=h.sample(l),p=e.transform(d.x),v=n.transform(d.y);if(u>0){var f=a[u-2],m=a[u-1];c?(m.x=f.x,m.y=v):(m.x=p,m.y=f.y)}a[u].x=p,a[u].y=v}t.drawPolyline(a)},this.drawSticks=function(t,e,i,o,s){for(var a=e.transform(n),r=i.transform(n),l=this.orientation(),c=this.data(),u=o;u<=s;u++){var h=c.sample(u),d=e.transform(h.x),p=i.transform(h.y);l==Horizontal?t.drawLine(a,p,d,p):t.drawLine(d,r,d,p)}},this.drawDots=function(t,e,i,n,s){var a=new PointMapper;if(o&FilterPoints&&a.setFlag(WeedOutPoints,!0),o&MinimizeMemory)for(var r=this.data(),l=n;l<=s;l++){var c=r.sample(l),u=e.transform(c.x),h=i.transform(c.y);t.drawPoint(new Misc.Point(u,h))}else{var d=a.toPointsF(e,i,this.data(),n,s);t.drawPoints(d)}},this.legendIcon=function(t,e){if(0===e.width&&0===e.height)return null;var i=new GraphicUtil.Graphic(null,e.width,e.height),n=new PaintUtil.Painter(i);if(0==this.legendAttributes()||this.legendAttributes()&Static.LegendShowBrush){var o=this.brush();if(o.color==Static.NoBrush&&0==this.legendAttributes()&&(this.style()!=NoCurve?o=new Misc.Brush(this.pen().color):this.symbol()&&this.symbol().style()!=NoSymbol&&(o=new Misc.Brush(this.symbol().pen().color))),o.color!=Static.NoBrush){var s=new Misc.Rect(0,0,e.width,e.height);n.fillRect(s,o)}}if(this.legendAttributes()&Static.LegendShowLine&&this.pen().color!=Static.NoPen){var a=this.pen();n.setPen(a);var r=.5*e.height;n.drawLine(0,r,e.width,r)}if(this.legendAttributes()&Static.LegendShowSymbol&&this.symbol()){var l=e.height/2+1;this.symbol().style()==Ellipse&&(l-=1),n.setPen(this.symbol().pen()),this.symbol().drawGraphicSymbol(n,new Misc.Point(e.width/2,l),e)}return n=null,i},this.removePoint=function(t,e){void 0==e&&(e=!1);var i=this.data().samples();if(1!=i.length||e){for(var n=[],o=0;o<i.length;++o)i[o].isEqual(t)||n.push(i[o]);n.length!==i.length||e?(this.setSamples(n),this.itemChanged(),Static.trigger("pointRemoved",this)):Static.alert("The point selected for removal does not exist.")}else Static.alert("You cannot remove the only point in the curve. Remove the entire curve.")},this.toString=function(){return"[Curve]"},this.init()}drawLines(t,e,i,n,o){if(!(n>o)){var s=this.curveAttributes()&Fitted&&this.curveFitter(),a=this.brush().color!==Static.NoBrush,r=(new PointMapper).toPolygonF(e,i,this.data(),n,o);s&&(r=this.curveFitter().fitCurve(r)),t.drawPolyline(r),a&&this.fillCurve(t,e,i,r)}}}define("plotcurve",["static","seriesData"],function(){});class MyCurve extends Curve{constructor(t){super(t)}}function GraphicUtil(){GraphicUtil.Graphic=function(t,e,i){var n=t,o=e,s=i,a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("width",e),a.setAttribute("height",i),this.parent&&this.parent[0].appendChild(a),this.setParent=function(t){this.parent=t,this.parent[0].appendChild(a)},this.parent=function(){return n},this.setWidth=function(t){o=t},this.width=function(){return o},this.setHeight=function(t){s=t},this.height=function(){return s},this.svg=function(){return a},this.toString=function(){return"[Graphic]"}}}function mDrawXCrossSymbols(t,e,i){var n=i.size(),o=i.pen(),s=(i.brush(),n.width),a=n.height;t.beginPath(),t.strokeStyle=o.color,t.lineWidth=o.width;for(var r=0;r<e.length;r++){var l=e[r].x-.5*s-1,c=e[r].y-.5*a-1;t.moveTo(l,c),t.lineTo(l+s,c+a),t.moveTo(l+s,c),t.lineTo(l,c+a)}t.stroke()}function mDrawLineSymbols(t,e,i,n){var o=n.size(),s=n.pen(),a=(n.brush(),o.width),r=o.height,l=new PaintUtil.Painter(t);l.setPen(s),l.save();for(var c=0;c<i.length;c++){if(e&Horizontal){var u=i[c].x-.5*a-1,h=i[c].y-1;l.drawLine(u,h,u+a,h)}if(e&Vertical){u=i[c].x-1,h=i[c].y-.5*r-1;l.drawLine(u,h,u,h+r)}}l.restore(),l=null}function mDrawPathSymbols(t,e,i){var n=e.length,o=i.size(),s=i.pen(),a=i.brush(),r=o.width,l=o.height,c=new PaintUtil.Painter(t);c.setPen(s),c.setBrush(a);for(var u=0;u<n;u++){var h=e[u].x,d=e[u].y,p=i.m_path.boundingRect();c.save(),c.translate(h,d),c.scale(r/p.width(),l/p.height()),i.m_path.data.rotation&&c.rotate(i.m_path.data.rotation);var v=i.pinPoint();c.translate(-1*v.x,-1*v.y),c.drawPath(i.m_path),c.restore()}c=null}function mDrawDiamondSymbols(t,e,i){var n=new PaintUtil.Painter(t);n.save(),n.setBrush(i.brush()),n.setPen(i.pen());for(var o=i.size(),s=(new Misc.Rect(new Misc.Point,i.size()),e.length),a=0;a<s;a++)n.save(),n.translate(e[a].x-1,e[a].y-1),n.rotate(45),n.drawRect(-.5*o.width,-.5*o.height,o.width,o.height),n.restore();n.restore(),n=null}function mDrawRectSymbols(t,e,i){var n=new PaintUtil.Painter(t);n.save(),n.setBrush(i.brush()),n.setPen(i.pen());for(var o=new Misc.Rect(new Misc.Point,i.size()),s=e.length,a=0;a<s;a++)o.moveCenter(e[a]),n.drawRect(o.left(),o.top(),o.width(),o.height());n.restore(),n=null}function mDrawEllipseSymbols(t,e,i){var n=new PaintUtil.Painter(t);n.save(),n.setBrush(i.brush()),n.setPen(i.pen());for(var o=Math.min(i.size().width,i.size().height)/2,s=e.length,a=0;a<s;a++)n.drawCircle(e[a].x-1,e[a].y-1,o);n.restore(),n=null}function mDrawCrossGraphicSymbol(t,e,i,n){t.setBrush(n.brush()),t.setPen(n.pen());var o=new Misc.Rect(new Misc.Point,n.size());o.moveCenter(e),t.drawLine(o.left()+.5*o.width(),o.top(),o.left()+.5*o.width(),o.bottom()),t.drawLine(o.left(),o.top()+.5*o.height(),o.right(),o.top()+.5*o.height())}function mDrawXCrossGraphicSymbol(t,e,i,n){t.setBrush(n.brush()),t.setPen(n.pen());var o=new Misc.Rect(new Misc.Point,n.size());o.moveCenter(e),t.drawLine(o.left(),o.top(),o.right(),o.bottom()),t.drawLine(o.right(),o.top(),o.left(),o.bottom())}function mDrawRectGraphicSymbol(t,e,i,n){t.setBrush(n.brush());var o=new Misc.Rect(new Misc.Point,n.size());o.moveCenter(e),t.drawRect(o.left(),o.top(),o.width(),o.height())}function mDrawDiamondGraphicSymbol(t,e,i,n){t.setBrush(n.brush());var o=new Misc.Rect(new Misc.Point,.707*n.size().width,.707*n.size().height);o.moveCenter(e),t.drawRect(o.left(),o.top(),o.width(),o.height()),t.transform({rotation:45,rotationX:e.x,rotationY:e.y})}function mDrawEllipseGraphicSymbol(t,e,i,n){t.setBrush(n.brush());var o=Math.min(n.size().width,n.size().height)/2;t.drawCircle(e.x,e.y,o)}function mDrawPathGraphicSymbol(t,e,i,n){var o=n.pen(),s=0;o.style!==Static.NoPen&&(s=Math.max(o.width,1));var a=n.path().boundingRect();a=a.adjusted(-s,-s,s,s);var r=n.path().data;r.xOffset=-1*a.left(),r.yOffset=-1*a.top(),r.xCenter=(a.right()-a.left())/2,r.yCenter=(a.bottom()-a.top())/2,t.setBrush(n.brush()),t.setPen(n.pen()),r.scale=Math.min(i.width/a.width(),i.height/a.height()),t.drawPath(n.path())}define("myCurve",["plotcurve"],function(){}),GraphicUtil(),define("graphic",function(){});class Symbol{constructor(t,e,i,n){var o=NoSymbol,s=new Misc.Size(-1,-1),a=new Misc.Brush("gray"),r=new Misc.Pen;this.m_path=0;var l=new Misc.Point(0,0);void 0!==n?(o=t,a=e,r=i,s=n):void 0!==i?(o=t,a=e,r=i):void 0!==e?(o=t,a=e):void 0!==t&&(o=t),this.setPinPoint=function(t){l=t},this.pinPoint=function(t){return l},this.setSize=function(t){t.isValid()&&!t.isEqual(s)&&(s=t)},this.size=function(){return s},this.setStyle=function(t){o!=t&&(o=t)},this.style=function(){return o},this.setPath=function(t){o=Path,this.m_path=t},this.path=function(){return this.m_path},this.setPen=function(t){r=t},this.pen=function(){return r},this.setBrush=function(t){a=t},this.brush=function(){return a},this.brush1=function(){return"noBrush"!==a.color},this.drawSymbols=function(t,e){if(!(e.length<=0)){this.renderSymbols(t,e)}},this.drawGraphicSymbol=function(t,e,i){this.renderGraphicSymbol(t,e,i)},this.drawSymbol=function(t,e){this.drawSymbols(t,[e])},this.renderSymbols=function(t,e){e.length;switch(o){case Ellipse:mDrawEllipseSymbols(t,e,this);break;case MRect:mDrawRectSymbols(t,e,this);break;case Diamond:mDrawDiamondSymbols(t,e,this);break;case Cross:mDrawLineSymbols(t,Horizontal|Vertical,e,this);break;case XCross:mDrawXCrossSymbols(t,e,this);break;case HLine:mDrawLineSymbols(t,Horizontal,e,this);break;case VLine:mDrawLineSymbols(t,Vertical,e,this);break;case Path:mDrawPathSymbols(t,e,this)}},this.renderGraphicSymbol=function(t,e,i){if(o!==Cross||o!==XCross){var n=new Misc.Pen(this.pen());this.brush1()&&(n.width/=2),t.setPen(n)}switch(o){case Ellipse:mDrawEllipseGraphicSymbol(t,e,0,this);break;case MRect:mDrawRectGraphicSymbol(t,e,0,this);break;case Diamond:mDrawDiamondGraphicSymbol(t,e,0,this);break;case Cross:mDrawCrossGraphicSymbol(t,e,0,this);break;case XCross:mDrawXCrossGraphicSymbol(t,e,0,this);break;case HLine:case VLine:break;case Path:mDrawPathGraphicSymbol(t,e,i,this)}},this.boundingRect=function(){var t=new Misc.Rect;switch(o){case Ellipse:case MRect:case Hexagon:var e=0;r.style!=Static.NoPen&&(e=Math.max(r.width,1)),(t=new Misc.Rect(new Misc.Point,s.width+e,s.height+e)).moveCenter(new Misc.Point);break;case XCross:case Diamond:case Triangle:case UTriangle:case DTriangle:case RTriangle:case LTriangle:case Star1:case Star2:e=0;r.style!==Static.NoPen&&(e=Math.max(r.width,1)),(t=new Misc.Rect(new Misc.Point,s.width+e,s.height+e)).moveCenter(new Misc.Point);break;case Path:t=m_path.boundingRect(),console.log(t.width()),t.moveCenter(new Misc.Point);break;default:(t=new Misc.Rect(new Misc.Point,s.width,s.height)).moveCenter(new Misc.Point)}var i=new Misc.Rect;return i.setLeft(Math.floor(t.left())),i.setTop(Math.floor(t.top())),i.setRight(Math.ceil(t.right())),i.setBottom(Math.ceil(t.bottom())),i}}toString(){return"[Symbol]"}}define("symbol",["static","graphic"],function(){});class LegendData{constructor(){var t={},e=!0;function i(e){return void 0!==t[e]}this.title=function(){return this.value(Static.TitleRole)},this.icon=function(){return this.value(Static.IconRole)},this.mode=function(){return this.hasRole(Static.ModeRole)?this.value(Static.ModeRole):Static.ReadOnly},this.setValue=function(i,n){t[i]=n,e=!1},this.isValid=function(){return!e},this.hasRole=function(t){return i(t)},this.value=function(e){return i(e)?t[e]:null},this.toString=function(){return"[LegendData]"}}}class AbstractLegend{constructor(){var t=null,e=!1,i=null,n="",o=0,s=100,a=function(e,i){e.setVisible(!i),t.autoReplot()||t.replot()};"undefined"!=typeof checkChangeFn&&(a=checkChangeFn);var r=[],l=$("<table/>").attr({});this.setLegendDiv=function(t){i||((i=t).append(l),i.css("overflow","auto"))},this.legendDiv=function(){return i},this.setPlot=function(e){t=e,i!==$("#legendDiv")&&e.getLayout().getPlotDiv().append(i)},this.isEmpty=function(){return!(l[0].rows.length>=1)},this.setMaxWidth=function(t){s=t},this.maxWidth=function(){return s},this.legendDivWidth=function(){var e=t.legendFont().textSize(n).width+o+8;return e<this.maxWidth()?e:this.maxWidth()},this.addItem=function(t,i){var s=t.plot().legendFont(),c=t.legendData()[0];if(c.isValid()){var u=c.title(),h=c.icon();h&&h.width()>o&&(o=h.width());var d=$("<tr />"),p=$('<td class="unchecked"></td>'),v=$("<label />");v.css("color",s.fontColor),v.css("font-size",s.th),v.text(" "+u);var f=$("<span/>");h&&h.setParent(f),v.appendTo(f),f.appendTo(p),d.append(p),l.append(d),void 0!==i&&i>-1?(r.splice(i,0,t),Static.setElementIndex(d,i)):r.push(t),p.click(t,function(t){"unchecked"===$(this).attr("class")?($(this).removeClass("unchecked"),$(this).addClass("checked"),e=!0):($(this).removeClass("checked"),$(this).addClass("unchecked"),e=!1),a&&a(t.data,e)}),t.title().length>n.length&&(n=t.title())}},this.removeItem=function(t){var e,n=r.indexOf(t);if(!(n<0))return(e=n)>-1&&r.splice(e,1),l[0].deleteRow(n),parseInt(l.css("height"))<parseInt(i.css("height"))&&i.css("overflow-y","auto"),parseInt(l.css("width"))<parseInt(i.css("width"))&&i.css("overflow-x","auto"),n},this.clearLegend=function(){for(var t=l[0].rows.length,e=0;e<t;++e)l[0].deleteRow(0)},this.rowNumberFromName=function(t){for(var e=l[0].rows,i=0;i<e.length;++i)if(e[i].cells[0].innerText===t)return i;return-1},this.toString=function(){return"[AbstractLegend]"}}renderLegend(t,e,i){return!0}updateLegend(t,e){}}class MLegend extends AbstractLegend{constructor(){super(),this.toString=function(){return"[MLegend]"}}}define("legend",["static"],function(){});class Magnifier extends HObject{constructor(t){super(t);for(var e=null,i=!0,n=1.9,o=Static.NoModifier,s=.95,a=Static.RightButton,r=Static.NoModifier,l=.9,c=107,u=Static.Key_Shift,h=109,d=Static.Key_Shift,p=!1,v=!1,f=!1,m=0,g=[],b=0;b<axisCnt;b++)g[b]=!0;g[1]=!1,g[3]=!1,this.setAxisEnabled=function(t,e){t>=0&&t<axisCnt&&(g[t]=e)},this.isAxisEnabled=function(t){return!(t>=0&&t<axisCnt)||g[t]},void 0!==t&&(t.magnifier=this,e=t,this.setElement(e.getLayout().getCentralDiv())),this.plot=function(){return e},this.setWheelFactor=function(t){n=t},this.wheelFactor=function(){return n},this.setWheelModifiers=function(t){o=t},this.wheelModifiers=function(){return o},this.setMouseFactor=function(t){s=t},this.mouseFactor=function(){return s},this.setMouseButton=function(t,e){a=t,r=e},this.getMouseButton=function(){return{button:a,modifiers:r}},this.setKeyFactor=function(t){l=t},this.keyFactor=function(){return l},this.setZoomInKey=function(t,e){c=t,u=e},this.getZoomInKey=function(){return{key:c,modifiers:u}},this.setZoomOutKey=function(t,e){h=t,d=e},this.getZoomOutKey=function(){return{key:h,modifiers:d}},this.setEnabled=function(t){i=t},this.isEnabled=function(t){return i},this.event=function(t){if(i)switch(t.type){case"mousedown":return null==this.plot()||(t.button!==a||(t.clientX,m=t.clientY,p=!0,!0));case"mouseup":t.button===a&&p&&this.plot()&&(p=!1);break;case"mousemove":if(!p)return;var e=t.clientY-m;if(0!=e){var o=s;e<0&&(o=1/o),this.rescale(o)}t.clientX,m=t.clientY;break;case"keydown":t.keyCode==u&&(v=!0),t.keyCode==d&&(f=!0),t.keyCode==c&&v?this.rescale(l):t.keyCode==h&&f&&this.rescale(1/l);break;case"keyup":t.keyCode==u&&(v=!1),t.keyCode==d&&(f=!1);break;case"mousewheel":if(0!=n){o=Math.pow(n,Math.abs(t.deltaY/15));t.deltaY>0&&(o=1/o),this.rescale(o)}}},this.rescale=function(t){var e=this.plot();if(null!=e&&1!=(t=Math.abs(t))&&0!=t){var i=!1,n=e.autoReplot();e.setAutoReplot(!1);for(var o=0;o<axisCnt;o++){var s=this.plot().axisScaleDiv(o);if(this.isAxisEnabled(o)){var a,r,l,c,u=this.plot().axisScaleEngine(o);u instanceof LogScaleEngine?(a=(Static.mLog(u.base(),s.lowerBound())+Static.mLog(u.base(),s.upperBound()))/2,r=(Static.mLog(u.base(),s.upperBound())-Static.mLog(u.base(),s.lowerBound()))/2*t,l=Math.pow(u.base(),a-r),c=Math.pow(u.base(),a+r)):(l=(a=s.lowerBound()+s.range()/2)-(r=s.range()/2*t),c=a+r),e.setAxisScale(o,l,c),i=!0}}return e.setAutoReplot(n),i&&e.replot(),!1}},this.setEnabled_1(!0),this.toString=function(){return"[Magnifier]"}}}define("magnifier",["static","hObject"],function(){});class PrivateData_2{constructor(){this.zoomRectIndex,this.zoomStack=[],this.maxStackDepth}}class PlotZoomer extends PlotPicker{constructor(t,e,i,n=!0){"number"!=typeof t?super(i=t):super(t,e,i);var o;this.getZoomerData=function(){return o},this.init=function(t){(o=new PrivateData_2).maxStackDepth=-1,this.setTrackerMode(Static.ActiveOnly),this.setRubberBand(Static.RectRubberBand),this.setStateMachine(new PickerDragRectMachine),this.plot().zoomer=this,Static.trigger("zoomerAdded",this),t&&this.plot()&&this.plot().replot(),this.setZoomBase(this.scaleRect())},this.setZoomBase=function(t=!0){if("object"==typeof t){var e=t;if(!(s=this.plot()))return;var i=this.scaleRect(),n=e|i;n=null;n=e||i,o.zoomStack=[],o.zoomStack.push(n),o.zoomRectIndex=0,e.isEqual(i)||(o.zoomStack.push(i),o.zoomRectIndex++),this.rescale()}else{var s;if(null==(s=this.plot()))return;t&&s.replot(),o.zoomStack=[],o.zoomStack.push(this.scaleRect()),o.zoomRectIndex=0,this.rescale()}},this.zoomBase=function(){return o.zoomStack[0]},this.zoomRect=function(){return o.zoomStack[o.zoomRectIndex]},this.setMaxStackDepth=function(t){if(o.maxStackDepth=t,t>=0){var e=o.zoomStack.length-1-t;if(e>0){this.zoom(-e);for(var i=o.zoomStack.length-1;i>o.zoomRectIndex;i--)o.zoomStack.pop()}}},this.maxStackDepth=function(){return o.maxStackDepth},this.zoomStack=function(){return o.zoomStack},this.setZoomStack=function(t,e=-1){if(0!=this.zoomStack.length&&!(o.maxStackDepth>=0&&this.zoomStack.length>o.maxStackDepth)){(e<0||e>this.zoomStack.length)&&(e=t.length-1);var i=this.zoomStack[e]!=this.zoomRect();o.zoomStack=t,o.zoomRectIndex=e,i&&(this.rescale(),Static.trigger("zoomed",this.zoomRect()))}},this.zoomRectIndex=function(){return o.zoomRectIndex},this.moveBy=function(t,e){var i=o.zoomStack[o.zoomRectIndex];moveTo(new Misc.Point(i.left()+t,i.top()+e))},this.moveTo=function(t){var e=t.x,i=t.y;e<this.zoomBase().left()&&(e=this.zoomBase().left()),e>this.zoomBase().right()-this.zoomRect().width()&&(e=this.zoomBase().right()-this.zoomRect().width()),i<this.zoomBase().top()&&(i=this.zoomBase().top()),i>this.zoomBase().bottom()-this.zoomRect().height()&&(i=this.zoomBase().bottom()-this.zoomRect().height()),e==this.zoomRect().left()&&i==this.zoomRect().top()||(o.zoomStack[o.zoomRectIndex].moveTo(e,i),this.rescale())},this.zoom=function(t){if("number"==typeof t){var e=t;if(0==e)o.zoomRectIndex=0;else{var i=o.zoomRectIndex+e;i=Math.max(0,i),i=Math.min(o.zoomStack.length-1,i),o.zoomRectIndex=i}this.rescale(),Static.trigger("zoomed",this.zoomRect())}else{if(o.maxStackDepth>=0&&o.zoomRectIndex>=o.maxStackDepth)return;var n=t.normalized();if(!n.isEqual(o.zoomStack[o.zoomRectIndex])){for(var s=o.zoomStack.length-1;s>o.zoomRectIndex;s--)o.zoomStack.pop();o.zoomStack.push(n),o.zoomRectIndex++,this.rescale(),Static.trigger("zoomed",n)}}},this.rescale=function(){var t=this.plot();if(t){var e=o.zoomStack[o.zoomRectIndex];if(!e.isEqual(this.scaleRect())){var i=t.autoReplot();t.setAutoReplot(!1);var n=e.left(),s=e.right();if(!t.axisScaleDiv(this.xAxis()).isIncreasing()){s=n=s}t.setAxisScale(this.xAxis(),n,s);var a=e.top(),r=e.bottom();if(!t.axisScaleDiv(this.yAxis()).isIncreasing()){r=a=r}t.setAxisScale(this.yAxis(),a,r),t.setAutoReplot(i),t.replot()}}},this.minZoomSize=function(){return new Misc.Size(o.zoomStack[0].width()/1e5,o.zoomStack[0].height()/1e5)},this.accept=function(t){if(t.length<2)return!1;var e=new Misc.Rect(t[0],t[t.length-1]);if((e=e.normalized()).width()<2&&e.height()<2)return!1;var i=e.center();return e.setSize(e.size().expandedTo(new Misc.Size(11,11))),e.moveCenter(i),t.resize(2),t[0]=e.topLeft(),t[1]=e.bottomRight(),!0},i&&this.init(n)}widgetKeyPressEvent(t){this.isActive()||(this.keyMatch(Enum.KeyPatternCode.KeyUndo,t)?this.zoom(-1):this.keyMatch(Enum.KeyPatternCode.KeyRedo,t)?this.zoom(1):this.keyMatch(Enum.KeyPatternCode.KeyHome,t)&&this.zoom(0)),super.widgetKeyPressEvent(t)}widgetMouseReleaseEvent(t){this.mouseMatch(Enum.MousePatternCode.MouseSelect2,t)||(this.mouseMatch(Enum.MousePatternCode.MouseSelect3,t)?this.zoom(-1):this.mouseMatch(Enum.MousePatternCode.MouseSelect6,t)?this.zoom(1):super.widgetMouseReleaseEvent(t))}end(t=!0){if(!(t=super.end(t)))return!1;if(!this.plot())return!1;var e=this.selection();if(e.length<2)return!1;var i=new Misc.Rect(e[0],e[e.length-1]);i=i.normalized();var n=this.invTransform(i).normalized();if(this.minZoomSize().isValid()){var o=n.center();n.setSize(n.size().expandedTo(this.minZoomSize())),n.moveCenter(o)}return this.zoom(n),!0}begin(){var t=this.getZoomerData();if(!(t.maxStackDepth>=0&&t.zoomRectIndex>=t.maxStackDepth)){var e=this.minZoomSize();if(e.isValid()){var i=new Misc.Size(.9999*t.zoomStack[t.zoomRectIndex].width(),.9999*t.zoomStack[t.zoomRectIndex].height());if(e.width>=i.width&&e.height>=i.height)return}super.begin()}}setAxis(t,e){t==super.xAxis()&&e==super.yAxis()||(super.setAxis(t,e),void 0!==this.setZoomBase&&this.setZoomBase(this.scaleRect()))}}define("plotzoomer",["plotpicker"],function(){});class MyPlotZoomer extends PlotZoomer{constructor(t){super(t),this.setEnabled(!1),this.setTrackerMode(Static.AlwaysOff),this.setTrackerPen(new Misc.Pen("blue"))}trackerText(t){var e,i=this.plot();t=this.invTransform(t);var n=0;n=i.axisEnabled(xBottom)?i.axisDecimalPlaces(xBottom):i.axisEnabled(xTop)?i.axisDecimalPlaces(xTop):i.axisDecimalPlaces(xBottom);var o=0;switch(o=i.axisEnabled(yLeft)?i.axisDecimalPlaces(yLeft):i.axisEnabled(yRight)?i.axisDecimalPlaces(yRight):i.axisDecimalPlaces(yLeft),this.rubberBand()){case Static.HLineRubberBand:e=Static.adjustForDecimalPlaces(t.y,o).toString();break;case Static.VLineRubberBand:e=Static.adjustForDecimalPlaces(t.x,n).toString();break;default:e=Static.adjustForDecimalPlaces(t.x,n).toString()+", "+Static.adjustForDecimalPlaces(t.y,o).toString()}return e}}define("myZoomer",["plotzoomer"],function(){});class CurveFitter{constructor(){this.fitCurve=function(t){throw'"fitCurve()" not reimplemented in subclass'}}}class SplineCurveFitter extends CurveFitter{constructor(){super();var t=Enum.FitMode.Auto,e=new Spline,i=100;this.setFitMode=function(t){},this.fitMode=function(){},this.setSpline=function(t){(e=t).reset()},this.spline=function(){return e},this.setSplineSize=function(t){i=Math.max(t,10)},this.splineSize=function(){return i},this.fitCurve=function(n){var o=n.length;if(o<=2)return n;var s=t;if(s==Enum.FitMode.Auto){s=Enum.FitMode.Spline;for(var a=n,r=1;r<o;r++)if(a[r].x<=a[r-1].x){s=Enum.FitMode.ParametricSpline;break}}return s==Enum.FitMode.ParametricSpline?function(t){for(var n=t.length,o=[],s=0;s<i;s++)o.push(new Misc.Point(-1,-1));var a=[],r=[];for(s=0;s<n;s++)a.push(new Misc.Point(-1,-1)),r.push(new Misc.Point(-1,-1));var l=t,c=a,u=r,h=0;for(s=0;s<n;s++){var d=l[s].x,p=l[s].y;if(s>0){var v=Math.sqrt(Static.sqr(d-c[s-1].y)+Static.sqr(p-u[s-1].y));h+=Math.max(v,1)}c[s].x=h,c[s].y=d,u[s].x=h,u[s].y=p}if(e.setPoints(a),!e.isValid())return t;var f=a[n-1].x/(i-1);for(s=0;s<i;s++){var m=s*f;o[s].x=e.value(m)}if(e.setPoints(r),!e.isValid())return t;var g=r[n-1].x/(i-1);for(s=0;s<i;s++)m=s*g,o[s].y=e.value(m);return o}(n):function(t){if(e.setPoints(t),!e.isValid())return t;for(var n=new Array(i),o=t[0].x,s=(t[t.length-1].x-o)/(i-1),a=0;a<i;a++){var r=o+a*s,l=e.value(r);n[a]=new Misc.Point(r,l)}return e.reset(),n}(n)}}}class WC_PrivateData{constructor(){this.tolerance=1,this.chunkSize=0}}class WC_Line{constructor(t=0,e=0){this.from=t,this.to=e}}class WeedingCurveFitter extends CurveFitter{constructor(t){var e;super();var i=function(t){var i=e.tolerance*e.tolerance,n=[],o=t,s=t.length,a=[];for(a.resize(s,!1),n.push(new WC_Line(0,s-1));n.length;){for(var r=n.pop(),l=o[r.to].x-o[r.from].x,c=o[r.to].y-o[r.from].y,u=Math.sqrt(l*l+c*c),h=0!=u?l/u:0,d=0!=u?c/u:0,p=0,v=r.from+1,f=r.from+1;f<r.to;f++){var m,g=o[f].x-o[r.from].x,b=o[f].y-o[r.from].y;if(g*h+b*d<0)m=g*g+b*b;else{var S=o[f].x-o[r.to].x,y=o[f].y-o[r.to].y,x=S*S+y*y,w=S*-h+y*-d;m=w<0?x:Math.abs(x-w*w)}p<m&&(p=m,v=f)}p<=i?(a[r.from]=!0,a[r.to]=!0):(n.push(new WC_Line(r.from,v)),n.push(new WC_Line(v,r.to)))}var M=[];for(f=0;f<s;f++)a[f]&&M.push(o[f]);return M};this.setTolerance=function(t){e.tolerance=Math.max(t,0)},this.tolerance=function(){return e.tolerance},this.setChunkSize=function(t){t>0&&(t=Math.max(t,3)),e.chunkSize=t},this.chunkSize=function(){return e.chunkSize},this.fitCurve=function(t){var n=[];if(0==e.chunkSize)n=i(t);else for(var o=0;o<t.length;o+=e.chunkSize){var s=t.mid(o,e.chunkSize);n=n.concat(i(s))}return n},e=new WC_PrivateData,this.setTolerance(t)}}function Spline(){var t=null,e=[],i=[],n=[],o=Static.SplineType.Natural;this.setSplineType=function(t){o=t},this.splineType=function(){return o},this.setPoints=function(s){var a,r=s.length;return r<=2?(this.reset(),!1):(t=s,e.resize(r-1),i.resize(r-1),n.resize(r-1),(a=o==Static.SplineType.Periodic?this.buildPeriodicSpline(s):this.buildNaturalSpline(s))||this.reset(),a)},this.points=function(){return t},this.reset=function(){e.resize(0),i.resize(0),n.resize(0),t.resize(0)},this.isValid=function(){return e.length>0},this.value=function(o){if(0==e.length)return 0;var s=Static.lookup(o,t),a=o-t[s].x;return((e[s]*a+i[s])*a+n[s])*a+t[s].y},this.coefficientsA=function(){return e},this.coefficientsB=function(){return i},this.coefficientsC=function(){return n},this.buildNaturalSpline=function(t){var o,s=t,a=t.length,r=e,l=i,c=n,u=new Array(a-1);for(o=0;o<a-1;o++)if(u[o]=s[o+1].x-s[o].x,u[o]<=0)return!1;var h=new Array(a-1),d=(s[1].y-s[0].y)/u[0];for(o=1;o<a-1;o++){l[o]=c[o]=u[o],r[o]=2*(u[o-1]+u[o]);var p=(s[o+1].y-s[o].y)/u[o];h[o]=6*(d-p),d=p}for(o=1;o<a-2;o++)c[o]/=r[o],r[o+1]-=l[o]*c[o];var v=new Array(a);for(v[1]=h[1],o=2;o<a-1;o++)v[o]=h[o]-c[o-1]*v[o-1];for(v[a-2]=-v[a-2]/r[a-2],o=a-3;o>0;o--)v[o]=-(v[o]+l[o]*v[o+1])/r[o];for(v[a-1]=v[0]=0,o=0;o<a-1;o++)r[o]=(v[o+1]-v[o])/(6*u[o]),l[o]=.5*v[o],c[o]=(s[o+1].y-s[o].y)/u[o]-(v[o+1]+2*v[o])*u[o]/6;return!0},this.buildPeriodicSpline=function(t){var o,s=t,a=t.length,r=e,l=i,c=n,u=new Array(a-1),h=new Array(a-1),d=new Array(a);for(o=0;o<a-1;o++)if(h[o]=s[o+1].x-s[o].x,h[o]<=0)return!1;var p=a-2,v=h[p],f=(s[0].y-s[p].y)/v;for(o=0;o<=p;o++){l[o]=c[o]=h[o],r[o]=2*(v+h[o]);var m=(s[o+1].y-s[o].y)/h[o];u[o]=6*(f-m),f=m,v=h[o]}r[0]=Math.sqrt(r[0]),c[0]=h[p]/r[0];var g=0;for(o=0;o<p-1;o++)l[o]/=r[o],o>0&&(c[o]=-c[o-1]*l[o-1]/r[o]),r[o+1]=Math.sqrt(r[o+1]-Static.sqr(l[o])),g+=Static.sqr(c[o]);for(l[p-1]=(l[p-1]-c[p-2]*l[p-2])/r[p-1],r[p]=Math.sqrt(r[p]-Static.sqr(l[p-1])-g),d[0]=u[0]/r[0],g=0,o=1;o<p;o++)d[o]=(u[o]-l[o-1]*d[o-1])/r[o],g+=c[o-1]*d[o-1];for(d[p]=(u[p]-l[p-1]*d[p-1]-g)/r[p],d[p]=-d[p]/r[p],d[p-1]=-(d[p-1]+l[p-1]*d[p])/r[p-1],o=p-2;o>=0;o--)d[o]=-(d[o]+l[o]*d[o+1]+c[o]*d[p])/r[o];for(d[a-1]=d[0],o=0;o<a-1;o++)r[o]=(d[o+1]-d[o])/(6*h[o]),l[o]=.5*d[o],c[o]=(s[o+1].y-s[o].y)/h[o]-(d[o+1]+2*d[o])*h[o]/6;return!0}}define("curveFitter",["static"],function(){}),Static.SplineType={},Static.SplineType.Natural=0,Static.SplineType.Periodic=1,Static.lookup=function(t,e){var i,n=e.length;if(t<=e[0].x)i=0;else if(t>=e[n-2].x)i=n-2;else{i=0;for(var o=n-2,s=0;o-i>1;)e[s=i+(o-i>>1)].x>t?o=s:i=s}return i},define("spline",["static"],function(){});class Panner extends HObject{constructor(t){super();var e=this,i=null,n=Static.LeftButton,o=Static.NoModifier,s=(Static.Key_Escape,Static.NoModifier,0),a=0,r=!1,l=!1,c="",u="",h=!1,d=Vertical|Horizontal,p=0,v=0;void 0!==t&&(t.panner=this,i=t),this.plot=function(){return i},this.setMouseButton=function(t,e=Static.NoModifier){n=t,o=e},this.getMouseButton=function(){return{button:n,modifiers:o}},this.setOrientation=function(t){d=t},this.rescaleAndRedraw=function(t,n){for(var o=e.plot().plotItemStore(),s=0;s<o.length;++s){var a=o[s].getCanvas();a.css("left",0),a.css("top",0)}var r=!1,l=i.autoReplot();i.setAutoReplot(!1);for(var c=0;c<axisCnt;c++){var u,h,d=e.plot().canvasMap(c),p=d.transform(e.plot().axisScaleDiv(c).lowerBound()),v=d.transform(e.plot().axisScaleDiv(c).upperBound());c==xBottom||c==xTop?(u=d.invTransform(p-t),h=d.invTransform(v-t)):(u=d.invTransform(p-n),h=d.invTransform(v-n)),i.setAxisScale(c,u,h),r=!0}i.setAutoReplot(l),r&&i.replot()},this.showCursor=function(t){t!=h&&null!=this.plot()&&""!=c&&(h=t,t?(this.plot().isCursorSet()&&(u=this.plot().cursor()),this.plot().setCursor(c)):""!==u?(this.plot().setCursor(u),u=""):this.plot().unsetCursor())},this.setCursor=function(t){c=t},this.cursor=function(){return""!=c?c:null!=this.plot()?this.plot().cursor():""},this.plot()&&this.setEnabled_1(!0),this.setEnabled=function(e){if(r!=e){r=e;var i=t.getCentralWidget();i&&(e?i.installEventFilter(this):i.removeEventFilter(this))}},this.isEnabled=function(t){return r},this.widgetMousePressEvent=function(t){var e=Static.isMobile();return!(e||t.button==n&&Utility.modifiers(t)===o)||(e?(s=t.originalEvent.touches[0].clientX,a=t.originalEvent.touches[0].clientY,l=!0):(s=t.clientX,a=t.clientY,l=!0),this.showCursor(!0),!0)},this.widgetMouseUpEvent=function(t){l&&(l=!1,e.showCursor(!1),0==p&&0==v||(e.rescaleAndRedraw(p,v),p=0,v=0))},this.widgetMouseMoveEvent=function(t){if(l){if(Static.isMobile()){var i=t.originalEvent.changedTouches[0];p=parseInt(i.clientX)-s,v=parseInt(i.clientY)-a}else p=t.clientX-s,v=t.clientY-a;d==Vertical&&(p=0),d==Horizontal&&(v=0),function(){for(var t=e.plot().plotItemStore(),i=0;i<t.length;++i){var n=t[i].getCanvas();n.css("left",p),n.css("top",v)}}()}},Static.trigger("pannerAdded",this),this.setEnabled(!0)}eventFilter(t,e){if(this.isEnabled()){switch(e.type){case"mousedown":case"touchstart":this.widgetMousePressEvent(e);break;case"mousemove":case"touchmove":this.widgetMouseMoveEvent(e);break;case"mouseleave":this.widgetMouseUpEvent(e);break;case"mouseup":case"touchend":this.widgetMouseUpEvent(e)}}}}Panner.prototype.toString=function(){return"[Panner]"},define("panner",["static","hObject"],function(){});class PlotShapeItem extends PlotItem{constructor(){super("Shape");var t=super.boundingRect(),e=new Misc.Pen("black",1,Static.NoPen),i=new Misc.Brush("darkGray"),n=new Misc.MPath;this.setItemAttribute(AutoScale,!0),this.setItemAttribute(Legend,!1),this.setZ(8),this.rtti=Static.Rtti_PlotShape,this.getBoundingRect=function(){return t},this.setRect=function(t){var e=new Misc.MPath;e.addRect(t),this.setShape(e)},this.setPolygon=function(t){var e=new Misc.MPath;e.addPolygon(t),this.setShape(e)},this.setShape=function(e){n=e,t=e.isEmpty()?PlotItem.prototype.boundingRect.call(this):n.boundingRect()},this.setBrush=function(t){i=t,this.itemChanged()},this.brush=function(){return i},this.setPen=function(t){e=t,this.itemChanged()},this.pen=function(){return e},this.draw=function(o,s){if(this.clearCanvas(),!n.isEmpty()&&(e.style!=Static.NoPen||i!=Static.NoBrush)){var a=this.getCanvasRect(),r=ScaleMap.invTransform_Rect(o,s,a);if(t.intersects(r)){var l=this.getContext(),c=ScaleMap.transformPath(o,s,n,!1),u=new PaintUtil.Painter(l);u.setBrush(i),u.setPen(e),u.drawPath(c),u=null}}},this.boundingRect=function(){return this.getBoundingRect()},this.toString=function(){return"[PlotShapeItem]"}}}define("plotShapeItem",["static","plotItem"],function(){});class CurveShapeItem extends PlotShapeItem{constructor(t){super();var e=null,i=null,n=void 0,o=void 0,s=!0,a=this;function r(t,e){t&&("v_ruler1"!=t.title()&&"v_ruler2"!=t.title()||("v_ruler1"==t.title()?a.setLowerLimit(e):a.setUpperLimit(e)))}this.setEnabled=function(t){(s=t)&&e&&e.isVisible()?(this.setVisible(!0),this.refresh()):this.setVisible(!1)},this.enabled=function(t){return s},this.setCurve=function(t){t&&e==t||(e=t,this.setLimits(),s&&e&&e.isVisible()&&(this.setVisible(!0),this.refresh()))},this.curve=function(){return e},this.refresh=function(){i=this.isVisible()&&e?function(){var t=[];if("[SyntheticPointData]"==e.data().toString())return t;var i=e.data().samples();if(i&&!(i.length<2)){if(n<i[0].x||o>i[i.length-1].x||n>=o)return null;void 0==n&&(n=i[0].x),void 0==o&&(o=i[i.length-1].x);for(var s,a,r=-1,l=-1,c=(t=[],1);c<i.length;c++)i[c].x>n&&-1==r&&(r=c-1,t.push(i[r])),i[c-1].x<o&&(l=c,-1!=r&&t.push(i[l]));return s=i[r].interpolatedPoint(i[r+1],n),a=i[l-1].interpolatedPoint(i[l],o),t.length&&t[0].x!==s.x&&t.splice(0,1,s),t.length&&t[t.length-1].x!==a.x&&(t.pop(),t.push(a)),t.splice(0,0,new Misc.Point(t[0].x,Number.MIN_VALUE)),t.push(new Misc.Point(t[t.length-1].x,Number.MIN_VALUE)),t}}():null,this.setPolygon(i),e&&i&&(a.setAxes(e.xAxis(),e.yAxis()),e.plot().autoRefresh())},this.setLimits=function(t,e){n=t,o=e,this.refresh()},this.setLowerLimit=function(t){n=t,this.refresh()},this.setUpperLimit=function(t){o=t,this.refresh()},Static.bind("visibilityChange",function(t,i,n){i.rtti==Static.Rtti_PlotCurve&&(e&&i==e&&s&&n?a.setVisible(!0):(a.plot().curveShapeEnabledByPlotSettings()&&a.setEnabled(a.plot().tbar.isDropdownItemChecked("Watch",6)),i==e&&(a.setVisible(!1),a.setLimits())))}),Static.bind("axisChanged",function(t,i,n){n.rtti==Static.Rtti_PlotCurve&&e&&n===e&&a.setLimits()});var l=Number.MAX_VALUE,c=Number.MAX_VALUE;Static.bind("positionChanging",function(t,e,i){if(c!==e||l!==i){var n=e.plot(),o=n.autoReplot();n.setAutoReplot(!1),r(e,i),c=e,l=i,n.setAutoReplot(o),n.autoRefresh()}}),Static.bind("positionChanged",function(t,e,i){if(c!==e||l!==i){var n=e.plot(),o=n.autoReplot();n.setAutoReplot(!1),r(e,i),c=e,l=i,n.setAutoReplot(o),n.autoRefresh()}}),Static.bind("currentCurveChanged",function(t,e){e&&a.setCurve(e)}),Static.bind("curveShapeColorChanged",function(t,e){var i=a.brush();i.color=e,a.setBrush(i);var n=a.pen();n.color=e,a.setPen(n)}),Static.bind("watchEnabled",function(e,i,n){t.settings().shadeWatchArea&&"Area below curve"==i.name()&&a.setEnabled(n)}),Static.bind("shadeWatchArea",function(e,i){t.setCurveShapeEnabledByPlotSettings(i),!i&&t.watchAreaBelowCurve.isEnable()||!i&&!t.watchAreaBelowCurve.isEnable()?a.setEnabled(!1):i&&t.watchAreaBelowCurve.isEnable()&&a.setEnabled(!0)}),Static.bind("itemAttached",function(e,i,n){i.rtti==Static.Rtti_PlotCurve&&(n?a.curve():t.itemList(Static.Rtti_PlotCurve).length&&t.hasVisiblePlotCurve()||a.setCurve(null),Static.trigger("visibilityChange",[i,n]),1==t.itemList(Static.Rtti_PlotCurve).length&&Static.trigger("currentCurveChanged",i))}),Static.bind("curveAdjusted",function(){a.isVisible()&&a.setLimits()}),this.attach(t)}}define("curveShapeItem",["plotShapeItem"],function(){});class Watches{constructor(t){var e=[];function i(i,n,o){t.rv.addToWatchList(i),e.push(n),o&&i.setEnable(!1)}this.watchElements=function(){return e},i(new WatchCurveName,{text:"Curve name",tooltip:"Name of the curve that is the subject of watches.",checkboxState:"checked"}),i(new WatchLeftRulerPosition(t.rv),{text:"Left ruler position",tooltip:"Current position of the left ruler.",checkboxState:"checked"}),i(new WatchRightRulerPosition(t.rv),{text:"Right ruler position",tooltip:"Current position of the right ruler.",checkboxState:"checked"}),i(new WatchBottomRulerPosition(t.rv),{text:"Bottom ruler position",tooltip:"Current position of the bottom ruler."},!0),i(new WatchTopRulerPosition(t.rv),{text:"Top ruler position",tooltip:"Current position of the top ruler."},!0),i(new WatchSlope,{text:"Slope at left ruler",tooltip:"Slope (gradient) in the curve at the point where the left ruler intersects the curve."},!0),t.watchAreaBelowCurve=new WatchAreaBelowCurve,i(t.watchAreaBelowCurve,{text:"Area below curve",tooltip:"Area bounded by the curve, right ruler, x-axis and left ruler."},!0),i(new WatchVolumeOfRevolution,{text:"Volume of revolution(X)",tooltip:"Volume generated by a 360 degrees rotation about the x-axis of the area bounded by the curve, right ruler, x-axis and left ruler."},!0)}}define("watches",["basicWatch"],function(){});class AddRemovePointPicker extends PlotPicker{constructor(t){super(xBottom,yLeft,Static.NoRubberBand,Static.AlwaysOn,t);var e=this,i=null,n=!1;this.setStateMachine(new PickerClickPointMachine);var o=new CurveClosestPoint(t,function(t,e){n&&(t.removePoint(e),Static.trigger("curveAdjusted"))});function s(e){if(!n)return;if(!i){(i=new MyCurve(Utility.generateCurveName(t))).attach(t);let e=Utility.randomColor();i.setPen(new Misc.Pen(e));let n=new Symbol(MRect,new Misc.Brush(Static.invert(e)),new Misc.Pen(e),new Misc.Size(8,8));i.setSymbol(n);let o="";Static.showline&&Static.showsymbol?o="lineAndSymbol":Static.showline?o="line":Static.showsymbol&&(o="symbol"),Utility.setLegendAttribute(i,o,i.getLegendIconSize())}let o=i.data().samples();o.containsPoint(e)||o.push(e),o.sort(function(t,e){return t.x-e.x}),i.setSamples(o),t.autoRefresh(),Static.trigger("pointAdded",i),Static.trigger("curveAdjusted")}this.setEnabled(!1),this.activate=function(t){n=t,this.setEnabled(t),o.setEnabled(t)},this.setAddRemoveMousePattern=function(t,e,i=Static.NoModifier){this.setMousePattern(t,e,i),o.setMousePattern(e,i)},Static.bind("currentCurveChanged",function(t,n){i!==n&&(i=n||null)&&e.setAxis(i.xAxis(),i.yAxis())}),Static.bind("pointSelected",function(){n&&e.setEnabled(!1)}),Static.bind("pointNotSelected",function(){n&&e.setEnabled(!0)});var a=new Misc.Point(Number.MAX_VALUE,Number.MAX_VALUE);Static.bind("selected",function(n,o){var r=e.selection()[0];r&&(a.isEqual(r)||(a=r,s(i?ScaleMap.invTransform(t.axisScaleDraw(i.xAxis()).scaleMap(),t.axisScaleDraw(i.yAxis()).scaleMap(),r):ScaleMap.invTransform(t.axisScaleDraw(xBottom).scaleMap(),t.axisScaleDraw(yLeft).scaleMap(),r))))});var r=this.trackerFont();r.fontColor="blue",this.setTrackerFont(r)}trackerText(t){var e,i=this.plot();t=this.invTransform(t);var n=0;n=i.axisEnabled(xBottom)?i.axisDecimalPlaces(xBottom):i.axisEnabled(xTop)?i.axisDecimalPlaces(xTop):i.axisDecimalPlaces(xBottom);var o=0;switch(o=i.axisEnabled(yLeft)?i.axisDecimalPlaces(yLeft):i.axisEnabled(yRight)?i.axisDecimalPlaces(yRight):i.axisDecimalPlaces(yLeft),this.rubberBand()){case Static.HLineRubberBand:e=Static.adjustForDecimalPlaces(t.y,o).toString();break;case Static.VLineRubberBand:e=Static.adjustForDecimalPlaces(t.x,n).toString();break;default:e=Static.adjustForDecimalPlaces(t.x,n).toString()+", "+Static.adjustForDecimalPlaces(t.y,o).toString()}return e}}define("addRemovePointPicker",["plot","curveClosestPoint","plotpicker","plotcurve","symbol"],function(){}),define("app/main",["curveLegendAttributeDlg","settings","curveSettings","functionDlg","curveFitDlg","curveStyleDlg","axisDlg","pointEntryDlg","mtoolBar","upload","file","watch","basicWatch","legendMenu","rulers","sideBar","myPlot","myCurve","pointData","symbol","legend","magnifier","plotGrid","widgetOverlay","myZoomer","curveFitter","spline","panner","contextMenu","plotMarker","curveClosestPoint","curveShapeItem","underscore","widgetOverlay","functionData","watches","addRemovePointPicker"],function(){Static.alert('This application is design to run in "chrome browser". While it may run in other browsers, some features may not behave as expected.',"small");new MyPlot($("#plotDiv"),"Plot")}),requirejs.config({baseUrl:"lib",paths:{app:"../app",underscore:"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min",addRemovePointPicker:"../app/src/addRemovePointPicker",axisDlg:"../app/src/axisDlg",basicWatch:"../app/src/basicWatch",curveClosestPoint:"../app/src/curveClosestPoint",curveFitDlg:"../app/src/curveFitDlg",curveLegendAttributeDlg:"../app/src/curveLegendAttributeDlg",curveSettings:"../app/src/curveSettings",curveShapeItem:"../app/src/curveShapeItem",curveStyleDlg:"../app/src/curveStyleDlg",functionData:"../app/src/functionData",functionDlg:"../app/src/functionDlg",legendMenu:"../app/src/legendMenu",mpicker:"../app/src/mpicker",mtoolBar:"../app/src/mtoolBar",myCurve:"../app/src/myCurve",myPlot:"../app/src/myPlot",myZoomer:"../app/src/myZoomer",pointEntryDlg:"../app/src/pointEntryDlg",ruler:"../app/src/ruler",rulers:"../app/src/rulers",settings:"../app/src/settings",sideBar:"../app/src/sideBar",toolBar:"../app/src/toolBar",watch:"../app/src/watch",watches:"../app/src/watches"},shim:{underscore:{exports:"_"},static:{deps:["miscObjects"]},plot:{deps:["static","widget","scaleWidget","utility","miscObjects","painter","scaleDiv","interval","scaleMap","scaleWidget","transform","layout","scaleDraw","scaleEngine","pointMapper"]},plotItem:{deps:["static"]},scaleMap:{deps:["static","transform"]},canvas:{deps:["static"]},curveFitter:{deps:["static"]},spline:{deps:["static"]},symbol:{deps:["static","graphic"]},seriesData:{deps:["static","plotItem"]},pointMapper:{deps:["static"]},pointData:{deps:["static","seriesData"]},scaleEngine:{deps:["static"]},scaleDraw:{deps:["static","abstractScaleDraw"]},widget:{deps:["static","hObject"]},widgetOverlay:{deps:["static","widget"]},scaleWidget:{deps:["static","widget"]},picker:{deps:["static","widgetOverlay","pickermachine"]},plotpicker:{deps:["static","picker"]},plotzoomer:{deps:["plotpicker"]},plotGrid:{deps:["static","plotItem"]},plotZoneItem:{deps:["static"]},plotSpectroCurve:{deps:["static","colorMap","plotItem","seriesData"]},colorMap:{deps:["static"]},plotcurve:{deps:["static","seriesData"]},panner:{deps:["static","hObject"]},magnifier:{deps:["static","hObject"]},plotShapeItem:{deps:["static","plotItem"]},plotMarker:{deps:["static","plotItem"]},legend:{deps:["static"]},pickermachine:{deps:["static","eventpattern"]},widget:{deps:["static","hObject"]},addRemovePointPicker:{deps:["plot","curveClosestPoint","plotpicker","plotcurve","symbol"]},axisDlg:{deps:[]},basicWatch:{deps:["static","watch"]},curveClosestPoint:{deps:["static","widgetOverlay"]},curveFitDlg:{deps:[]},curveLegendAttributeDlg:{deps:[]},curveSettings:{deps:[]},curveShapeItem:{deps:["plotShapeItem"]},curveStyleDlg:{deps:[]},functionData:{deps:["pointData"]},functionDlg:{deps:[]},legendMenu:{deps:["static","contextMenu"]},mpicker:{deps:["static","plotpicker"]},mtoolBar:{deps:["toolBar","curveSettings"]},myCurve:{deps:["plotcurve"]},myPlot:{deps:["curveClosestPoint","plot","functionData","plotGrid"]},myZoomer:{deps:["plotzoomer"]},pointEntryDlg:{deps:[]},ruler:{deps:["static","plotMarker"]},rulers:{deps:["static","mpicker","ruler"]},settings:{deps:[]},sideBar:{deps:[]},toolBar:{deps:[]},watch:{deps:[]},watches:{deps:["basicWatch"]}}}),requirejs(["app/main"]),define("app",function(){});