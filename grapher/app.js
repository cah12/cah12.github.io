"include []";class MCurveLegendAttributeDlg{constructor(){var t=this,e=!1;function i(e){"small"==e?t.curve.setLegendIconSize(new Misc.Size(t.defaultIconSize.height-4,t.defaultIconSize.height-4)):"medium"==e?t.curve.setLegendIconSize(new Misc.Size(t.defaultIconSize.height,t.defaultIconSize.height)):t.curve.setLegendIconSize(new Misc.Size(t.defaultIconSize.height+4,t.defaultIconSize.height+4))}this.curveAttributeCb=function(i){e||($("body").append($('                    <div class="modal fade" id="curveLegendAttributeModal" role="dialog">                    <div class="modal-dialog modal-sm">                    <div class="modal-content">                    <div class="modal-header">                    <button type="button" class="close" data-dismiss="modal">&times;</button>                    <h4 class="modal-title">Curve Legend Attribute</h4>                    </div>                    <div class="modal-body">                    <div class="row">                    <div class="col-sm-5">Attribute:</div>                    <div class="col-sm-7">                    <select id="curveAttribute">                    <option value="default">Brush color(Default)</option>                    <option value="line">Line</option>                    <option value="symbol">Symbol</option>                    <option value="lineAndSymbol">Line and Symbol</option>                    </select>                    </div>                    </div>                    <br>                    <div class="row" id="iconSizeRow">                    <div class="col-sm-5">Icon size:</div>                    <div class="col-sm-7">                    <select id="iconSize">                    <option value="small">Small</option>                    <option value="medium">Medium</option>                    <option value="large">Large</option>                    </select>                    </div>                    </div>                    <br>                    <div class="modal-footer">                    <button id="curveAttributeDlg_ok" type="button" class="btn btn-default"  data-dismiss="modal">Ok</button>                    </div>                    </div>                    </div>                    </div>                    </div>                    ')),t.init(),t.defaultIconSize=new Misc.Size(i.getLegendIconSize()),e=!0),t.curve=i,t.curveAttributeDlg(),"line"==$("#curveAttribute").val()||"symbol"==$("#curveAttribute").val()||"lineAndSymbol"==$("#curveAttribute").val()?$("#iconSizeRow").hide():$("#iconSizeRow").show()},this.init=function(){var t=this;$("#curveAttribute").change(function(){Utility.setLegendAttribute(t.curve,$(this).val(),t.defaultIconSize),"line"==$(this).val()?$("#iconSizeRow").hide():"symbol"==$(this).val()?$("#iconSizeRow").hide():"lineAndSymbol"==$(this).val()?$("#iconSizeRow").hide():(i($("#iconSize").val()),$("#iconSizeRow").show())}),$("#iconSize").change(function(){i($(this).val())})},this.curveAttributeDlg=function(){t.curve.testLegendAttribute(Static.LegendShowLine)&&t.curve.testLegendAttribute(Static.LegendShowSymbol)?$("#curveAttribute").val("lineAndSymbol"):t.curve.testLegendAttribute(Static.LegendShowSymbol)?$("#curveAttribute").val("symbol"):t.curve.testLegendAttribute(Static.LegendShowLine)?$("#curveAttribute").val("line"):$("#curveAttribute").val("default"),$("#curveLegendAttributeModal").modal({backdrop:"static"}),t.curve.getLegendIconSize().width==t.defaultIconSize.width-4?$("#iconSize").val("small"):t.curve.getLegendIconSize().width==t.defaultIconSize.width?$("#iconSize").val("medium"):t.curve.getLegendIconSize().width==t.defaultIconSize.width+4&&$("#iconSize").val("large")}}}define("curveLegendAttributeDlg",function(){});class MFunctionDlg{constructor(){var t=$('<div class="modal fade" id="functionModal" role="dialog">    <div class="modal-dialog modal-md">      <div class="modal-content">        <div class="modal-header">          \x3c!--button type="button" class="close" data-dismiss="modal">&times;</button--\x3e          <h4 class="modal-title">Curve Function</h4>        </div>        <div class="modal-body">\t  <div class="row">          <div class="col-sm-2">Curve title:</div>          <div class="col-sm-4"><input id="fnDlg_title" style="width:100%" type="text" value="curve_1"/></div>          <div class="col-sm-2">Function:</div>          <div class="col-sm-4"><input id="fnDlg_function" style="width:100%" type="text" value="x^2"/></div>    </div>\t  <br>    <div id="limits" class="row">          \t<div class="col-sm-3">Lower limit:</div>            <div class="col-sm-3"><input id="fnDlg_lowerLimit" style="width:100%" type="text" value="-10.0"/></div>            <div class="col-sm-3">Upper limit:</div>            <div class="col-sm-3"><input id="fnDlg_upperLimit" style="width:100%" type="text" value="10.0"/></div>    </div>    <br>          <div class="row">            <div class="col-sm-3">Unbounded range:</div>            <div class="col-sm-3"><input id="fnDlg_unboundedRange" type="checkbox"/></div>            <div class="col-sm-3">Number of points:</div>            <div class="col-sm-3"><input id="fnDlg_numberOfPoints" style="width:100%" type="number" min="2" max="200" value="100"/></div>          </div>          <br>          <div id="cont_variable" class="row">            <div class="col-sm-3">Enter variable:</div>            <div class="col-sm-1"><input id="fnDlg_variable" style="width:100%" type="text" value="x" /></div>          </div>          <br>        <div class="modal-footer">          <button id="fnDlg_ok" type="button" class="btn btn-default" >Ok</button>          <button id="fnDlg_cancel" type="button" class="btn btn-default"  data-dismiss="modal">Cancel</button>        </div>      </div>    </div>  </div></div>');function e(t){var e=[];t=purgeKewords(t);for(var i=0;i<t.length;++i)Static.isAlpha(t[i])&&-1==e.indexOf(t[i])&&e.push(t[i]);return e}function i(t){if(function(t){for(var e=0;e<keywords.length;++e)for(;-1!=t.indexOf(keywords[e]);)return!0;return!1}(t))return t;var e="";e+=t[0];for(var i=1;i<t.length;++i)Static.isAlpha(t[i-1])&&Static.isAlpha(t[i])&&(e+="*"),e+=t[i];return e}this.init=function(n){var s=this;$("body").append(t),$("#cont_variable").hide(),$("#fnDlg_unboundedRange").change(function(){$(this)[0].checked?$("#limits").hide():$("#limits").show()}),$("#fnDlg_ok").click(function(){if($("#fnDlg_numberOfPoints").val()>200||$("#fnDlg_numberOfPoints").val()<2)$("#fnDlg_numberOfPoints").val(60),Static.alert('"Number of points" cannot be \nless than 2 or greater than 200');else{var t=e($("#fnDlg_function").val());if(t.length>0&&-1==t.indexOf($("#fnDlg_variable").val()))return Static.alert("Please enter a valid variable."),void $("#cont_variable").show();s.title=$("#fnDlg_title").val(),s.variable=$("#fnDlg_variable").val(),s.fn=i($("#fnDlg_function").val());try{s.lowerLimit=math.eval($("#fnDlg_lowerLimit").val())}catch(t){return void Static.alert("Please enter a valid lower limit.")}try{s.upperLimit=math.eval($("#fnDlg_upperLimit").val())}catch(t){return void Static.alert("Please enter a valid upper limit.")}if(a=parseFloat(s.lowerLimit),r=parseFloat(s.upperLimit),a>=r&&(Static.alert("Upper limit must be greater than Lower limit."),1))return;s.numOfPoints=$("#fnDlg_numberOfPoints").val(),s.unboundedRange=$("#fnDlg_unboundedRange")[0].checked,s.coeffs=function(){var t=[],e=$("#fnDlg_function").val();e=purgeKewords(e);for(var i=$("#fnDlg_variable").val();-1!=e.indexOf(i);)e=e.replace(i,"");for(var n=0;n<e.length;++n)Static.isAlpha(e[n])&&-1==t.indexOf(e[n])&&t.push(e[n]);return t}(),n()}var a,r}),$("#fnDlg_function").on("input",function(){var t=$(this).val();e(t).length>1||-1==t.indexOf($("#fnDlg_variable").val())?$("#cont_variable").show():$("#cont_variable").hide()})},this.functionDlg=function(t){$("#functionModal").modal({backdrop:"static"}),$("#fnDlg_title").val(t)},this.close=function(){$("#fnDlg_cancel").click()}}}define("functionDlg",function(){});class MCurveFitDlg{constructor(){var t=this,e="",i=!1,n=!1,s="",a="",r=-1,o=!1,l=-1,c=-1,u=null,h=null,d={precision:2},p=$('                <div class="modal fade" id="curveFitModal" role="dialog">                <div class="modal-dialog modal-sm">                <div class="modal-content">                <div class="modal-header">                <button type="button" class="close" data-dismiss="modal">&times;</button>                <h4 class="modal-title">Curve Fitter</h4>                </div>                <div class="modal-body">                <div class="row">                <div class="col-sm-5">Fitter type:</div>                <div class="col-sm-7">                <select id="curveFitDlg_type">                <option value="natural">Natural spline</option>                <option value="periodic">Periodic spline</option>                <option value="weeding">Weeding</option>                <option value="linear">Linear</option>                <option value="polynomial">Polynomial</option>                <option value="noFitting">No fitting</option>                </select>                </div>                </div>                <br>                                                <div id="cont_origin">                <div class="row">                <div class="col-sm-7">Through origin:</div>                <div class="col-sm-2"><input id="origin" type="checkbox"/></div>                </div>                <br>                </div>                                <div id="cont_order">                <div class="row">                <div class="col-sm-2">Order:</div>                <div class="col-sm-3"><input id="order" type="number" style="width:100%" value="2" min="1" max="20"/></div><div>Precision: <input id="curveFitDlg_precision" type="number" min="1" max="10" value="2" /></div>                <br>                                               </div>                <br>                </div>                                <div id="cont_tolerance">                <div class="row">                <div class="col-sm-5">Tolerance:</div>                <div class="col-sm-4"><input id="tolerance" type="number" style="width:100%" value="10.0" min="0.0" max="200.0"/></div>                </div>                <br>                </div>                                <div id="cont_chunksize">                <div class="row">                <div class="col-sm-5">Chunk size:</div>                <div class="col-sm-4"><input id="chunksize" type="number" style="width:100%" value="0" min="0" /></div>                </div>                <br>                </div>                \t\t\t\t<div id="cont_retain">                <div class="row">                <div class="col-sm-7">Retain original curve:</div>                <div class="col-sm-2"><input id="curveFitDlg_retain" type="checkbox"/></div>                </div>                <br>\t\t\t\t</div>                                <div id="cont_generate">\t\t\t\t<div class="row">                <div class="col-sm-7">Generate points:</div>                <div class="col-sm-2"><input id="curveFitDlg_generate" type="checkbox" checked/></div>                </div>                <br>\t\t\t\t</div>                                                <div id="attributes">                <div class="row">                <div class="col-sm-6">Fitted curve name:</div>                <div class="col-sm-6"><input id="curveFitDlg_name" type="text" style="width:100%"/></div>                </div>                <br>                <div class="row">                <div class="col-sm-6">Fitted curve color:</div>                <div class="col-sm-2"><input id="curveFitDlg_color" type="color"/></div>                </div>                <br>                </div>                </div>                <div class="modal-footer">                <button id="curveFitDlg_ok" type="button" class="btn btn-default" >Ok</button>                </div>                </div>                </div>                </div>                </div>                ');$("body").append(p),$("#cont_origin").hide(),$("#cont_order").hide(),$("#cont_tolerance").hide(),$("#cont_chunksize").hide(),$("#curveFitDlg_type").change(function(){"linear"==$(this).val()?$("#cont_origin").show():$("#cont_origin").hide(),"polynomial"==$(this).val()?($("#order").val(h.dataSize()-1),$("#cont_order").show()):$("#cont_order").hide(),"natural"==$(this).val()||"periodic"==$(this).val()||"weeding"==$(this).val()?$("#cont_generate").show():$("#cont_generate").hide(),"weeding"==$(this).val()?($("#cont_tolerance").show(),$("#cont_chunksize").show()):($("#cont_tolerance").hide(),$("#cont_chunksize").hide()),"noFitting"!==$(this).val()?($("#cont_retain").show(),$("#cont_retain").show()):($("#curveFitDlg_retain").prop("checked",!1),$("#cont_retain").hide(),$("#attributes").hide())}),$("#attributes").hide(),$("#curveFitDlg_retain")[0].checked=!1,$("#curveFitDlg_retain").change(function(){$(this)[0].checked?$("#attributes").show():$("#attributes").hide()}),this.curveFitCb=function(e){return $("#curveFitModal").css("zIndex",$("#curveSettingsModal").css("zIndex")+1),t.curveFitDlgInit,void 0==t.curveFitDlgInit&&(t.init(),t.curveFitDlgInit=!0),u=e.plot(),h=e,t.curveFitDlg(),t},this.cb=function(){if(i){var p=s;if(u.findPlotCurve(p))return void Static.alert(p+" already exist")}var f=u.autoReplot();u.setAutoReplot(!1);var m=new MyCurve;if(m.setPen(new Misc.Pen(a)),m.fn=h.fn,m.variable=h.variable,m.setAxes(h.xAxis(),h.yAxis()),m.origin=o,m.setStyle(h.style()),"natural"==e||"periodic"==e){m.setData(h.data());var v=new SplineCurveFitter,g=v.spline();if("periodic"==e?g.setSplineType(Static.SplineType.Periodic):g.setSplineType(Static.SplineType.Natural),m.setCurveFitter(v),n){for(var b=u.axisScaleDraw(h.xAxis()).scaleMap(),y=u.axisScaleDraw(h.yAxis()).scaleMap(),S=h.data().samples(),x=[],w=0;w<S.length;w++)x.push(new Misc.Point(b.transform(S[w].x),y.transform(S[w].y)));x=v.fitCurve(x),m.setCurveFitter(null);var P=[];for(w=0;w<x.length;w++)P.push(new Misc.Point(b.invTransform(x[w].x),y.invTransform(x[w].y)));m.setSamples(P)}else m.setSamples(h.data().samples())}else if("weeding"==e){m.setData(h.data());var M=new WeedingCurveFitter(10);if(M.setChunkSize(parseInt(c)),M.setTolerance(parseInt(l)),m.setCurveFitter(M),n){for(b=u.axisScaleDraw(h.xAxis()).scaleMap(),y=u.axisScaleDraw(h.yAxis()).scaleMap(),S=h.data().samples(),x=[],w=0;w<S.length;w++)x.push(new Misc.Point(b.transform(S[w].x),y.transform(S[w].y)));x=M.fitCurve(x),m.setCurveFitter(null);for(P=[],w=0;w<x.length;w++)P.push(new Misc.Point(b.invTransform(x[w].x),y.invTransform(x[w].y)));m.setSamples(P)}else m.setSamples(h.data().samples())}else if("noFitting"==e)m.setData(h.data()),m.setCurveFitter(null);else{for(var k=regress(h,e,parseInt(r),o,d),C=h.data().boundingRect(),A=k.string;-1!=A.indexOf("+ -");)A=A.replace("+ -","- ");m.equation=A,A=A.replace("y =",""),m.setSamples(Utility.makeSamples({fx:A,lowerX:C.left(),upperX:C.right(),numOfSamples:60}))}i?m.setTitle(p):(m.setTitle(h.title()),h.detach()),m.fitType=e,m.attach(u),u.setAutoReplot(f),u.autoRefresh(),t.close()},this.init=function(){var t=this;$("#curveFitDlg_ok").click(function(){e=$("#curveFitDlg_type").val(),i=$("#curveFitDlg_retain")[0].checked,n=$("#curveFitDlg_generate")[0].checked,s=$("#curveFitDlg_name").val(),a=$("#curveFitDlg_color").val(),r=$("#order").val()||1,d={precision:parseInt($("#curveFitDlg_precision").val())},o=$("#origin")[0].checked,l=$("#tolerance").val(),c=$("#chunksize").val(),t.cb()})},this.curveFitDlg=function(){$("#curveFitDlg_name").val(Utility.generateCurveName(u,h.title()+"_fit")),$("#curveFitDlg_color").val(Static.colorNameToHex(h.pen().color)),$("#curveFitModal").modal({backdrop:"static"})},this.curveFitInfoCb=function(t){var e="";return"natural"==t.fitType?e+="Fit type:Natural Spline":"periodic"==t.fitType?e+="Fit type:Periodic Spline":"polynomial"==t.fitType?(e+="Fit type:Polynomial",e+="; Equation:"+t.equation):"weeding"==t.fitType?(e+="Fit type:Weeding",e+="; Tolerance:"+l):"linear"==t.fitType&&(t.origin?e+="Fit type:Linear Through Origin":e+="Fit type:Linear",e+="; Equation:"+t.equation),e},this.close=function(){$(".close").click()}}}define("curveFitDlg",function(){});class MCurveStyleDlg{constructor(){var t=this,e={Lines:Lines,Sticks:Sticks,Steps:Steps,Dots:Dots,NoCurve:NoCurve},i=_.invert(e);this.curveStyleCb=function(e){t.curveStyleDlgInit,void 0==t.curveStyleDlgInit&&($("body").append($('                    <div class="modal fade" id="curveStyleModal" role="dialog">                    <div class="modal-dialog modal-sm">                    <div class="modal-content">                    <div class="modal-header">                    <button type="button" class="close" data-dismiss="modal">&times;</button>                    <h4 class="modal-title">Curve Style</h4>                    </div>                    <div class="modal-body">                    <div class="row">                    <div class="col-sm-5">Curve style:</div>                    <div class="col-sm-7">                    <select id="curveStyleDlgStyle">                    <option value="Lines">Lines (Default)</option>                    <option value="Sticks">Sticks</option>                    <option value="Steps">Steps</option>                    <option value="Dots">Dots</option>                    <option value="NoCurve">NoCurve</option>                    </select>                    </div>                    </div>                    <br>                    <div class="row">                    <div class="col-sm-7">                    </div>                    </div>                    <br>                    <div class="modal-footer">                    <button id="curveStyleDlg_ok" type="button" class="btn btn-default"  data-dismiss="modal">Ok</button>                    </div>                    </div>                    </div>                    </div>                    </div>                    ')),t.init(),t.curveStyleDlgInit=!0),t.curve=e,t.curveStyleDlg()},this.init=function(){$("#curveStyleDlgStyle").change(function(){var i=e[$(this).val()];t.curve.setStyle(i),Static.trigger("curveStyleChanged",t.curve)})},this.curveStyleDlg=function(){$("#curveStyleDlgStyle").val(i[t.curve.style()]),$("#curveStyleModal").modal({backdrop:"static"})}}}define("curveStyleDlg",function(){});class MAxisDlg{constructor(){var t=null,e=_.once(function(){$("body").append($('                        <div class="modal fade" id="axisModal" role="dialog">                        <div class="modal-dialog modal-sm">                        <div class="modal-content">                        <div class="modal-header">                        <button type="button" class="close" data-dismiss="modal">&times;</button>                        <h4 class="modal-title">Curve Axis</h4>                        </div>                        <div class="modal-body">                        <div class="row">                        <div class="col-sm-5">Horizontal:</div>                        <div class="col-sm-7">                        <select id="axisHorizontal1">                        <option value="bottomAxis">Bottom axis</option>                        <option value="topAxis">Top axis</option>                        </select>                        </div>                        </div>                        <br>                        <div class="row">                        <div class="col-sm-5">Vertical:</div>                        <div class="col-sm-7">                        <select id="axisVertical1">                        <option value="leftAxis">Left axis</option>                        <option value="rightAxis">Right axis</option>                        </select>                        </div>                        </div>                        <br>                        <div class="modal-footer">                        <button id="axisDlg_ok" type="button" class="btn btn-default"  data-dismiss="modal">Ok</button>                        </div>                        </div>                        </div>                        </div>                        </div>                        ')),$("#axisHorizontal1").change(function(){"bottomAxis"==$(this).val()?(t.setXAxis(xBottom),Static.trigger("axisChanged",[xBottom,t])):(t.setXAxis(xTop),Static.trigger("axisChanged",[xTop,t]))}),$("#axisVertical1").change(function(){"leftAxis"==$(this).val()?(t.setYAxis(yLeft),Static.trigger("axisChanged",[yLeft,t])):(t.setYAxis(yRight),Static.trigger("axisChanged",[yRight,t]))})});this.axisCb=function(i){e(),(t=i).xAxis()==xBottom?$("#axisHorizontal1").val("bottomAxis"):$("#axisHorizontal1").val("topAxis"),t.yAxis()==yLeft?$("#axisVertical1").val("leftAxis"):$("#axisVertical1").val("rightAxis"),$("#axisModal").modal({backdrop:"static"})}}}define("axisDlg",function(){});class MPointEntryDlg{constructor(){const t=this;let e=_.once(function(){$("#pointEntryModal").remove(),$("body").append($('                        <div class="modal fade" id="pointEntryModal" role="dialog">                        <div class="modal-dialog modal-sm">                        <div class="modal-content">                        <div class="modal-header">                        <button type="button" class= "close" id="closePointEntryDlg">&times;</button>                        <h4 id="pointEntryTitle" class="modal-title">Add/Romve Point</h4>                        </div>                        <div class="modal-body">                        <div class="row">                        <div class="col-sm-4">Name:</div>                        <input id="curve_name" type="text" value="curve_1">                        </div>                        <br>                        <div class="row">                        <div class="col-sm-4">Abscissa(X):</div>                        <input id="abscissa" type="text" value=0.0>                        </div>                        <br>                        <div class="row">                        <div class="col-sm-4">Ordinate(Y):</div>                        <input id="ordinate" type="text" value=0.0>                        </div>                        <br>                        <div class="modal-footer">                        <button id="pointEntryDlg_enter" type="button" class="btn btn-default" >Add</button>                        <button id="pointEntryDlg_remove" type="button" class="btn btn-default" >Remove</button>                        <button id="pointEntryDlg_ok" type="button" class="btn btn-default"  data-dismiss="modal">Finish</button>                        </div>                        </div>                        </div>                        </div>                        </div>                        ')),$("#pointEntryDlg_enter").click(r),$("#pointEntryDlg_remove").click(a),$("#closePointEntryDlg").click(s),$("#curve_name, #abscissa, #ordinate").keyup(n)});function i(){var e=t.plot.findPlotCurve($("#curve_name").val());e&&e.data().samples().length>1?$("#pointEntryDlg_remove").attr("disabled",!1):$("#pointEntryDlg_remove").attr("disabled",!0)}function n(){$("#curve_name").val().length&&_.isString($("#curve_name").val())&&$("#abscissa").val().length&&_.isFinite($("#abscissa").val())&&$("#ordinate").val().length&&_.isFinite($("#ordinate").val())?(i(),$("#pointEntryDlg_enter").attr("disabled",!1)):($("#pointEntryDlg_remove").attr("disabled",!0),$("#pointEntryDlg_enter").attr("disabled",!0))}function s(){$("#pointEntryDlg_ok").click()}function a(){t.plot.findPlotCurve($("#curve_name").val()).removePoint(new Misc.Point(parseFloat($("#abscissa").val()),parseFloat($("#ordinate").val()))),Static.trigger("curveAdjusted")}function r(){let e=t.plot.findPlotCurve($("#curve_name").val());if(e)"Modify/Remove Point"==t.dlgTitle()&&(e.removePoint(t.point,!0),Static.trigger("curveAdjusted"));else{(e=new MyCurve($("#curve_name").val())).attach(t.plot);let i=Utility.randomColor();e.setPen(new Misc.Pen(i));let n=new Symbol(MRect,new Misc.Brush(Static.invert(i)),new Misc.Pen(i),new Misc.Size(8,8));e.setSymbol(n);let s="";Static.showline&&Static.showsymbol?s="lineAndSymbol":Static.showline?s="line":Static.showsymbol&&(s="symbol"),Utility.setLegendAttribute(e,s,e.getLegendIconSize())}let n=e.data().samples(),s=new Misc.Point(parseFloat($("#abscissa").val()),parseFloat($("#ordinate").val()));t.point=s,n.containsPoint(s)||n.push(s),n.sort(function(t,e){return t.x-e.x}),e.setSamples(n),t.plot.autoRefresh(),Static.trigger("pointAdded",e),Static.trigger("curveAdjusted"),i()}this.setDlgTitle=function(t){$("#pointEntryTitle").html(t),"Modify/Remove Point"==t?$("#pointEntryDlg_enter").html("Modify"):$("#pointEntryDlg_enter").html("Add")},this.dlgTitle=function(t){return $("#pointEntryTitle").html()},this.pointEntryCb=function(n,s,a,r){t.curveName=a,t.point=r,e(),t.setDlgTitle(n),void 0!==a&&$("#curve_name").val(a),void 0!==r&&($("#abscissa").val(r.x),$("#ordinate").val(r.y)),t.plot=s,i(),$("#pointEntryModal").modal({backdrop:"static"}),"Modify/Remove Point"==n?$("#curve_name").attr("disabled",!0):$("#curve_name").attr("disabled",!1)}}}define("pointEntryDlg",function(){});class ToolBar{constructor(t){var e=[];function i(){console.log("No callback defined for button")}t=t||{};var n=$('<div id="toolBar1" style="position:relative; border-style: ridge; background-color: lightBlue"></div>');function s(t){for(var i=0;i<e.length;++i)if(e[i][0].innerText.trim().split(" ")[0]==t)return i;return-1}void 0!==t.zIndex&&n.css("zIndex",t.zIndex),n.insertBefore($("#plotDiv")),$("#plotDiv").removeClass("noToolBar"),$("#plotDiv").addClass("toolBar");this.disable=function(t){"string"==typeof t&&(t=s(t)),$("#elem_"+t).attr("disabled",!0)},this.enable=function(t){"string"==typeof t&&(t=s(t)),$("#elem_"+t).attr("disabled",!1)},this.hide=function(i){"string"==typeof i&&(i=s(i)),void 0==i&&(i=-1),i>-1&&i<e.length?e[i].hide():(n.hide(),$("#plotDiv").removeClass("toolBar"),$("#plotDiv").addClass("noToolBar")),t.refreshCb&&refreshCb()},this.show=function(i){"string"==typeof i&&(i=s(i)),void 0==i&&(i=-1),i>-1&&i<e.length?e[i].show():(n.show(),$("#plotDiv").removeClass("noToolBar"),$("#plotDiv").addClass("toolBar")),t.refreshCb&&refreshCb()};this.addToolButton=function(t,s){return"pushbutton"==t?function(t){t.text=t.text,t.class=t.class||"btn btn-primary",t.innerHtmlId=t.innerHtmlId||"elem_"+e.length,t.duration=t.duration||40;var i=$("<button id="+t.innerHtmlId+' type="button" data-toggle="tooltip">');if(i.addClass(t.class),void 0!==t.icon){void 0!==t.text&&t.text.length&&i.text(t.text+" ");var s=$("<img src="+t.icon+' alt="Img" width=18px>');i.append(s)}else i.text(t.text);n.append(i),i.attr("title",t.tooltip);var a=t.cb||function(){console.log("No callback defined for button")},r="click",o="mousedown",l="mouseup";return Static.isMobile()&&(r="tap",o="touchstart",l="touchend"),t.repeat?(i.interval=null,i.bind(o,function(e){"mousedown"==o&&0!=e.button||(i.interval=setInterval(a,t.duration))}),$(window).bind(l,function(){clearInterval(i.interval)})):i.bind(r,a),e.push(i),e.length-1}(s):"checkbox"==t?function(t){var i=t.label||"Option 1",s="";t.checked&&(s="checked"),t.innerHtmlId=t.innerHtmlId||"elem_"+e.length;var a=$('<label data-toggle="tooltip" class="checkbox-inline">                                    <input id='+t.innerHtmlId+' type="checkbox" value="" '+s+">"+i+"                                  </label>");a.css("marginLeft",t.marginLeft||8),a.css("marginRight",t.marginRight||8),n.append(a),t.disabled&&$("#"+t.innerHtmlId).attr("disabled",!0),a.attr("title",t.tooltip);var r=t.cb||function(){console.log("No callback defined for button")};return a.click(function(){r($("#"+t.innerHtmlId).is(":checked"))}),e.push(a),e.length-1}(s):"toggleSwitch"==t?function(t){var i=t.label||"Option 1",s="";t.checked&&(s="checked"),t.innerHtmlId=t.innerHtmlId||"elem_"+e.length;var a=$('<label data-toggle="tooltip" class="checkbox-inline switch">                                    <input id='+t.innerHtmlId+'  type="checkbox" value="" '+s+'>                                    <span class="slider round" style="width:48px"></span>                                    <span style="margin-left:30px">'+i+"</span>                                  </label>");a.css("marginLeft",t.marginLeft||4),a.css("marginRight",t.marginRight||2),n.append(a),a.attr("title",t.tooltip);var r=t.cb||function(){console.log("No callback defined for button")};return $("#"+t.innerHtmlId).on("change",function(){r($(this)[0].checked)}),e.push(a),e.length-1}(s):"radio"==t?function(t){var s=t.label||"Option 1";t.value=t.value||s,t.innerHtmlId=t.innerHtmlId||"elem_"+e.length;var a=t.name||"optradio",r=$('<label data-toggle="tooltip" class="checkbox-inline">                                    <input id='+t.innerHtmlId+' type="radio" value='+t.value+" name="+a+">"+s+"                                  </label>");r.css("marginLeft",t.marginLeft||0),r.css("marginRight",t.marginRight||0),n.append(r),r.attr("title",t.tooltip),r.addClass(t.class);var o=t.cb||i;return r.click(o),e.push(r),e.length-1}(s):"dropdown"==t?function(t){t.label;t.text=t.text||"Button",t.innerHtmlId=t.innerHtmlId||"elem_"+e.length;var s=$('<span data-toggle="tooltip" class="dropdown">                              <button id='+t.innerHtmlId+' class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">'+t.text+'                              <span class="caret"></span></button>                              <ul class="dropdown-menu">'+function(t){for(var e="",i=t.hasCheckbox||!1,n=t.listElements||[],s=0;s<n.length;++s)n[s].icon=n[s].icon||"",n[s].checked=n[s].checked||"unchecked",i&&!n[s].icon.length&&(n[s].tooltip?e+='<li title="'+n[s].tooltip+'"><a href="#"><label><input type="checkbox" '+n[s].checkboxState+" value="+s+">"+n[s].text+"</label></a></li>":e+='<li><a href="#"><label><input type="checkbox" '+n[s].checkboxState+" value="+s+">"+n[s].text+"</label></a></li>"),!i&&n[s].icon.length&&(n[s].tooltip?e+='<li title="'+n[s].tooltip+'"><a href="#"><label><img src='+n[s].icon+' alt="Img" width=20px> '+n[s].text+"</label></a></li>":e+='<li><a href="#"><label>'+n[s].icon+n[s].text+"</label></a></li>"),i&&n[s].icon.length&&(n[s].tooltip?e+='<li title="'+n[s].tooltip+'"><a href="#"><label><img src='+n[s].icon+' alt="Img" width=20px><input type="checkbox" '+n[s].checkboxState+' value="">'+n[s].text+"</label></a></li>":e+='<li><a href="#"><label><input type="checkbox" '+n[s].checkboxState+' value="">'+n[s].icon+n[s].text+"</label></a></li>"),i||n[s].icon.length||(n[s].tooltip?e+='<li title="'+n[s].tooltip+'"><a href="#"><label>'+n[s].text+"</label></a></li>":e+='<li><a href="#"><label>'+n[s].text+"</label></a></li>");return e}(t)+"</ul>                          </span>");return s.css("marginLeft",t.marginLeft||0),s.css("marginRight",t.marginRight||0),s.addClass(t.class),s.attr("title",t.tooltip),n.append(s),t.cb=t.cb||i,s.on("click",function(e){if($(e.target).parent().parent().parent().hasClass("disabled"))return!1;if(!t.hasCheckbox){var i=$(e.target).closest("li").index();-1!=i&&t.cb(e,i)}}),s.on("change",function(e){var i=$(e.target);i.prop("checked"),t.cb(e,i.closest("li").index(),i.prop("checked"))}),e.push(s),e.length-1}(s):"select"==t?function(t){t.label=t.label||"Select One",t.innerHtmlId=t.innerHtmlId||"elem_"+e.length;var i=$('<span data-toggle="tooltip"><label for="sel1">'+t.label+":</label>                            <select>                              <option>1</option>                              <option>23456789101112</option>                              <option>3</option>                              <option>4</option>                            </select></span>");i.css("marginLeft",t.marginLeft||8),i.css("marginRight",t.marginRight||8),i.addClass(t.class),i.attr("title",t.tooltip),n.append(i);var s=t.cb||function(){console.log("No callback defined for button")};return i.click(s),e.push(i),e.length-1}(s):"number"==t?function(t){t.label=t.label||"Select One",t.innerHtmlId=t.innerHtmlId||"elem_"+e.length,t.min=t.min||-1e6,t.max=t.max||1e6,t.value=t.value||t.min,t.value>t.max&&(t.value=t.max),t.value<t.min&&(t.value=t.min);var i=$('<span data-toggle="tooltip"><label for="sel1">'+t.label+":</label>                                   </span>"),s=$("<input id="+t.innerHtmlId+'  type="number"                            value="10" name="some-name"/>');i.append(s),n.append(i),s.attr({width:200,min:t.min,max:t.max,step:t.step,value:t.value}),i.attr("title",t.tooltip),i.css("marginLeft",t.marginLeft||8),i.css("marginRight",t.marginRight||8),i.addClass(t.class);var a=t.cb||function(){console.log("No callback defined for button")};return i.click(a),e.push(i),e.length-1}(s):"upload"==t?function(t){t.label=t.label||"Select One",t.innerHtmlId=t.innerHtmlId||"elem_"+e.length;var i=$("<input id="+t.innerHtmlId+'  type="file" name="files[]" multiple />'),s=$('<button data-toggle="tooltip"></button>');i.css("marginLeft",-8),i.css("marginRight",-8),i.css("marginTop",-3),i.css("marginBottom",-3),s.append(i),s.css("marginLeft",t.marginLeft||8),s.css("marginRight",t.marginRight||8),s.addClass(t.class),s.attr("title",t.tooltip),n.append(s),e.push(s);var a=!1;return s.click(function(){if(!a)return a=!0,i.trigger("click"),!1}),e.length-1}(s):"link"==t?function(t){t.text=t.text||"Button",t.innerHtmlId=t.innerHtmlId||"elem_"+e.length;var i=$("<A HREF="+t.href+"></a>");i.text(t.text),n.append(i),i.addClass(t.class),i.attr("title",t.tooltip),i.attr("target",t.target);var s=t.cb||function(){console.log("No callback defined for button")};return i.click(s),e.push(i),e.length-1}(s):void 0},this.setButtonCheck=function(t,i){"string"==typeof t&&(t=s(t)),e[t].children().prop("checked",i)},this.isDropdownItemChecked=function(t,i){return"string"==typeof t&&(t=s(t)),$($(e[t].children()[1]).children()[i]).children().children().children().prop("checked")},this.setDropdownItemCheck=function(t,i,n){"string"==typeof t&&(t=s(t)),$($(e[t].children()[1]).children()[i]).children().children().children().prop("checked",n)},this.hideDropdownItem=function(t,i){"string"==typeof t&&(t=s(t)),$($(e[t].children()[1]).children()[i]).hide()},this.showDropdownItem=function(t,i){"string"==typeof t&&(t=s(t)),$($(e[t].children()[1]).children()[i]).show()},this.enableDropdownItem=function(t,i,n){"string"==typeof t&&(t=s(t));var a=$($(e[t].children()[1]).children()[i]).addClass("disabled");n?a.removeClass("disabled"):a.addClass("disabled")}}}define("toolBar",function(){});class MCurveSettings{constructor(t){let e=null,i=null,n=null,s=null,a=null;function r(){let e=$("#curveSelect").children();for(let t=0;t<e.length;++t)$("#curveSelect")[0].removeChild(e[t]);let i=t.itemList(Static.Rtti_PlotCurve);for(let t=0;t<i.length;++t)if(i[t].isVisible()){let e=$("<option>"+i[t].title()+"</option>");e.attr("value",i[t].title()),$("#curveSelect").append(e)}return $("#sizeSymbol").val(10),i.length?i[0]:null}function o(t){t.brush().color==Static.NoBrush?$("#clearBrush").hide():$("#clearBrush").show()}function l(t){if(!t)return;$("#penColor").val(Static.colorNameToHex(t.pen().color)),$("#penWidth")[0].selectedIndex=t.pen().width-1,$("#penStyle")[0].selectedIndex=["solid","dot","dash","dashDot","dashDotDot"].indexOf(t.pen().style),$("#horizontalAxis")[0].selectedIndex=t.xAxis()-2,$("#verticalAxis")[0].selectedIndex=t.yAxis(),t.fitType?$("#fitInfo").show():$("#fitInfo").hide(),o(t);let e=t.symbol();if(e){let t=e.style();t==MRect&&$("#symbolType").val("MRect"),t==Cross&&$("#symbolType").val("Cross"),t==Diamond&&$("#symbolType").val("Diamond"),t==Ellipse&&$("#symbolType").val("Ellipse"),t==XCross&&$("#symbolType").val("XCross")}else $("#symbolType").val("None");"None"==$("#symbolType").val()?$("#symbolContainer").hide():($("#symbolContainer").show(),$("#penColorSymbol").val(e.pen().color),$("#penWidthSymbol").val(e.pen().width),$("#fillBrushSymbol").val(e.brush().color),$("#sizeSymbol").val(e.size().width))}$("body").append($('                \x3c!-- Modal --\x3e                <div class="modal fade" id="curveSettingsModal" role="dialog">                <div class="modal-dialog">                                \x3c!-- Modal content--\x3e                <div class="modal-content">                <div class="modal-header">                \x3c!--button type="button" class="close" data-dismiss="modal">&times;</button--\x3e                <h4 class="modal-title">Curve attributes</h4>                </div>                <div class="modal-body">                                                <div class="row">                <div class="col-sm-3">Curve name:</div>                <div class="col-sm-5"><select id="curveSelect" style="width:100%"></select></div>                <div class="col-sm-2"><button id="remove">Remove</button></div>                <div class="col-sm-2"><button id="rename">Rename</button></div>                </div>                                <br>                <div class="row">                <div class="col-sm-3">Pen color:<input id="penColor" type="color"/></div>                <div class="col-sm-4">Pen width:<select id="penWidth" style="width:50%"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option></select></div>                <div class="col-sm-5">Pen style:<select id="penStyle" style="width:60%"><option>solid</option><option>dot</option><option>dash</option><option>dashDot</option><option>dashDotDot</option></select></div>                </div>                                <br>                <div class="row">                <div class="col-sm-6">Horizontal axis:<select id="horizontalAxis" style="width:50%"><option value="2">Bottom</option><option value="3">Top</option></select></div>                <div class="col-sm-5">Vertical axis:<select id="verticalAxis" style="width:60%"><option value="0">Left</option><option value="1">Right</option></select></div>                </div>                                <br>                <div class="row">                <div class="col-sm-1"><button id="fit">Fit</button></div><div class="col-sm-3"><button id="legendAttribute">Legend attribute</button></div><div class="col-sm-3"><button id="curveStyle">Curve style</button></div><div class="col-sm-2"><button id="curveBrush"> Brush</button></div><div class="col-sm-3"><button id="clearBrush">No brush</button></div>\x3c!--div class="col-sm-2"><button id="curveAxis">Axis</button></div--\x3e                <div class="col-sm-3"><button id="fitInfo">Curve Fit Info...</button></div>                </div>                                <br>                <div class="row">                <div class="col-sm-2">Symbols</div>                <div class="col-sm-8"><select id="symbolType"><option value="None">None</option><option value="MRect">Rectangle</option><option value="Cross">Cross</option><option value="Diamond">Diamond</option><option value="Ellipse">Ellipse</option><option value="XCross">Diagonal cross</option></select></div>                </div>                                <br>                <div id="symbolContainer">                <div class="row">                <div class="col-sm-6">Symbol pen color:<input id="penColorSymbol" type="color"/></div>                <div class="col-sm-6">Symbol pen width:<select id="penWidthSymbol" style="width:50%"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option></select></div>                </div>                <br>                <div class="row">                <div class="col-sm-6">Symbol fill brush:<input id="fillBrushSymbol" type="color"/></div>                <div class="col-sm-6">Symbol size:<select id="sizeSymbol" style="width:50%"><option value="5">5x5</option><option value="6">6x6</option><option value="8">8x8</option><option value="10">10x10</option><option value="12">12x12</option><option value="15">15x15</option></select></div>                </div>                </div>                                                </div>                <div class="modal-footer">                <button id="cancelAxisDlg" type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>                <button type="button" class="btn btn-default" data-dismiss="modal">Ok</button>                </div>                </div>                                </div>                </div>                ')),$("#curveSelect").change(function(){l(t.findPlotCurve($("#curveSelect").val()))}),$("#remove").click(function(){if(t.findPlotCurve($("#curveSelect").val()).detach(),!t.hasPlotCurve())return void $("#cancelAxisDlg").click();let e=$("#curveSelect").children();$("#curveSelect")[0].removeChild(e[$("#curveSelect")[0].selectedIndex]),l(t.findPlotCurve($("#curveSelect").val()))}),$("#rename").click(function(){return Utility.curveRenameDlg($("#curveSelect").val(),t,function(){let t=$("#curveSelect")[0].selectedIndex;return r(),$("#curveSelect")[0].selectedIndex=t,!0}),!0}),$("#fit").click(function(){e(t.findPlotCurve($("#curveSelect").val()))}),$("#legendAttribute").click(function(){n(t.findPlotCurve($("#curveSelect").val()))}),$("#clearBrush").click(function(){Utility.removeCurveBrush(t.findPlotCurve($("#curveSelect").val())),o(t.findPlotCurve($("#curveSelect").val()))}),$("#curveBrush").click(function(){Utility.setCurveBrush(t.findPlotCurve($("#curveSelect").val()),o)}),$("#curveStyle").click(function(){s(t.findPlotCurve($("#curveSelect").val()))}),$("#curveAxis").click(function(){a(t.findPlotCurve($("#curveSelect").val()))}),$("#fitInfo").click(function(){let e=t.findPlotCurve($("#curveSelect").val()),n=i(e);n.length?Static.alert(n):Static.alert('No curve fitting equation found for "'+e.title()+'."')}),$("#penColor").change(function(){let e=t.findPlotCurve($("#curveSelect").val()),i=e.pen();i.color=$(this).val(),e.setPen(i)}),$("#penWidth").change(function(){let e=t.findPlotCurve($("#curveSelect").val()),i=e.pen();i.width=$(this).val(),e.setPen(i)}),$("#penStyle").change(function(){let e=t.findPlotCurve($("#curveSelect").val()),i=e.pen();i.style=$(this).val(),e.setPen(i)}),$("#horizontalAxis").change(function(){let e=t.findPlotCurve($("#curveSelect").val());e.setXAxis($(this).val()),Static.trigger("axisChanged",[$(this).val(),e])}),$("#verticalAxis").change(function(){let e=t.findPlotCurve($("#curveSelect").val());e.setYAxis($(this).val()),Static.trigger("axisChanged",[$(this).val(),e])}),$("#symbolType").change(function(){let e=t.findPlotCurve($("#curveSelect").val());"None"==$("#symbolType").val()?($("#symbolContainer").hide(),$("#penWidthSymbol").val(1),$("#penColorSymbol").val(Static.colorNameToHex("black")),$("#fillBrushSymbol").val(Static.colorNameToHex("transparent")),$("#sizeSymbol").val(10)):$("#symbolContainer").show(),function(t,e){if("None"==e)return void t.setSymbol(null);let i=-1;"MRect"==e&&(i=MRect);"Cross"==e&&(i=Cross);"Diamond"==e&&(i=Diamond);"Ellipse"==e&&(i=Ellipse);"XCross"==e&&(i=XCross);Utility.addSymbol(t,i)}(e,$(this).val())}),$("#penColorSymbol").change(function(){let e=t.findPlotCurve($("#curveSelect").val()),i=e.symbol();if(!i)return;let n=i.pen();n.color=$(this).val(),i.setPen(n),e.plot().autoRefresh(),e.plot().updateLegend(e)}),$("#penWidthSymbol").change(function(){!function(t,e){Utility.setSymbolPenWidth(t,e)}(t.findPlotCurve($("#curveSelect").val()),parseInt($(this).val()))}),$("#fillBrushSymbol").change(function(){let e=t.findPlotCurve($("#curveSelect").val()),i=e.symbol();if(!i)return;let n=i.brush();n.color=$(this).val(),i.setBrush(n),e.plot().autoRefresh(),e.plot().updateLegend(e)}),$("#sizeSymbol").change(function(){!function(t,e){Utility.setSymbolSize(t,e)}(t.findPlotCurve($("#curveSelect").val()),parseInt($(this).val()))}),this.init=function(){e=t.curveFitDlg.curveFitCb,i=t.curveFitDlg.curveFitInfoCb,n=t.curveAttributeDlg.curveAttributeCb,s=t.curveStyleDlg.curveStyleCb,a=t.axisDlg.axisCb},this.curveSettingsDlg=function(){t.itemList(Static.Rtti_PlotCurve).length?(l(r()),$("#curveSettingsModal").modal({backdrop:"static"})):Static.alert("No curves found","small")},this.init()}}define("curveSettings",function(){});class MToolBar extends ToolBar{constructor(t,e){super(e);var i=this,n=new Watches(t).watchElements();function s(){var e=$("input[name=optradio]").filter(":checked").val();"Zoom"==e&&(t.pan.setEnabled(!1),Utility.setAutoScale(t,!1),t.zm.setEnabled(!0),t.zm.setZoomBase(t.zm.scaleRect())),"Pan"==e&&(t.pan.setEnabled(!0),t.zm.setEnabled(!1),Utility.setAutoScale(t,!1)),"Auto"==e&&(t.pan.setEnabled(!1),t.zm.setEnabled(!1),Utility.setAutoScale(t,!0))}var a,r=[function(e){t.enableAxis(yLeft,e)},function(e){t.enableAxis(xBottom,e)},function(e){t.enableAxis(yRight,e)},function(e){t.enableAxis(xTop,e)},function(e){Utility.majorGridLines(t.grid,e),i.enableDropdownItem("View",5,e)},function(e){Utility.minorGridLines(t.grid,e)},function(e){e?t.showTitle():t.hideTitle()},function(e){e?t.showFooter():t.hideFooter()},function(e){t.enableLegend(e)}];Static.bind("majorGridLines",function(t,e,n){i.setDropdownItemCheck("View",4,n),i.enableDropdownItem("View",5,n)}),Static.bind("minorGridLines",function(t,e,n){i.setDropdownItemCheck("View",5,n)});var o=[t.file.save,function(){t._functionDlg.functionDlg(Utility.generateCurveName(t))},function(){t.pointEntryDlg.pointEntryCb("Add/Romve Point",t)},function(){a&&!a.closed||(a=window.open("https://www.tcsion.com/OnlineAssessment/ScientificCalculator/Calculator.html#nogo","_blank","width=480,height=345, top=200, left=200")),a.focus()},Static.printFn];this.addToolButton("dropdown",{text:"File",cb:function(t,e){o[e]()},listElements:[{text:"Save",icon:"images/save.png",tooltip:"Save the current graph."},{text:"Function",icon:"images/function.png",tooltip:"Launches the function dialog."},{text:"Point entry",icon:"images/pointEntry.png",tooltip:"Launches the point entry dialog."},{text:"Calculator",icon:"images/calculator.png",tooltip:"Launches the calculator."},{text:"Print",icon:"images/print.png",tooltip:"Print the current graph."}]});var l=this.addToolButton("checkbox",{label:"C-Prop",cb:function(e){t.leftSidebar.showGridItem(0,e)},tooltip:"Show/Hide curve properties pane",disabled:!0}),c=this.addToolButton("checkbox",{label:"P-Prop",checked:!0,cb:function(e){t.leftSidebar.showGridItem(1,e)},tooltip:"Show/Hide plot properties pane"});Static.bind("showGridItem",function(t,e,n,s){"left"==e&&(0==n?i.setButtonCheck(l,s):i.setButtonCheck(c,s))}),this.addToolButton("upload",{innerHtmlId:"fileInput",class:"btn btn-primary",tooltip:"Upload data files"}),this.addToolButton("radio",{label:"Zoom",tooltip:"Enable zooming. Press the mouse left button and drag.",cb:s}),this.addToolButton("radio",{label:"Pan",tooltip:"Allow dragging of all plot items to new positions. Press the mouse left button and drag.",cb:s}),this.addToolButton("radio",{label:"Auto",tooltip:"Determine and and apply the scale that\nallows the extent of all curves to be shown.",cb:s}),this.addToolButton("dropdown",{text:"View",hasCheckbox:!0,cb:function(t,e,i){r[e](i)},listElements:[{text:"Left axis",icon:"images/axis.png",tooltip:"Enable left axis",checkboxState:"checked"},{text:"Bottom axis",icon:"images/axis.png",tooltip:"Enable bottom axis",checkboxState:"checked"},{text:"Right axis",icon:"images/axis.png",tooltip:"Enable right axis"},{text:"Top axis",icon:"images/axis.png",tooltip:"Enable top axis"},{text:"Major gridlines",icon:"images/major_grid.png",tooltip:"Enable major gridlines",checkboxState:"checked"},{text:"Minor gridlines",icon:"images/minor_grid.png",tooltip:"Enable minor gridlines",checkboxState:"checked"},{text:"Title",icon:"images/title.png",tooltip:"Enable title",checkboxState:"checked"},{text:"Footer",icon:"images/footer.png",tooltip:"Enable footor",checkboxState:"checked"},{text:"Legend",icon:"images/legend.png",tooltip:"Enable the legend (at least one curve should be present)",checkboxState:"checked"}]});var u=this.addToolButton("checkbox",{label:"S-Bar",cb:function(e){t.itemList(Static.Rtti_PlotCurve).length&&(t.rightSidebar.showGridItem(0,e),t.rv.updateWatchesAndTable()),e||t.sidebar.setSidebarReDisplay(!1)},tooltip:"Show/Hide sidbar",disabled:!0});this.addToolButton("checkbox",{label:"P-Sel",cb:function(e){t.curveClosestPoint.setEnabled(e)},tooltip:"Turn on point selection. This may affect response."});this.addToolButton("pushbutton",{text:"+",icon:"images/zoom_in.png",repeat:!0,tooltip:"Zoom in.",cb:function(e){for(var i=0;i<axisCnt;i++){t.axisScaleDiv(i).range()>1e-9&&t.magnifier.rescale(.995)}}}),this.addToolButton("pushbutton",{text:"-",icon:"images/zoom_out.png",repeat:!0,tooltip:"Zoom out",cb:function(e){t.magnifier.rescale(1/.98)}}),this.addToolButton("dropdown",{text:"Watch",tooltip:"Enable/disable watches.",hasCheckbox:!0,cb:function(e,i,n){t.rv.watch(i).setEnable(n),t.rv.updateWatchesAndTable()},listElements:n}),this.addToolButton("link",{text:"Help",cb:function(){},href:"grapherHelp/Grapher.html",target:"_blank",class:"noSelect",tooltip:"Launches online help."}),Static.bind("showGridItem",function(e,n,s,a){"right"==n&&(a||(i.setButtonCheck(u,!1),t.sidebar&&t.sidebar.setSidebarReDisplay(!1)))}),Static.bind("visibilityChange",function(e,n,s){n.rtti==Static.Rtti_PlotCurve&&(t.sidebar.initSidebar(),t.hasVisiblePlotCurve()?(i.enable(u),t.sidebar.sidebarReDisplay()&&(t.rightSidebar.showSidebar(!0),t.sidebar.setSidebarReDisplay(!1))):(i.disable(u),t.tbar.hideDropdownItem("View",10),t.rightSidebar.isSideBarVisible()&&(Static.alert("Ooops!! No visible curves to watch."),t.rightSidebar.showSidebar(!1),t.sidebar.setSidebarReDisplay(!0))))}),Static.bind("itemChanged",function(e,i,n){i.rtti==Static.Rtti_PlotGrid&&(n?t.tbar.showDropdownItem("View",6):t.tbar.hideDropdownItem("View",6))}),Static.bind("rescaled",function(){i.setButtonCheck("Auto",!1)}),""==t.title()&&i.hideDropdownItem("View",7),Static.bind("titleAdded",function(t,e){e?i.showDropdownItem("View",7):i.hideDropdownItem("View",7)}),""==t.footer()&&i.hideDropdownItem("View",8),Static.bind("footerAdded",function(t,e){e?i.showDropdownItem("View",8):i.hideDropdownItem("View",8)}),Static.bind("itemAttached",function(e,n,s){n.rtti==Static.Rtti_PlotCurve&&(s?(i.enable(u),i.enable(l)):t.itemList(Static.Rtti_PlotCurve).length&&t.hasVisiblePlotCurve()||(i.disable(u),i.disable(l),i.setButtonCheck(u,!1)),Static.trigger("visibilityChange",[n,s]))}),t.sidebar,this.setButtonCheck("Auto",!0)}}define("mtoolBar",["toolBar","curveSettings"],function(){});class UpLoad{constructor(t,e,i){var n=this;this.cb=null,this.reset=function(t){t[0].value=""},this.setInputElement=function(t){Static.bind("itemAttached",function(t,e,i){e.rtti==Static.Rtti_PlotCurve&&$("#fileInput").val().includes(e.title())&&!i&&n.reset($("#fileInput"))}),t.change(function(t){for(var e,i=t.target.files,s=0;e=i[s];s++){var a=e.name.split(".")[1];if("txt"==a||"plt"==a){var r=new FileReader;r.onload=function(t){return function(e){n.cb?n.cb({fileName:t.name,content:e.target.result}):console.log({fileName:t.name,content:e.target.result})}}(e),r.readAsText(e)}}})}}}define("upload",function(){});class MFile{constructor(t,e){var i=new UpLoad,n=this,s=null;function a(t){var n=JSON.parse(t.content),a=n[0];"[LogScaleEngine]"==a.rightScaleEngineType&&s.setAxisScaleEngine(yRight,new LogScaleEngine),"[LogScaleEngine]"==a.leftScaleEngineType&&s.setAxisScaleEngine(yLeft,new LogScaleEngine),"[LogScaleEngine]"==a.bottomScaleEngineType&&s.setAxisScaleEngine(xBottom,new LogScaleEngine),"[LogScaleEngine]"==a.topScaleEngineType&&s.setAxisScaleEngine(xTop,new LogScaleEngine),"[LinearScaleEngine]"==a.rightScaleEngineType&&s.setAxisScaleEngine(yRight,new LinearScaleEngine),"[LinearScaleEngine]"==a.leftScaleEngineType&&s.setAxisScaleEngine(yLeft,new LinearScaleEngine),"[LinearScaleEngine]"==a.bottomScaleEngineType&&s.setAxisScaleEngine(xBottom,new LinearScaleEngine),"[LinearScaleEngine]"==a.topScaleEngineType&&s.setAxisScaleEngine(xTop,new LinearScaleEngine),a.autoScale?setAutoScale(!0):(s.setAxisScale(xBottom,a.xBottomMin,a.xBottomMax),s.setAxisScale(yLeft,a.yLeftMin,a.yLeftMax),s.setAxisScale(xTop,a.xTopMin,a.xTopMax),s.setAxisScale(yRight,a.yRightMin,a.yRightMax)),s.setTitleFont(new Misc.Font(a.titleFont)),s.setFooterFont(new Misc.Font(a.footerFont)),s.setAxisTitleFont(xBottom,new Misc.Font(a.axisTitleFont)),s.setAxisTitleFont(xTop,new Misc.Font(a.axisTitleFont)),s.setAxisTitleFont(yLeft,new Misc.Font(a.axisTitleFont)),s.setAxisTitleFont(yRight,new Misc.Font(a.axisTitleFont)),s.setTitle(a.title),s.setFooter(a.footer),s.setAxisTitle(xBottom,a.xBottomAxisTitle),s.setAxisTitle(xTop,a.xTopAxisTitle),s.setAxisTitle(yLeft,a.yLeftAxisTitle),s.setAxisTitle(yRight,a.yRightAxisTitle);for(var r=1;r<n.length;++r)if(s.findPlotCurve(n[r].title))return Static.alert(n[r].title+" already exist"),void i.reset($("#fileInput"));for(r=1;r<n.length;++r){var o=new e(n[r].title);if(n[r].symbolType!==NoSymbol){var l=new Symbol;l.setStyle(n[r].symbolType),l.setSize(new Misc.Size(n[r].symbolWidth,n[r].symbolWidth)),l.setPen(new Misc.Pen(n[r].symbolPenColor,n[r].symbolPenWidth)),l.setBrush(new Misc.Brush(n[r].symbolBrushColor)),o.setSymbol(l)}if(n[r].fitType&&(o.fitType=n[r].fitType),o.setSamples(Utility.pointsFromXYObjectArray(n[r].samples)),"natural"==n[r].fitType||"periodic"==n[r].fitType){var c=new SplineCurveFitter,u=c.spline();"periodic"==n[r].fitType?u.setSplineType(Static.SplineType.Periodic):u.setSplineType(Static.SplineType.Natural),o.setCurveFitter(c)}o.setPen(new Misc.Pen(n[r].pen.color,n[r].pen.width,n[r].pen.style)),o.setAxes(n[r].xAxis,n[r].yAxis),o.attach(s)}i.reset($("#fileInput"))}this.init=function(t){s=t,i.cb=this.upload},this.setInputElement=function(t){i.setInputElement(t)},this.upload=function(t){var e=t.fileName.split(".")[1];if("txt"==e){var r=Utility.makePoints(Utility.toArrays(t.content));Static.trigger("addCurve",[t.fileName,r,!0])}else if("plt"==e){var o=s.itemList(Static.Rtti_PlotCurve);o.length?Static.alertYesNo("Do you want to save the changes to the Grapher?",function(e){if(e!=Static.Cancel){if(e==Static.Yes)return n.save(),void i.reset($("#fileInput"));if(e!=Static.No);else{for(var s=0;s<o.length;++s)o[s].detach();a(t)}}else i.reset($("#fileInput"))}):a(t)}},this.save=function(){Static.prompt("Enter a filename without extensions","plot_1",function(t){return t+=".plt",function(t,e){var i=document.createElement("a");document.body.appendChild(i),i.style="display: none";var n=JSON.stringify(t),s=new Blob([n],{type:"octet/stream"}),a=window.URL.createObjectURL(s);i.href=a,i.download=e,i.click(),window.URL.revokeObjectURL(a)}(function(){var t=[],e={};e.bottomScaleEngineType=s.axisScaleEngine(xBottom).toString(),e.leftScaleEngineType=s.axisScaleEngine(yLeft).toString(),e.topScaleEngineType=s.axisScaleEngine(xTop).toString(),e.rightScaleEngineType=s.axisScaleEngine(yRight).toString(),e.title=s.title(),e.titleFont=s.titleFont(),e.footer=s.footer(),e.footerFont=s.footerFont(),e.axisTitleFont=s.axisTitleFont(xBottom),e.xBottomAxisTitle=s.axisTitle(xBottom),e.xTopAxisTitle=s.axisTitle(xTop),e.yLeftAxisTitle=s.axisTitle(yLeft),e.yRightAxisTitle=s.axisTitle(yRight),e.autoScale=s.axisAutoScale(xBottom),e.autoScale||(e.xBottomMin=s.axisInterval(xBottom).minValue(),e.xBottomMax=s.axisInterval(xBottom).maxValue(),e.yLeftMin=s.axisInterval(yLeft).minValue(),e.yLeftMax=s.axisInterval(yLeft).maxValue(),e.xTopMin=s.axisInterval(xTop).minValue(),e.xTopMax=s.axisInterval(xTop).maxValue(),e.yRightMin=s.axisInterval(yRight).minValue(),e.yRightMax=s.axisInterval(yRight).maxValue()),t.push(e);for(var i=s.itemList(Static.Rtti_PlotCurve),n=0;n<i.length;++n){var a={};a.title=i[n].title(),a.samples=Utility.pointsToXYObjectArray(i[n].data().samples()),a.fn=i[n].fn,a.pen=i[n].pen(),a.fitType=i[n].fitType;var r=i[n].symbol();r&&(a.symbolType=r.style(),a.symbolWidth=r.size().width,a.symbolPenColor=r.pen().color,a.symbolPenWidth=r.pen().width,a.symbolBrushColor=r.brush().color),a.xAxis=i[n].xAxis(),a.yAxis=i[n].yAxis(),t.push(a)}return t}(),t),!0},"small")},this.init(t)}}define("file",function(){});class Watch{constructor(t,e){this._dependentRuler=e||Static.NoRuler,this._rulerGroup=t;var i=!0;this._curveName="",this._curve=null,this._rulerLeft=Number.MAX_VALUE,this._rulerRight=Number.MAX_VALUE,this._rulerBottom=Number.MAX_VALUE,this._rulerTop=Number.MAX_VALUE,this._value,this.name=function(){},this.computeWatch=function(){},this.value=function(){return this._value},this.setCurveName=function(t){this._curveName=t},this.setCurve=function(t){this._curve=t},this.setRulerLeft=function(t){this._curve&&this._curve.plot()&&(t=Static.adjustForDecimalPlaces(t,this._curve.plot().axisDecimalPlaces(this._curve.xAxis()))),this._rulerLeft=t},this.setRulerRight=function(t){this._curve&&this._curve.plot()&&(t=Static.adjustForDecimalPlaces(t,this._curve.plot().axisDecimalPlaces(this._curve.xAxis()))),this._rulerRight=t},this.setRulerBottom=function(t){this._curve&&this._curve.plot()&&(t=Static.adjustForDecimalPlaces(t,this._curve.plot().axisDecimalPlaces(this._curve.yAxis()))),this._rulerBottom=t},this.setRulerTop=function(t){this._curve&&this._curve.plot()&&(t=Static.adjustForDecimalPlaces(t,this._curve.plot().axisDecimalPlaces(this._curve.yAxis()))),this._rulerTop=t},this.setEnable=function(t){i=t,Static.trigger("watchEnabled",[this,t])},this.isEnable=function(){return i}}}define("watch",function(){});var MoveToElement=0,LineToElement=1,CurveToElement=2,CurveToDataElement=3,Misc={Pen:function(t,e,i){if("object"==typeof t)return new Misc.Pen(t.color,t.width,t.style);this.color="black",this.width=1,this.style="solid",void 0!==i&&(this.style=i),void 0!==e&&(this.width=e),void 0!==t&&(this.color=t)}};Misc.Pen.prototype.toString=function(){return"[color:"+this.color+", width:"+this.width+", style:"+this.style+"]"},Misc.Pen.prototype.isEqual=function(t){return this.color==t.color&&this.style==t.style&&this.width==t.width},Misc.Brush=function(t){this.color=Static.NoBrush,void 0!==t&&(this.color=t)},Misc.Brush.prototype.toString=function(){return"[Brush: "+this.color+"]"},Misc.Brush.prototype.isEqual=function(t){return this.color==t.color},Misc.Line=function(t,e){var i=t,n=e;this.p1=function(){return i},this.p2=function(){return n}},Misc.Line.prototype.x1=function(){return this.p1().x},Misc.Line.prototype.x2=function(){return this.p2().x},Misc.Line.prototype.y1=function(){return this.p1().y},Misc.Line.prototype.y2=function(){return this.p2().y},Misc.Line.prototype.x2=function(){return this.p2().x},Misc.Line.prototype.length=function(){return Math.sqrt((this.p2().x-this.p1().x)*(this.p2().x-this.p1().x)+(this.p2().y-this.p1().y)*(this.p2().y-this.p1().y))},Misc.Size=function(t,e){t instanceof Misc.Size&&(e=t.height,t=t.width),this.width=0,this.height=0,void 0!==e&&(this.width=t,this.height=e)},Misc.Size.prototype.isValid=function(){return!(this.width<0||this.height<0)},Misc.Size.prototype.isEqual=function(t){return this.width==t.width&&this.height==t.height},Misc.Size.prototype.expandedTo=function(t){return new Misc.Size(Math.max(this.width,t.width),Math.max(this.height,t.height))},Misc.Size.prototype.toString=function(){return"["+this.width+", "+this.height+"]"},Misc.Point=function(t,e){this.x=0,this.y=0,void 0!==e&&(this.y=e),void 0!==t&&(this.x=t)},Misc.Point.prototype.interpolatedPoint=function(t,e){if(e==t.x)return t;if(e==this.x)return this;var i=(this.y-t.y)/(this.x-t.x)*(e-t.x)+t.y;return new Misc.Point(e,i)},Misc.Point.prototype.isEqual=function(t){return this.x===t.x&&this.y===t.y},Misc.Point.prototype.toString=function(){return"("+this.x+", "+this.y+")"},Misc.Rect=function(t,e,i,n){var s=0,a=0,r=-1,o=-1,l=-1,c=-1;void 0!==n?(r=(s=t)+(l=i),o=(a=e)+(c=n)):void 0!==i?(s=t.x,a=t.y,r=s+(l=e),o=a+(c=i)):void 0!==e&&(s=t.x,a=t.y,void 0!==e.x?(r=e.x,o=e.y,l=r-s,c=o-a):(l=e.width,c=e.height,r=s+l,o=a+c)),this.left=function(){return s},this.setLeft=function(t){s!==t&&(l=r-(s=t))},this.top=function(){return a},this.setTop=function(t){a!==t&&(c=o-(a=t))},this.right=function(){return r},this.setRight=function(t){r!==t&&(l=(r=t)-s)},this.bottom=function(){return o},this.setBottom=function(t){o!==t&&(c=(o=t)-a)},this.width=function(){return l},this.height=function(){return c}},Misc.Rect.prototype.setWidth=function(t){this.width()!==t&&this.setRight(this.left()+t)},Misc.Rect.prototype.setHeight=function(t){this.height()!==t&&this.setBottom(this.top()+t)},Misc.Rect.prototype.size=function(){return new Misc.Size(this.width(),this.height())},Misc.Rect.prototype.setSize=function(t){this.setWidth(t.width),this.setHeight(t.height)},Misc.Rect.prototype.setRect=function(t,e,i,n){this.setLeft(t),this.setTop(e),this.setWidth(i),this.setHeight(n)},Misc.Rect.prototype.united=function(t){return new Misc.Rect(Math.min(this.left(),t.left()),Math.min(this.top(),t.top()),Math.max(this.right(),t.right())-Math.min(this.left(),t.left()),Math.max(this.bottom(),t.bottom())-Math.min(this.top(),t.top()))},Misc.Rect.prototype.normalized=function(){var t=new Misc.Rect(this.left(),this.top(),this.width(),this.height());if(t.width()<0){var e=t.right();t.setRight(t.left()),t.setLeft(e)}if(this.height()<0){e=t.bottom();t.setBottom(t.top()),t.setTop(e)}return t},Misc.Rect.prototype.center=function(){return new Misc.Point(.5*(this.left()+this.right()),.5*(this.top()+this.bottom()))},Misc.Rect.prototype.moveTopLeft=function(t){var e=this.width(),i=this.height();this.setLeft(t.x),this.setTop(t.y),this.setRight(t.x+e),this.setBottom(t.y+i)},Misc.Rect.prototype.moveBottomRight=function(t){var e=this.width(),i=this.height();this.setRight(t.x),this.setBottom(t.y),this.setLeft(t.x-e),this.setTop(t.y-i)},Misc.Rect.prototype.moveCenter=function(t){var e=this.width(),i=this.height();this.setRight(t.x+.5*e),this.setBottom(t.y+.5*i),this.setLeft(t.x-.5*e),this.setTop(t.y-.5*i)},Misc.Rect.prototype.intersects=function(t){var e=Math.max(this.left(),t.left()),i=this.left()+this.width(),n=t.left()+t.width();if(Math.min(i,n)>e){var s=Math.max(this.top(),t.top()),a=this.top()+this.height(),r=t.top()+t.height();if(Math.min(a,r)>s)return!0}return!1},Misc.Rect.prototype.adjusted=function(t,e,i,n){var s=new Misc.Point(this.left()+t,this.top()+e),a=new Misc.Point(this.right()+i,this.bottom()+n);return new Misc.Rect(s,a)},Misc.Rect.prototype.contains=function(t,e){return void 0===e||!0===e?t.x>this.left()&&t.y>this.top()&&t.x<this.right()&&t.y<this.bottom():t.x>=this.left()&&t.y>=this.top()&&t.x<=this.right()&&t.y<=this.bottom()},Misc.Rect.prototype.isEqual=function(t){return this.left()==t.left()&&this.right()==t.right()&&this.top()==t.top()&&this.bottom()==t.bottom()},Misc.Rect.prototype.leftTop=function(){return new Misc.Point(this.left(),this.top())},Misc.Rect.prototype.topLeft=function(){return this.leftTop()},Misc.Rect.prototype.rightTop=function(){return new Misc.Point(this.right(),this.top())},Misc.Rect.prototype.leftBottom=function(){return new Misc.Point(this.left(),this.bottom())},Misc.Rect.prototype.rightBottom=function(){return new Misc.Point(this.right(),this.bottom())},Misc.Rect.prototype.bottomRight=function(){return this.rightBottom()},Misc.Rect.prototype.toString=function(){return"["+this.left()+", "+this.top()+", "+this.width()+", "+this.height()+"]"},Misc.Font=function(t,e,i,n,s){"object"==typeof t?(this.th=t.th,this.name=t.name,this.style=t.style,this.weight=t.weight,this.fontColor=t.fontColor):(this.th=12,this.name="Arial",this.style="normal",this.weight="normal",this.fontColor="black"),"object"!=typeof t&&(void 0!==s&&(this.fontColor=s),void 0!==n&&(this.weight=n),void 0!==i&&(this.style=i),void 0!==e&&(this.name=e),void 0!==t&&(this.th=t))},Misc.Font.prototype.textSize=function(t){if(""==t||void 0===t)return new Misc.Size(0,0);var e=$("<canvas />"),i=e[0].getContext("2d");i.font=this.weight+" "+this.style+" "+this.th+"px "+this.name;var n=1.16*i.measureText(t).width,s=i.measureText("M").width;return e.remove(),new Misc.Size(n,s)},Misc.Font.prototype.toString=function(){return"[th:"+this.th+", name:"+this.name+", style:"+this.style+", weight:"+this.weight+", color:"+this.fontColor+"]"},Misc.MPathElement=function(t,e,i){this.type=MoveToElement,this.x=0,this.y=0,void 0!==e&&(this.x=e),void 0!==i&&(this.y=i),void 0!==t&&(this.type=t)},Misc.MPathElement.prototype.toString=function(){return"[MPathElement: type("+this.type+"), point"+new Misc.Point(this.x,this.y)+"]"},Misc.MPath=function(){var t=[];this.data={},this.elements=function(){return t}},Misc.MPath.prototype.elementCount=function(){return this.elements().length},Misc.MPath.prototype.elementAt=function(t){return t<0||t>=this.elements().length?null:this.elements()[t]},Misc.MPath.prototype.moveTo=function(t,e){this.elements().push(new Misc.MPathElement(MoveToElement,t,e))},Misc.MPath.prototype.lineTo=function(t,e){this.elements().push(new Misc.MPathElement(LineToElement,t,e))},Misc.MPath.prototype.cubicTo=function(t,e,i,n,s,a){var r=this.elements();r.push(new Misc.MPathElement(CurveToElement,t,e)),r.push(new Misc.MPathElement(CurveToElement,i,n)),r.push(new Misc.MPathElement(CurveToElement,s,a))},Misc.MPath.prototype.toString=function(){return"[MPath: elementCount = "+this.elements().length+"]"},Misc.MPath.prototype.isEmpty=function(){return 0==this.elements().length},Misc.MPath.prototype.addRect=function(t){var e=this.elements();e.push(new Misc.MPathElement(MoveToElement,t.left(),t.top())),e.push(new Misc.MPathElement(LineToElement,t.right(),t.top())),e.push(new Misc.MPathElement(LineToElement,t.right(),t.bottom())),e.push(new Misc.MPathElement(LineToElement,t.left(),t.bottom())),e.push(new Misc.MPathElement(LineToElement,t.left(),t.top()))},Misc.MPath.prototype.addPolygon=function(t){if(t&&t.length){this.elements().push(new Misc.MPathElement(MoveToElement,t[0].x,t[0].y));for(var e=1;e<t.length;++e)this.elements().push(new Misc.MPathElement(LineToElement,t[e].x,t[e].y))}},Misc.MPath.prototype.boundingRect=function(){for(var t=0,e=0,i=0,n=0,s=!1,a=0;a<this.elements().length;a++){var r=this.elements()[a];switch(r.type){case LineToElement:case MoveToElement:case CurveToElement:s||(t=r.x,e=r.y,i=r.x,n=r.y,s=!0),t=Math.min(t,r.x),i=Math.max(i,r.x),e=Math.min(e,r.y),n=Math.max(n,r.y)}}return new Misc.Rect(t,e,i-t,n-e)},define("miscObjects",function(){}),function(t,e){"function"==typeof define&&define.amd?define("regression",e):"undefined"!=typeof module?module.exports=e():t.regression=e()}(this,function(){"use strict";function t(t,e){var i=t.reduce(function(t,e){return t+e[1]},0)/t.length,n=t.reduce(function(t,e){var n=e[1]-i;return t+n*n},0);return 1-t.reduce(function(t,i,n){var s=e[n],a=i[1]-s[1];return t+a*a},0)/n}function e(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i}var i={linear:function(i,n,s){for(var a,r,o,l=[0,0,0,0,0],c=i.length,u=0;u<c;u++)null!==i[u][1]&&(l[0]+=i[u][0],l[1]+=i[u][1],l[2]+=i[u][0]*i[u][0],l[3]+=i[u][0]*i[u][1],l[4]+=i[u][1]*i[u][1]);return r=(c*l[3]-l[0]*l[1])/(c*l[2]-l[0]*l[0]),o=l[1]/c-r*l[0]/c,{r2:t(i,a=i.map(function(t){var e=t[0];return[e,r*e+o]})),equation:[r,o],points:a,string:"y = "+e(r,s.precision)+"x + "+e(o,s.precision)}},linearthroughorigin:function(i,n,s){for(var a,r,o=[0,0],l=0;l<i.length;l++)null!==i[l][1]&&(o[0]+=i[l][0]*i[l][0],o[1]+=i[l][0]*i[l][1]);return a=o[1]/o[0],{r2:t(i,r=i.map(function(t){var e=t[0];return[e,a*e]})),equation:[a],points:r,string:"y = "+e(a,s.precision)+"x"}},exponential:function(i,n,s){for(var a,r,o,l,c=[0,0,0,0,0,0],u=0;u<i.length;u++)null!==i[u][1]&&(c[0]+=i[u][0],c[1]+=i[u][1],c[2]+=i[u][0]*i[u][0]*i[u][1],c[3]+=i[u][1]*Math.log(i[u][1]),c[4]+=i[u][0]*i[u][1]*Math.log(i[u][1]),c[5]+=i[u][0]*i[u][1]);return a=c[1]*c[2]-c[5]*c[5],r=Math.exp((c[2]*c[3]-c[5]*c[4])/a),o=(c[1]*c[4]-c[5]*c[3])/a,{r2:t(i,l=i.map(function(t){var e=t[0];return[e,r*Math.exp(o*e)]})),equation:[r,o],points:l,string:"y = "+e(r,s.precision)+"e^("+e(o,s.precision)+"x)"}},logarithmic:function(i,n,s){for(var a,r,o,l=[0,0,0,0],c=i.length,u=0;u<c;u++)null!==i[u][1]&&(l[0]+=Math.log(i[u][0]),l[1]+=i[u][1]*Math.log(i[u][0]),l[2]+=i[u][1],l[3]+=Math.pow(Math.log(i[u][0]),2));return r=(c*l[1]-l[2]*l[0])/(c*l[3]-l[0]*l[0]),a=(l[2]-r*l[0])/c,{r2:t(i,o=i.map(function(t){var e=t[0];return[e,a+r*Math.log(e)]})),equation:[a,r],points:o,string:"y = "+e(a,s.precision)+" + "+e(r,s.precision)+" ln(x)"}},power:function(i,n,s){for(var a,r,o,l=[0,0,0,0],c=i.length,u=0;u<c;u++)null!==i[u][1]&&(l[0]+=Math.log(i[u][0]),l[1]+=Math.log(i[u][1])*Math.log(i[u][0]),l[2]+=Math.log(i[u][1]),l[3]+=Math.pow(Math.log(i[u][0]),2));return r=(c*l[1]-l[2]*l[0])/(c*l[3]-l[0]*l[0]),a=Math.exp((l[2]-r*l[0])/c),{r2:t(i,o=i.map(function(t){var e=t[0];return[e,a*Math.pow(e,r)]})),equation:[a,r],points:o,string:"y = "+e(a,s.precision)+"x^"+e(r,s.precision)}},polynomial:function(i,n,s){var a,r,o,l,c,u,h,d,p=[],f=[],m=0,v=0,g=i.length;for(r=void 0===n?3:n+1,o=0;o<r;o++){for(c=0;c<g;c++)null!==i[c][1]&&(m+=Math.pow(i[c][0],o)*i[c][1]);for(p.push(m),m=0,a=[],l=0;l<r;l++){for(c=0;c<g;c++)null!==i[c][1]&&(v+=Math.pow(i[c][0],o+l));a.push(v),v=0}f.push(a)}for(f.push(p),h=function(t,e){var i=0,n=0,s=0,a=0,r=0,o=t.length-1,l=new Array(e);for(i=0;i<o;i++){for(a=i,n=i+1;n<o;n++)Math.abs(t[i][n])>Math.abs(t[i][a])&&(a=n);for(s=i;s<o+1;s++)r=t[s][i],t[s][i]=t[s][a],t[s][a]=r;for(n=i+1;n<o;n++)for(s=o;s>=i;s--)t[s][n]-=t[s][i]*t[i][n]/t[i][i]}for(n=o-1;n>=0;n--){for(r=0,s=n+1;s<o;s++)r+=t[s][n]*l[s];l[n]=(t[o][n]-r)/t[n][n]}return l}(f,r),u=i.map(function(t){var e=t[0],i=h.reduce(function(t,i,n){return t+i*Math.pow(e,n)},0);return[e,i]}),d="y = ",o=h.length-1;o>=0;o--)d+=o>1?e(h[o],s.precision)+"x^"+o+" + ":1===o?e(h[o],s.precision)+"x + ":e(h[o],s.precision);return{r2:t(i,u),equation:h,points:u,string:d}},lastvalue:function(i,n,s){for(var a=[],r=null,o=0;o<i.length;o++)null!==i[o][1]&&isFinite(i[o][1])?(r=i[o][1],a.push([i[o][0],i[o][1]])):a.push([i[o][0],r]);return{r2:t(i,a),equation:[r],points:a,string:""+e(r,s.precision)}}};return function(t,e,n,s){var a="object"==typeof n&&void 0===s?n:s||{};return a.precision||(a.precision=2),"string"==typeof t?i[t.toLowerCase()](e,n,a):null}});var Static={},Enum={MousePatternCode:{MouseSelect1:0,MouseSelect2:1,MouseSelect3:2,MouseSelect4:3,MouseSelect5:4,MouseSelect6:5,MousePatternCount:6},KeyPatternCode:{KeySelect1:0,KeySelect2:1,KeyAbort:2,KeyLeft:3,KeyRight:4,KeyUp:5,KeyDown:6,KeyRedo:7,KeyUndo:8,KeyHome:9,KeyPatternCount:10},ScaleComponent:{Backbone:1,Ticks:2,Labels:4},Format:{RGB:0,Indexed:1},Mode:{FixedColors:0,ScaledColors:1},FitMode:{Auto:0,Spline:1,ParametricSpline:2}};Static.makeAbstract=function(t,e){if(t.constructor==e)throw new Error("Abstract classes can't be instantiated.")},Static.qBound=function(t,e,i){return Math.max(t,Math.min(e,i))},Array.prototype.mid=function(t,e=-1){return-1==e?this.slice(t+1):(e=Math.max(e,0),this.slice(t,t+e))},String.prototype.insertAt=function(t,e,i){return this.slice(0,t)+i+this.slice(t+Math.abs(e))},String.prototype.replaceAt=function(t,e){return this.substr(0,t)+e+this.substr(t+e.length)},Array.prototype.resize=function(t,e){for(;t>this.length;)this.push(e)},Array.prototype.containsPoint=function(t){for(var e=0;e<this.length;++e)if(this[e].isEqual(t))return!0;return!1},Static.MagnifierEnabled=1,Static.ZoomEnabled=2,Static.PanEnabled=4,Static.Locked=8,Static.LeftButtonDown=16,Static.DragCursor=32,Static.PanningInProgress=64,Static.MagnifierSearch=128,Static.ZoomerSearch=256,Static.PannerSearch=512,Static.NoRuler=1024,Static.Left=0,Static.Right=1,Static.Bottom=2,Static.Top=3,Static.LeftAndRight=75776,Static.BottomAndTop=153088,Static.NoTrackingText=0,Static.FullTrackingText=1,Static.PartialTrackingText=2,Static.ReadOnly=0,Static.Clickable=1,Static.Checkable=2,Static.ModeRole=0,Static.TitleRole=1,Static.IconRole=2,Static.UserRole=32,Static.NoRubberBand=0,Static.HLineRubberBand=1,Static.VLineRubberBand=2,Static.CrossRubberBand=3,Static.RectRubberBand=4,Static.EllipseRubberBand=5,Static.PolygonRubberBand=6,Static.UserRubberBand=100,Static.NoSelection=-1,Static.PointSelection=0,Static.RectSelection=1,Static.PolygonSelection=2,Static.AlwaysOff=0,Static.AlwaysOn=1,Static.ActiveOnly=2,Static.NoPen="noPen",Static.NoBrush="noBrush",Static.accuracyBase=3e5,Static.accuracyMaxSteps=.5*Static.accuracyBase;var _eps=1e-6,NoTick=-1,MinorTick=0,MediumTick=1,MajorTick=2,NTickTypes=3,BottomScale=0,TopScale=1,LeftScale=2,RightScale=3,Horizontal=1,Vertical=2,ScaleInterest=1,IncludeBorders=0,ExcludeMinimum=1,ExcludeMaximum=2,ExcludeBorders=3,yLeft=0,yRight=1,xBottom=2,xTop=3,axisCnt=4,Legend=1,AutoScale=2,Margins=4,NoCurve=-1,Lines=0,Sticks=1,Steps=2,Dots=3,UserCurve=100,Inverted=1,Fitted=2,RoundPoints=1,WeedOutPoints=2,FilterPoints=1,MinimizeMemory=2,NoLine=0,NoSymbol=-1,Ellipse=0,MRect=2,Diamond=3,Triangle=4,DTriangle=5,UTriangle=6,LTriangle=7,RTriangle=8,Cross=9,XCross=10,HLine=11,VLine=12,Star1=13,Star2=14,Hexagon=15,Path=16,Pixmap=17,MGraphic=18,SvgDocument=19,UserStyle=1e3;function insertLogBase(t,e){var i=t;if(t.includes(e))for(var n=e.replace("log","");-1!==i.indexOf(e);)for(var s=i.indexOf(e)+e.length,a=0,r=0;s<i.length;++s)if("("==i[s]&&a++,")"==i[s]&&r++,a==r){i=(i=i.insertAt(s,0,","+n)).replace(e,"log");break}return i}function logBaseAdjust(t){for(var e=["log2","log3","log4","log5","log6","log7","log8","log9","log10"],i=0;i<e.length;i++)t=insertLogBase(t,e[i]);return t}function EvaluateExp(t){var e,i=t;this.error=!1;var n=this;function s(){try{e=math.parse(i),i.includes("log")||(e=math.simplify(e))}catch(t){Static.alert(t.message),n.error=!0}}void 0!==i&&(i=logBaseAdjust(i),s()),this.setExpString=function(t){i=t,s()},this.getExpString=function(){return i},this.eval=function(t){this.error=!1;try{return e.eval(t)}catch(t){return this.errorMessage=t.message,this.error=!0,0}}}Static.NoButton=-1,Static.LeftButton=0,Static.MiddleButton=1,Static.MidButton=1,Static.RightButton=2,Static.Key_Escape=27,Static.Key_Plus=107,Static.Key_Minus=109,Static.Key_Ctrl=17,Static.Key_Shift=16,Static.Key_Return=13,Static.Key_Space=32,Static.Key_Left=37,Static.Key_Right=39,Static.Key_Up=38,Static.Key_Down=40,Static.Key_Undo=90,Static.Key_Redo=89,Static.Key_Home=36,Static.Key_I=73,Static.Key_O=79,Static.Key_unknown=-1,Static.NoModifier=0,Static.ShiftModifier=33554432,Static.ControlModifier=67108864,Static.AltModifier=134217728,Static.AlignRight=1,Static.AlignLeft=2,Static.AlignBottom=4,Static.AlignTop=8,Static.AlignCenter=16,Static.adjustForDecimalPlaces=function(t,e){void 0==e&&(e=5);var i=Math.pow(10,e);return Math.round(t*i)/i},Static.mFuzzyCompare=function(t,e){return Math.abs(t-e)<_eps},Static.m3FuzzyCompare=function(t,e,i){var n=Math.abs(1e-6*i);return e-t>n?-1:t-e>n?1:0},Static.bind=function(t,e,i){$(window).on(t,e,i)},Static.unbind=function(t,e){$(window).off(t,e)},Static.trigger=function(t,e){$(window).trigger(t,e)},Static.invert=function(t){t=[].slice.call(arguments).join(",").replace(/rgb\(|\)|rgba\(|\)|\s/gi,"").split(",");for(var e=0;e<t.length;e++)t[e]=(3===e?1:255)-t[e];return"rgb("+t.join(", ")+")"},Static.RGB2HTML=function(t,e,i){if("string"==typeof t){var n=t;n=n.replace("rgb(",""),t=parseInt(n),n=(n=n.replace(",","")).replace(t,""),e=parseInt(n),n=(n=n.replace(",","")).replace(e,""),i=parseInt(n)}if(void 0!==t.r){var s=t;t=t.r,e=s.g,i=s.b}return"#"+(16777216+i+256*e+65536*t).toString(16).substr(1)},Static.HTMLToRGB=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},Static.mRgb=function(t,e,i){return{r:t,g:e,b:i}},Static.colorNameToHex=function(t){var e={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return"r"==t[0]&&"g"==t[1]&&"b"==t[2]?Static.RGB2HTML(t):"#"==t[0]?t:void 0!==e[t.toLowerCase()]?e[t.toLowerCase()]:"#000000"},Static.sqr=function(t){return Math.pow(t,2)},Static.setElementIndex=function(t,e){var i=$(t).parent().children(),n=i[e];$(t).index()>e?(null==n&&(n=i[0]),n!=t&&null!=n&&$(n).before(t)):(null==n&&(n=i[i.length-1]),n!=t&&null!=n&&$(n).after(t))},Static.elementsFromPoint=function(t,e,i){var n,s=i[0],a=[];do{(n=document.elementFromPoint(t,e))!==s?(a.push(n),n.style.pointerEvents="none"):n=!1}while(n);return a.forEach(function(t){return t.style.pointerEvents="all"}),$(a)},Static.stopkeyPressPropagation=function(t){t.keydown(function(t){t.stopPropagation()})},window.matchMedia("print").addListener(function(t){t.matches?Static.trigger("beforePrint"):Static.trigger("afterPrint")}),window.onbeforeprint=function(t){Static.trigger("beforePrint")},window.onafterprint=function(t){Static.trigger("afterPrint")},Static.Cancel=0,Static.No=1,Static.Yes=2,Static.alertDlg=function(){var t=$('<div class="modal fade" id="alert_Modal" role="dialog">    <div id="dlg" class="modal-dialog">      \x3c!-- Modal content--\x3e      <div class="modal-content">        <div class="modal-header">          <button type="button" class="close" data-dismiss="modal">&times;</button>          <h4 class="modal-title"><b>Alert</b></h4>        </div>        <div class="modal-body">          <p id="msg"></p>        </div>        <div id="alertDlgFooter1" class="modal-footer">          <button type="button" class="btn btn-default" data-dismiss="modal">Ok</button>        </div>        <div id="alertDlgFooter2" class="modal-footer">          <button id="yes" type="button" class="btn btn-default">Yes</button>          <button id="no" type="button" class="btn btn-default">No</button>          <button id="cancel" type="button" class="btn btn-default">Cancel</button>        </div>      </div>    </div>  </div>');$("body").append(t),t.css("z-index",1e9),this.alert=function(e,i){$("#alertDlgFooter2").hide(),$("#alertDlgFooter1").show(),$("#msg").text(e),"small"==i?$("#dlg").addClass("modal-sm"):$("#dlg").removeClass("modal-sm"),t.modal({backdrop:"static"})};var e=this;this.alertYesNo=function(e,i,n){$(".close").hide(),this.alertYesCb=i,$("#alertDlgFooter1").hide(),$("#alertDlgFooter2").show(),$("#msg").text(e),"small"==n?$("#dlg").addClass("modal-sm"):$("#dlg").removeClass("modal-sm"),t.modal({backdrop:"static"})},$("#yes").click(function(){$(".close").click(),e.alertYesCb(Static.Yes)}),$("#no").click(function(){$(".close").click(),e.alertYesCb(Static.No)}),$("#cancel").click(function(){$(".close").click(),e.alertYesCb(Static.Cancel)})},Static.alert=function(t,e){void 0==Static.alertObj&&(Static.alertObj=new Static.alertDlg),Static.alertObj.alert(t,e)},Static.alertYesNo=function(t,e,i){void 0==Static.alertObj&&(Static.alertObj=new Static.alertDlg),Static.alertObj.alertYesNo(t,e,i)},Static.promptDlg=function(){var t=$('<div class="modal fade" id="promptModal" role="dialog">    <div id="prompt_dlg" class="modal-dialog">      \x3c!-- Modal content--\x3e      <div class="modal-content">        <div class="modal-header">          <button type="button" class="close" data-dismiss="modal"></button>          <h4 class="modal-title" id="prompt_title">Alert</h4>        </div>        <div class="modal-body">          <input id="prompt_msg" style="width:100%" autofocus />        </div>        <div class="modal-footer">          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>          <button id="prompt_ok" type="button" class="btn btn-default">Ok</button>        </div>      </div>    </div>  </div>');$("body").append(t);var e=this;this.prompt=function(e,i,n,s){"small"==s&&$("#prompt_dlg").addClass("modal-sm"),$("#prompt_title").text(e),$("#prompt_msg").val(i),$("#prompt_msg").select(),this.cb=n,t.modal({backdrop:"static"})},$("#prompt_ok").on("click",function(){e.cb($("#prompt_msg").val())?$(".close").click():$("#prompt_msg").select()})},Static.prompt=function(t,e,i,n){void 0==Static.promptObj&&(Static.promptObj=new Static.promptDlg),Static.promptObj.prompt(t,e,i,n)},Static.isMobile=function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(navigator.userAgent||navigator.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent||navigator.vendor||window.opera).substr(0,4))};var keywords=["asinh","acosh","atanh","acoth","asech","acsch","asin","acos","atan","acot","asec","acsc","sinh","cosh","tanh","coth","sech","csch","sin","cos","tan","sec","csc","cot","log2","log3","log4","log5","log6","log7","log8","log9","log10","deg","pi","PI","e","E"];function purgeKewords(t){for(var e=0;e<keywords.length;++e)for(;-1!=t.indexOf(keywords[e]);)t=t.replace(keywords[e],"");return t}function findIndepVar(t){for(var e=0,i=purgeKewords(t);e<i.length;){for(var n=i.charAt(e),s="";-1!="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(n)&&e<i.length;)s+=n,++e,n=i.charAt(e);if(1===s.length)return s;++e}}function regress(t,e,i,n,s){"linear"==e&&n&&(e="linearthroughorigin");for(var a=t.data().samples(),r=[],o=0;o<a.length;++o)r.push([a[o].x,a[o].y]);return Static.regression(e,r,i,s)}function integrate(t,e,i,n,s){Static.total_area=0,Static.total_volume=0,n=n||!1;for(var a=e;a<i;a+=s){var r=a+s/2;r>i&&(s-=r-i);var o=t(a+s/2);n?Static.total_volume+=o*s*o*Math.PI:Static.total_area+=o*s}return n?Static.total_volume:Static.total_area}define("static",["regression"],function(t){Static.regression=t}),$("body").on("contextmenu",function(t){t.preventDefault()}),integrate.transform=function(t,e,i){if(!(t[1]instanceof e.expression.node.SymbolNode))throw new Error("Second argument must be a symbol");var n=t[1].name,s=t[2].compile().eval(i),a=t[3].compile().eval(i),r=t[4]&&t[4].compile().eval(i),o=t[5]&&t[5].compile().eval(i),l=Object.create(i),c=t[0].compile();return integrate(function(t){return l[n]=t,c.eval(l)},s,a,r,o)},integrate.transform.rawArgs=!0,math.import({integrate:integrate}),Static.isAlpha=function(t){return(t=t.toLowerCase().charCodeAt(0))>96&&t<122},Static.printFn=function(){window.print()},Static.calcStep=function(t){return(t.maxXValue()-t.minXValue())/Static.accuracyMaxSteps},Static.addCSS=function(t){var e=document.getElementsByTagName("head")[0],i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.href=t,i.media="all",e.appendChild(i)};class WatchCurveName extends Watch{constructor(){super(),this.name=function(){return"Curve name"},this.computeWatch=function(){this._value=this._curveName}}}class WatchLeftRulerPosition extends Watch{constructor(t){super(t,Static.Left);var e=this;this.name=function(){return"Left ruler position"},this.valueType="number",this.computeWatch=function(){this._rulerLeft==Number.MAX_VALUE?this._value="Invalid":this._value=this._rulerLeft},this.cb=function(){var t=e._value,i=e._rulerGroup.setPosition(0,$(this).val());t!==i?Static.trigger("positionChanged",[e._rulerGroup.ruler(0),i]):$(this).val(i)}}}class WatchRightRulerPosition extends Watch{constructor(t){super(t,Static.Right);var e=this;this.name=function(){return"Right ruler position"},this.valueType="number",this.computeWatch=function(){this._rulerLeft==Number.MAX_VALUE?this._value="Invalid":this._value=this._rulerRight},this.cb=function(){var t=e._value,i=e._rulerGroup.setPosition(1,$(this).val());t!==i?Static.trigger("positionChanged",[e._rulerGroup.ruler(1),i]):$(this).val(i)}}}class WatchBottomRulerPosition extends Watch{constructor(t){super(t,Static.Bottom);var e=this;this.valueType="number",this.name=function(){return"Bottom ruler position"},this.computeWatch=function(){this._rulerBottom==Number.MAX_VALUE?this._value="Invalid":this._value=this._rulerBottom},this.cb=function(){var t=e._value,i=e._rulerGroup.setPosition(2,$(this).val());t!==i?Static.trigger("positionChanged",[e._rulerGroup.ruler(2),i]):$(this).val(i)}}}class WatchTopRulerPosition extends Watch{constructor(t){super(t,Static.Top);var e=this;this.valueType="number",this.name=function(){return"Top ruler position"},this.computeWatch=function(){this._rulerTop==Number.MAX_VALUE?this._value="Invalid":this._value=this._rulerTop},this.cb=function(){var t=e._value,i=e._rulerGroup.setPosition(3,$(this).val());t!==i?Static.trigger("positionChanged",[e._rulerGroup.ruler(3),i]):$(this).val(i)}}}class WatchSlope extends Watch{constructor(){super(Static.Left),this.name=function(){return"Slope at left ruler"},this.computeWatch=function(){if(this._rulerLeft!=Number.MAX_VALUE&&isFinite(this._rulerLeft)){if(this._curve.fn&&!this._curve.fn.includes("log")){var t=this._curve.fn;if("z"!=this._curve.variable)for(;-1!=t.indexOf(this._curve.variable);)t=t.replace(this._curve.variable,"z");if(this._curve.coeffs)for(var e=0;e<this._curve.coeffs.length;++e)for(;-1!=t.indexOf(this._curve.coeffs[e]);)t=t.replace(this._curve.coeffs[e],this._curve.coeffsVal[e]);var i=Math.max(this._curve.plot().axisDecimalPlaces(this._curve.yAxis()),this._curve.plot().axisDecimalPlaces(this._curve.xAxis()));return this._value=math.derivative(t,"z").eval({z:this._rulerLeft}),this._value=Static.adjustForDecimalPlaces(this._value,i),void((this._value>1e4||this._value<-1e4)&&(this._value=this._value.toExponential(i)))}var n=this._curve.dataSize(),s=this._rulerLeft;for(i=Math.max(this._curve.plot().axisDecimalPlaces(this._curve.yAxis()),this._curve.plot().axisDecimalPlaces(this._curve.xAxis())),e=0;e<n;++e)if(this._curve.sample(e).x>s){var a=this._curve.sample(e),r=this._curve.sample(e-1);return this._value=(a.y-r.y)/(a.x-r.x),this._value=Static.adjustForDecimalPlaces(this._value,i),void((this._value>1e4||this._value<-1e4)&&(this._value=this._value.toExponential(i)))}}else this._value="Invalid"}}}class WatchAreaBelowCurve extends Watch{constructor(){super(Static.LeftAndRight),this.name=function(){return"Area below curve"},this.computeWatch=function(){if(this._rulerLeft!=Number.MAX_VALUE&&isFinite(this._rulerLeft)&&this._rulerRight!=Number.MAX_VALUE&&isFinite(this._rulerRight)){if(this._curve.fn){if(u=logBaseAdjust(u=this._curve.fn),"z"!=this._curve.variable)for(;-1!=u.indexOf(this._curve.variable);)u=u.replace(this._curve.variable,"z");if(this._curve.coeffs)for(var t=0;t<this._curve.coeffs.length;++t)for(;-1!=u.indexOf(this._curve.coeffs[t]);)u=u.replace(this._curve.coeffs[t],this._curve.coeffsVal[t]);var e=Math.max(this._curve.plot().axisDecimalPlaces(this._curve.yAxis()),this._curve.plot().axisDecimalPlaces(this._curve.xAxis())),i=Static.calcStep(this._curve);this._value=math.eval("integrate("+u+", z,"+this._rulerLeft+","+this._rulerRight+",false,"+i+")");var n=math.eval("integrate((("+u+")*("+u+")), z,"+this._rulerLeft+","+this._rulerRight+",false,"+i+")");console.log(n);var s=math.eval("integrate(z * ("+u+"), z,"+this._rulerLeft+","+this._rulerRight+",false,"+i+")");this._value=Static.adjustForDecimalPlaces(this._value,e),(this._value>1e4||this._value<-1e4)&&(this._value=this._value.toExponential(e));var a=Static.adjustForDecimalPlaces(n/(2*this._value),e),r=Static.adjustForDecimalPlaces(s/this._value,e);return void console.log("("+r+", "+a+")")}var o=this._curve.dataSize();this._value=0;for(n=0,s=0,t=1;t<o;++t){var l=this._curve.sample(t),c=this._curve.sample(t-1),u=Utility.linearEquationFromPoints(c,l),h=c.x;if(!(l.x<this._rulerLeft)&&!(c.x>this._rulerRight)){h<this._rulerLeft&&(h=this._rulerLeft);var d=l.x;d>this._rulerRight&&(d=this._rulerRight);e=Math.max(this._curve.plot().axisDecimalPlaces(this._curve.yAxis()),this._curve.plot().axisDecimalPlaces(this._curve.xAxis())),i=Static.calcStep(this._curve);this._value+=math.eval("integrate("+u+", x,"+h+","+d+",false,"+i+")"),n+=math.eval("integrate((("+u+")*("+u+")), x,"+h+","+d+",false,"+i+")"),s+=math.eval("integrate(x * ("+u+"), x,"+h+","+d+",false,"+i+")"),this._value=Static.adjustForDecimalPlaces(this._value,e),(this._value>1e4||this._value<-1e4)&&(this._value=this._value.toExponential(e))}}a=Static.adjustForDecimalPlaces(n/(2*this._value),e),r=Static.adjustForDecimalPlaces(s/this._value,e);console.log("("+r+", "+a+")")}else this._value="Invalid"}}}class WatchVolumeOfRevolution extends Watch{constructor(){function t(t,e,i){var n=t*i*Math.PI*t;return n+=.5*(e-t)*i*(t+(e-t)/3)*2*Math.PI}super(Static.LeftAndRight),this.name=function(){return"Volume of revolution"},this.computeWatch=function(){if(this._rulerLeft!=Number.MAX_VALUE&&isFinite(this._rulerLeft)){if(this._curve.fn){var e=this._curve.fn;if(e=logBaseAdjust(e),"x"!=this._curve.variable)for(;-1!=e.indexOf(this._curve.variable);)e=e.replace(this._curve.variable,"x");if(this._curve.coeffs)for(var i=0;i<this._curve.coeffs.length;++i)for(;-1!=e.indexOf(this._curve.coeffs[i]);)e=e.replace(this._curve.coeffs[i],this._curve.coeffsVal[i]);var n=Math.max(this._curve.plot().axisDecimalPlaces(this._curve.yAxis()),this._curve.plot().axisDecimalPlaces(this._curve.xAxis())),s=Static.calcStep(this._curve);return this._value=math.eval("integrate("+e+", x,"+this._rulerLeft+","+this._rulerRight+",true,"+s+")"),this._value=Static.adjustForDecimalPlaces(this._value,n),void((this._value>1e4||this._value<-1e4)&&(this._value=this._value.toExponential(n)))}var a=this._curve.dataSize(),r=this._rulerLeft,o=this._rulerRight,l=0,c=0,u=0;for(i=1;i<a;++i){var h=this._curve.sample(i),d=this._curve.sample(i-1);if(!l&&h.x>r&&h.x<=o)l=t(d.y+(h.y-d.y)*(r-d.x)/(h.x-d.x),h.y,h.x-r);else if(l&&h.x<=o)u+=t(h.y,d.y,h.x-d.x);else if(h.x>o){if(d.x>=r){c=t(h.y+(h.y-d.y)*(o-h.x)/(h.x-d.x),d.y,o-d.x);break}c=t(h.y+(h.y-d.y)*(o-h.x)/(h.x-d.x),d.y+(h.y-d.y)*(r-d.x)/(h.x-d.x),o-r);break}}n=Math.max(this._curve.plot().axisDecimalPlaces(this._curve.yAxis()),this._curve.plot().axisDecimalPlaces(this._curve.xAxis()));this._value=Static.adjustForDecimalPlaces(l+u+c,n),(this._value>1e4||this._value<-1e4)&&(this._value=this._value.toExponential(n))}else this._value="Invalid"}}}define("basicWatch",["static","watch"],function(){}),function(t,e,i,n){"use strict";var s;t.single=(s=t({}),function(t){return s[0]=t,s}),t.fn.contextMenu=function(e,i,n){a[e]?i&&(i instanceof Array||"string"==typeof i||i.nodeType||i.jquery||(n=i,i=null)):(n=i,i=e,e="popup"),i instanceof Array&&"update"!=e&&(e="menu");var s=n;return t.inArray(e,["menu","popup","close","destroy"])>-1?(n=r.optionOtimizer(e,n),this.each(function(){var r=t(this);(s=t.extend({},t.fn.contextMenu.defaults,n)).baseTrigger||(s.baseTrigger=r),a[e].call(r,i,s)})):a[e].call(this,i,s),this},t.fn.contextMenu.defaults={triggerOn:"click",subMenuTriggerOn:"hover click",displayAround:"cursor",mouseClick:"left",verAdjust:0,horAdjust:0,top:"auto",left:"auto",closeOther:!0,containment:e,winEventClose:!0,position:"auto",closeOnClick:!0,onOpen:function(t,e){},afterOpen:function(t,e){},onClose:function(t,e){}};var a={menu:function(t,e){t=r.createMenuList(this,t,e),r.contextMenuBind.call(this,t,e,"menu")},popup:function(e,i){t(e).addClass("iw-contextMenu"),r.contextMenuBind.call(this,e,i,"popup")},update:function(e,i){var n=this;i=i||{},this.each(function(){var s=t(this),a=s.data("iw-menuData");a||(n.contextMenu("refresh"),a=s.data("iw-menuData"));var o=a.menu;if("object"==typeof e)for(var l=0;l<e.length;l++){var c=e[l].name,u=e[l].disable,h=e[l].fun,d=e[l].icon,p=e[l].img,f=e[l].title,m=e[l].className,v=o.children("li").filter(function(){return t(this).contents().filter(function(){return 3==this.nodeType}).text()==c}),g=e[l].subMenu;void 0!=u&&(u?v.addClass("iw-mDisable"):v.removeClass("iw-mDisable")),h&&v.unbind("click.contextMenu").bind("click.contextMenu",h),void 0!=f&&v.attr("title",f),void 0!=m&&v.attr("class",m);var b=v.find(".iw-mIcon");b.length&&b.remove(),p?v.prepend('<img src="'+p+'" align="absmiddle" class="iw-mIcon" />'):d&&v.prepend('<span align="absmiddle" class="iw-mIcon '+d+'" />'),g&&v.contextMenu("update",g)}r.onOff(o);var y=i.triggerOn;if(y){s.unbind(".contextMenu");for(var S=[],x=(l=0,(y=y.split(" ")).length);l<x;l++)S.push(y[l]+".contextMenu");s.bind(S.join(" "),r.eventHandler)}a.option=t.extend({},a.option,i),s.data("iw-menuData",a)})},refresh:function(){var e=this.filter(function(){return!!t(this).data("iw-menuData")}).data("iw-menuData"),i=this.filter(function(){return!t(this).data("iw-menuData")});e.option.baseTrigger=this,r.contextMenuBind.call(i,e.menuSelector,e.option)},open:function(e,i){var n=(i=i||{}).event||t.Event("click");i.top&&(n.clientY=i.top),i.left&&(n.clientX=i.left),this.each(function(){r.eventHandler.call(this,n)})},close:function(){var t=this.data("iw-menuData");t&&r.closeContextMenu(t.option,this,t.menu,null)},value:function(t){var e=this.data("iw-menuData");return e[t]?e[t]:e.option?e.option[t]:null},destroy:function(){var e=this.data("iw-menuData").menuId,i=t(".iw-contextMenu[menuId="+e+"]"),n=i.data("iw-menuData");n&&(1==n.noTrigger?i.hasClass("iw-created")?i.remove():(i.removeClass("iw-contextMenu "+e).removeAttr("menuId").removeData("iw-menuData"),i.find("li.iw-mTrigger").contextMenu("destroy")):(n.noTrigger--,i.data("iw-menuData",n)),this.unbind(".contextMenu").removeClass("iw-mTrigger").removeData("iw-menuData"))}},r={contextMenuBind:function(e,i,n){var s=this,a=t(e),o=a.data("iw-menuData");if(0!=a.length||0!=(a=s.find(e)).length){"menu"==n&&r.menuHover(a);var l=i.baseTrigger;if(o)o.noTrigger++,a.data("iw-menuData",o);else{var c;l.data("iw-menuData")?c=l.data("iw-menuData").menuId:(c=Math.ceil(1e5*Math.random()),l.data("iw-menuData",{menuId:c}));var u=a.clone();u.appendTo("body"),o={menuId:c,menuWidth:u.outerWidth(!0),menuHeight:u.outerHeight(!0),noTrigger:1,trigger:s},a.data("iw-menuData",o).attr("menuId",c),u.remove()}s.addClass("iw-mTrigger").data("iw-menuData",{menuId:o.menuId,option:i,menu:a,menuSelector:e,method:n});var h=i.triggerOn;-1!=h.indexOf("hover")&&(h=h.replace("hover","mouseenter"),-1!=l.index(s)&&l.add(a).bind("mouseleave.contextMenu",function(e){0==t(e.relatedTarget).closest(".iw-contextMenu").length&&t('.iw-contextMenu[menuId="'+o.menuId+'"]').fadeOut(100)})),s.delegate("input,a,.needs-click","click",function(t){t.stopImmediatePropagation()});for(var d=[],p=0,f=(h=h.split(" ")).length;p<f;p++)d.push(h[p]+".contextMenu");s.bind(d.join(" "),r.eventHandler),a.bind("click mouseenter",function(t){t.stopPropagation()}),a.delegate("li","click",function(e){i.closeOnClick&&!t.single(this).hasClass("iw-has-submenu")&&r.closeContextMenu(i,s,a,e)})}},eventHandler:function(n){n.preventDefault();var s=t(this),a=s.data("iw-menuData"),o=a.menu,l=o.data("iw-menuData"),c=a.option,u=c.containment,h={trigger:s,menu:o},d=u==e,p=-1==c.baseTrigger.index(s);!p&&c.closeOther&&t(".iw-contextMenu").css("display","none"),o.find(".iw-mSelected").removeClass("iw-mSelected"),c.onOpen.call(this,h,n);var f,m,v,g,b=t(u),y=b.innerHeight(),S=b.innerWidth(),x=0,w=0,P=l.menuHeight,M=l.menuWidth,k=0,C=0,A=f=parseInt(c.verAdjust),_=m=parseInt(c.horAdjust);if(d||(x=b.offset().top,w=b.offset().left,"static"==b.css("position")&&b.css("position","relative")),"cursor"==c.displayAround)g=(k=d?n.clientX:n.clientX+t(e).scrollLeft()-w)+M,(v=(C=d?n.clientY:n.clientY+t(e).scrollTop()-x)+P)>y&&(C-P<0?v-y<P-C?(C=y-P,f*=-1):(C=0,f=0):(C-=P,f*=-1)),g>S&&(k-M<0?g-S<M-k?(k=S-M,m*=-1):(k=0,m=0):(k-=M,m*=-1));else if("trigger"==c.displayAround){var T=s.outerHeight(!0),L=s.outerWidth(!0),R=d?s.offset().left-b.scrollLeft():s.offset().left-w,E=d?s.offset().top-b.scrollTop():s.offset().top-x,D=L;g=(k=R+L)+M,(v=(C=E)+P)>y&&(C-P<0?v-y<P-C?(C=y-P,f*=-1):(C=0,f=0):(C=C-P+T,f*=-1)),g>S&&(k-M<0?g-S<M-k?(k=S-M,m*=-1,D=-L):(k=0,m=0,D=0):(k=k-M-L,m*=-1,D=-L)),"top"==c.position?(C=E-P,f=A,k-=D):"left"==c.position?(k=R-M,m=_):"bottom"==c.position?(C=E+T,f=A,k-=D):"right"==c.position&&(k=R+L,m=_)}var I={position:d||p?"fixed":"absolute",display:"inline-block",height:"",width:""};if("auto"!=c.left&&(k=r.getPxSize(c.left,S)),"auto"!=c.top&&(C=r.getPxSize(c.top,y)),!d){var B=s.offsetParent().offset();p?(k=k+w-t(e).scrollLeft(),C=C+x-t(e).scrollTop()):(k-=w-B.left,C-=x-B.top)}I.left=k+m+"px",I.top=C+f+"px",o.css(I),c.afterOpen.call(this,h,n),0==s.closest(".iw-contextMenu").length&&(t(".iw-curMenu").removeClass("iw-curMenu"),o.addClass("iw-curMenu"));var F={trigger:s,menu:o,option:c,method:a.method};t("html").unbind("click",r.clickEvent).click(F,r.clickEvent),t(i).unbind("keydown",r.keyEvent).keydown(F,r.keyEvent),c.winEventClose&&t(e).bind("scroll resize",F,r.scrollEvent)},scrollEvent:function(t){r.closeContextMenu(t.data.option,t.data.trigger,t.data.menu,t)},clickEvent:function(e){e.data.trigger.get(0)!==e.target&&0==t(e.target).closest(".iw-contextMenu").length&&r.closeContextMenu(e.data.option,e.data.trigger,e.data.menu,e)},keyEvent:function(e){e.preventDefault();var i=e.data.menu,n=e.data.option,s=e.keyCode;if(27==s&&r.closeContextMenu(n,e.data.trigger,i,e),"menu"==e.data.method){var a=t(".iw-curMenu"),o=a.children("li:not(.iw-mDisable)"),l=o.filter(".iw-mSelected"),c=o.index(l),u=function(t){r.selectMenu(a,t),t.data("iw-menuData")&&r.eventHandler.call(t[0],e)},h=function(){u(o.filter(":first"))},d=function(){u(o.filter(":last"))};switch(s){case 13:l.click();break;case 40:c==o.length-1||0==l.length?h():u(o.filter(":eq("+(c+1)+")"));break;case 38:0==c||0==l.length?d():u(o.filter(":eq("+(c-1)+")"));break;case 33:h();break;case 34:d();break;case 37:!function(){var t=a.data("iw-menuData").trigger.closest(".iw-contextMenu");0!=t.length&&(a.removeClass("iw-curMenu").css("display","none"),t.addClass("iw-curMenu"))}();break;case 39:!function(){var t=l.data("iw-menuData");if(t){r.eventHandler.call(l[0],e);var i=t.menu;i.addClass("iw-curMenu"),a.removeClass("iw-curMenu"),o=(a=i).children("li:not(.iw-mDisable)"),l=o.filter(".iw-mSelected"),h()}}()}}},closeContextMenu:function(n,s,a,o){t(i).unbind("keydown",r.keyEvent),t("html").unbind("click",r.clickEvent),t(e).unbind("scroll resize",r.scrollEvent),t(".iw-contextMenu").css("display","none"),t(i).focus(),n.onClose.call(this,{trigger:s,menu:a},o)},getPxSize:function(t,e){return isNaN(t)?-1!=t.indexOf("%")?parseInt(t)*e/100:parseInt(t):t},selectMenu:function(t,e){var i=t.find("li.iw-mSelected"),n=i.find(".iw-contextMenu");0!=n.length&&i[0]!=e[0]&&n.fadeOut(100),i.removeClass("iw-mSelected"),e.addClass("iw-mSelected")},menuHover:function(e){Date.now();e.children("li").bind("mouseenter.contextMenu click.contextMenu",function(i){t(".iw-curMenu").removeClass("iw-curMenu"),e.addClass("iw-curMenu"),r.selectMenu(e,t(this))})},createMenuList:function(i,n,s){var a=s.baseTrigger,o=Math.floor(1e4*Math.random());if("object"==typeof n&&!n.nodeType&&!n.jquery){var l=t('<ul class="iw-contextMenu iw-created iw-cm-menu" id="iw-contextMenu'+o+'"></ul>'),c=s.zIndex||i.css("zIndex");if(l.css("zIndex",c),t.each(n,function(e,i){var n=i.name,o=i.fun||function(){},c=i.subMenu,u=i.img||"",h=i.icon||"",d=i.title||"",p=i.className||"",f=i.disable,m=t('<li title="'+d+'" class="'+p+'">'+n+"</li>");u?m.prepend('<img src="'+u+'" align="absmiddle" class="iw-mIcon" />'):h&&m.prepend('<span align="absmiddle" class="iw-mIcon '+h+'" />'),f&&m.addClass("iw-mDisable"),c||m.bind("click.contextMenu",function(t){o.call(this,{trigger:a,menu:l},t)}),l.append(m),c&&(m.addClass("iw-has-submenu").append('<div class="iw-cm-arrow-right" />'),r.subMenu(m,c,a,s))}),-1==a.index(i[0]))i.append(l);else{var u=s.containment==e?"body":s.containment;t(u).append(l)}return r.onOff(t("#iw-contextMenu"+o)),"#iw-contextMenu"+o}if(0!=t(n).length){var h=t(n);return h.removeClass("iw-contextMenuCurrent").addClass("iw-contextMenu iw-cm-menu iw-contextMenu"+o).attr("menuId","iw-contextMenu"+o).css("display","none"),h.find("ul").each(function(e,i){var n=t(this),o=n.parent("li");o.append('<div class="iw-cm-arrow-right" />'),n.addClass("iw-contextMenuCurrent"),r.subMenu(o,".iw-contextMenuCurrent",a,s)}),r.onOff(t(".iw-contextMenu"+o)),".iw-contextMenu"+o}},subMenu:function(t,e,i,n){t.contextMenu("menu",e,{triggerOn:n.subMenuTriggerOn,displayAround:"trigger",position:"auto",mouseClick:"left",baseTrigger:i,containment:n.containment})},onOff:function(e){e.find(".iw-mOverlay").remove(),e.find(".iw-mDisable").each(function(){var e=t(this);e.append('<div class="iw-mOverlay"/>'),e.find(".iw-mOverlay").bind("click mouseenter",function(t){t.stopPropagation()})})},optionOtimizer:function(e,i){if(i)return"menu"==e&&(i.mouseClick||(i.mouseClick="right")),"right"==i.mouseClick&&"click"==i.triggerOn&&(i.triggerOn="contextmenu"),-1!=t.inArray(i.triggerOn,["hover","mouseenter","mouseover","mouseleave","mouseout","focusin","focusout"])&&(i.displayAround="trigger"),i}}}(jQuery,window,document),define("contextMenu",function(){});class LegendMenu{constructor(t){var e=null,i=null,n=[{name:"style",subMenu:[{name:"Rectangle",fun:function(){Utility.addSymbol(i,MRect)}},{name:"Cross",fun:function(){Utility.addSymbol(i,Cross)}},{name:"Diamond",fun:function(){Utility.addSymbol(i,Diamond)}},{name:"Ellipse",fun:function(){Utility.addSymbol(i,Ellipse)}},{name:"Diagonal cross",fun:function(){Utility.addSymbol(i,XCross)}},{name:"None",fun:function(){i&&i.setSymbol(null)}}]}],s=[{name:"style",subMenu:[{name:"Rectangle",fun:function(){Utility.addSymbol(i,MRect)}},{name:"Cross",fun:function(){Utility.addSymbol(i,Cross)}},{name:"Diamond",fun:function(){Utility.addSymbol(i,Diamond)}},{name:"Ellipse",fun:function(){Utility.addSymbol(i,Ellipse)}},{name:"Diagonal cross",fun:function(){Utility.addSymbol(i,XCross)}},{name:"None",fun:function(){i&&Utility.addSymbol(i,NoSymbol)}}]},{name:"size",subMenu:[{name:"5x5",fun:function(){Utility.setSymbolSize(i,5)}},{name:"6x6",fun:function(){Utility.setSymbolSize(i,6)}},{name:"8x8",fun:function(){Utility.setSymbolSize(i,8)}},{name:"10x10",fun:function(){Utility.setSymbolSize(i,10)}},{name:"12x12",fun:function(){Utility.setSymbolSize(i,12)}},{name:"15x15",fun:function(){Utility.setSymbolSize(i,15)}}]},{name:"fill brush",fun:function(){var e=$('<input type="color" style="opacity:0;">'),n=i;if(n){var s=n.symbol();if(s){var a=s.brush(),r=a.color;"noBrush"==r&&(r="#000000"),e.val(Static.colorNameToHex(r)),e.change(function(){$(this).remove(),a.color=$(this).val(),s.setBrush(a),t.autoRefresh(),t.updateLegend(n),Static.trigger("symbolAttributeChanged",n)}),e.trigger("click")}}}},{name:"pen",subMenu:[{name:"color",fun:function(){var e=$('<input type="color" style="opacity:0;">'),n=i;if(n){var s=n.symbol();s&&(e.val(Static.colorNameToHex(s.pen().color)),e.change(function(){var e=s.pen();e.color=$(this).val(),s.setPen(e),t.autoRefresh(),t.updateLegend(n),Static.trigger("symbolAttributeChanged",n)}),e.trigger("click"))}}},{name:"pen width",subMenu:[{name:"1",fun:function(){Utility.setSymbolPenWidth(i,1)}},{name:"2",fun:function(){Utility.setSymbolPenWidth(i,2)}},{name:"3",fun:function(){Utility.setSymbolPenWidth(i,3)}},{name:"4",fun:function(){Utility.setSymbolPenWidth(i,4)}},{name:"5",fun:function(){Utility.setSymbolPenWidth(i,5)}}]}]}],a=[{pos:0,name:"curve brush",img:"images/brush.png",title:"Set the fill color.",fun:function(){Utility.setCurveBrush(i,function(t){Static.trigger("curveBrushChanged",t)})}},{pos:4,name:"remove",img:"images/scissors.png",title:"Removes the curve from the plot.",fun:function(){i&&i.detach()}},{pos:5,name:"rename",img:"images/rename.png",title:"Renames the curve.",fun:function(){var t=i;t&&Utility.curveRenameDlg(t.title(),t.plot())}},{pos:7,name:"symbol",img:"images/symbol.png",title:"attach/modify curve symbol",subMenu:null},{pos:8,name:"pen",img:"images/pen.png",title:"modify/change curve pen",subMenu:[{name:"color",fun:function(){var t=$('<input type="color" style="opacity:0;">'),e=i;e&&(t.val(Static.colorNameToHex(e.pen().color)),t.change(function(){var t=e.pen();t.color=$(this).val(),e.setPen(t),Static.trigger("penAttributeChanged",e)}),t.trigger("click"))}},{name:"line style",subMenu:[{name:"solid",fun:function(){var t=i;if(t){var e=t.pen();e.style="solid",t.setPen(e),Static.trigger("penAttributeChanged",t)}}},{name:"dot",fun:function(){var t=i;if(t){var e=t.pen();e.style="dot",t.setPen(e),Static.trigger("penAttributeChanged",t)}}},{name:"dash",fun:function(){var t=i;if(t){var e=t.pen();e.style="dash",t.setPen(e),Static.trigger("penAttributeChanged",t)}}},{name:"dashDot",fun:function(){var t=i;if(t){var e=t.pen();e.style="dashDot",t.setPen(e),Static.trigger("penAttributeChanged",t)}}},{name:"dashDotDot",fun:function(){var t=i;if(t){var e=t.pen();e.style="dashDotDot",t.setPen(e),Static.trigger("penAttributeChanged",t)}}}]},{name:"pen width",subMenu:[{name:"1",fun:function(){var t=i;if(t){var e=t.pen();e.width=1,t.setPen(e),Static.trigger("penAttributeChanged",t)}}},{name:"2",fun:function(){var t=i;if(t){var e=t.pen();e.width=2,t.setPen(e),Static.trigger("penAttributeChanged",t)}}},{name:"3",fun:function(){var t=i;if(t){var e=t.pen();e.width=3,t.setPen(e),Static.trigger("penAttributeChanged",t)}}},{name:"4",fun:function(){var t=i;if(t){var e=t.pen();e.width=4,t.setPen(e),Static.trigger("penAttributeChanged",t)}}},{name:"5",fun:function(){var t=i;if(t){var e=t.pen();e.width=5,t.setPen(e),Static.trigger("penAttributeChanged",t)}}}]}]}];this.getCurve=function(){return i};var r=function(){};this.setMenuModificationCb=function(t){r=t};var o=function(){var o="";function l(t){return t.name==o}$(t.getLayout().getLegendDiv().children()[0]).mousedown(function(c){if(2==c.button){for(var u=c.pageX,h=c.pageY,d=[],p=document.elementFromPoint(u,h);p&&"BODY"!=p.tagName&&"HTML"!=p.tagName;)d.push(p),p.style.display="none",p=document.elementFromPoint(u,h);for(var f=0;f<d.length;f++)d[f].style.display="";var m=null;for(f=0;f<d.length;f++)if("LABEL"===d[f].tagName){m=d[f];break}e&&void 0!==e.menuAppended&&e.menuAppended&&e.contextMenu("destroy"),(e=$(m).parent()).menuAppended=!0;var v=i=function(){if(void 0==e)return null;var i=e.text().replace(" ","");return t.findPlotCurve(i)}();if(v){r();var g=(o="symbol",a.findIndex(l));g>-1&&(a[g].subMenu=n,v&&v.symbol()&&(a[g].subMenu=s)),e.contextMenu(a,{triggerOn:"contextmenu touchstart",zIndex:1})}}})};function l(){a=a.sort(function(t,e){return t.pos-e.pos})}this.modifyMenu=function(t,e){if(null!=t){var i,n=-1,s=_.find(a,function(e,i){return n=i,e.name==t});if(void 0!=s)if(_.isEmpty(e))(i=n)>-1&&a.splice(i,1);else s.pos=e.pos||s.pos,s.name=e.name||s.name,s.img=e.img||s.img,s.title=e.title||s.title,s.fun=e.fun||s.fun,a=l()}else{_.isArray(e)?function(t){for(var e=0;e<t.length;++e)void 0===_.find(a,function(i){return i.name==t[e].name})?a.push(t[e]):console.warn('Multiple menu items with name "'+t[e].name+'"')}(e):void 0==_.find(a,function(t){return t.name==e.name})&&a.push(e),l()}},t.legend()?o():Static.bind("legendInserted",function(){o(),Static.unbind("legendInserted")})}}define("legendMenu",["static","contextMenu"],function(){});class HObject{constructor(t){let e=this,i=!1,n=$("body");this.m_objectName="jObject",this.m_mouseTracking=!0,this.m_filterObjs=[],void 0!==t&&(n=t&&t instanceof HObject?t.getElement():t);let s="click",a="mousedown",r="mouseup",o="mousemove";Static.isMobile()&&(s="tap",a="touchstart",r="touchend",o="touchmove"),this.mapToElement=function(t){if(!n)return;let e=new Misc.Point,i=n[0].getBoundingClientRect();return e.x=t.x-i.left,e.y=t.y-i.top,e},this.setElement=function(t){n=t},this.getElement=function(){return n},this.setEnabled_1=function(t){i!=t&&(i=t,this.elementEvent(i),i&&Static.trigger("enabled"))},this.event=function(t){return!0},this.elementEventOnCb=function(t){if(!e.m_filterObjs.length)return e.event(t);e.m_filterObjs.forEach(function(i){if(!i.eventFilter(e,t))return e.event(t)})},this.elementEvent=function(t){if(this instanceof HObject){let e=this;t?(e.getElement().on(a+" "+r+" "+o+" mouseenter mouseleave mousewheel",function(t){e.elementEventOnCb(t)}),$("body").on("keydown keyup",function(t){if(!e.m_filterObjs.length)return e.event(t);e.m_filterObjs.forEach(function(i){if(!i.eventFilter(e,t))return e.event(t)})})):(e.getElement().off(a+" "+r+" "+o+" mouseenter mouseleave mousewheel"),$("body").off("keydown keyup"))}},this.installEventFilter=function(t){this.m_filterObjs.push(t)},this.removeEventFilter=function(t){let e=this.m_filterObjs.indexOf(t);e>-1&&this.m_filterObjs.splice(e,1)},this.hasSameElement=function(t){return this.getElement()==t.getElement()},this.isEnabled=function(){return i},this.toString=function(){return"[HObject]"}}eventFilter(t,e){console.log("eventFilter() called")}setMouseTracking(t){if(this.getElement()&&t){let t=this;this.getElement().on("mousemove touchmove",function(e){t.elementEventOnCb(e)}),this.m_mouseTracking=!0}else this.getElement().off("mousemove touchmove"),this.m_mouseTracking=!1}hasMouseTracking(){return this.m_mouseTracking}setObjectName(t){this.m_objectName=t}objectName(){return this.m_objectName}isWidget(){return"[Widget]"==this.toString()}}define("hObject",function(){});class Widget extends HObject{constructor(t){super(t);let e=!0,i=0;var n=new Misc.Font(12);let s=$("<canvas />").attr({style:"position: absolute; background-color: transparent"});this.getElement()&&this.getElement().append(s),this.clearCanvas=function(){let t=this.getContext();t&&t.clearRect(0,0,s[0].width,s[0].height)},this.getContext=function(){let t=null;return this.getElement()?(s[0].width=parseFloat(this.getElement().css("width")),s[0].height=parseFloat(this.getElement().css("height")),t=s[0].getContext("2d")):null},this.width=function(){return s[0].width},this.height=function(){return s[0].height},this.setCanvasParent=function(t){this.getElement().append(s)},this.getCanvas=function(){return s},this.contentsRect=function(){let t=this.getElement();return new Misc.Rect(0,0,parseFloat(t.css("width")),parseFloat(t.css("height")))},this.setVisible=function(t){t||void 0===t?(this.getCanvas().show(),e=!0):(this.getCanvas().hide(),e=!1)},this.hide=function(){this.setVisible(!1)},this.show=function(){this.setVisible(!0)},this.font=function(){return n},this.setFont=function(t){n=t},this.isVisible=function(){return e},this.setZ=function(t){i!==t&&(i=t,s&&s.css("zIndex",i))},this.getZ=function(t){return i},this.toString=function(){return"[Widget]"}}setElement(t){this.super(t),this.setCanvasParent(t)}}define("widget",["static","hObject"],function(){});class WidgetOverlay extends Widget{constructor(t){super(t);this.draw=function(){let t=new PaintUtil.Painter(this);this.drawOverlay(t),t=null},this.toString=function(){return"[WidgetOverlay]"}}updateOverlay(){this.draw()}drawOverlay(t){console.warn("drawOverlay() not reimplemented")}}define("widgetOverlay",["static","widget"],function(){});class MousePattern{constructor(t,e){this.button=Static.NoButton,this.modifiers=Static.NoModifier,void 0!==t&&(this.button=t),void 0!==e&&(this.modifiers=e)}}function KeyPattern(t,e){this.key=Static.Key_unknown,this.modifiers=Static.NoModifier,void 0!==t&&(this.key=t),void 0!==e&&(this.modifiers=e)}class EventPattern extends HObject{constructor(t){super(t);const e=Enum.MousePatternCode.MouseSelect1,i=Enum.MousePatternCode.MouseSelect2,n=Enum.MousePatternCode.MouseSelect3,s=Enum.MousePatternCode.MouseSelect4,a=Enum.MousePatternCode.MouseSelect5,r=Enum.MousePatternCode.MouseSelect6,o=Enum.MousePatternCode.MousePatternCount;var l=[],c=[];this.initMousePattern=function(t){for(var c=0;c<o;++c)l.push(new MousePattern);switch(t){case 1:this.setMousePattern(e,Static.LeftButton),this.setMousePattern(i,Static.LeftButton,Static.ControlModifier),this.setMousePattern(n,Static.LeftButton,Static.AltModifier);break;case 2:this.setMousePattern(e,Static.LeftButton),this.setMousePattern(i,Static.RightButton),this.setMousePattern(n,Static.LeftButton,Static.AltModifier);break;default:this.setMousePattern(e,Static.LeftButton),this.setMousePattern(i,Static.RightButton),this.setMousePattern(n,Static.MidButton)}this.setMousePattern(s,l[e].button,l[e].modifiers|Static.ShiftModifier),this.setMousePattern(a,l[i].button,l[i].modifiers|Static.ShiftModifier),this.setMousePattern(r,l[n].button,l[n].modifiers|Static.ShiftModifier)},this.initKeyPattern=function(){for(var t=0;t<Enum.KeyPatternCode.KeyPatternCount;++t)c.push(new KeyPattern);this.setKeyPattern(Enum.KeyPatternCode.KeySelect1,Static.Key_Return),this.setKeyPattern(Enum.KeyPatternCode.KeySelect2,Static.Key_Space),this.setKeyPattern(Enum.KeyPatternCode.KeyAbort,Static.Key_Escape),this.setKeyPattern(Enum.KeyPatternCode.KeyLeft,Static.Key_Left),this.setKeyPattern(Enum.KeyPatternCode.KeyRight,Static.Key_Right),this.setKeyPattern(Enum.KeyPatternCode.KeyUp,Static.Key_Up),this.setKeyPattern(Enum.KeyPatternCode.KeyDown,Static.Key_Down),this.setKeyPattern(Enum.KeyPatternCode.KeyRedo,Static.Key_Plus),this.setKeyPattern(Enum.KeyPatternCode.KeyUndo,Static.Key_Minus),this.setKeyPattern(Enum.KeyPatternCode.KeyHome,Static.Key_Escape)},this.setMousePattern=function(t,e,i){void 0==e?l=t:(void 0==i&&(i=Static.NoModifier),t>=0&&t<o&&(l[t].button=e,l[t].modifiers=i))},this.setKeyPattern=function(t,e,i){void 0==e?l=t:(void 0==i&&(i=Static.NoModifier),t>=0&&t<Enum.KeyPatternCode.KeyPatternCount&&(c[t].key=e,c[t].modifiers=i))},this.mouseMatch=function(t,e){return t>=0&&t<o&&this.mouseMatch2(l[t],e)},this.mouseMatch2=function(t,e){return null!=e&&(t.button==Utility.button(e)&&t.modifiers==Utility.modifiers(e))},this.keyPattern=function(){return c},this.key=function(t){return null!=t&&t.keyCode},this.keyMatch=function(t,e){return t>=0&&t<Enum.KeyPatternCode.KeyPatternCount&&this.keyMatch2(c[t],e)},this.keyMatch2=function(t,e){return null!=e&&(t.key==this.key(e)&&t.modifiers==Utility.modifiers(e))},this.initKeyPattern(),this.initMousePattern(3)}}define("eventpattern",function(){});class PickerMachine{constructor(t){Static.Begin=0,Static.Append=1,Static.Move=2,Static.Remove=3,Static.End=4;var e=t,i=0;this.selectionType=function(){return e},this.state=function(){return i},this.setState=function(t){i=t},this.reset=function(){this.setState(0)}}}class PickerTrackerMachine extends PickerMachine{constructor(){super(Static.NoSelection),this.transition=function(t,e){var i=[];switch(e.type){case"mouseenter":case"mousemove":case"touchmove":0==this.state()?(i.push(Static.Begin),i.push(Static.Append),this.setState(1)):i.push(Static.Move);break;case"mouseleave":i.push(Static.Remove),i.push(Static.End),this.setState(0)}return i}}}class PickerClickPointMachine extends PickerMachine{constructor(){super(Static.PointSelection),this.transition=function(t,e){var i=[];switch(e.type){case"mousedown":case"touchstart":t.mouseMatch(Enum.MousePatternCode.MouseSelect1,e)&&(i.push(Static.Begin),i.push(Static.Append),i.push(Static.End));break;case"keydown":var n=e;t.keyMatch(Enum.KeyPatternCode.KeySelect1,n)&&(i.push(Static.Begin),i.push(Static.Append),i.push(Static.End))}return i}}toString(){return"[PickerClickPointMachine]"}}class PickerDragPointMachine extends PickerMachine{constructor(){super(Static.PointSelection),this.transition=function(t,e){var i=[];switch(e.type){case"mousedown":case"touchstart":t.mouseMatch(Enum.MousePatternCode.MouseSelect1,e)&&0==this.state()&&(i.push(Static.Begin),i.push(Static.Append),this.setState(1));break;case"mousemove":case"touchmove":case"mousewheel":0!=this.state()&&i.push(Static.Move);break;case"mouseup":case"touchend":0!=this.state()&&(i.push(Static.End),this.setState(0));break;case"keydown":var n=e;t.keyMatch(Enum.KeyPatternCode.KeySelect1,n)&&(0==this.state()?(i.push(Static.Begin),i.push(Static.Append),this.setState(1)):(i.push(Static.End),this.setState(0)))}return i}}toString(){return"[PickerDragPointMachine]"}}class PickerClickRectMachine extends PickerMachine{constructor(){super(Static.RectSelection),this.transition=function(t,e){var i=[];switch(e.type){case"mousedown":case"touchstart":if(t.mouseMatch(Enum.MousePatternCode.MouseSelect1,e))switch(this.state()){case 0:i.push(Static.Begin),i.push(Static.Append),this.setState(1);break;case 1:break;default:i.push(Static.End),this.setState(0)}break;case"mousemove":case"touchmove":case"mousewheel":0!=this.state()&&i.push(Static.Move);break;case"mouseup":case"touchend":t.mouseMatch(Enum.MousePatternCode.MouseSelect1,e)&&1==this.state()&&(i.push(Static.Append),this.setState(2));break;case"keydown":var n=e;t.keyMatch(Enum.KeyPatternCode.KeySelect1,n)&&(0==this.state()?(i.push(Static.Begin),i.push(Static.Append),this.setState(1)):1==this.state()?(i.push(Static.Append),this.setState(2)):2==this.state()&&(i.push(Static.End),this.setState(0)))}return i}}toString(){return"[PickerClickRectMachine]"}}class PickerDragRectMachine extends PickerMachine{constructor(){super(Static.RectSelection),this.transition=function(t,e){var i=[];switch(e.type){case"mousedown":case"touchstart":("touchstart"==e.type||t.mouseMatch(Enum.MousePatternCode.MouseSelect1,e))&&0==this.state()&&(i.push(Static.Begin),i.push(Static.Append),i.push(Static.Append),this.setState(2));break;case"mousemove":case"touchmove":case"mousewheel":0!=this.state()&&i.push(Static.Move);break;case"mouseup":case"touchend":2==this.state()&&(i.push(Static.End),this.setState(0));break;case"keydown":t.keyMatch(Enum.KeyPatternCode.KeySelect1,e)&&(0==this.state()?(i.push(Static.Begin),i.push(Static.Append),i.push(Static.Append),this.setState(2)):(i.push(Static.End),this.setState(0)))}return i}}toString(){return"[PickerDragRectMachine]"}}class PickerPolygonMachine extends PickerMachine{constructor(){super(Static.PolygonSelection),this.transition=function(t,e){var i=[];switch(e.type){case"mousedown":case"touchstart":t.mouseMatch(Enum.MousePatternCode.MouseSelect1,e)&&(0==this.state()?(i.push(Static.Begin),i.push(Static.Append),i.push(Static.Append),this.setState(1)):i.push(Static.Append)),t.mouseMatch(Enum.MousePatternCode.MouseSelect2,e)&&1==this.state()&&(i.push(Static.End),this.setState(0));break;case"mousemove":case"touchmove":case"mousewheel":0!=this.state()&&i.push(Static.Move);break;case"keydown":var n=e;t.keyMatch(Enum.KeyPatternCode.KeySelect1,n)?0==this.state()?(i.push(Static.Begin),i.push(Static.Append),i.push(Static.Append),this.setState(1)):i.push(Static.Append):t.keyMatch(Enum.KeyPatternCode.KeySelect2,n)&&1==this.state()&&(i.push(Static.End),this.setState(0))}return i}}toString(){return"[PickerPolygonMachine]"}}class PickerDragLineMachine extends PickerMachine{constructor(){super(Static.PolygonSelection),this.transition=function(t,e){var i=[];switch(e.type){case"mousedown":case"touchstart":t.mouseMatch(Enum.MousePatternCode.MouseSelect1,e)&&0==this.state()&&(i.push(Static.Begin),i.push(Static.Append),i.push(Static.Append),this.setState(1));break;case"keydown":t.keyMatch(Enum.KeyPatternCode.KeySelect1,e)&&(0==this.state()?(i.push(Static.Begin),i.push(Static.Append),i.push(Static.Append),this.setState(1)):(i.push(Static.End),this.setState(0)));break;case"mousemove":case"touchmove":case"mousewheel":0!=this.state()&&i.push(Static.Move);break;case"mouseup":case"touchend":0!=this.state()&&(i.push(Static.End),this.setState(0))}return i}}toString(){return"[PickerDragLineMachine]"}}define("pickermachine",["static","eventpattern"],function(){});class PickerRubberband extends WidgetOverlay{constructor(t,e){super(e),this.setZ(30);var i=t;this.drawOverlay=function(t){t.setPen(i.rubberBandPen()),t.setBrush(Static.NoBrush),i.drawRubberBand(t)}}}class PickerTracker extends WidgetOverlay{constructor(t,e){super(e),this.setZ(30);var i=t;this.drawOverlay=function(t){i.trackerOverlay().clearCanvas(),t.save(),t.setPen(i.trackerPen()),i.drawTracker(t),t.restore()}}}function PickerPrivateData(){this.enabled=!1,this.stateMachine=null,this.resizeMode,this.rubberBand=Static.NoRubberBand,this.rubberBandPen=new Misc.Pen("red",1,"solid"),this.trackerMode=Static.AlwaysOff,this.trackerPen=new Misc.Pen("red"),this.trackerFont,this.pickedPoints=[],this.isActive=!1,this.trackerPosition=new Misc.Point,this.mouseTracking=!1,this.rubberBandOverlay=null,this.trackerOverlay=null}class Picker extends EventPattern{constructor(t,e,i){super(i);let n="click",s="mousedown",a="mouseup",r="mousemove";var o;Static.isMobile()&&(n="tap",s="touchstart",a="touchend",r="touchmove");var l=[],c=null;void 0!==i&&"[Widget]"==i.toString()&&(c=i),this.init=function(t,e,i){(o=new PickerPrivateData).rubberBand=e,t&&(o.trackerFont=new Misc.Font(12),this.setEnabled_1(!0)),this.setTrackerMode(i),Picker.pickers.push(this)},this.getPickerData=function(){return o},this.setStateMachine=function(t){o.stateMachine!=t&&(this.reset(),o.stateMachine=t,o.stateMachine&&o.stateMachine.reset())},this.stateMachine=function(){return o.stateMachine},this.parentWidget=function(){return c},this.setRubberBand=function(t){o.rubberBand=t},this.rubberBand=function(){return o.rubberBand},this.setTrackerMode=function(t){o.trackerMode!=t&&(o.trackerMode=t)},this.trackerMode=function(){return o.trackerMode},this.setEnabled=function(t){if(o.enabled!=t){o.enabled=t;var e=this.parentWidget();e&&(t?e.installEventFilter(this):e.removeEventFilter(this)),this.updateDisplay()}},this.isEnabled=function(){return o.enabled},this.setTrackerFont=function(t){t!=o.trackerFont&&(o.trackerFont=t,this.updateDisplay())},this.trackerFont=function(){return o.trackerFont},this.setTrackerPen=function(t){t!=o.trackerPen&&(o.trackerPen=t,this.updateDisplay())},this.trackerPen=function(){return o.trackerPen},this.setRubberBandPen=function(t){t!=o.rubberBandPen&&(o.rubberBandPen=t,this.updateDisplay())},this.rubberBandPen=function(){return o.rubberBandPen},this.drawRubberBand=function(t){if(this.isActive()&&this.rubberBand()!=Static.NoRubberBand&&this.rubberBandPen().style!=Static.NoPen){var e=this.adjustedPoints(o.pickedPoints),i=Static.NoSelection;switch(o.stateMachine&&(i=o.stateMachine.selectionType()),i){case Static.NoSelection:case Static.PointSelection:if(e.length<1)return;var n=e[0],s=this.pickArea();switch(this.rubberBand()){case Static.VLineRubberBand:t.drawLine(n.x,s.top(),n.x,s.bottom());break;case Static.HLineRubberBand:t.drawLine(s.left(),n.y,s.right(),n.y);break;case Static.CrossRubberBand:t.drawLine(n.x,s.top(),n.x,s.bottom()),t.drawLine(s.left(),n.y,s.right(),n.y)}break;case Static.RectSelection:if(e.length<2)return;var a=new Misc.Rect(e[0],e[e.length-1]);switch(a=a.normalized(),this.rubberBand()){case Static.EllipseRubberBand:t.drawEllipse(a);break;case Static.RectRubberBand:t.drawRect(a)}break;case Static.PolygonSelection:if(e.length<2)return;this.rubberBand()==Static.PolygonRubberBand&&t.drawPolyline(e)}}},this.drawTracker=function(t){var e=this.trackerRect(this.trackerFont());if(null!==e){var i=this.trackerText(o.trackerPosition);""!==i&&(t.setFont(o.trackerFont),t.drawText(i,e.left(),e.bottom()))}},this.adjustedPoints=function(t){return t},this.selection=function(){return this.adjustedPoints(o.pickedPoints)},this.trackerPosition=function(){return o.trackerPosition},this.trackerRect=function(t){if(this.trackerMode()===Static.AlwaysOff)return null;if(this.trackerPosition().x<0||this.trackerPosition().y<0)return null;var e=this.trackerText(this.trackerPosition());if(""==e)return null;var i=t.textSize(e),n=new Misc.Rect(new Misc.Point,i.width,i.height),s=this.trackerPosition(),a=0;if(l.length.length>1&&this.rubberBand()!=Static.NoRubberBand){var r=l[0];a|=s.x>=r.x?Static.AlignRight:Static.AlignLeft,a|=s.y>r.y?Static.AlignBottom:Static.AlignTop}else a=Static.AlignTop|Static.AlignRight;var o=s.x;a&Static.AlignLeft?o-=n.width()+5:a&Static.AlignRight&&(o+=5);var c=s.y;a&Static.AlignBottom?c+=5:a&Static.AlignTop&&(c-=n.height()+5),n.moveTopLeft(new Misc.Point(o,c));var u=new Misc.Rect(new Misc.Point,this.trackerOverlay().width(),this.trackerOverlay().height()),h=Math.min(n.right(),u.right()-5),d=Math.min(n.bottom(),u.bottom()-5);n.moveBottomRight(new Misc.Point(h,d));var p=Math.max(n.left(),u.left()+5),f=Math.max(n.top(),u.top()+5);return n.moveTopLeft(new Misc.Point(p,f)),n},this.eventFilter=function(t,e){if(!this.isEnabled())return!1;if(t&&t==this.parentWidget())switch(e.type){case"mouseenter":this.widgetEnterEvent(e);break;case"mouseleave":this.widgetLeaveEvent(e);break;case s:this.widgetMousePressEvent(e);break;case a:this.widgetMouseReleaseEvent(e);break;case"dblclick":this.widgetMouseDoubleClickEvent(e);break;case r:this.widgetMouseMoveEvent(e);break;case"keydown":this.widgetKeyPressEvent(e);break;case"keyup":this.widgetKeyReleaseEvent(e);break;case"mousewheel":this.widgetWheelEvent(e)}return!1},this.transition=function(t){if(o.stateMachine){var e=o.stateMachine.transition(this,t);switch(t.type){case s:case a:case r:var i=t,n=new Misc.Point(i.clientX,i.clientY);Static.isMobile()&&(n=new Misc.Point(t.originalEvent.changedTouches[0].clientX,t.originalEvent.changedTouches[0].clientY)),n=this.parentWidget().mapToElement(n);break;default:n=this.parentWidget().mapToElement(new Misc.Point(0,0))}for(var l=0;l<e.length;l++)switch(e[l]){case Static.Begin:this.begin();break;case Static.Append:this.append(n);break;case Static.Move:this.move(n);break;case Static.Remove:this.remove();break;case Static.End:this.end()}}},this.reset=function(){o.stateMachine&&o.stateMachine.reset(),this.isActive()&&this.end(!1)},this.append=function(t){o.isActive&&(o.pickedPoints.push(t),this.updateDisplay(),Static.trigger("appended",t))},this.move=function(t){if(o.isActive){var e=o.pickedPoints.length-1;e>=0&&o.pickedPoints[e]!=t&&(o.pickedPoints[e]=t,this.updateDisplay(),Static.trigger("moved",t))}},this.remove=function(){if(o.isActive&&o.pickedPoints.length-1>0){var t=o.pickedPoints.pop();this.updateDisplay(),Static.trigger("removed",t)}},this.accept=function(t){return!0},this.isActive=function(){return o.isActive},this.pickedPoints=function(){return o.pickedPoints},this.setMouseTracking=function(t){var e=this.parentWidget();e&&(t?(o.mouseTracking=e.hasMouseTracking(),e.setMouseTracking(!0)):e.setMouseTracking(o.mouseTracking))},this.pickArea=function(){var t=this.parentWidget();return t?t.contentsRect():null},this.updateDisplay=function(){var t=this.parentWidget(),e=!1,i=!1;t&&t.isVisible()&&o.enabled&&(this.rubberBand()!==Static.NoRubberBand&&this.isActive()&&this.rubberBandPen().style!==Static.NoPen&&(e=!0),(this.trackerMode()==Static.AlwaysOn||this.trackerMode()==Static.ActiveOnly&&this.isActive())&&this.trackerPen()!=Static.NoPen&&(i=!0));var n=o.rubberBandOverlay;e?(null==n&&((n=new PickerRubberband(this,t)).setObjectName("PickerRubberBand"),o.rubberBandOverlay=n),n.updateOverlay()):n&&(o.rubberBandOverlay.getCanvas().hide(),o.rubberBandOverlay.getCanvas(),o.rubberBandOverlay=null);var s=o.trackerOverlay;i?(null==s&&((s=new PickerTracker(this,t)).setObjectName("PickerTracker"),o.trackerOverlay=s),s.setFont(o.trackerFont),s.updateOverlay()):s&&(o.trackerOverlay.getCanvas().hide(),o.trackerOverlay.getCanvas(),o.trackerOverlay=null)},this.rubberBandOverlay=function(){return o.rubberBandOverlay},this.trackerOverlay=function(){return o.trackerOverlay},void 0==t&&void 0==e?this.init(i,Static.NoRubberBand,Static.AlwaysOff):this.init(i,t,e)}widgetEnterEvent(t){this.transition(t)}widgetLeaveEvent(t){this.transition(t),this.getPickerData().trackerPosition=new Misc.Point(-1,-1),this.isActive()||this.updateDisplay()}widgetKeyReleaseEvent(t){this.transition(t)}widgetWheelEvent(t){var e=new Misc.Point(t.clientX,t.clientY);this.pickArea().contains(e)?this.getPickerData().trackerPosition=e:this.getPickerData().trackerPosition=new Misc.Point(-1,-1),this.updateDisplay(),this.transition(t)}widgetMouseDoubleClickEvent(t){this.transition(t)}widgetMouseMoveEvent(t){var e=new Misc.Point(t.clientX,t.clientY);Static.isMobile()&&(e=new Misc.Point(t.originalEvent.changedTouches[0].clientX,t.originalEvent.changedTouches[0].clientY)),e=this.mapToElement(e),this.pickArea().contains(e)?this.getPickerData().trackerPosition=e:this.getPickerData().trackerPosition=new Misc.Point(-1,-1),this.isActive()||this.updateDisplay(),this.transition(t)}widgetMousePressEvent(t){this.transition(t)}widgetKeyPressEvent(t){var e=0,i=0;if(this.keyMatch(Enum.KeyPatternCode.KeyLeft,t)?e=-1:this.keyMatch(Enum.KeyPatternCode.KeyRight,t)?e=1:this.keyMatch(Enum.KeyPatternCode.KeyUp,t)?i=-1:this.keyMatch(Enum.KeyPatternCode.KeyDown,t)?i=1:this.keyMatch(Enum.KeyPatternCode.KeyAbort,t)?this.reset():this.transition(t),0!==e||0!==i){var n=pickArea(),s=this.parentWidget().mapToElement(new Misc.Point(clientX,clientY)),a=s.x+e;a=Math.max(n.left(),a),a=Math.min(n.right(),a);var r=s.y+i;r=Math.max(n.top(),r),r=Math.min(n.bottom(),r)}}widgetMouseReleaseEvent(t){this.transition(t)}end(t){var e=this.getPickerData();return e.isActive?(this.setMouseTracking(!1),e.isActive=!1,Static.trigger("activated",!1),this.trackerMode()==Static.ActiveOnly&&(e.trackerPosition=new Misc.Point(-1,-1)),t&&(t=this.accept(e.pickedPoints)),t?Static.trigger("selected",e.pickedPoints):e.pickedPoints=[],this.updateDisplay()):t=!1,t}begin(){var t=this.getPickerData();if(t&&!t.isActive){if(t.pickedPoints=[],t.isActive=!0,Static.trigger("activated",!0),this.trackerMode()!==Static.AlwaysOff&&(t.trackerPosition.x<0||t.trackerPosition.y<0)){var e=this.parentWidget();e&&(t.trackerPosition=e.mapToElement(new Misc.Point(0,0)))}this.updateDisplay(),this.setMouseTracking(!0)}}trackerText(t){var e;switch(this.rubberBand()){case Static.HLineRubberBand:e=t.y.toString();break;case Static.VLineRubberBand:e=t.x.toString();break;default:e=t.x.toString()+", "+t.y.toString()}return e}}Picker.pickers=[],define("picker",["static","widgetOverlay","pickermachine"],function(){});class PlotPicker extends Picker{constructor(t,e,i,n,s){var a=0;if("number"!=typeof t&&(s=t,t=-1,e=-1,i=Static.NoRubberBand,n=Static.AlwaysOff,a=1),"number"!=typeof i&&(s=i,i=Static.NoRubberBand,n=Static.AlwaysOff,a=2),s instanceof Plot&&(s=s.getCentralWidget()),super(i,n,s),this.d_xAxis=-1,this.d_yAxis=-1,1==a){var r=this.plot();t=xBottom;r&&!r.axisEnabled(xBottom)&&r.axisEnabled(xTop)&&(t=xTop);e=yLeft;r&&!r.axisEnabled(yLeft)&&r.axisEnabled(yRight)&&(e=yRight),this.setAxis(t,e)}else this.d_xAxis=t,this.d_yAxis=e;this.setEnabled(!0),s&&s.setEnabled_1(!0)}setAxis(t,e){this.plot()&&(t==this.d_xAxis&&e==this.d_yAxis||(this.d_xAxis=t,this.d_yAxis=e))}xAxis(){return this.d_xAxis}yAxis(){return this.d_yAxis}plot(){var t=this.parentWidget();return t?t.plot:null}canvas(){return this.parentWidget()}scaleRect(){var t=null;if(this.plot()){var e=this.plot().axisScaleDiv(this.xAxis()),i=this.plot().axisScaleDiv(this.yAxis());t=(t=new Misc.Rect(e.lowerBound(),i.lowerBound(),e.range(),i.range())).normalized()}return t}invTransform(t){var e=this.plot().canvasMap(this.d_xAxis),i=this.plot().canvasMap(this.d_yAxis);if(void 0!==t.x){var n=t;return new Misc.Point(e.invTransform(n.x),i.invTransform(n.y))}return ScaleMap.invTransform_Rect(e,i,t)}transform(t){var e=this.plot().canvasMap(this.d_xAxis),i=this.plot().canvasMap(this.d_yAxis);if(void 0!==t.x){var n=t;return new Misc.Point(e.transform(n.x),i.transform(n.y))}return Static.mTransform(e,i,t)}trackerText(t){var e;switch(t=this.invTransform(t),this.rubberBand()){case Static.HLineRubberBand:e=t.y.toString();break;case Static.VLineRubberBand:e=t.x.toString();break;default:e=t.x.toString()+", "+t.y.toString()}return e}move(t){super.method(move(t)),Static.trigger("moved",invTransform(t))}append(t){super.method(append(t)),Static.trigger("appended",invTransform(t))}end(t=!0){if(!(t=super.end(t)))return!1;if(!this.plot())return!1;var e=this.selection();if(0==e.length)return!1;var i=Static.NoSelection;switch(this.stateMachine()&&(i=this.stateMachine().selectionType()),i){case Static.PointSelection:var n=this.invTransform(e[0]);Static.trigger("selected",n);break;case Static.RectSelection:if(e.length>=2){var s=e[0],a=e[e.length-1],r=new Misc.Rect(s,a).normalized();Static.trigger("selected",this.invTransform(r))}break;case Static.PolygonSelection:for(var o=[],l=0;l<e.length;l++)o.push(this.invTransform(e[l]));Static.trigger("selected",o)}return!0}}define("plotpicker",["static","picker"],function(){});class MPicker extends PlotPicker{constructor(t,e,i){super(t);var n=this;this._rulerPos=e,this._ruler=i;var s=0,a=0,r=0,o="",l=null,c=null,u=!1,h=0;this._ruler&&this._ruler.setAxes(this.xAxis(),this.yAxis());var d=Static.FullTrackingText;this.plot()&&(o=this.plot().cursor()),this.preventDragging=function(t){u=t},this.controlFlag=function(t){return Boolean(h&t)},this.setControlFlag=function(t,e){e?h|=t:h&=~t},this.prohibit=function(){s&&this.controlFlag(Static.ZoomerSearch)&&(this.setControlFlag(Static.ZoomEnabled,s.isEnabled()),this.controlFlag(Static.ZoomEnabled)&&s.setEnabled(!1)),a&&this.controlFlag(Static.PannerSearch)&&(this.setControlFlag(Static.PanEnabled,a.isEnabled()),this.controlFlag(Static.PanEnabled)&&a.setEnabled(!1)),r&&this.controlFlag(Static.MagnifierSearch)&&(this.setControlFlag(Static.MagnifierEnabled,r.isEnabled()),this.controlFlag(Static.MagnifierEnabled)&&r.setEnabled(!1))},this.restore=function(){s&&this.controlFlag(Static.ZoomEnabled)&&(s.setEnabled(!0),this.setControlFlag(Static.ZoomEnabled,!1)),a&&this.controlFlag(Static.PanEnabled)&&(a.setEnabled(!0),this.setControlFlag(Static.PanEnabled,!1)),r&&this.controlFlag(Static.MagnifierEnabled)&&(r.setEnabled(!0),this.setControlFlag(Static.MagnifierEnabled,!1))},this.setDragCursor=function(){u||this.controlFlag(Static.DragCursor)||t.cursor()==o&&(l=t.cursor(),c=this._dragCursorShape,t.setCursor(c),this.setControlFlag(Static.DragCursor,!0),this.prohibit(),Static.trigger("rulerSelected",n._ruler))},this.clearDragCursor=function(){this.controlFlag(Static.DragCursor)&&(this._ruler.plot().setCursor(l),this.setControlFlag(Static.DragCursor,!1),this.restore(),Static.trigger("rulerDeselected",n._ruler))},this.setTrackingTextStyle=function(t){d=t},this.trackerText=function(t){if(this._ruler.lock()||d==Static.NoTrackingText||!this.controlFlag(Static.LeftButtonDown)&&!this.controlFlag(Static.ZoomEnabled))return"";if(d==Static.FullTrackingText){var e=this.axisTitle();return e.length?e+"="+this._rulerPos:this._rulerPos}return d==Static.PartialTrackingText?this._rulerPos:""},this.panningFinished=function(){this.setControlFlag(Static.PanningInProgress,!1)},this.panningStarted=function(){this.setControlFlag(Static.PanningInProgress,!0)},$("#plotDivContainer").on("mouseup touchend",function(){Static.LeftButtonDown&&(Static.isMobile()&&n.clearDragCursor(),n.setControlFlag(Static.LeftButtonDown,!1))}),this.initMagnifier=function(){this.controlFlag(Static.MagnifierSearch)&&!r&&t.magnifier&&(r=t.magnifier)},this.initZoomer=function(){!this.controlFlag(Static.ZoomerSearch)&&s||t.zoomer&&(s=t.zoomer)},this.initPanner=function(){!this.controlFlag(Static.PannerSearch)&&a||t.panner&&(a=t.panner)},this.doMouseReleaseEvent=function(t){this._ruler.isVisible()&&!this.controlFlag(Static.PanningInProgress)&&t.button==Static.LeftButton&&(this.controlFlag(Static.LeftButtonDown)&&Static.trigger("positionChanged",[this._ruler,this._rulerPos]),this.setControlFlag(Static.LeftButtonDown,!1))}}widgetMouseReleaseEvent(t){this.doMouseReleaseEvent(t),super.widgetMouseReleaseEvent(t)}widgetLeaveEvent(t){this.doMouseReleaseEvent(t),super.widgetMouseReleaseEvent(t)}}class PickerV extends MPicker{constructor(t,e,i){super(t,e,i),this._dragCursorShape="w-resize",this.axisTitle=function(){return this._ruler.plot().axisTitle(this.xAxis())}}widgetMousePressEvent(t){if(this._ruler.isVisible()&&!this.controlFlag(Static.PanningInProgress)){if(2==t.button)return this.controlFlag(Static.DragCursor),!0;if(Static.isMobile()){var e=this._ruler.plot().transform(this.xAxis(),this._rulerPos),i=t.originalEvent.touches[0].clientX,n=t.originalEvent.touches[0].clientY,s=this.mapToElement(new Misc.Point(i,n)).x;!this.controlFlag(Static.LeftButtonDown)&&s<e+12&&s>e-12&&(this.setDragCursor(),this.setControlFlag(Static.LeftButtonDown,!0))}else if(t.button==Static.LeftButton||Static.isMobile())return this.controlFlag(Static.DragCursor)&&this.setControlFlag(Static.LeftButtonDown,!0),!0}}widgetMouseMoveEvent(t){if(t.preventDefault(),this._ruler.isVisible()&&!this.controlFlag(Static.PanningInProgress)&&!this.controlFlag(Static.Locked)){var e=this._ruler.plot(),i=t.clientX,n=t.clientY;if(Static.isMobile()){var s=t.originalEvent.changedTouches[0];i=parseInt(s.clientX),n=parseInt(s.clientY)}var a=this.mapToElement(new Misc.Point(i,n)).x,r=this._ruler.plot().transform(this.xAxis(),this._rulerPos);this.controlFlag(Static.LeftButtonDown)&&(this._rulerPos=e.invTransform(this.xAxis(),a),this._rulerPos=this._ruler._rulers.setPosition(this._ruler._rulers.rulerId(this._ruler),this._rulerPos),Static.trigger("positionChanging",[this._ruler,this._ruler._pos])),!this.controlFlag(Static.LeftButtonDown)&&a<r+2&&a>r-2&&this.setDragCursor(),this.controlFlag(Static.LeftButtonDown)||a<r+2&&a>r-2||this.clearDragCursor()}}}class PickerH extends MPicker{constructor(t,e,i){super(t,e,i),this._dragCursorShape="s-resize",this.axisTitle=function(){return this._ruler.plot().axisTitle(this.yAxis())}}widgetMousePressEvent(t){if(this._ruler.isVisible()&&!this.controlFlag(Static.PanningInProgress)){if(2==t.button)return this.controlFlag(Static.DragCursor),!0;if(Static.isMobile()){var e=this._ruler.plot().transform(this.yAxis(),this._rulerPos),i=t.originalEvent.touches[0].clientX,n=t.originalEvent.touches[0].clientY,s=this.mapToElement(new Misc.Point(i,n)).y;!this.controlFlag(Static.LeftButtonDown)&&s<e+12&&s>e-12&&(this.setDragCursor(),this.setControlFlag(Static.LeftButtonDown,!0))}else if(t.button==Static.LeftButton||Static.isMobile())return this.controlFlag(Static.DragCursor)&&this.setControlFlag(Static.LeftButtonDown,!0),!0}}widgetMouseMoveEvent(t){if(t.preventDefault(),this._ruler.isVisible()&&!this.controlFlag(Static.PanningInProgress)&&!this.controlFlag(Static.Locked)){var e=this._ruler.plot(),i=t.clientX,n=t.clientY;if(Static.isMobile()){var s=t.originalEvent.changedTouches[0];i=parseInt(s.clientX),n=parseInt(s.clientY)}var a=this.mapToElement(new Misc.Point(i,n)).y,r=this._ruler.plot().transform(this.yAxis(),this._rulerPos);this.controlFlag(Static.LeftButtonDown)&&(this._rulerPos=e.invTransform(this.yAxis(),a),this._rulerPos=this._ruler._rulers.setPosition(this._ruler._rulers.rulerId(this._ruler),this._rulerPos),Static.trigger("positionChanging",[this._ruler,this._ruler._pos])),!this.controlFlag(Static.LeftButtonDown)&&a<r+2&&a>r-2&&this.setDragCursor(),this.controlFlag(Static.LeftButtonDown)||a<r+2&&a>r-2||this.clearDragCursor()}}}define("mpicker",["static","plotpicker"],function(){});class PlotItem{constructor(t){Static.Rtti_PlotItem=0,Static.Rtti_PlotGrid=1,Static.Rtti_PlotScale=2,Static.Rtti_PlotLegend=3,Static.Rtti_PlotMarker=4,Static.Rtti_PlotCurve=5,Static.Rtti_PlotSpectroCurve=6,Static.Rtti_PlotIntervalCurve=7,Static.Rtti_PlotHistogram=8,Static.Rtti_PlotSpectrogram=9,Static.Rtti_PlotSVG=10,Static.Rtti_PlotTradingCurve=11,Static.Rtti_PlotBarChart=12,Static.Rtti_PlotMultiBarChart=13,Static.Rtti_PlotShape=14,Static.Rtti_PlotTextLabel=15,Static.Rtti_PlotZone=16,Static.Rtti_PlotUserItem=1e3;this.plotId="";var e,i=null,n=null,s=($("#centralDiv"),!0),a=0,r=0,o=xBottom,l=yLeft,c=t||"";this.rtti=Static.Rtti_PlotItem;var u=new Misc.Size(10,10);this.getLegendIconSize=function(){return u},this.setLegendIconSize=function(t){u=t,i&&i.updateLegend(this)},this.setItemInterest=function(t,i){i?e|=t:e&=~t,this.itemChanged()},this.testItemInterest=function(t){return e&t},this.plot=function(){return i},this.title=function(){return c},this.setTitle=function(t){c!==t&&(c=t,this.legendChanged(),this.itemChanged(),Static.trigger("titleChange",[this,t]))},this.clearCanvas=function(){this.getContext().clearRect(0,0,n[0].width,n[0].height)},this.attach=function(t){t!=i&&(i&&(this.getContext().clearRect(0,0,n[0].width,n[0].height),n.hide(),n=null,i.attachItem(this,!1)),(i=t)&&(null===n&&(n=$("<canvas />").attr({style:"position: absolute; background-color: transparent"}),i.getLayout().getCentralDiv().append(n),n.css({"border-radius":"inherit"}),0!=r&&n.css("zIndex",r)),i.attachItem(this,!0)))},this.detach=function(){this.attach(null)},this.setZ=function(t){r!==t&&(r=t,n&&n.css("zIndex",r),this.itemChanged())},this.getZ=function(t){return r},this.getCanvas=function(){return n},this.syncSizes=function(){var t=i.getLayout().getCentralDiv();n[0].width=parseFloat(t.css("width")),n[0].height=parseFloat(t.css("height"))},this.getContext=function(){return this.syncSizes(),n[0].getContext("2d")},this._setAxes=function(t,e){t!=xBottom&&t!=xTop||(o=t),e!=yLeft&&e!=yRight||(l=e),this.itemChanged()},this.setItemAttribute=function(t,e){e?a|=t:a&=~t,t==Legend&&this.legendChanged(),this.itemChanged()},this.testItemAttribute=function(t){return a&t},this.show=function(){this.setVisible(!0)},this.hide=function(){this.setVisible(!1)},this.doSetVisible=function(t){t!==s&&(s=t,t?n.show():n.hide(),this.itemChanged(),Static.trigger("visibilityChange",[this,t]))},this.isVisible=function(){return s},this.itemChanged=function(){i&&i.autoRefresh()},this.legendChanged=function(){this.testItemAttribute(Legend)&&i&&i.updateLegend(this)},this._setXAxis=function(t){t!=xBottom&&t!=xTop||(o=t,this.itemChanged())},this._setYAxis=function(t){t!=yLeft&&t!=yRight||(l=t,this.itemChanged())},this.xAxis=function(){return o},this.yAxis=function(){return l},this.getCanvasRect=function(){return this.syncSizes(),new Misc.Rect(new Misc.Point,n[0].width,n[0].height)},this.draw=function(t,e){},this.legendIconSize=function(){return this.getLegendIconSize()},this.legendIcon=function(t,e){return null},this.defaultIcon=function(t,e){var i=null;if(e.width>0&&e.height>0){var n=new Misc.Rect(0,0,e.width,e.height);i=new GraphicUtil.Graphic(null,e.width+1,e.height+1),new GraphicPainter(i).fillRect(n,t)}return i},this.legendData=function(){var t=new LegendData,e=this.title();t.setValue(Static.TitleRole,e);var i=this.legendIcon(0,this.legendIconSize());return i&&t.setValue(Static.IconRole,i),[t]},this.toString=function(){return'[PlotItem "'+this.plotId+'"]'}}boundingRect(){return new Misc.Rect}setVisible(t){this.doSetVisible(t)}setXAxis(t){this._setXAxis(t)}setYAxis(t){this._setYAxis(t)}setAxes(t,e){this._setAxes(t,e)}}define("plotItem",["static"],function(){});class PlotMarker extends PlotItem{constructor(t){super(t);var e="",i=new Misc.Font,n=Static.AlignCenter,s=Horizontal,a=2,r=new Misc.Pen,o=null,l=NoLine,c=0,u=0;this.rtti=Static.Rtti_PlotMarker,this.labelFont=function(){return i},this.setLabelFont=function(t){i=t},this.value=function(){return new Misc.Point(c,u)},this.xValue=function(){return c},this.yValue=function(){return u},this.setValue=function(t,e){if("object"==typeof t){var i=t;t=i.x,e=i.y}t==c&&e==u||(c=t,u=e,this.plot()&&this.plot().autoRefresh())},this.setXValue=function(t){this.setValue(t,u)},this.setYValue=function(t){this.setValue(c,t)},this.setLabel=function(t){t!=e&&(e=t)},this.label=function(){return e},this.setLabelAlignment=function(t){t!==n&&(n=t)},this.labelAlignment=function(){return n},this.setLabelOrientation=function(t){t!=s&&(s=t)},this.labelOrientation=function(){return s},this.setSpacing=function(t){t<0&&(t=0),t!=a&&(a=t)},this.spacing=function(){return a},this.setSymbol=function(t){o=t},this.symbol=function(){return o},this.draw=function(t,e){var i=this.getCanvasRect(),n=new Misc.Point(t.transform(c),e.transform(u)),s=this.getContext();if(this.drawLines(s,i,n),o&&o.style()!==NoSymbol){var a=o.size();i.adjusted(-a.width,-a.height,a.width,a.height).contains(n)&&o.drawSymbol(s,n)}this.drawLabel(s,i,n)},this.drawLabel=function(t,c,u){if(""!==e){var h=n,d=u,p=new Misc.Size(0,0);switch(l){case VLine:n&Static.AlignTop?(d.y=c.top(),h&=~Static.AlignTop,h|=Static.AlignBottom):n&Static.AlignBottom?(d.y=c.bottom()-1,h&=~Static.AlignBottom,h|=Static.AlignTop):d.y=c.center().y;break;case HLine:n&Static.AlignLeft?(d.x=c.left(),h&=~Static.AlignLeft,h|=Static.AlignRight):n&Static.AlignRight?(d.x=c.right()-1,h&=~Static.AlignRight,h|=Static.AlignLeft):d.x=c.center().x;break;default:if(o&&o.style()!==NoSymbol){var f=o.size();p=new Misc.Size((f.width+1)/2,(f.height+1)/2)}}var m=r.width/2;0==m&&(m=.5);var v=a,g=Math.max(m,p.width),b=Math.max(m,p.height),y=i.textSize(e);h&Static.AlignLeft?(d.x-=g+v,d.x-=s==Vertical?y.height:y.width):h&Static.AlignRight?d.x+=g+v:d.x-=s==Vertical?y.height/2:y.width/2,h&Static.AlignTop?(d.y-=b+v,s!=Vertical&&(d.y-=y.height)):h&Static.AlignBottom?(d.y+=b+v,s==Vertical&&(d.y+=y.width)):s==Vertical?d.y+=y.width/2:d.y-=y.height/2;var S=new PaintUtil.Painter(t);S.translate(d.x,d.y),S.setFont(i);var x=new Misc.Rect(0,0,y.width,y.height);s==Vertical?S.drawVerticalText(e,x.left()+.3*y.height,x.bottom()-.75*y.width):S.drawText(e,x.left(),x.bottom()-2)}},this.drawLines=function(t,e,i){if(l!=NoLine){var n=new PaintUtil.Painter(t);if(n.setPen(r),l==HLine||l==Cross){var s=i.y;n.drawLine(e.left(),s,e.right()-1,s)}if(l==VLine||l==Cross){var a=i.x;n.drawLine(a,e.top(),a,e.bottom()-1)}n=null}},this.setLineStyle=function(t){t!=l&&(l=t)},this.lineStyle=function(){return l},this.setLinePen=function(t){r=t,this.plot()&&this.plot().autoRefresh()},this.linePen=function(){return r},this.setZ(30),this.toString=function(){return"[PlotMarker]"},this.legendIcon=function(t,e){if(0===e.width&&0===e.height)return null;var i=new GraphicUtil.Graphic(null,e.width,e.height),n=new PaintUtil.Painter(i);return this.lineStyle(),this.symbol()&&this.symbol().drawGraphicSymbol(n,new Misc.Point(e.width,e.height),e),n=null,i}}}define("plotMarker",["static","plotItem"],function(){});class Ruler extends PlotMarker{constructor(t,e,i){super(e),this._picker=0,this._pos=Number.MAX_VALUE,this._rightClickMenu=0,this._rulers=null,i!=VLine&&i!=HLine||(this.setLineStyle(i),this.setLinePen(new Misc.Pen("blue"))),this.attach(t),this.setMouseTracking=function(t){this._picker.setMouseTracking(t)}}}Ruler.prototype.toString=function(){return"[Ruler]"},Ruler.prototype.setPicker=function(t){return!!t&&(this._picker=t,!0)},Ruler.prototype.setZoomerSearch=function(t){this._picker.setControlFlag(Static.ZoomerSearch,t),this._picker.initZoomer()},Ruler.prototype.setPannerSearch=function(t){this._picker.setControlFlag(Static.PannerSearch,t)},Ruler.prototype.setLock=function(t){this._picker.setControlFlag(Static.Locked,t),this._picker.clearDragCursor()},Ruler.prototype.lock=function(){return this._picker.controlFlag(Static.Locked)},Ruler.prototype.setTrackingTextStyle=function(t){this._picker.setTrackingTextStyle(t)},Ruler.prototype.trackingTextStyle=function(){return this._picker.trackingTextStyle()},Ruler.prototype.setTrackingTextFont=function(t){this._picker.setTrackerFont(t)},Ruler.prototype.trackingTextFont=function(){return this._picker.trackerFont()},Ruler.prototype.setTrackingTextColor=function(t){var e=this._picker.trackerFont();e.fontColor=t,this._picker.setTrackerFont(e)},Ruler.prototype.trackingTextColor=function(){return this._picker.trackerFont().color},Ruler.prototype.validatePosition=function(t,e){},Ruler.prototype.dragCursorShape=function(){return this._picker.dragCursorShape()},Ruler.prototype.setDragCursorShape=function(t){this._picker.setDragCursorShape(t)},Ruler.prototype.setRightClickMenu=function(t){};class RulerV extends Ruler{constructor(t,e,i){super(t,e,VLine),i&&(this._rulers=i),this._picker=new PickerV(t,this._pos,this)}}RulerV.prototype.setPosition=function(t){this._pos=t,this._picker._rulerPos=t,this.setXValue(this._pos)};class RulerH extends Ruler{constructor(t,e,i){super(t,e,HLine),i&&(this._rulers=i),this._picker=new PickerH(t,this._pos,this)}}RulerH.prototype.setPosition=function(t){this._pos=t,this._picker._rulerPos=t,this.setYValue(this._pos)},define("ruler",["static","plotMarker"],function(){});class MRulerV extends RulerV{constructor(t,e,i){super(t,e,i),this.rulers=function(){return this._rulers},this.validatePosition=function(){var t=!1,e=this.plot(),i=e.axisInterval(this.xAxis()),n=i.minValue(),s=i.maxValue(),a=e.transform(this._picker.xAxis(),n),r=e.transform(this._picker.xAxis(),s),o=e.transform(this._picker.xAxis(),this._pos),l=this._rulers.minX(),c=this._rulers.maxX(),u=2;Static.isMobile()&&(u=12);var h,d=.5*(this.rulers().ruler(0).linePen().width+this.rulers().ruler(1).linePen().width)+u,p=this._rulers.rulerId(this);0==p&&(this._rulers.ruler(1).isVisible()?(o>=(h=e.transform(this._picker.xAxis(),this._rulers.ruler(1)._pos))-d&&(this._pos=e.invTransform(this._picker.xAxis(),h-d),t=!0),o<a&&(this._pos=e.invTransform(this._picker.xAxis(),a),t=!0),this._rulers._curve&&this._pos<l&&(this._pos=l,t=!0)):(o<a&&(this._pos=e.invTransform(this._picker.xAxis(),a),t=!0),o>r&&(this._pos=e.invTransform(this._picker.xAxis(),r),t=!0),this._rulers._curve&&this._pos<l&&(this._pos=l,t=!0),this._rulers._curve&&this._pos>c&&(this._pos=c,t=!0)));1==p&&(this._rulers.ruler(0).isVisible()?(o<=(h=e.transform(this._picker.xAxis(),this._rulers.ruler(0)._pos))+d&&(this._pos=e.invTransform(this._picker.xAxis(),h+d),t=!0),o>r&&(this._pos=e.invTransform(this._picker.xAxis(),r),t=!0),this._rulers._curve&&this._pos>c&&(this._pos=c,t=!0)):(o<a&&(this._pos=e.invTransform(this._picker.xAxis(),a),t=!0),o>r&&(this._pos=e.invTransform(this._picker.xAxis(),r),t=!0),this._rulers._curve&&this._pos<l&&(this._pos=l,t=!0),this._rulers._curve&&this._pos>c&&(this._pos=c,t=!0)));return t}}setVisible(t){if(super.setVisible(t),t&&this._rulers){var e=this._rulers.rulerId(this);0==e&&this._rulers.ruler(1).isVisible()||1==e&&this._rulers.ruler(0).isVisible()}else this._pos=Number.MAX_VALUE,this._rulers.updateWatchesAndTable()}setLockAt(t){this.setPosition(t),this.setLock(!0),Static.trigger("positionChanged",[this,t])}}class MRulerH extends RulerH{constructor(t,e,i){super(t,e,i),this.rulers=function(){return this._rulers},this.validatePosition=function(){var t=this.plot(),e=t.axisInterval(this.yAxis()),i=e.minValue(),n=e.maxValue(),s=t.transform(this.yAxis(),i),a=t.transform(this.yAxis(),n),r=t.transform(this.yAxis(),this._pos),o=this._rulers.minY(),l=this._rulers.maxY(),c=2;Static.isMobile()&&(c=12);var u,h=.5*(this.rulers().ruler(2).linePen().width+this.rulers().ruler(3).linePen().width)+c,d=this._rulers.rulerId(this);2==d&&(this._rulers.ruler(3).isVisible()?(r<=(u=t.transform(this.yAxis(),this._rulers.ruler(3)._pos))+h&&(this._pos=t.invTransform(this.yAxis(),u+h)),r>s&&(this._pos=t.invTransform(this.yAxis(),s)),this._rulers._curve&&this._pos<o&&(this._pos=o)):(r<a&&(this._pos=t.invTransform(this.yAxis(),a)),r>s&&(this._pos=t.invTransform(this.yAxis(),s)),this._rulers._curve&&this._pos<o&&(this._pos=o),this._rulers._curve&&this._pos>l&&(this._pos=l)));3==d&&(this._rulers.ruler(2).isVisible()?(r>=(u=t.transform(this.yAxis(),this._rulers.ruler(2)._pos))-h&&(this._pos=t.invTransform(this.yAxis(),u-h)),r<a&&(this._pos=t.invTransform(this.yAxis(),a)),this._rulers._curve&&this._pos>l&&(this._pos=l)):(r>s&&(this._pos=t.invTransform(this.yAxis(),s)),r<a&&(this._pos=t.invTransform(this.yAxis(),a)),this._rulers._curve&&this._pos<o&&(this._pos=o),this._rulers._curve&&this._pos>l&&(this._pos=l)))}}setVisible(t){if(super.setVisible(t),t&&this._rulers){var e=this._rulers.rulerId(this);2==e&&this._rulers.ruler(3).isVisible()||3==e&&this._rulers.ruler(2).isVisible()}else this._pos=Number.MAX_VALUE,this._rulers.updateWatchesAndTable()}setLockAt(t){this.setPosition(t),this.setLock(!0),Static.trigger("positionChanged",[this,t])}}function Rulers(t,e){var i=this,n=[{name:"hide...",img:"images/hide.png",title:"hide the ruler.",fun:function(){t.rv.currentRuler.setVisible(!1),t.rv.currentRuler._picker.clearDragCursor(),t.rv.hasVisibleRuler()}},{name:"lock...",img:"images/lock.png",title:"lock the ruler in its current position.",fun:function(){t.rv.currentRuler.setLock(!0),t.rv.hasLockedRuler()}},{name:"lock at...",img:"images/lockAt.png",title:"lock the ruler at a specific position.",fun:function(){var e=0;e=t.rv.currentRuler instanceof RulerH?t.rv.currentRuler.yValue():t.rv.currentRuler.xValue(),Static.prompt("Enter a position",e,function(e){return t.rv.currentRuler.setLockAt(parseFloat(e)),!0},"small")}}],s=[{name:"Hide rulers",img:"images/hide.png",title:"Hide all rulers",fun:function(){t.rv.setVisible(!1)}},{name:"Show rulers",img:"images/show.png",title:"Show any hidden rulers",fun:function(){t.rv.setVisible(!0)}},{name:"Unlock rulers",img:"images/unlock.png",title:"Unlock any locked rulers",fun:function(){t.rv.unlockAllRulers()}}];if(this.setRulerDeselectMenu=function(t){s=t||[]},this._curve=0,this._watchTable=new WatchTable(this),this._editor=0,this._curveShapeItem=0,this._watchSetter=0,this._rulerList=null,this._watchList=[],this.sidebarVisible=!1,t.setAutoReplot(!0),this._rulerList=[new MRulerV(t,"v_ruler1",i),new MRulerV(t,"v_ruler2",i),new MRulerH(t,"h_ruler1",i),new MRulerH(t,"h_ruler2",i)],Static.isMobile())for(var a=0;a<4;++a){var r=this._rulerList[a].linePen();r.width=3*r.width}this._minX=0,this._maxX=0,this._minY=0,this._maxY=0,this.minX=function(){return this._minX},this.maxX=function(){return this._maxX},this.minY=function(){return this._minY},this.maxY=function(){return this._maxY},this.currentRuler=null;var o=t.getLayout().getCentralDiv(),l=!1;Static.bind("rulerSelected",function(t,e){i.currentRuler=e,l&&o.contextMenu("destroy"),l=!0,o.contextMenu(n,{triggerOn:"contextmenu",zIndex:1})}),Static.bind("rulerDeselected",function(){l&&o.contextMenu("destroy"),l=!0,o.contextMenu(s,{triggerOn:"contextmenu",zIndex:1})}),this.init(t),this.position=function(t){return t>-1&&t<4&&this._rulerList[t].isVisible()?this._rulerList[t]._pos:Number.MAX_VALUE},this.watch=function(t){return t>=0&&t<this._watchList.length?this._watchList[t]:null},this.addToWatchList=function(t){return this._watchList.push(t),this._watchList.length-1},this.setWatchEnabled=function(t,e){if(t>=0&&t<this._watchList.length){if(this._watchList[t].isEnable()==e)return;this._watchList[t].setEnable(e),e&&this.updateWatch(this._watchList[t]),this._watchTable.updateWatchTable()}},this.isWatchEnabled=function(t){return t>=0&&t<this._watchList.length&&this._watchList[t].isEnable()},Static.bind("showSidebar",function(t,e,n){"right"==e&&(i.sidebarVisible=n)}),this.updateWatchesAndTable=function(){i.sidebarVisible&&this._curve&&(this.updateWatches(),this._watchTable&&this._watchTable.updateWatchTable())},this.setVisible=function(t){this._rulerList.forEach(function(e){e.setVisible(t)}),t&&Static.trigger("curveAdjusted"),this.refresh()},this.hasVisibleRuler=function(){for(var t=0;t<4;++t)if(this._rulerList[t].isVisible())return!0;return!1},this.hasLockedRuler=function(){for(var t=0;t<4;++t)if(this._rulerList[t].lock())return!0;return!1},this.updateWatch=function(e){if(e.isEnable()){var i=t.autoReplot();t.setAutoReplot(!1),e.setCurveName(this._curve.title()),e.setRulerLeft(this.position(0)),e.setRulerRight(this.position(1)),e.setRulerBottom(this.position(2)),e.setRulerTop(this.position(3)),this._curve&&e.setCurve(this._curve),t.setAutoReplot(i),t.autoRefresh(),e.computeWatch()}},this.updateWatches=function(){var e=t.autoReplot();t.setAutoReplot(!1),this._watchList.forEach(function(t){i.updateWatch(t)}),t.setAutoReplot(e),t.autoRefresh()},this.setEnabled=function(t){this._rulerList.forEach(function(e){e._picker.setEnabled(t)})},this.setMouseTracking=function(t){this._rulerList.forEach(function(e){e._picker.setMouseTracking(t)})},this.setZoomerSearch(!0),this.setPannerSearch(!0),this.setMouseTracking(!0),Static.bind("zoomerAdded",function(t,e){i.setZoomerSearch(i._rulerList[0]._picker.controlFlag(Static.ZoomerSearch)),i.setMouseTracking(!0)}),Static.bind("pannerAdded",function(t,e){i.setPannerSearch(i._rulerList[0]._picker.controlFlag(Static.PannerSearch)),i.setMouseTracking(!0)}),Static.bind("currentCurveChanged",function(t,e){i.setCurrentCurve(e)}),t.rv=this,Static.trigger("rulerDeselected")}Rulers.prototype.unlockAllRulers=function(){for(var t=0;t<this._rulerList.length;++t)this._rulerList[t].setLock(!1)},Rulers.prototype.setCurrentCurve=function(t){this._curve!=t&&this.doSetCurrentCurve(t)},Rulers.prototype.refresh=function(){var t=this._rulerList[0].plot();if(this._curve&&this._curve.isVisible()){var e=t.axisInterval(this._rulerList[0].xAxis()),i=e.minValue(),n=e.maxValue(),s=t.axisInterval(this._rulerList[0].yAxis()),a=s.minValue(),r=s.maxValue();i=this._minX<i?i:this._minX,this._rulerList[0].setPosition(i),n=this._maxX<n?this._maxX:n,this._rulerList[1].setPosition(n),a=this._minY<a?a:this._minY,this._rulerList[2].setPosition(a),r=this._maxY<r?this._maxY:r,this._rulerList[3].setPosition(r),this.updateWatchesAndTable()}else this.resetXPositions(),this.resetYPositions()},Rulers.prototype.doSetRulersAxes=function(t,e){var i=this._rulerList[0].plot(),n=i.autoReplot();i.setAutoReplot(!1);this._rulerList[0].xAxis(),this._rulerList[0].yAxis();for(var s=0;s<this._rulerList.length;++s)this._rulerList[s].setAxes(t,e),this._rulerList[s]._picker.setAxis(t,e);i.setAutoReplot(n),i.autoRefresh()},Rulers.prototype.adjustToCurve=function(t){this._curve=t,this._curve&&(this._curve.isVisible()&&(this._minX=this._curve.minXValue(),this._maxX=this._curve.maxXValue(),this._minY=this._curve.minYValue(),this._maxY=this._curve.maxYValue()),this.doSetRulersAxes(this._curve.xAxis(),this._curve.yAxis()),this._curveShapeItem),this.refresh()},Rulers.prototype.doSetCurrentCurve=function(t){this._curve;this.adjustToCurve(t)},Rulers.prototype.setCurrentCurve=function(t){this._curve!=t&&this.doSetCurrentCurve(t)},Rulers.prototype.currentCurve=function(){return this._curve},Rulers.prototype.init=function(t){var e=this;this._rulerList;Static.bind("positionChanged",function(t,i,n){e.updateWatchesAndTable()}),Static.bind("pointAdded pointRemoved",function(t,i){e.doSetCurrentCurve(i)}),Static.bind("axisChanged",function(t,i,n){e.currentCurve()===n&&e.adjustToCurve(n)}),this._rulerList[0].linePen().color="red",this._rulerList[2].linePen().color="red",this.resetXPositions(),this.resetYPositions()},Rulers.prototype.setZoomerSearch=function(t){this._rulerList.forEach(function(e){e.setZoomerSearch(t),e._picker.initZoomer()})},Rulers.prototype.setPannerSearch=function(t){this._rulerList.forEach(function(e){e.setPannerSearch(t),e._picker.initPanner()})},Rulers.prototype.setPosition=function(t,e){if(e=parseFloat(e),this._rulerList[t]._pos==e)return e;var i=this._rulerList[t]._pos;return this._rulerList[t]._pos=e,this._rulerList[t].validatePosition(),this._rulerList[t]._pos!==i&&this._rulerList[t].setPosition(this._rulerList[t]._pos),this._rulerList[t]._pos},Rulers.prototype.resetXPositions=function(){var t=this._rulerList[0].plot(),e=t.autoReplot();t.setAutoReplot(!1);var i=t.axisInterval(this._rulerList[0].xAxis());this._curve&&this._curve.isVisible()?(i.minValue()>this._minX?this._rulerList[0].setPosition(i.minValue()):this._rulerList[0].setPosition(this._minX),i.maxValue()<this._maxX?this._rulerList[1].setPosition(i.maxValue()):this._rulerList[1].setPosition(this._maxX)):(this._rulerList[0].setPosition(i.minValue()),this._rulerList[1].setPosition(i.maxValue())),t.setAutoReplot(e),t.autoRefresh()},Rulers.prototype.resetYPositions=function(){var t=this._rulerList[0].plot(),e=t.autoReplot();t.setAutoReplot(!1);var i=t.axisInterval(this._rulerList[0].yAxis());this._curve&&this._curve.isVisible()?(this._rulerList[2].setPosition(this._minY),this._rulerList[3].setPosition(this._maxY),i.minValue()>this._minY?this._rulerList[2].setPosition(i.minValue()):this._rulerList[2].setPosition(this._minY),i.maxValue()<this._maxY?this._rulerList[3].setPosition(i.maxValue()):this._rulerList[3].setPosition(this._maxY)):(this._rulerList[2].setPosition(i.minValue()),this._rulerList[3].setPosition(i.maxValue())),t.setAutoReplot(e),t.autoRefresh()},Rulers.prototype.ruler=function(t){return t<4&&t>=0?this._rulerList[t]:0},Rulers.prototype.rulerId=function(t){return t?this._rulerList.indexOf(t):-1},Rulers.prototype.preventDragging=function(t){for(var e=0;e<this._rulerList.length;++e)this._rulerList[e]._picker.preventDragging(t)},Rulers.prototype.setRulersXAxis=function(t){var e=this._rulerList[0].plot(),i=e.autoReplot();e.setAutoReplot(!1);for(var n=0;n<this._rulerList.length;++n)this._rulerList[n].setXAxis(t),this._rulerList[n]._picker.setAxis(t,this._rulerList[n].yAxis());this._curveShapeItem&&this._curveShapeItem.setAxes(t,this._rulerList[0].yAxis()),e.setAutoReplot(i),e.autoRefresh()},Rulers.prototype.setRulersYAxis=function(t){var e=this._rulerList[0].plot(),i=e.autoReplot();e.setAutoReplot(!1);for(var n=0;n<this._rulerList.length;++n)this._rulerList[n].setYAxis(t),this._rulerList[n]._picker.setAxis(this._rulerList[n].xAxis(),t);this._curveShapeItem&&this._curveShapeItem.setAxes(_rulerList[0].xAxis(),t),e.setAutoReplot(i),e.autoRefresh()};class WatchTable{constructor(t){this.removeAllRows=function(){for(var t=$("#watchTableBody").children(),e=0;e<t.length;++e)$("#watchTableBody")[0].removeChild(t[e])},this.insertInfoRow=function(t){!function(t){var e=t.name(),i=t.value();if("number"==t.valueType||"text"==t.valueType){for(var n=e;-1!=n.indexOf(" ");)n=n.replace(" ","");var s=$("<tr><td>"+e+"</td></tr>");$("#watchTableBody").append(s);var a=$("<td><input id="+n+" type="+t.valueType+'  style="width:100%" value='+i+" /></td>");s.append(a),$("#"+n).on("change",t.cb)}else $("#watchTableBody").append($("<tr><td>"+e+"</td><td>"+i+"</td></tr>"))}(t)},this.updateWatchTable=function(){if(this.removeAllRows(),t._curve&&t._curve.isVisible())for(var e=t._watchList.length,i=0;i<e;++i){var n=t.watch(i);n.isEnable()&&this.insertInfoRow(n)}}}}define("rulers",["static","mpicker","ruler"],function(){});class SideBar{constructor(t,e,i){var n=this;n.sideBarVisible=!1;var s=i||"right",a=$('<div class="grid-container" style="position: absolute; border: 1px solid lightgray;"/>');t.append(a),a.css("bottom",0),a.css("top",0);class r{constructor(){this.visible=!0,this.headerElement=null,this.bodyElement=null,this.element=null,this.anchorPosition=""}}for(var o=[],l=0,c=0;c<e;++c){var u=new r;u.anchorPosition=s,u.element=$('<div class="grid-item"></div>'),a.append(u.element),u.headerElement=$('<div class="grid-item-header"></div>'),u.element.append(u.headerElement),u.bodyElement=$('<div class="grid-item-body"></div>'),u.element.append(u.bodyElement),o.push(u),++l}this.hideAllGridItems=function(){for(var t=0;t<e;++t)this.doShowGridItem(t,!1)},this.setHeaderElement=function(t,e){o[t].headerElement.css("height",e+"px"),this.setGridItemHeigth()},this.setGridItemHeigth=function(){parseInt(a.css("height"));for(var t=1/l*100,e=0;e<o.length;++e)if(o[e].visible){o[e].element.css("height",t+"%");var i=parseInt(o[e].element.css("height")),n=100*(1-parseInt(o[e].headerElement.css("height"))/i);o[e].bodyElement.css("height",n+"%")}},this.doShowGridItem=function(t,e){if(o[t].visible!=e)return e?(this.sideBarVisible||this.showSidebar(!0),o[t].element.show(),++l):(o[t].element.hide(),0===--l&&this.showSidebar(!1)),o[t].visible=e,this.setGridItemHeigth(),Static.trigger("showGridItem",[s,t,e]),l},this.gridItem=function(t){return t<o.length?o[t]:null},this.gridItemCount=function(){return o.length},this.setGridItemHeigth(),a.css("width","20%"),this.isSideBarVisible=function(){return n.sideBarVisible},this.sideBarWidth=function(){return 20},this.setTop=function(t){a.css("top",t)},this.setBorderStyle=function(t){a.css("border-style",t)},this.setBorderWidth=function(t){a.css("border-width",t)},this.setBackgroundColor=function(t){a.css("background-color",t)},this.html=function(){return a};var h=!1;Static.bind("beforePrint",function(){n.sideBarVisible&&(h=!0,n.showSidebar(!1))}),Static.bind("afterPrint",function(){h&&(h=!1,n.showSidebar(!0))}),this.anchorPosition=function(){return s},this.getIndexFromHeaderElement=function(t){for(var e=0;e<n.gridItemCount();++e)if(n.gridItem(e).headerElement[0].offsetTop==t.offsetTop&&n.gridItem(e).headerElement[0].innerText==t.innerText)return e;return-1},this.hideGridItemWithHeaderElement=function(t){for(var e=0;e<n.gridItemCount();++e)if(n.gridItem(e).headerElement[0].offsetTop==t.offsetTop&&n.gridItem(e).headerElement[0].innerText==t.innerText)return n.showGridItem(e,!1);return-1},this.hideAllGridItems(),a.hide()}showSidebar(t){if(this.isSideBarVisible()!=t){this.sideBarVisible=t,t?(this.html().show(),"right"==this.anchorPosition()?this.html().css("right","0.5%"):"left"==this.anchorPosition()&&this.html().css("left","0.5%")):this.html().hide();var e=parseFloat($("#plotDiv").css("width"))/parseFloat($("#plotDiv").parent().css("width"))*100;t?"right"==this.anchorPosition()?$("#plotDiv").css("width",e-this.sideBarWidth()+"%"):"left"==this.anchorPosition()&&($("#plotDiv").css("left",this.sideBarWidth()+"%"),$("#plotDiv").css("width",e-this.sideBarWidth()+"%")):($("#plotDiv").css("width",e+this.sideBarWidth()+"%"),"left"==this.anchorPosition()&&$("#plotDiv").css("left","0%")),Static.trigger("showSidebar",[this.anchorPosition(),t])}}showGridItem(t,e){this.doShowGridItem(t,e)}}define("sideBar",function(){});class InfoSideBar extends SideBar{constructor(t){super($("#plotDiv").parent(),1,"right");var e=this,i=t;this.plot=function(){return i},Static.bind("paneClose",function(t,i){e.hideGridItemWithHeaderElement(i)}),this.setHeaderElement(0,40)}showGridItem(t,e){this.doShowGridItem(t,e)}showSidebar(t){this.isSideBarVisible()!=t&&(super.showSidebar(t),this.plot().autoRefresh())}}define("infoSidebar",["sideBar"],function(){}),function(t){"use strict";var e,i,n;e=function(){function e(e,i,n){var s;this.row=e,this.tree=i,this.settings=n,this.id=this.row.data(this.settings.nodeIdAttr),null!=(s=this.row.data(this.settings.parentIdAttr))&&""!==s&&(this.parentId=s),this.treeCell=t(this.row.children(this.settings.columnElType)[this.settings.column]),this.expander=t(this.settings.expanderTemplate),this.indenter=t(this.settings.indenterTemplate),this.cell=t(this.settings.cellTemplate),this.children=[],this.initialized=!1,this.treeCell.prepend(this.indenter),this.treeCell.wrapInner(this.cell)}return e.prototype.addChild=function(t){return this.children.push(t)},e.prototype.ancestors=function(){var t,e;for(e=this,t=[];e=e.parentNode();)t.push(e);return t},e.prototype.collapse=function(){return this.collapsed()?this:(this.row.removeClass("expanded").addClass("collapsed"),this._hideChildren(),this.expander.attr("title",this.settings.stringExpand),this.initialized&&null!=this.settings.onNodeCollapse&&this.settings.onNodeCollapse.apply(this),this)},e.prototype.collapsed=function(){return this.row.hasClass("collapsed")},e.prototype.expand=function(){return this.expanded()?this:(this.row.removeClass("collapsed").addClass("expanded"),this.initialized&&null!=this.settings.onNodeExpand&&this.settings.onNodeExpand.apply(this),t(this.row).is(":visible")&&this._showChildren(),this.expander.attr("title",this.settings.stringCollapse),this)},e.prototype.expanded=function(){return this.row.hasClass("expanded")},e.prototype.hide=function(){return this._hideChildren(),this.row.hide(),this},e.prototype.isBranchNode=function(){return this.children.length>0||!0===this.row.data(this.settings.branchAttr)},e.prototype.updateBranchLeafClass=function(){this.row.removeClass("branch"),this.row.removeClass("leaf"),this.row.addClass(this.isBranchNode()?"branch":"leaf")},e.prototype.level=function(){return this.ancestors().length},e.prototype.parentNode=function(){return null!=this.parentId?this.tree[this.parentId]:null},e.prototype.removeChild=function(e){var i=t.inArray(e,this.children);return this.children.splice(i,1)},e.prototype.render=function(){var e,i,n=this.settings;return!0===n.expandable&&this.isBranchNode()&&(e=function(e){return t(this).parents("table").treetable("node",t(this).parents("tr").data(n.nodeIdAttr)).toggle(),e.preventDefault()},this.indenter.html(this.expander),(i=!0===n.clickableNodeNames?this.treeCell:this.expander).off("click.treetable").on("click.treetable",e),i.off("keydown.treetable").on("keydown.treetable",function(t){13==t.keyCode&&e.apply(this,[t])})),this.indenter[0].style.paddingLeft=this.level()*n.indent+"px",this},e.prototype.reveal=function(){return null!=this.parentId&&this.parentNode().reveal(),this.expand()},e.prototype.setParent=function(t){return null!=this.parentId&&this.tree[this.parentId].removeChild(this),this.parentId=t.id,this.row.data(this.settings.parentIdAttr,t.id),t.addChild(this)},e.prototype.show=function(){return this.initialized||this._initialize(),this.row.show(),this.expanded()&&this._showChildren(),this},e.prototype.toggle=function(){return this.expanded()?this.collapse():this.expand(),this},e.prototype._hideChildren=function(){var t,e,i,n,s;for(s=[],e=0,i=(n=this.children).length;e<i;e++)t=n[e],s.push(t.hide());return s},e.prototype._initialize=function(){var t=this.settings;return this.render(),!0===t.expandable&&"collapsed"===t.initialState?this.collapse():this.expand(),null!=t.onNodeInitialized&&t.onNodeInitialized.apply(this),this.initialized=!0},e.prototype._showChildren=function(){var t,e,i,n,s;for(s=[],e=0,i=(n=this.children).length;e<i;e++)t=n[e],s.push(t.show());return s},e}(),i=function(){function i(t,e){this.table=t,this.settings=e,this.tree={},this.nodes=[],this.roots=[]}return i.prototype.collapseAll=function(){var t,e,i,n,s;for(s=[],e=0,i=(n=this.nodes).length;e<i;e++)t=n[e],s.push(t.collapse());return s},i.prototype.expandAll=function(){var t,e,i,n,s;for(s=[],e=0,i=(n=this.nodes).length;e<i;e++)t=n[e],s.push(t.expand());return s},i.prototype.findLastNode=function(t){return t.children.length>0?this.findLastNode(t.children[t.children.length-1]):t},i.prototype.loadRows=function(i){var n,s,a;if(null!=i)for(a=0;a<i.length;a++)null!=(s=t(i[a])).data(this.settings.nodeIdAttr)&&(n=new e(s,this.tree,this.settings),this.nodes.push(n),this.tree[n.id]=n,null!=n.parentId&&this.tree[n.parentId]?this.tree[n.parentId].addChild(n):this.roots.push(n));for(a=0;a<this.nodes.length;a++)n=this.nodes[a].updateBranchLeafClass();return this},i.prototype.move=function(e,i){var n=e.parentNode();return e!==i&&i.id!==e.parentId&&-1===t.inArray(e,i.ancestors())&&(e.setParent(i),this._moveRows(e,i),1===e.parentNode().children.length&&e.parentNode().render()),n&&n.updateBranchLeafClass(),e.parentNode()&&e.parentNode().updateBranchLeafClass(),e.updateBranchLeafClass(),this},i.prototype.removeNode=function(e){return this.unloadBranch(e),e.row.remove(),null!=e.parentId&&e.parentNode().removeChild(e),delete this.tree[e.id],this.nodes.splice(t.inArray(e,this.nodes),1),this},i.prototype.render=function(){var t,e,i;for(t=0,e=(i=this.roots).length;t<e;t++)i[t].show();return this},i.prototype.sortBranch=function(t,e){return t.children.sort(e),this._sortChildRows(t),this},i.prototype.unloadBranch=function(t){var e,i=t.children.slice(0);for(e=0;e<i.length;e++)this.removeNode(i[e]);return t.children=[],t.updateBranchLeafClass(),this},i.prototype._moveRows=function(t,e){var i,n=t.children;for(t.row.insertAfter(e.row),t.render(),i=n.length-1;i>=0;i--)this._moveRows(n[i],t)},i.prototype._sortChildRows=function(t){return this._moveRows(t,t)},i}(),n={init:function(e,n){var s;return s=t.extend({branchAttr:"ttBranch",clickableNodeNames:!1,column:0,columnElType:"td",expandable:!1,expanderTemplate:"<a href='#'>&nbsp;</a>",indent:19,indenterTemplate:"<span class='indenter'></span>",cellTemplate:"",initialState:"collapsed",nodeIdAttr:"ttId",parentIdAttr:"ttParentId",stringExpand:"Expand",stringCollapse:"Collapse",onInitialized:null,onNodeCollapse:null,onNodeExpand:null,onNodeInitialized:null},e),this.each(function(){var e,a=t(this);return(n||void 0===a.data("treetable"))&&((e=new i(this,s)).loadRows(this.rows).render(),a.addClass("treetable").data("treetable",e),null!=s.onInitialized&&s.onInitialized.apply(e)),a})},destroy:function(){return this.each(function(){return t(this).removeData("treetable").removeClass("treetable")})},collapseAll:function(){return this.data("treetable").collapseAll(),this},collapseNode:function(t){var e=this.data("treetable").tree[t];if(!e)throw new Error("Unknown node '"+t+"'");return e.collapse(),this},expandAll:function(){return this.data("treetable").expandAll(),this},expandNode:function(t){var e=this.data("treetable").tree[t];if(!e)throw new Error("Unknown node '"+t+"'");return e.initialized||e._initialize(),e.expand(),this},loadBranch:function(e,i){var n=this.data("treetable").settings,s=this.data("treetable").tree;if(i=t(i),null==e)this.append(i);else{var a=this.data("treetable").findLastNode(e);i.insertAfter(a.row)}return this.data("treetable").loadRows(i),i.filter("tr").each(function(){s[t(this).data(n.nodeIdAttr)].show()}),null!=e&&e.render().expand(),this},move:function(t,e){var i,n;return n=this.data("treetable").tree[t],i=this.data("treetable").tree[e],this.data("treetable").move(n,i),this},node:function(t){return this.data("treetable").tree[t]},removeNode:function(t){var e=this.data("treetable").tree[t];if(!e)throw new Error("Unknown node '"+t+"'");return this.data("treetable").removeNode(e),this},reveal:function(t){var e=this.data("treetable").tree[t];if(!e)throw new Error("Unknown node '"+t+"'");return e.reveal(),this},sortBranch:function(e,i){var n,s=this.data("treetable").settings;return n=i=i||s.column,t.isNumeric(i)&&(n=function(e,n){var s,a,r;return(a=(s=function(e){var n=e.row.find("td:eq("+i+")").text();return t.trim(n).toUpperCase()})(e))<(r=s(n))?-1:a>r?1:0}),this.data("treetable").sortBranch(e,n),this},unloadBranch:function(t){return this.data("treetable").unloadBranch(t),this}},t.fn.treetable=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?t.error("Method "+e+" does not exist on jQuery.treetable"):n.init.apply(this,arguments)},window.TreeTable||(window.TreeTable={}),window.TreeTable.Node=e,window.TreeTable.Tree=i}(jQuery),define("treetable",function(){});class Pane{constructor(t){var e=this;e.paneParent=$("<div/>"),t.append(e.paneParent),this.setPaneHeight=function(t){e.paneParent.css("height",t)},this.setHeader=function(t,e,i){i=i||!1;var n=this.header(e);if(i){var s=$('<div><button style="position: absolute; right:1px">X</button></div>');t.append(s),s.on("click",function(){Static.trigger("paneClose",t)})}t.append(n)}}header(t){var e=$('<div style="text-align:center; padding-top: 10px; border-style: solid; border-width:1px; border-color:#666666; font-size: 16px; color:#666666"/>');return e.append("<label>"+t+"</label>"),e}}define("pane",["treetable"],function(){});class InfoPropertiesPane extends Pane{constructor(t,e){super(t);var i=this;i.setHeader(e.rightSidebar.gridItem(0).headerElement,"Sidebar",!0);var n=$('<div style="background-color:rgba(249, 251, 221, 0.8);  ">                <div style="margin:4px">                <select id="currentCurve" style="width:100%">                </select></div>                <div><input type="text" id="fnDisplay" style="width:100%; background-color:rgba(255, 255, 255, 0.8); padding-left:6px" readonly /></div>                <div><label style="padding-left:6px">onchcange: <input id="onchange" type="checkbox" readonly /> </label>\t\t\t\tdamp: <input id="damp" style="width:30%" type="number" min="1" value="30000" step="500"/>\t\t\t\t</div>                                <div style="height:30%; overflow: auto">                <div id="coeff_cont0" style="background-color:lightBlue; margin:2px; border-radius:4px">                <div style="">Coefficient:<b><span id="coeff0">?</span></b></div>                <div style="margin:4px">                <div style="" title="A coefficient in the function that could be ajusted">                value:<input id="coeff_val0" style="width:60%" type="number" value="1" />                </div>                </div>                </div>                <br>                <div id="coeff_cont1" style="background-color:lightBlue; margin:2px; border-radius:4px">                <div style="">Coefficient:<b><span id="coeff1">?</span></b></div>                <div style="margin:4px">                <div style="" title="A coefficient in the function that could be ajusted">                value:<input id="coeff_val1" style="width:60%" type="number" value="1" />                </div>                </div>                </div>                <br>                <div id="coeff_cont2" style="background-color:lightBlue; margin:2px; border-radius:4px">                <div style="">Coefficient:<b><span id="coeff2">?</span></b></div>                <div style="margin:4px">                <div style="" title="A coefficient in the function that could be ajusted">                value:<input id="coeff_val2" style="width:60%" type="number" value="1" />                </div>                </div>                </div>                <br>                <div id="coeff_cont3" style="background-color:lightBlue; margin:2px; border-radius:4px">                <div style="">Coefficient:<b><span id="coeff3">?</span></b></div>                <div style="margin:4px">                <div style="" title="A coefficient in the function that could be ajusted">                value:<input id="coeff_val3" style="width:60%" type="number" value="1" />                </div>                </div>                </div>                <br>                <div id="coeff_cont4" style="background-color:lightBlue; margin:2px; border-radius:4px">                <div style="">Coefficient:<b><span id="coeff4">?</span></b></div>                <div style="margin:4px">                <div style="" title="A coefficient in the function that could be ajusted">                value:<input id="coeff_val4" style="width:60%" type="number" value="1" />                </div>                </div>                </div>                </div>                                <div style="text-align:center"><h4>Watches</h4></div>                <div class="table-responsive" style="height: 47%">                                                <table class="table table-bordered" id="watchTable">                <thead>                <tr>                <th>Watch</th>                <th>Value</th>                </tr>                </thead>                <tbody id="watchTableBody">                </tbody>                </table>                                                </div>                </div>');function s(){e.itemList(Static.Rtti_PlotCurve);!function(){for(var t=0;t<5;++t)$("#coeff_cont"+t).hide()}();var t=e.findPlotCurve($("#currentCurve").val());if(t){$("#fnDisplay").val(""),t.fn&&$("#fnDisplay").val("f("+t.variable+")="+t.fn);for(var i=3e4,n=(t.upperX-t.lowerX)/(i/1e4),s=t.coeffs||[],a=s.length,r=0;r<a;++r)$("#coeff_val"+r).attr("step",n);$("#damp").on("input",function(){var e=parseInt($("#damp").val());!_.isFinite(e)||e<1?$("#damp").val(i):i=e,n=(t.upperX-t.lowerX)/(i/1e4);for(var s=0;s<a;++s)$("#coeff_val"+s).attr("step",n)}),a>5&&(a=5);for(r=0;r<a;++r)$("#coeff"+r).html(s[r]),$("#coeff_val"+r).attr("step",n),$("#coeff_val"+r).val(t.coeffsVal[r]),$("#coeff_cont"+r).show()}}function a(){!function(){for(var t=$("#currentCurve").children(),i=0;i<t.length;++i)$("#currentCurve")[0].removeChild(t[i]);var n=e.itemList(Static.Rtti_PlotCurve);for(i=0;i<n.length;++i)if(n[i].isVisible()){var s=$("<option>"+n[i].title()+"</option>");s.attr("value",n[i].title()),$("#currentCurve").append(s)}}(),s(),Static.trigger("currentCurveChanged",e.findPlotCurve($("#currentCurve").val()))}i.paneParent.append(n),e.sidebar=i,this.sidebarDlg=function(){return n};var r=!1;this.sidebarReDisplay=function(){return r},this.setSidebarReDisplay=function(t){r=t},this.setTop=function(t){n.css("top",t)};var o=_.once(function(){$("#currentCurve").change(function(){Static.total_volume=void 0,Static.total_area=void 0,Static.prevStart=void 0,Static.prevEnd=void 0,s(),Static.trigger("currentCurveChanged",e.findPlotCurve($("#currentCurve").val()))}),$("#coeff_val0, #coeff_val1, #coeff_val2, #coeff_val3, #coeff_val4").on("input",function(){$("#onchange")[0].checked||c($(this))&&l()}),$("#coeff_val0, #coeff_val1, #coeff_val2, #coeff_val3, #coeff_val4").on("change",function(){var t;c($(this))?$("#onchange")[0].checked&&l():$(this).val((t=$(this),e.findPlotCurve($("#currentCurve").val()).coeffsVal[["coeff_val0","coeff_val1","coeff_val2","coeff_val3","coeff_val4"].indexOf(t[0].id)]))})});this.initSidebar=function(){a(),o()},this.currentCurveName=function(){return $("#currentCurve").val()};function l(){for(var t=e.findPlotCurve($("#currentCurve").val()),i=t.coeffs,n=t.fn,s=0;s<i.length;++s){for(;-1!=n.indexOf(i[s]);)n=n.replace(i[s],$("#coeff_val"+s).val());t.coeffsVal[s]=$("#coeff_val"+s).val()}var a=t.data();t.unboundedRange?a.setFn(n):a.setSamples(Utility.makeSamples({fx:n,lowerX:t.lowerX,upperX:t.upperX,numOfSamples:t.numOfSamples})),Static.trigger("curveAdjusted"),e.autoRefresh()}function c(t){var i;e.findPlotCurve($("#currentCurve").val()).coeffsVal,["coeff_val0","coeff_val1","coeff_val2","coeff_val3","coeff_val4"].indexOf(t[0].id);return i=t.val(),!!_.isFinite(parseFloat(i))}Static.bind("titleChange",function(){a()}),Static.bind("pointAdded pointRemoved",function(t,e){$("#currentCurve").val(e.title)}),Static.bind("itemAttached",function(t,n,s){n.rtti==Static.Rtti_PlotCurve&&(s||e.itemList(Static.Rtti_PlotCurve).length&&e.hasVisiblePlotCurve()||i.showSidebar(!1),Static.trigger("visibilityChange",[n,s]))}),i.initSidebar()}}define("infoPropertiesPane",["pane"],function(){});class PlotSideBar extends SideBar{constructor(t){super($("#plotDiv").parent(),2,"left");var e=this,i=t;this.plot=function(){return i},Static.bind("paneClose",function(t,i){e.hideGridItemWithHeaderElement(i)})}showSidebar(t){this.isSideBarVisible()!=t&&(super.showSidebar(t),this.plot().autoRefresh())}showGridItem(t,e){this.doShowGridItem(t,e)}}define("plotSideBar",["sideBar"],function(){});class PropertiesPane extends Pane{static fontsDisplay(){return["Arial","Arial Black","Comic Sans MS","Courier New","Georgia","Impact","Lucida Console","Lucida Sans Unicode","PalatinoLinotype","Tahoma","Times New Roman","Trebuchet MS","Verdana","Gill Sans"]}static fontGroup(t){return["Arial,Arial,Helvetica,sans-serif","Arial Black,Arial Black,Gadget,sans-serif","Comic Sans MS,Comic Sans MS,cursive","Courier New,Courier New,Courier,monospace","Georgia,Georgia,serif","Impact,Charcoal,sans-serif","Lucida Console,Monaco,monospace","Lucida Sans Unicode,Lucida Grande,sans-serif","Palatino Linotype,Book Antiqua,Palatino,serif","Tahoma,Geneva,sans-serif","Times New Roman,Times,serif","Trebuchet MS,Helvetica,sans-serif","Verdana,Geneva,sans-serif","Gill Sans,Geneva,sans-serif"][t]}constructor(t){super(t);var e=$("<table/>");this.paneParent.append(e),this.init=function(t){var i=t||{expandable:!0,clickableNodeNames:!0};e.treetable(i)},this.getElementValueDataAttribute=function(t){for(var i=null,n=e[0].getElementsByTagName("TR"),s=0;s<n.length;++s)if(n[s].getAttribute("data-tt-id")==t){i=n[s];break}if(i){var a=i.children;return 2!==a.length?null:$(a[1].children[0])}return null},this.getTableRowByPropertyName=function(t){for(var i=e[0].getElementsByTagName("TR"),n=0;n<i.length;++n)if(i[n].cells[0].innerText==t)return $(i[n]);return null},this.getTableRowByPropertyId=function(t){for(var i=e[0].getElementsByTagName("TR"),n=0;n<i.length;++n)if(i[n].getAttribute("data-tt-id")==t)return $(i[n]);return null},this.getElementValueDataByPropertyName=function(t){for(var i=null,n=e[0].getElementsByTagName("TR"),s=0;s<n.length;++s)if(n[s].cells[0].innerText==t){i=n[s];break}if(i){var a=i.children;return 2!==a.length?null:$(a[1].children[0])}return null},this.setFontSize=function(t){e.css("font-size",t)},this.addProperty=function(t){var i=function(t){void 0==t.type&&(t.type="span");var e="";t.disabled&&(e="disabled");var i="";t.checked&&(i="checked");var n="";void 0!==t.value&&(n="value="+t.value);var s=null;if("text"==t.type)return $("<tr><td>"+t.name+'</td><td><input type="text" '+e+" "+n+' style="width:100%"/></td></tr>');if("button"==t.type)return $("<tr><td>"+t.name+'</td><td><input type="button" '+e+' value="..." /></td></tr>');if("number"==t.type)return $("<tr><td>"+t.name+'</td><td><input type="number" '+e+" step ="+t.step+" min ="+t.min+" max="+t.max+" "+n+' style="width:100%"/></td></tr>');if("checkbox"==t.type)return $("<tr><td>"+t.name+"</td><td><input "+e+' type="checkbox" style="width:100%" '+i+"/></td></tr>");if("radio"==t.type)return $("<tr><td>"+t.name+"</td><td><input "+e+' type="radio" name='+t.group+' style="width:100%" '+i+"/></td></tr>");if("color"==t.type){var a="#000000";return t.value&&(a=Static.colorNameToHex(t.value)),$("<tr><td>"+t.name+"</td><td><input "+e+' type="color" value='+a+" /></td></tr>")}if("span"==t.type)return $("<tr><td>"+t.name+'</td><td><span style="width:100%"/></td></tr>');if("select"==t.type){s=$("<tr><td>"+t.name+"</td></tr>");var r=$("<select "+e+" />");if(t.selectorOptions)for(var o=0;o<t.selectorOptions.length;++o)r.append($("<option>"+t.selectorOptions[o]+"</option>"));return s.append($("<td/>").append(r))}return s}(t);if(!i)return null;var n=null;return i.attr("data-tt-id",t.id),void 0!==t.parentId&&i.attr("data-tt-parent-id",t.parentId),"text"!=t.type&&"number"!=t.type&&"color"!=t.type&&"checkbox"!=t.type&&"radio"!=t.type||(n=$(i[0].getElementsByTagName("INPUT"))).on("change",function(){t.fun&&("checkbox"==t.type?t.fun($(this)[0].checked):t.fun($(this).val()))}),"select"==t.type&&(n=$(i[0].getElementsByTagName("SELECT"))).on("change",function(){t.fun&&t.fun($(this)[0].selectedIndex)}),"button"==t.type&&(n=$(i[0].getElementsByTagName("INPUT"))).on("click",function(){t.fun&&t.fun()}),"span"==t.type&&(n=$(i[0].getElementsByTagName("SPAN"))),e.append(i),n}}header(t){var e=$("<table />");return e.append('<caption style="text-align:center; border-width:4px; color:black"><b>'+t+"</b></caption>"),e.append('<thead style="background-color:lightgray">                <tr style="border-style:solid; border-width:1px">                <th style="border-style:none;"><label>Property</label></th>                <th style="border-style:none; text-align:right"><label style="margin-right:4px">Value</label></th>                </tr>                </thead>'),e}}define("propertiesPane",["pane"],function(){});class CurvePropertiesPane extends PropertiesPane{constructor(t,e){super(t);var i=this;i.setHeader(e.leftSidebar.gridItem(0).headerElement,"Curve Properties",!0);var n=this.addProperty({name:"Curve",id:"currentCurve",type:"select",fun:function(t){let i=e.findPlotCurve(n.val());R(i),Static.trigger("currentCurveChangedViaPropertiesPane",i)}});this.addProperty({name:"Rename",id:"renameCurve",type:"button",fun:function(){c=n[0].selectedIndex,Utility.curveRenameDlg(n.val(),e)}}),this.addProperty({name:"Remove",id:"removeCurve",type:"button",fun:function(){e.findPlotCurve(n.val()).detach()}}),this.addProperty({name:"Fit",id:"fitCurve",type:"button",fun:function(){e.curveFitDlg.curveFitCb(e.findPlotCurve(n.val()))}}),this.addProperty({name:"Legend Attributes",id:"legendAttributes",type:"button",fun:function(){e.curveAttributeDlg.curveAttributeCb(e.findPlotCurve(n.val()))}}),this.addProperty({name:"Orientation",id:"orientation",type:"select",selectorOptions:["Vertical","Horizontal"],fun:function(t){let i=e.findPlotCurve(n.val());1==t?i.setOrientation(Horizontal):i.setOrientation(Vertical)}});var s=this.addProperty({name:"Style",id:"curveStyle",type:"select",selectorOptions:["Lines (Default)","Sticks","Steps","Dots","NoCurve"],fun:function(t){e.findPlotCurve(n.val()).setStyle(u[t])}}),a=this.addProperty({name:"Axes",id:"curveAxes"}),r=this.addProperty({name:"Horizontal",id:"horizontal",parentId:"curveAxes",type:"select",selectorOptions:["Bottom","Top"],fun:function(t){let i=e.findPlotCurve(n.val());var s=0==t?xBottom:xTop;i.setXAxis(s),h(i),Static.trigger("curveAxisChangedViaPropertiesPane",[s,i])}}),o=this.addProperty({name:"Vertical",id:"vertical",parentId:"curveAxes",type:"select",selectorOptions:["Left","Right"],fun:function(t){let i=e.findPlotCurve(n.val());var s=0==t?yLeft:yRight;i.setYAxis(s),h(i),Static.trigger("curveAxisChangedViaPropertiesPane",[s,i])}});function l(){let t=n.children();for(let e=0;e<t.length;++e)n[0].removeChild(t[e]);let i=e.itemList(Static.Rtti_PlotCurve);for(let t=0;t<i.length;++t){let e=$("<option>"+i[t].title()+"</option>");e.attr("value",i[t].title()),n.append(e)}return Static.trigger("currentCurveChangedViaPropertiesPane",i[0]),null}this.addProperty({name:"Pen",id:"curvePen"}),this.addProperty({name:"Color",id:"curvePenColor",parentId:"curvePen",type:"color",fun:function(t){let i=e.findPlotCurve(n.val()),s=i.pen();s.color=t,i.setPen(s),R(i)}}),this.addProperty({name:"Style",id:"curvePenStyle",parentId:"curvePen",type:"select",selectorOptions:["solid","dot","dash","dash-dot","dash-dot-dot"],fun:function(t){let i=e.findPlotCurve(n.val()),s=i.pen();s.style=f[t],i.setPen(s),R(i)}}),this.addProperty({name:"Width",id:"curvePenWidth",parentId:"curvePen",type:"select",selectorOptions:[1,2,3,4,5],fun:function(t){let i=e.findPlotCurve(n.val()),s=i.pen();s.width=t+1,i.setPen(s),R(i)}}),this.addProperty({name:"Curve Symbol",id:"curveSymbol"}),this.addProperty({name:"Pen",id:"curveSymPen",parentId:"curveSymbol"}),this.addProperty({name:"Color",id:"curveSymbolPenColor",parentId:"curveSymPen",type:"color",fun:function(t){let i=e.findPlotCurve(n.val()),s=i.symbol();if(!s)return;let a=s.pen();a.color=t,s.setPen(a),R(i),i.plot().autoRefresh(),i.plot().updateLegend(i)}}),this.addProperty({name:"Width",id:"curveSymbolPenWidth",parentId:"curveSymPen",type:"select",selectorOptions:[1,2,3,4,5],fun:function(t){let s=e.findPlotCurve(n.val());Utility.setSymbolPenWidth(s,t+1),i.setSymbolIcon()}}),this.addProperty({name:"Fill Brush",id:"curveSymbolBrushColor",parentId:"curveSymbol",type:"color",fun:function(t){let s=e.findPlotCurve(n.val()),a=s.symbol();if(!a)return;let r=a.brush();r.color=t,a.setBrush(r),s.plot().autoRefresh(),s.plot().updateLegend(s),i.setSymbolIcon()}}),this.addProperty({name:"Style",id:"curveSymbolStyle",parentId:"curveSymbol",type:"select",selectorOptions:["None","Rectangle","Cross","Diamond","Ellipse","Diagonal cross"],fun:function(t){let i=e.findPlotCurve(n.val());"None"==P[t]&&(S.val(1),y.val(Static.colorNameToHex("black")),x.val(Static.colorNameToHex("transparent")),g.val(10));!function(t,e){let i=NoSymbol;"MRect"==e&&(i=MRect);"Cross"==e&&(i=Cross);"Diamond"==e&&(i=Diamond);"Ellipse"==e&&(i=Ellipse);"XCross"==e&&(i=XCross);Utility.addSymbol(t,i)}(i,P[t])}}),this.addProperty({name:"Size",id:"curveSymbolSize",parentId:"curveSymbol",type:"select",selectorOptions:["5x5","6x6","8x8","10x10","12x12","15x15"],fun:function(t){let s=e.findPlotCurve(n.val());Utility.setSymbolSize(s,k[t]),i.setSymbolIcon()}}),this.addProperty({name:"Fill",id:"curveFill"}),this.addProperty({name:"Brush",id:"curveFillBrushColor",parentId:"curveFill",type:"color",fun:function(t){var s=e.findPlotCurve(n.val());if(s.fill){let e=s.brush();e.color=t,s.setBrush(e)}i.setBrushIcon()}}),this.addProperty({name:"Fill Curve",id:"fillCurve",parentId:"curveFill",type:"checkbox",fun:function(t){var s=e.findPlotCurve(n.val());if(s.fill=t,t){let t=s.brush();t.color=A.val(),s.setBrush(t)}else Utility.removeCurveBrush(s);i.setBrushIcon()}}),this.addProperty({name:"Baseline",id:"baseline",type:"number",value:0,step:.5,fun:function(t){e.findPlotCurve(n.val()).setBaseline(t)}}),this.init(),this.setFontSize("12px"),Static.bind("showGridItem",function(t,i,s,a){if("left"==i&&0==s&&a){R(e.findPlotCurve(n.val()))}}),Static.bind("itemAttached",function(t,i,s){i.rtti==Static.Rtti_PlotCurve&&(s||(e.hasVisiblePlotCurve()||e.leftSidebar.showGridItem(0,!1),e.hasPlotCurve()),l(),R(e.findPlotCurve(n.val())))}),e.leftSidebar.showGridItem(0,!1);var c=-1;Static.bind("curveRenamed",function(){-1==c&&(c=n[0].selectedIndex),l(),n[0].selectedIndex=c;e.findPlotCurve(n.val());c=-1});var u=[Lines,Sticks,Steps,Dots,NoCurve];function h(t){var e="Left";t.yAxis()==yRight&&(e="Right");var i="Bottom";t.xAxis()==xTop&&(i="Top"),a.html(i+", "+e)}Static.bind("curveStyleChanged",function(t,e){R(e)}),Static.bind("axisChanged",function(t,e,i){R(i)}),this.penIcon=function(t){if(!t)return null;var e=new GraphicUtil.Graphic(null,50,16),i=new PaintUtil.Painter(e);if(t.pen().color!=Static.NoPen){var n=t.pen();i.setPen(n);i.drawLine(0,8,50,8)}return i=null,e},this.spanElem=null;var d=this.getElementValueDataAttribute("curvePen").parent();this.setPenIcon=function(){var t=e.findPlotCurve(n.val()),i=d,s=this.penIcon(t);this.spanElem&&this.spanElem.remove(),this.spanElem=$('<span id="spanElem" />'),s&&s.setParent(this.spanElem),this.spanElem.appendTo(i)};var p=this.getElementValueDataAttribute("curvePenColor");Static.bind("penAttributeChanged",function(t,e){R(e)});var f=["solid","dot","dash","dashDot","dashDotDot"],m=this.getElementValueDataAttribute("curvePenStyle");var v=this.getElementValueDataAttribute("curvePenWidth");var g=this.getElementValueDataAttribute("curveSymbolSize");this.symbolIcon=function(t){if(!t)return null;var e=new Misc.Size(10,10),i=new GraphicUtil.Graphic(null,10,10),n=new PaintUtil.Painter(i);if(t.symbol()){t.symbol().style(),n.setPen(t.symbol().pen()),t.symbol().drawGraphicSymbol(n,new Misc.Point(5,5),e)}return n=null,i},this.spanElem2=null;var b=this.getElementValueDataAttribute("curveSymbol").parent();this.setSymbolIcon=function(){var t=e.findPlotCurve(n.val()),i=b,s=this.symbolIcon(t);this.spanElem2&&this.spanElem2.remove(),this.spanElem2=$('<span id="spanElem2" />'),s&&s.setParent(this.spanElem2),this.spanElem2.appendTo(i)},Static.bind("symbolAdded symbolAttributeChanged",function(t,e){R(e)});var y=this.getElementValueDataAttribute("curveSymbolPenColor");var S=this.getElementValueDataAttribute("curveSymbolPenWidth");var x=this.getElementValueDataAttribute("curveSymbolBrushColor");g=this.getElementValueDataAttribute("curveSymbolSize");var w=this.getElementValueDataAttribute("curveSymbolStyle"),P=["None","MRect","Cross","Diamond","Ellipse","XCross"],M=[MRect,Cross,Diamond,Ellipse,XCross];var k=[5,6,8,10,12,15];var C=this.getElementValueDataAttribute("curveFill").parent();this.brushIcon=function(t,e){if(!t)return null;new Misc.Size(12,12);var i=new GraphicUtil.Graphic(null,12,12),n=new PaintUtil.Painter(i);if("noBrush"==t.brush().color)return null;n.setBrush(t.brush());var s=new Misc.Rect(new Misc.Point,new Misc.Size(12,12));return s.moveCenter(new Misc.Point(6,6)),n.drawRect(s.left(),s.top(),s.width(),s.height()),n=null,i},this.spanElem3=null;var A=this.getElementValueDataAttribute("curveFillBrushColor");A.parent();this.setBrushIcon=function(){var t=e.findPlotCurve(n.val()),s=C,a=i.brushIcon(t);this.spanElem3&&this.spanElem3.remove(),this.spanElem3=$('<span id="spanElem" />'),a&&a.setParent(this.spanElem3),this.spanElem3.appendTo(s)};var T=this.getElementValueDataAttribute("fillCurve");Static.bind("curveBrushChanged",function(t,e){R(e)});var L=this.getElementValueDataAttribute("baseline");function R(t){if(t&&t.title()===n.val()){if(p.val(Static.colorNameToHex(t.pen().color)),m[0].selectedIndex=f.indexOf(t.pen().style),v[0].selectedIndex=t.pen().width-1,t.symbol()){y.val(Static.colorNameToHex(t.symbol().pen().color)),S[0].selectedIndex=t.symbol().pen().width-1,x.val(Static.colorNameToHex(t.symbol().brush().color));var e=-1;e="None"==t.symbol().style()?0:M.indexOf(t.symbol().style())+1,w[0].selectedIndex=e,g[0].selectedIndex=k.indexOf(t.symbol().size().height)}s[0].selectedIndex=_.keys(u)[_.values(u).indexOf(t.style())],r[0].selectedIndex=t.xAxis()==xBottom?0:1,o[0].selectedIndex=t.yAxis()==yLeft?0:1,h(t),i.setPenIcon(),i.setSymbolIcon(),T[0].checked=t.fill,A.val(t.brush().color),i.setBrushIcon(),L.val(t.baseline());var a=i.getElementValueDataAttribute("orientation");t.orientation()==Vertical?a[0].selectedIndex=0:a[0].selectedIndex=1}}}}define("curvePropertiesPane",["propertiesPane"],function(){});class PlotPropertiesPane extends PropertiesPane{constructor(t,e){super(t);var i=this;i.setHeader(e.leftSidebar.gridItem(1).headerElement,"Plot Properties",!0),this.shadeWatchArea=!0,this.addProperty({name:"General Settings",id:"generalSettings"}),this.addProperty({name:"Plot Title",id:"plotTitle",parentId:"generalSettings"});var n=this.addProperty({name:"Title",id:"plotTitleTitle",parentId:"plotTitle",type:"text",fun:function(t){e.setTitle(t)}});this.addProperty({name:"Font",id:"plotTitleFont",parentId:"plotTitle",type:"select",selectorOptions:PropertiesPane.fontsDisplay(),fun:function(t){var i=e.titleFont();i.name=PropertiesPane.fontGroup(t),e.setTitleFont(i)}}),this.addProperty({name:"Point",id:"plotTitlePoint",parentId:"plotTitle",type:"number",value:"20",min:"6",max:"32",fun:function(t){var i=e.titleFont();i.th=t,e.setTitleFont(i)}}),this.addProperty({name:"Color",id:"plotTitleColor",parentId:"plotTitle",type:"color",fun:function(t){var i=e.titleFont();i.fontColor=t,e.setTitleFont(i)}}),this.addProperty({name:"Bold",id:"plotTitleBold",parentId:"plotTitle",type:"checkbox",checked:!0,fun:function(t){var i=e.titleFont();i.weight=t?"bold":"normal";e.setTitleFont(i)}}),this.addProperty({name:"Plot Footer",id:"plotFooter",parentId:"generalSettings"}),this.addProperty({name:"Footer",id:"plotFooterFooter",parentId:"plotFooter",type:"text",value:"Footer",fun:function(t){e.setFooter(t)}}),this.addProperty({name:"Font",id:"plotFooterFont",parentId:"plotFooter",type:"select",selectorOptions:PropertiesPane.fontsDisplay(),fun:function(t){var i=e.footerFont();i.name=PropertiesPane.fontGroup(t),e.setFooterFont(i)}}),this.addProperty({name:"Point",id:"plotFooterPoint",parentId:"plotFooter",type:"number",value:"20",min:"6",max:"32",fun:function(t){var i=e.footerFont();i.th=t,e.setFooterFont(i)}}),this.addProperty({name:"Color",id:"plotFooterColor",parentId:"plotFooter",type:"color",fun:function(t){var i=e.footerFont();i.fontColor=t,e.setFooterFont(i)}}),this.addProperty({name:"Bold",id:"plotFooterBold",parentId:"plotFooter",type:"checkbox",checked:!0,fun:function(t){var i=e.footerFont();i.weight=t?"bold":"normal";e.setFooterFont(i)}}),this.addProperty({name:"Background",id:"plotBackground",parentId:"generalSettings",type:"color",value:"#eee8aa",fun:function(t){e.setPlotBackground(t)}}),this.addProperty({name:"Legend",id:"plotLegend",parentId:"generalSettings"}),this.addProperty({name:"Background",id:"plotLegendBackground",parentId:"plotLegend",type:"color",value:"#ffffff",fun:function(t){var i=e.getLayout().getLegendDiv().children()[0];$(i).css("background-color",t)}}),this.addProperty({name:"Show Line",id:"plotLegendShowLine",parentId:"plotLegend",type:"checkbox",fun:function(t){Static.showline=t}}),this.addProperty({name:"Show Symbol",id:"plotLegendShowSymbol",parentId:"plotLegend",type:"checkbox",fun:function(t){Static.showsymbol=t}}),this.addProperty({name:"Scale Settings",id:"scaleSettings"}),this.addProperty({name:"Title",id:"scaleTitle",parentId:"scaleSettings"});var s=this.addProperty({name:"Bottom",id:"bottomScaleTitle",parentId:"scaleTitle",type:"text",value:"Bottom-Scale",fun:s}),a=this.addProperty({name:"Top",id:"topScaleTitle",parentId:"scaleTitle",type:"text",value:"Top-Scale",fun:a}),r=this.addProperty({name:"Left",id:"leftScaleTitle",parentId:"scaleTitle",type:"text",value:"Left-Scale",fun:r}),o=this.addProperty({name:"Right",id:"rightScaleTitle",parentId:"scaleTitle",type:"text",value:"Right-Scale",fun:o});this.addProperty({name:"Font",id:"scaleTitleFont",parentId:"scaleTitle",type:"select",selectorOptions:PropertiesPane.fontsDisplay(),fun:function(t){var i=e.titleFont();i.name=PropertiesPane.fontGroup(t),e.setAxisTitleFont(xBottom,i),e.setAxisTitleFont(xTop,i),e.setAxisTitleFont(yLeft,i),e.setAxisTitleFont(yRight,i)}}),this.addProperty({name:"Point",id:"scaleTitlePoint",parentId:"scaleTitle",type:"number",value:"20",min:"6",max:"32",fun:function(t){var i=e.axisTitleFont(xBottom);i.th=.86*t,e.setAxisTitleFont(xBottom,i),e.setAxisTitleFont(xTop,i),e.setAxisTitleFont(yLeft,i),e.setAxisTitleFont(yRight,i)}}),this.addProperty({name:"Color",id:"scaleTitleColor",parentId:"scaleTitle",type:"color",fun:function(t){var i=e.axisTitleFont(xBottom);i.fontColor=t,e.setAxisTitleFont(xBottom,i),e.setAxisTitleFont(xTop,i),e.setAxisTitleFont(yLeft,i),e.setAxisTitleFont(yRight,i)}}),this.addProperty({name:"Bold",id:"scaleTitleBold",parentId:"scaleTitle",type:"checkbox",fun:function(t){var i=e.axisTitleFont(xBottom);i.weight=t?"bold":"normal";e.setAxisTitleFont(xBottom,i),e.setAxisTitleFont(xTop,i),e.setAxisTitleFont(yLeft,i),e.setAxisTitleFont(yRight,i)}}),this.addProperty({name:"Type",id:"scaleType",parentId:"scaleSettings"}),this.addProperty({name:"Bottom",id:"scaleTypeBottom",parentId:"scaleType"});var l=this.addProperty({name:"Linear",id:"scaleTypeBottomLinear",parentId:"scaleTypeBottom",type:"radio",checked:!0,group:"scaleTypeBottomGroup"}),c=this.addProperty({name:"Log",id:"scaleTypeBottomLog",parentId:"scaleTypeBottom",type:"radio",group:"scaleTypeBottomGroup"}),u=this.addProperty({name:"Base",id:"scaleTypeBottomBase",parentId:"scaleTypeBottom",disabled:!0,type:"number",value:"10",min:"2",max:"10"}),h=this.addProperty({name:"Decimal",id:"scaleTypeBottomBottom",parentId:"scaleTypeBottom",type:"number",value:"3",min:"0",max:"10"});this.addProperty({name:"Top",id:"scaleTypeTop",parentId:"scaleType"});var d=this.addProperty({name:"Linear",id:"scaleTypeTopLinear",parentId:"scaleTypeTop",type:"radio",checked:!0,group:"scaleTypeTopGroup"}),p=this.addProperty({name:"Log",id:"scaleTypeTopLog",parentId:"scaleTypeTop",type:"radio",group:"scaleTypeTopGroup"}),f=this.addProperty({name:"Base",id:"scaleTypeTopBase",parentId:"scaleTypeTop",disabled:!0,type:"number",value:"10",min:"2",max:"10"}),m=this.addProperty({name:"Decimal",id:"scaleTypeTopTop",parentId:"scaleTypeTop",type:"number",value:"3",min:"0",max:"10"});this.addProperty({name:"Left",id:"scaleTypeLeft",parentId:"scaleType"});var v=this.addProperty({name:"Linear",id:"scaleTypeLeftLinear",parentId:"scaleTypeLeft",type:"radio",checked:!0,group:"scaleTypeLeftGroup"}),g=this.addProperty({name:"Log",id:"scaleTypeLeftLog",parentId:"scaleTypeLeft",type:"radio",group:"scaleTypeLeftGroup"}),b=this.addProperty({name:"Base",id:"scaleTypeLeftBase",parentId:"scaleTypeLeft",disabled:!0,type:"number",value:"10",min:"2",max:"10"}),y=this.addProperty({name:"Decimal",id:"scaleTypeLeftLeft",parentId:"scaleTypeLeft",type:"number",value:"3",min:"0",max:"10"});this.addProperty({name:"Right",id:"scaleTypeRight",parentId:"scaleType"});var S=this.addProperty({name:"Linear",id:"scaleTypeRightLinear",parentId:"scaleTypeRight",type:"radio",checked:!0,group:"scaleTypeRightGroup"}),x=this.addProperty({name:"Log",id:"scaleTypeRightLog",parentId:"scaleTypeRight",type:"radio",group:"scaleTypeRightGroup"}),w=this.addProperty({name:"Base",id:"scaleTypeRightBase",parentId:"scaleTypeRight",disabled:!0,type:"number",value:"10",min:"2",max:"10"}),P=this.addProperty({name:"Decimal",id:"scaleTypeRightRight",parentId:"scaleTypeRight",type:"number",value:"3",min:"0",max:"10"});this.addProperty({name:"Limits",id:"scaleLimits",parentId:"scaleSettings"});var M=this.addProperty({name:"Enable user scale",id:"limitsEnableUserScale",parentId:"scaleLimits",type:"checkbox"});this.addProperty({name:"Bottom",id:"limitsBottom",parentId:"scaleLimits"});var k=this.addProperty({name:"minimum",id:"limitsBottomMinimum",parentId:"limitsBottom",type:"number",value:"0",disabled:!0}),C=this.addProperty({name:"maximum",id:"limitsBottomMaximum",parentId:"limitsBottom",type:"number",value:"0",disabled:!0});this.addProperty({name:"Left",id:"limitsLeft",parentId:"scaleLimits"});var A=this.addProperty({name:"minimum",id:"limitsLeftMinimum",parentId:"limitsLeft",type:"number",value:"0",disabled:!0}),_=this.addProperty({name:"maximum",id:"limitsLeftMaximum",parentId:"limitsLeft",type:"number",value:"0",disabled:!0});this.addProperty({name:"Top",id:"limitsTop",parentId:"scaleLimits"});var T=this.addProperty({name:"minimum",id:"limitsTopMinimum",parentId:"limitsTop",type:"number",value:"0",disabled:!0}),L=this.addProperty({name:"maximum",id:"limitsTopMaximum",parentId:"limitsTop",type:"number",value:"0",disabled:!0});this.addProperty({name:"Right",id:"limitsRight",parentId:"scaleLimits"});var R=this.addProperty({name:"minimum",id:"limitsRightMinimum",parentId:"limitsRight",type:"number",value:"0",disabled:!0}),E=this.addProperty({name:"maximum",id:"limitsRightMaximum",parentId:"limitsRight",type:"number",value:"0",disabled:!0});this.addProperty({name:"Exp. Notation",id:"scaleExpNotation",parentId:"scaleSettings"});var D=this.addProperty({name:"Values less than",id:"expNotationValuesLessThan",parentId:"scaleExpNotation",type:"number",value:"-10000"}),I=this.addProperty({name:"Values greater than",id:"expNotationValuesGreaterThan",parentId:"scaleExpNotation",type:"number",value:"10000"});this.addProperty({name:"Margins",id:"scaleMargins",parentId:"scaleSettings"});var B=this.addProperty({name:"Left axis",id:"scaleMarginsLeftAxis",parentId:"scaleMargins",type:"number",value:"0.0"}),F=this.addProperty({name:"Right axis",id:"scaleMarginsRightAxis",parentId:"scaleMargins",type:"number",value:"0.0"}),z=this.addProperty({name:"Bottom axis",id:"scaleMarginsBottomAxis",parentId:"scaleMargins",type:"number",value:"0.0"}),V=this.addProperty({name:"Top axis",id:"scaleMarginsTopAxis",parentId:"scaleMargins",type:"number",value:"0.0"});this.addProperty({name:"Components",id:"scaleComponents",parentId:"scaleSettings"});var N=this.addProperty({name:"Show backbone",id:"scaleComponentsShowBackbone",parentId:"scaleComponents",type:"checkbox",checked:!0}),O=this.addProperty({name:"Show labels",id:"scaleComponentsShowLabels",parentId:"scaleComponents",type:"checkbox",checked:!0}),W=this.addProperty({name:"Show ticks",id:"scaleComponentsShowTicks",parentId:"scaleComponents",type:"checkbox",checked:!0}),j=this.addProperty({name:"Tick length",id:"scaleComponentsTickLength",parentId:"scaleComponents",type:"select",selectorOptions:["Small","Medium","Large"]});this.addProperty({name:"Point Operation Settings",id:"pointOperationSettings"});var U=this.addProperty({name:"When a point is selected",id:"pointSelected",parentId:"pointOperationSettings",type:"select",selectorOptions:["Display data","remove it","Modify it"]}),H=this.addProperty({name:"Add/Remove Point",id:"addRemovePoint",parentId:"pointOperationSettings",type:"checkbox"});this.addProperty({name:"Error Settings",id:"errorSettings"});var X=this.addProperty({name:"When an error occurs",id:"pointSelected",parentId:"errorSettings",type:"select",selectorOptions:["Stop and warn","Silently ignore","Allow for ignore"]}),G=this.addProperty({name:"Zoomer Settings",id:"zoomerSettings"}),K=this.addProperty({name:"Zoom according to the current curve axes",id:"zoomerAxes",parentId:"zoomerSettings",type:"checkbox",checked:!0}),Y=this.addProperty({name:"Horizontal",id:"zoomerHorizontalAxes",parentId:"zoomerSettings",type:"select",selectorOptions:["Bottom","Top"],disabled:!0}),q=this.addProperty({name:"Vertical",id:"zoomerVerticalAxes",parentId:"zoomerSettings",type:"select",selectorOptions:["Left","Right"],disabled:!0}),Z=this.addProperty({name:"Magnifier Settings",id:"magnifierSettings"}),Q=this.addProperty({name:"Left axis enabled",id:"magnifierLeftAxis",parentId:"magnifierSettings",type:"checkbox",checked:!0}),J=this.addProperty({name:"Right axis enabled",id:"magnifierRightAxis",parentId:"magnifierSettings",type:"checkbox"}),tt=this.addProperty({name:"Bottom axis enabled",id:"magnifierBottomAxis",parentId:"magnifierSettings",type:"checkbox",checked:!0}),et=this.addProperty({name:"Top axis enabled",id:"magnifierTopAxis",parentId:"magnifierSettings",type:"checkbox"}),it=this.addProperty({name:"Watch Settings",id:"watchSettings"}),nt=this.addProperty({name:"Calculation accuracy",id:"watchCalculationAccuracy",parentId:"watchSettings"}),st=this.addProperty({name:"Low",id:"watchCalculationAccuracyLow",parentId:"watchCalculationAccuracy",type:"radio",group:"watchCalculationAccuracyGroup"}),at=this.addProperty({name:"Moderate",id:"watchCalculationAccuracyModerate",parentId:"watchCalculationAccuracy",type:"radio",group:"watchCalculationAccuracyGroup",checked:!0}),rt=this.addProperty({name:"High",id:"watchCalculationAccuracyHigh",parentId:"watchCalculationAccuracy",type:"radio",group:"watchCalculationAccuracyGroup"}),ot=this.addProperty({name:"Shading",id:"watchShading",parentId:"watchSettings"}),lt=this.addProperty({name:"Shade watch area",id:"watchShadeWatchArea",parentId:"watchShading",type:"checkbox",checked:!0}),ct=this.addProperty({name:"Shade color",id:"watchShadeColor",parentId:"watchShading",value:"#006464",type:"color"});this.addProperty({name:"Grid Settings",id:"gridSettings"}),this.addProperty({name:"Minor Lines",id:"gridMinorLines",parentId:"gridSettings"});var ut=this.addProperty({name:"Show",id:"gridMinorLinesShow",parentId:"gridMinorLines",type:"checkbox",checked:!0}),ht=this.addProperty({name:"Minors per major",id:"gridMinorsPerMajor",parentId:"gridMinorLines",type:"number",value:"5",min:"2",max:"20"}),dt=this.addProperty({name:"Color",id:"gridMinorLinesColor",parentId:"gridMinorLines",type:"color"});this.addProperty({name:"Major Lines",id:"gridMajorLines",parentId:"gridSettings"});var pt=this.addProperty({name:"Show",id:"gridMajorLinesShow",parentId:"gridMajorLines",type:"checkbox",checked:!0}),ft=this.addProperty({name:"Majors",id:"gridMajorMajors",parentId:"gridMajorLines",type:"number",value:"8",min:"1",max:"40"}),mt=this.addProperty({name:"Color",id:"gridMajorLinesColor",parentId:"gridMajorLines",type:"color"}),vt=this.addProperty({name:"Grid Axes",id:"gridAxes",parentId:"gridSettings"}),gt=this.addProperty({name:"According to current curve",id:"gridAxesAccordingToCurve",parentId:"gridAxes",type:"checkbox",checked:!0}),bt=this.addProperty({name:"Horizontal",id:"gridHorizontalAxes",parentId:"gridAxes",type:"select",selectorOptions:["Bottom","Top"],disabled:!0}),yt=this.addProperty({name:"Vertical",id:"gridVerticalAxes",parentId:"gridAxes",type:"select",selectorOptions:["Left","Right"],disabled:!0});function s(t){e.setAxisTitle(xBottom,t)}function a(t){e.setAxisTitle(xTop,t)}function r(t){e.setAxisTitle(yLeft,t)}function o(t){e.setAxisTitle(yRight,t)}this.init(),c.change(function(){u.attr("disabled",!1),e.setAxisScaleEngine(xBottom,new LogScaleEngine)}),u.change(function(){e.axisScaleEngine(yLeft).setBase($(this).val()),e.autoRefresh()}),l.change(function(){u.attr("disabled",!0),e.setAxisScaleEngine(xBottom,new LinearScaleEngine)}),g.change(function(){b.attr("disabled",!1),e.setAxisScaleEngine(yLeft,new LogScaleEngine)}),$("#left_logBase").change(function(){m_plot.axisScaleEngine(yLeft).setBase($(this).val()),m_plot.autoRefresh()}),v.change(function(){b.attr("disabled",!0),e.setAxisScaleEngine(yLeft,new LinearScaleEngine)}),p.change(function(){f.attr("disabled",!1),e.setAxisScaleEngine(xTop,new LogScaleEngine)}),f.change(function(){e.axisScaleEngine(yLeft).setBase($(this).val()),e.autoRefresh()}),d.change(function(){$("#top_logBase").attr("disabled",!0),e.setAxisScaleEngine(xTop,new LinearScaleEngine)}),x.change(function(){w.attr("disabled",!1),e.setAxisScaleEngine(yRight,new LogScaleEngine)}),w.change(function(){e.axisScaleEngine(yLeft).setBase($(this).val()),e.autoRefresh()}),S.change(function(){$("#right_logBase").attr("disabled",!0),e.setAxisScaleEngine(yRight,new LinearScaleEngine)}),h.change(function(){e.setAxisDecimalPlaces(xBottom,parseInt($(this).val()))}),m.change(function(){e.setAxisDecimalPlaces(xTop,parseInt($(this).val()))}),y.change(function(){e.setAxisDecimalPlaces(yLeft,parseInt($(this).val()))}),P.change(function(){e.setAxisDecimalPlaces(yRight,parseInt($(this).val()))}),M.change(function(){var t;t=!this.checked,k.attr("disabled",t),C.attr("disabled",t),A.attr("disabled",t),_.attr("disabled",t),T.attr("disabled",t),L.attr("disabled",t),R.attr("disabled",t),E.attr("disabled",t)});var St=null;function xt(){var t=e.axisInterval(xBottom);k.val(t.minValue()),C.val(t.maxValue()),t=e.axisInterval(yLeft),A.val(t.minValue()),_.val(t.maxValue()),t=e.axisInterval(xTop),T.val(t.minValue()),L.val(t.maxValue()),t=e.axisInterval(yRight),R.val(t.minValue()),E.val(t.maxValue())}function wt(t){Y.attr("disabled",t),q.attr("disabled",t)}function Pt(){var t="Bottom",i="Left";e.zm;K[0].checked&&St?(St.yAxis()==yRight&&(i="Right"),St.xAxis()==xTop&&(t="Top")):(1==Y[0].selectedIndex&&(t="Top"),1==q[0].selectedIndex&&(i="Right")),G.html(t+", "+i)}function Mt(){var t="",i="",n="",s="",a="",r=e.magnifier;r.isAxisEnabled(yLeft)&&(i="Left"),r.isAxisEnabled(yRight)&&(n="Right"),r.isAxisEnabled(xBottom)&&(s="Bottom"),r.isAxisEnabled(xTop)&&(a="Top");var o=0;(t+=i).length>o&&(n.length||s.length||a.length)&&(t+=", "),o=t.length,(t+=n).length>o&&(s.length||a.length)&&(t+=", "),o=t.length,(t+=s).length>o&&a.length&&(t+=", "),""==(t+=a)&&(t="No axis enabled"),Z.html(t)}function kt(t){new Misc.Size(12,12);var e=new GraphicUtil.Graphic(null,12,12),i=new PaintUtil.Painter(e);i.setBrush(new Misc.Brush(t));var n=new Misc.Rect(new Misc.Point,new Misc.Size(12,12));return n.moveCenter(new Misc.Point(6,6)),i.drawRect(n.left(),n.top(),n.width(),n.height()),i=null,e}function Ct(t){var e=kt(t);ot[0].children&&$(ot[0].children[0]).remove(),e&&lt[0].checked&&e.setParent(ot)}function At(){var t="",e="No shade";Static.accuracyMaxSteps==.5*Static.accuracyBase*.5&&(t="Low"),Static.accuracyMaxSteps==.5*Static.accuracyBase&&(t="Moderate"),Static.accuracyMaxSteps==Static.accuracyBase&&(t="High"),lt[0].checked&&(e="Shade "),nt.html(t),it.html(t+"; "+e),lt[0].checked&&kt(ct.val()).setParent(it)}function _t(t){bt.attr("disabled",t),yt.attr("disabled",t)}function Tt(){var t="Bottom",i="Left";e.itemList(Static.Rtti_PlotGrid)[0];gt[0].checked&&St?(St.yAxis()==yRight&&(i="Right"),St.xAxis()==xTop&&(t="Top")):(1==bt[0].selectedIndex&&(t="Top"),1==yt[0].selectedIndex&&(i="Right")),vt.html(t+", "+i)}Static.bind("itemAttached",function(t,e,i){e.rtti==Static.Rtti_PlotCurve&&xt()}),k.change(function(){e.setAxisScale(xBottom,parseFloat(k.val()),parseFloat(C.val()))}),C.change(function(){e.setAxisScale(xBottom,parseFloat(k.val()),parseFloat(C.val()))}),T.change(function(){e.setAxisScale(xTop,parseFloat(T.val()),parseFloat(L.val()))}),L.change(function(){e.setAxisScale(xTop,parseFloat(T.val()),parseFloat(L.val()))}),A.change(function(){e.setAxisScale(yLeft,parseFloat(A.val()),parseFloat(_.val()))}),_.change(function(){e.setAxisScale(yLeft,parseFloat(A.val()),parseFloat(_.val()))}),R.change(function(){e.setAxisScale(yRight,parseFloat(R.val()),parseFloat(E.val()))}),E.change(function(){e.setAxisScale(yRight,parseFloat(R.val()),parseFloat(E.val()))}),D.change(function(){e.setNonExponentNotationLimits($(this).val(),I.val())}),I.change(function(){e.setNonExponentNotationLimits(D.val(),$(this).val())}),B.change(function(){var t=0,i=e.axisScaleEngine(yLeft);if(i instanceof LogScaleEngine){e.axisScaleDiv(yLeft);t=Static.mLog(i.base(),$(this).val())}else{e.axisInterval(yLeft);t=$(this).val()}e.axisScaleEngine(yLeft).setMargins(t,t),e.autoRefresh()}),F.change(function(){var t=0,i=e.axisScaleEngine(yRight);if(i instanceof LogScaleEngine){e.axisScaleDiv(yRight);t=Static.mLog(i.base(),$(this).val())}else{e.axisInterval(yRight);t=$(this).val()}e.axisScaleEngine(yRight).setMargins(t,t),e.autoRefresh()}),z.change(function(){var t=0,i=e.axisScaleEngine(xBottom);if(i instanceof LogScaleEngine){e.axisScaleDiv(xBottom);t=Static.mLog(i.base(),$(this).val())}else{e.axisInterval(xBottom);t=$(this).val()}e.axisScaleEngine(xBottom).setMargins(t,t),e.autoRefresh()}),V.change(function(){var t=0,i=e.axisScaleEngine(xTop);if(i instanceof LogScaleEngine){e.axisScaleDiv(xTop);t=Static.mLog(i.base(),$(this).val())}else{e.axisInterval(xTop);t=$(this).val()}e.axisScaleEngine(xTop).setMargins(t,t),e.autoRefresh()}),N.change(function(){Utility.enableComponent(e,Enum.ScaleComponent.Backbone,this.checked)}),W.change(function(){Utility.enableComponent(e,Enum.ScaleComponent.Ticks,this.checked),tickLengthRow.toggle(this.checked)}),j.change(function(){Utility.setTickLength(e,["small","medium","large"][$(this)[0].selectedIndex])}),O.change(function(){Utility.enableComponent(e,Enum.ScaleComponent.Labels,this.checked)}),U.change(function(){var t=$(this)[0].selectedIndex;1==t?(console.log("remove"),e.curveClosestPoint.setCb(function(t,e){t.removePoint(e)})):2==t?(console.log("modify"),e.curveClosestPoint.setCb(function(t,e){PointEntryDlg.pointEntryCb("Modify/Remove Point",m_plot,t.title(),e)})):(console.log("display"),e.curveClosestPoint.setCb(null))}),H.change(function(){e.addRemovePoint.activate(this.checked),this.checked?e.zm.setTrackerMode(Static.AlwaysOff):e.zm.setTrackerMode(Static.ActiveOnly)}),X.change(function(){var t=$(this)[0].selectedIndex;1==t?(console.log("Static.silentIgnore"),Static.errorResponse=Static.silentIgnore):2==t?(console.log("Static.warnIgnore"),Static.errorResponse=Static.warnIgnore):(console.log("Static.warn"),Static.errorResponse=Static.warn)}),Static.bind("currentCurveChanged",function(t,i){var n=i;n&&K[0].checked&&e.zm.setAxis(n.xAxis(),n.yAxis());Pt()}),Static.bind("curveAxisChangedViaPropertiesPane axisChanged",function(t,i,n){var s=e.zm;K[0].checked?s.setAxis(n.xAxis(),n.yAxis()):(0==Y[0].selectedIndex?s.setAxis(xBottom,s.yAxis()):s.setAxis(xTop,s.yAxis()),0==q[0].selectedIndex?s.setAxis(s.xAxis(),yLeft):s.setAxis(s.xAxis(),yRight)),Pt()}),q.change(function(){var t=e.zm;0==$(this)[0].selectedIndex?t.setAxis(t.xAxis(),yLeft):t.setAxis(t.xAxis(),yRight),Pt()}),Y.change(function(){var t=e.zm;0==$(this)[0].selectedIndex?t.setAxis(xBottom,t.yAxis()):t.setAxis(xTop,t.yAxis()),Pt()}),K.click(function(){if($(this)[0].checked)wt(!0);else{wt(!1);var t=e.zm;0==Y[0].selectedIndex?t.setAxis(xBottom,t.yAxis()):t.setAxis(xTop,t.yAxis()),0==q[0].selectedIndex?t.setAxis(t.xAxis(),yLeft):t.setAxis(t.xAxis(),yRight)}Pt(),Static.trigger("zoomAccordingToCurve",$(this)[0].checked)}),Q.change(function(){e.magnifier.setAxisEnabled(yLeft,this.checked),Mt()}),J.change(function(){e.magnifier.setAxisEnabled(yRight,this.checked),Mt()}),tt.change(function(){e.magnifier.setAxisEnabled(xBottom,this.checked),Mt()}),et.change(function(){e.magnifier.setAxisEnabled(xTop,this.checked),Mt()}),st.change(function(){console.log("Low"),Static.accuracyMaxSteps=.5*Static.accuracyBase*.5,At()}),at.change(function(){console.log("Moderate"),Static.accuracyMaxSteps=.5*Static.accuracyBase,At()}),rt.change(function(){console.log("High"),Static.accuracyMaxSteps=Static.accuracyBase,At()}),lt.change(function(){i.shadeWatchArea=lt[0].checked,i.shadeWatchArea?ct.attr("disabled",!1):ct.attr("disabled",!0),At(),Ct(ct.val()),Static.trigger("shadeWatchArea",i.shadeWatchArea)}),ct.change(function(){Ct($(this).val()),At(),Static.trigger("curveShapeColorChanged",$(this).val())}),ht.change(function(){var t=Math.min(Math.max(2,$(this).val()),20);ht.val(t),e.setAxisMaxMinor(yLeft,t),e.setAxisMaxMinor(yRight,t),e.setAxisMaxMinor(xTop,t),e.setAxisMaxMinor(xBottom,t)}),ft.change(function(){var t=Math.min(Math.max(1,$(this).val()),40);ft.val(t),e.setAxisMaxMajor(yLeft,$(this).val()),e.setAxisMaxMajor(yRight,$(this).val()),e.setAxisMaxMajor(xTop,$(this).val()),e.setAxisMaxMajor(xBottom,$(this).val())}),dt.change(function(){e.itemList(Static.Rtti_PlotGrid)[0].setMinorPen(dt[0].value)}),mt.change(function(){e.itemList(Static.Rtti_PlotGrid)[0].setMajorPen(mt[0].value)}),pt.change(function(){var t=e.itemList(Static.Rtti_PlotGrid)[0];Utility.majorGridLines(t,$(this)[0].checked),ut.attr("disabled",!$(this)[0].checked)}),Static.bind("majorGridLines",function(t,e,i){pt[0].checked=i,ut.attr("disabled",!i)}),ut.change(function(){var t=e.itemList(Static.Rtti_PlotGrid)[0];Utility.minorGridLines(t,$(this)[0].checked)}),Static.bind("minorGridLines",function(t,e,i){ut[0].checked=i}),Static.bind("currentCurveChanged",function(t,i){var n=i;n&&gt[0].checked&&e.itemList(Static.Rtti_PlotGrid)[0].setAxes(n.xAxis(),n.yAxis());Tt()}),Static.bind("curveAxisChangedViaPropertiesPane axisChanged",function(t,i,n){var s=e.itemList(Static.Rtti_PlotGrid)[0];gt[0].checked?s.setAxes(n.xAxis(),n.yAxis()):(0==bt[0].selectedIndex?s.setAxes(xBottom,s.yAxis()):s.setAxes(xTop,s.yAxis()),0==q[0].selectedIndex?s.setAxes(s.xAxis(),yLeft):s.setAxes(s.xAxis(),yRight)),Tt()}),yt.change(function(){var t=e.itemList(Static.Rtti_PlotGrid)[0];0==$(this)[0].selectedIndex?t.setAxes(t.xAxis(),yLeft):t.setAxes(t.xAxis(),yRight),Tt()}),bt.change(function(){var t=e.itemList(Static.Rtti_PlotGrid)[0];0==$(this)[0].selectedIndex?t.setAxes(xBottom,t.yAxis()):t.setAxes(xTop,t.yAxis()),Tt()}),gt.click(function(){if($(this)[0].checked)_t(!0);else{_t(!1);var t=e.itemList(Static.Rtti_PlotGrid)[0];0==bt[0].selectedIndex?t.setAxes(xBottom,t.yAxis()):t.setAxes(xTop,t.yAxis()),0==yt[0].selectedIndex?t.setAxes(t.xAxis(),yLeft):t.setAxes(t.xAxis(),yRight)}Tt()}),function(){wt(!0),Pt(),Tt(),Mt(),At(),Ct(ct.val()),n.val(e.title()),xt();var t=e.itemList(Static.Rtti_PlotGrid)[0];ut[0].checked=t.xMinEnabled(),pt[0].checked=t.xEnabled(),s.val(e.axisTitle(xBottom)),a.val(e.axisTitle(xTop)),r.val(e.axisTitle(yLeft)),o.val(e.axisTitle(yRight))}()}}define("plotPropertiesPane",["propertiesPane"],function(){});class MyOverlay extends WidgetOverlay{constructor(t,e){super(t);this.eventObject=e,this.curve=null,this.toString=function(){return"[MyOverlay]"}}drawOverlay(t){let e=this.curve.plot().canvasMap(this.curve.xAxis()),i=this.curve.plot().canvasMap(this.curve.yAxis()),n=e.transform(this.eventObject.p.x),s=i.transform(this.eventObject.p.y);t.setBrush(new Misc.Brush("lightGrey")),t.drawCircle(n,s,8)}}class MyObject extends HObject{constructor(t,e){super();var i=this;this._plot=t,this._dmin=10,this._cb,this.selected=!1,this.button=Static.LeftButton,this.modifiers=Static.NoModifier,void 0!==e&&(this._cb=e),this.selectorWidgetOverlay=new MyOverlay(t.getCentralWidget(),this),Static.bind("visibilityChange",function(t,e,n){i.selectorWidgetOverlay.curve===e&&(n||(i.selectorWidgetOverlay.clearCanvas(),this.selected=!1))}),this.toString=function(){return"[MyObject]"},this.mouseDown=function(t){return t.button==this.button&&Utility.modifiers(t)==this.modifiers&&this.selected&&(null==this._cb?alert("Curve: "+this.selectorWidgetOverlay.curve.title()+"; point: ("+this.p.x+", "+this.p.y+")"):this._cb(this.selectorWidgetOverlay.curve,this.p)),!0},this.showMarker=function(e){var n=t.autoReplot();t.setAutoReplot(!1);var s=this.selectorWidgetOverlay.curve;i.mPos.setAxes(s.xAxis(),s.yAxis()),function(e){var n=i.selectorWidgetOverlay.curve,s=t.axisScaleDiv(n.xAxis()),a=t.axisScaleDiv(n.yAxis()),r=new Misc.Rect(s.lowerBound(),a.lowerBound(),s.range(),a.range());r=r.normalized();var o=0;o|=e.x<r.left()+.3*r.width()?Static.AlignRight:Static.AlignLeft,o|=e.y-.3*r.height()>r.top()?Static.AlignBottom:Static.AlignTop,i.mPos.setLabelAlignment(o)}(e),i.mPos.setVisible(!0),i.mPos.setValue(e),i.mPos.setLabel("("+Static.adjustForDecimalPlaces(e.x,t.axisDecimalPlaces(s.xAxis())).toString()+", "+Static.adjustForDecimalPlaces(e.y,t.axisDecimalPlaces(s.yAxis())).toString()+")"),t.setAutoReplot(n),t.autoRefresh()},this.hideMarker=function(){i.mPos.setVisible(!1)}}eventFilter(t,e){if(!Static.isMobile()){if("mousedown"==e.type)this.mouseDown(e);else if("mouseleave"==e.type)this.selected&&(this.selectorWidgetOverlay.clearCanvas(),this.selected=!1);else if("mousemove"==e.type){e.preventDefault();let s=this._plot.itemList(Static.Rtti_PlotCurve);if(!s.length)return;i=t.mapToElement({x:e.clientX,y:e.clientY});let a={distance:-1},r=-1,o=-1,l=1e10,c=-1;for(n=0;n<s.length;++n)(s[n].isVisible()||"[SyntheticPointData]"!=s[n].data().toString())&&(r=s[n].closestPoint(i,a),a.distance<l&&(l=a.distance,c=n,o=r));if(-1==o)return;if("[SyntheticPointData]"==s[c].data().toString())return;this.p=s[c].data().samples()[o],this.selected||this.selectorWidgetOverlay.clearCanvas(),l<this._dmin?(this.selectorWidgetOverlay.curve=s[c],this.selected||(this.selectorWidgetOverlay.draw(),this.selected=!0,this.showMarker(this.p),Static.trigger("pointSelected"))):(this.selected=!1,this.hideMarker(),Static.trigger("pointNotSelected"))}return!0}if("touchstart"==e.type){let s=this._plot.itemList(Static.Rtti_PlotCurve);if(!s.length)return;var i=t.mapToElement({x:e.originalEvent.touches[0].clientX,y:e.originalEvent.touches[0].clientY});let a={distance:-1},r=-1,o=-1,l=1e10,c=-1;for(var n=0;n<s.length;++n)(s[n].isVisible()||"[SyntheticPointData]"!=s[n].data().toString())&&(r=s[n].closestPoint(i,a),a.distance<l&&(l=a.distance,c=n,o=r));if(-1==o)return;this.p=s[c].data().samples()[o],l<this._dmin&&(null==this._cb?alert("Curve: "+s[c].title()+"; point: ("+this.p.x+", "+this.p.y+")"):this._cb(s[c],this.p))}}}class CurveClosestPoint{constructor(t,e){this.eventHandlingObject=new MyObject(t,e),void 0!==e&&(this.eventHandlingObject.cb=e),this.cw=t.getCentralWidget(),this.cw.setEnabled_1(!0),this.eventHandlingObject.mPos=new PlotMarker("Marker");var i=this.eventHandlingObject.mPos.labelFont();i.th=14,i.fontColor="red",this.eventHandlingObject.mPos.setLabelFont(i),this.eventHandlingObject.mPos.setLabel("AAAAAb"),this.eventHandlingObject.mPos.attach(t),this.eventHandlingObject.mPos.setVisible(!1)}setDistance(t){this.eventHandlingObject._dmin=t}setEnabled(t){t?this.cw.installEventFilter(this.eventHandlingObject):(this.cw.removeEventFilter(this.eventHandlingObject),this.eventHandlingObject.selectorWidgetOverlay.clearCanvas())}setCb(t){this.eventHandlingObject._cb=t}setMousePattern(t,e){this.eventHandlingObject.button=t,this.eventHandlingObject.modifiers=e}}define("curveClosestPoint",["static","widgetOverlay","plotMarker"],function(){});class ScaleWidget extends Widget{constructor(t,e,i){super(e);var n=this.getElement(),s=null,a="",r=t,o=[],l=[],c=new Misc.Font(14),u=new Misc.Font(12);this.setBorderDist=function(t,e){t==l[0]&&e==l[1]||(l[0]=t,l[1]=e)},this.getBorderDistHint=function(t){s.getBorderDistHint(u,t),t.start<o[0]&&(t.start=o[0]),t.end<o[1]&&(t.end=o[1])},this.setLabelFont=function(t){t.th<0||""===t.name||""===t.style||(u=t,r.getLayout().adjustLayout(e,t.th))},this.labelFont=function(){return u},this.setTitleFont=function(t){t.th<0||""===t.name||""===t.style||(c=t,r.getLayout().adjustLayout(e,t.th))},this.titleFont=function(){return c},this.setScaleDraw=function(t){if(void 0!==t&&t!=s){if(s){t.setScaleDiv(s.scaleDiv());var e=null;s.scaleMap().transformation()&&(e=s.scaleMap().transformation().copy()),t.setTransformation(e)}s=t}},this.scaleDraw=function(){return s},this.initScale=function(t){(s=new ScaleDraw).setAlignment(t);var e=new LinearScaleEngine;s.setScaleDiv(e.divideScale(0,100,10,5))},void 0===i?this.initScale(LeftScale):this.initScale(i),this.setTitle=function(t){a!==t&&(""!==t?(""===a&&(this.alignment()===LeftScale||this.alignment()===RightScale?r.getLayout().adjustLayout(n,parseFloat(n.css("width"))+c.th):r.getLayout().adjustLayout(n,parseFloat(n.css("height"))+c.th),Static.trigger("axisTitleAdded",!0)),a=t):(this.alignment()===LeftScale||this.alignment()===RightScale?r.getLayout().adjustLayout(n,parseFloat(n.css("width"))-c.th):r.getLayout().adjustLayout(n,parseFloat(n.css("height"))-c.th),a="",Static.trigger("axisTitleAdded",!1)),r.getLayout().updateLayout())},this.title=function(){return a},this.setAlignment=function(t){s&&s.setAlignment(t)},this.alignment=function(){return null==s?LeftScale:s.alignment()},this.labelWidth=function(t){return u.textSize(t).width},this.draw=function(){var t=s.maxTickLength(),e=s.spacing();if(s.orientation()===Vertical){var i=t+e+this.labelWidth(s.longestLabel())+10+(""!==a?c.th:0)+10;r.getLayout().adjustLayout(n,i)}if(s.orientation()===Horizontal){var o=t+e+10+(""!==a?c.th:0)+10;r.getLayout().adjustLayout(n,o)}r.getLayout().updateLayout();var l=new PaintUtil.Painter(this);l.setFont(u),s.draw(l),""!==a&&(l.setFont(c),this.drawTitle(l)),l=null},this.drawTitle=function(t){var e=t.canvasWidth(),i=t.canvasHeight();t.save(),t.setFont(c),s.alignment()===LeftScale?""!==a&&t.drawVerticalText(a,c.th,i/2):s.alignment()===RightScale?""!==a&&t.drawVerticalText(a,e-c.th,i/2,!0):s.alignment()===BottomScale?""!==a&&t.drawText(a,e/2,i-2,"center"):s.alignment()===TopScale&&""!==a&&t.drawText(a,e/2,c.th,"center"),t.restore()},this.setScaleDiv=function(t){s.scaleDiv()!==t&&(s.setScaleDiv(t),Static.trigger("scaleDivChanged"))},Static.bind("scaleDivChanged",this.scaleChange),this.setTransformation=function(t){s.setTransformation(t)},this.toString=function(){return"[ScaleWidget]"}}}ScaleWidget.prototype.scaleChange=function(){},define("scaleWidget",["static","widget"],function(){});class Utility{static generateCurveName(t,e){let i=1,n=e||"curve_",s=n.concat(i);for(;t.findPlotCurve(s);)s=n.concat(++i);return s}static modifiers(t){var e=Static.NoModifier;return t.altKey&&t.ctrlKey&&t.shiftKey?e|Static.AltModifier|Static.ControlModifier|Static.ShiftModifier:t.altKey&&t.ctrlKey?e|Static.AltModifier|Static.ControlModifier:t.altKey&&t.shiftKey?e|Static.AltModifier|Static.ShiftModifier:t.ctrlKey&&t.shiftKey?e|Static.ControlModifier|Static.ShiftModifier:t.altKey?e|Static.AltModifier:t.ctrlKey?e|Static.ControlModifier:t.shiftKey?e|Static.ShiftModifier:e}static button(t){return null!=t&&t.button}static colorList(){return["black","red","green","blue","yellow","brown"]}static makePoints(t){var e=[];return t.forEach(function(t){e.push(new Misc.Point(parseFloat(t[0]),parseFloat(t[1])))}),e}static pointsToXYObjectArray(t){var e=[];return t.forEach(function(t){e.push({x:t.x,y:t.y})}),e}static pointsFromXYObjectArray(t){var e=[];return t.forEach(function(t){e.push(new Misc.Point(t.x,t.y))}),e}static linearEquationFromPoints(t,e){var i=(e.y-t.y)/(e.x-t.x),n=-i*t.x+t.y,s=i.toString();return s+="x+",s+=n.toString()}static toArrays(t){for(var e=t.split("\n"),i=[],n=0;n<e.length;++n){var s=e[n].split(",");isNaN(parseFloat(s))||i.push(s)}return i}static setAutoScale(t,e){t.setAxisAutoScale(xBottom,e),t.setAxisAutoScale(yLeft,e),t.setAxisAutoScale(xTop,e),t.setAxisAutoScale(yRight,e)}static majorGridLines(t,e){t.enableX(e),t.enableY(e),Static.trigger("majorGridLines",[t,e])}static minorGridLines(t,e){t.enableXMin(e),t.enableYMin(e),Static.trigger("minorGridLines",[t,e])}static randomColor(t=0){var e=[256*Math.random(),256*Math.random(),256*Math.random()],i=[51*t,51*t,51*t];return"rgb("+[e[0]+i[0],e[1]+i[1],e[2]+i[2]].map(function(t){return Math.round(t/2)}).join(",")+")"}static setCurveBrush(t,e){var i=$('<input type="color" style="opacity:0;">');t&&(t.brush().color==Static.NoBrush?i.val(Static.colorNameToHex("rgb(255, 255, 254)")):i.val(Static.colorNameToHex(t.brush().color)),i.change(function(){var i=t.brush();i.color=$(this).val(),t.setBrush(i),void 0!==e&&e(t)}),i.trigger("click"))}static removeCurveBrush(t){var e=t.brush();e.color=Static.NoBrush,t.setBrush(e)}static setSymbolPenWidth(t,e){var i=t.symbol();i&&(i.pen().width=e,t.plot().autoRefresh(),Utility.updateLegendIconSize(t),t.plot().updateLegend(t),Static.trigger("symbolAttributeChanged",t))}static updateLegendIconSize(t){var e=t.getLegendIconSize();if(t.symbol()&&(e=t.symbol().boundingRect().size()),t.symbol()&&t.testLegendAttribute(Static.LegendShowSymbol)){if(t.testLegendAttribute(Static.LegendShowLine)){var i=Math.ceil(1.5*e.width);i%2&&i++,e.width=Math.max(40,i)}t.setLegendIconSize(e)}else t.testLegendAttribute(Static.LegendShowLine)&&(e.width=40,t.setLegendIconSize(e))}static setSymbolSize(t,e){var i=t.symbol();if(i){var n=i.size();n.width=e,n.height=e,i.setSize(n),t.plot().autoRefresh(),Utility.updateLegendIconSize(t),t.plot().updateLegend(t),Static.trigger("symbolAttributeChanged",t)}}static addSymbol(t,e){e==NoSymbol&&t.setSymbol(null);var i=t.symbol();null==i&&((i=new Symbol).setBrush(new Misc.Brush(Static.NoBrush)),i.setSize(new Misc.Size(10,10)),t.setSymbol(i)),i.size().width<=0&&i.setSize(new Misc.Size(10,10)),i.setStyle(e),t.itemChanged(),t.legendChanged(),Static.trigger("symbolAdded",t)}static curveRenameDlg(t,e,i){Static.prompt('Enter a new name for "'+t+'"',t,function(n){if(t==n)return Static.alert("You did not change the name!"),!1;var s=e.findPlotCurve(t);return e.findPlotCurve(n)?(Static.alert(n+" already exist"),!1):(s.setTitle(n),void 0!==i&&i(n,s),Static.trigger("curveRenamed",s),!0)},"small")}static setLegendAttribute(t,e,i){return"line"==e?(t.setLegendIconSize(new Misc.Size(i)),t.setLegendAttribute(Static.LegendShowSymbol,!1),void t.setLegendAttribute(Static.LegendShowLine,!0)):"symbol"==e?(t.setLegendIconSize(new Misc.Size(i)),t.setLegendAttribute(Static.LegendShowLine,!1),void t.setLegendAttribute(Static.LegendShowSymbol,!0)):"lineAndSymbol"==e?(t.setLegendIconSize(new Misc.Size(i)),t.setLegendAttribute(Static.LegendShowLine,!0),void t.setLegendAttribute(Static.LegendShowSymbol,!0)):(t.setLegendAttribute(Static.LegendShowLine,!1),void t.setLegendAttribute(Static.LegendShowSymbol,!1))}static enableComponent(t,e,i){for(var n=0;n<axisCnt;++n)t.axisScaleDraw(n).enableComponent(e,i);t.autoRefresh()}static setTickLength(t,e){for(var i=null,n=0;n<axisCnt;++n)i=t.axisScaleDraw(n),"small"==e?(i.setTickLength(MajorTick,6),i.setTickLength(MinorTick,3)):"medium"==e?(i.setTickLength(MajorTick,8),i.setTickLength(MinorTick,4)):"large"==e&&(i.setTickLength(MajorTick,12),i.setTickLength(MinorTick,6));t.autoRefresh()}static mVerifyRange(t,e,i){if(t<1)return 0;if((e=Math.max(0,Math.min(e,t-1)))>(i=Math.max(0,Math.min(i,t-1)))){var n=e;e=i,i=n}return i-e+1}static makeSamples(t){var e=t.fx,i=t.lowerX,n=t.upperX,s=t.numOfSamples;t.indepVarIsDegree;void 0===s&&(s=_numOfSamples);var a=findIndepVar(e);if("x"!==a)for(;-1!=e.indexOf(a);)e=e.replace(a,"x");var r=[],o=new EvaluateExp(e);if(o.error)return Static.alert(o.errorMessage),null;for(var l=(n-i)/(s-1),c=0;c<=s-1;++c){var u=i+c*l,h=o.eval({x:u});if(isFinite(h)){if(o.error)return Static.alert(o.errorMessage),null;r.push(new Misc.Point(u,h))}else{if(Static.errorResponse==Static.warn)return Static.alert("f("+u+'): yields infinity. Probably a "divide by zero" error. Try changing the limits or adjusting number of points.'),null;if(Static.errorResponse==Static.warnIgnore){Static.alertYesNo("Error found!!! Do you want to silently ignore errors?",function(t){return t==Static.Cancel?(console.log("C"),null):t==Static.Yes?(console.log("Y"),Static.errorResponse=Static.silentIgnore,Static.errorResponseChanged=!0,null):t==Static.No?(console.log("N"),null):void 0}),r=[];break}}}return Static.errorResponseChanged&&(Static.errorResponseChanged=!1,Static.errorResponse=Static.warnIgnore),r}}function PaintUtil(){function t(t){var e=t,i="",n=null;this.textSize=function(t){e.save(),e.font=n.weight+" "+n.style+" "+n.th+"px "+n.name;var i=e.measureText(t).width,s=e.measureText("M").width;return e.restore(),new Misc.Size(i,s)},this.context=function(){return e},this.canvasWidth=function(){return e.canvas.width},this.canvasHeight=function(){return e.canvas.height},this.save=function(){e.save()},this.restore=function(){e.restore()},this.translate=function(t,i){e.translate(t,i)},this.rotate=function(t){e.rotate(t*Math.PI/180)},this.scale=function(t,i){e.scale(t,i)},this.setPen=function(t){this.style==Static.NoPen?e.strokeStyle="transparent":e.strokeStyle=t.color,e.lineWidth=t.width,"dash"===t.style?e.setLineDash([10,5]):"dot"===t.style?e.setLineDash([3,8]):"dashDot"===t.style?e.setLineDash([12,5,3,5]):"dashDotDot"===t.style&&e.setLineDash([12,5,3,5,3,5]),i=t.style},this.pen=function(){var t="";return t="transparent"==e.strokeStyle?NoPen:e.strokeStyle,new Misc.Pen(t,e.lineWidth,i)},this.setBrush=function(t){void 0===t.color||t.color===Static.NoBrush?e.fillStyle="transparent":e.fillStyle=t.color},this.brush=function(){return e.fillStyle},this.setFont=function(t){e.font=t.weight+" "+t.style+" "+t.th+"px "+t.name,""!=typeof t.fontColor&&(e.fillStyle=t.fontColor),n=t},this.font=function(){return n},this.fillRect=function(t,i){i.style!==NoBrush&&(this.setBrush(i),e.rect(t.left(),t.top(),t.width(),t.height()),e.fill())},this.drawPath=function(t){e.beginPath();for(var i=0;i<t.elementCount();i++){var n=t.elementAt(i),s=n.x,a=n.y;switch(n.type){case MoveToElement:e.moveTo(s,a);break;case LineToElement:e.lineTo(s,a);break;case CurveToElement:var r=t.elementAt(++i),o=r.x,l=r.y,c=t.elementAt(++i),u=c.x,h=c.y;e.bezierCurveTo(s,a,o,l,u,h)}}e.stroke(),e.fill()},this.drawPoint=function(t){var i=this.pen().width;e.fillStyle=this.pen().color,e.fillRect(t.x-1*i,t.y-1*i,1.9*i,2*i)},this.drawPoints=function(t){e.fillStyle=this.pen().color;for(var i=this.pen().width,n=0;n<t.length;++n)e.fillRect(t[n].x-1*i,t[n].y-1*i,1.9*i,2*i)},this.drawLine=function(t,i,n,s){e.beginPath(),void 0!==s&&void 0!==n?(e.moveTo(t,i),e.lineTo(n,s),e.stroke()):(e.moveTo(t.x,t.y),e.lineTo(i.x,i.y)),e.stroke()},this.drawPolyline=function(t){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var i=1;i<t.length;++i)e.lineTo(t[i].x,t[i].y);e.stroke()},this.drawPolygon=function(t){t[0].x===t[t.length-1].x&&t[0].y===t[t.length-1].y||t.push(t[0]),e.beginPath(),this.drawPolyline(t),e.closePath(),e.fill()},this.drawRect=function(t,i,n,s){if(e.beginPath(),"number"==typeof t)e.rect(t,i,n,s);else{var a=t;e.rect(a.left(),a.top(),a.width(),a.height())}e.stroke(),e.fill(),e.closePath()},this.drawCircle=function(t,i,n){if(e.beginPath(),"number"==typeof t)e.arc(t,i,n,0,2*Math.PI,!1);else{var s=t;n=i,e.arc(s.x,s.y,n,0,2*Math.PI,!1)}e.stroke(),e.fill(),e.closePath()},this.drawEllipse=function(t){var i=(t.left()+t.right())/2,n=(t.top()+t.bottom())/2,s=t.width(),a=t.height();e.beginPath(),e.moveTo(i,n-a/2),e.bezierCurveTo(i+s/2,n-a/2,i+s/2,n+a/2,i,n+a/2),e.bezierCurveTo(i-s/2,n+a/2,i-s/2,n-a/2,i,n-a/2),e.stroke(),e.fill(),e.closePath(),e.closePath()},this.drawVerticalText=function(t,i,n,s){var a=-1;void 0!==s&&!0===s&&(a=1);var r=e.measureText(t);e.save();var o=i,l=n-a*r.width/2;e.translate(o,l),e.rotate(a*Math.PI/2),e.translate(-o,-l),-1===a&&(e.textAlign="left"),e.fillText(t,o,l),e.restore()},this.drawText=function(t,i,s,a,r){void 0!==r&&(t=function(t,e){for(var i=t,s=n.textSize(i).width;s>e&&i.substring;)i=i.substring(0,i.length-1),s=n.textSize(i).width;return i}(t,r)),void 0!==a&&(e.textAlign=a),e.fillText(t,i,s)},this.toString=function(){return"[Painter: "+e+"]"}}function e(t){var e="http://www.w3.org/2000/svg",i=t,n=new Misc.Pen;n.style=Static.NoPen;var s=new Misc.Brush,a=new Misc.Font,r=null;function o(){n.style===Static.NoPen?r.attr("stroke","transparent"):r.attr("stroke",n.color),r.attr("stroke-Width",n.width),"dash"===n.style?r.attr("stroke-dasharray",[10,5]):"dot"===n.style?r.attr("stroke-dasharray",[3,8]):"dashDot"===n.style?r.attr("stroke-dasharray",[12,5,3,5]):"dashDotDot"===n.style&&r.attr("stroke-dasharray",[12,5,3,5,3,5])}function l(){s.color===Static.NoBrush?r.attr("fill","transparent"):r.attr("fill",s.color)}this.setBrush=function(t){s=t},this.setPen=function(t){n=t},this.pen=function(){return n},this.rotate=function(t,e,i){xCenter=e||0,yCenter=i||0,t&&r.attr("transform"," rotate("+t+" "+xCenter+" "+yCenter+")")},this.transform=function(t){var e=t.translateX||0,i=t.translateY||0,n=t.scaleX||1,s=t.scaleY||1,a=t.rotation||0,o=t.rotationX||0,l=t.rotationY||0,c="";1==n&&1==s||(c+=" scale("+n+" "+s+")"),a&&(c+=" rotate("+a+" "+o+" "+l+")"),1==e&&1==i||(c+=" translate("+e+" "+i+")"),r.attr("transform",c)},this.drawRect=function(t,n,s,a){(r=$(document.createElementNS(e,"rect"))).attr("x",t),r.attr("y",n),r.attr("width",s),r.attr("height",a),l(),o(),r.appendTo($(i.svg()))},this.drawPath=function(t){r=$(document.createElementNS(e,"path"));for(var n=t.data,s="",a=0;a<t.elementCount();a++){var c=t.elementAt(a),u=c.x+n.xOffset,h=c.y+n.yOffset;switch(c.type){case MoveToElement:s+="M"+u+" "+h+" ";break;case LineToElement:s+="L"+u+" "+h+" ";break;case CurveToElement:var d=t.elementAt(++a),p=d.x+n.xOffset,f=d.y+n.yOffset,m=t.elementAt(++a);s+="C "+u+" "+h+" "+p+" "+f+" "+(m.x+n.xOffset)+" "+(m.y+n.yOffset)+" "}}r.attr("d",s),r.attr("transform"," scale("+n.scale+") rotate("+n.rotation+" "+n.xCenter+" "+n.yCenter+")"),l(),o(),r.appendTo($(i.svg()))},this.fillRect=function(t,n){(r=$(document.createElementNS(e,"rect"))).attr("x",t.left),r.attr("y",t.top),r.attr("width",t.width),r.attr("height",t.height),r.attr("fill",n.color),o(),r.appendTo($(i.svg()))},this.drawCircle=function(t,n,s){(r=$(document.createElementNS(e,"circle"))).attr("cx",t),r.attr("cy",n),r.attr("r",s),l(),o(),r.appendTo($(i.svg()))},this.drawLine=function(t,n,s,a){(r=$(document.createElementNS(e,"line"))).attr("x1",t),r.attr("y1",n),r.attr("x2",s),r.attr("y2",a),o(),r.appendTo($(i.svg()))},this.drawText=function(t,n,s){(r=$(document.createElementNS(e,"text"))).attr("x",n),r.attr("y",s),r.attr("font-size",a.th),r.attr("font-family",a.name),r.attr("font-weight",a.weight),r.attr("font-style",a.style),o(),l(),r[0].textContent=t,r.appendTo($(i.svg()))},this.textSize=function(t){return a.textSize(t)},this.setFont=function(t){a=t},this.font=function(){return a},this.toString=function(){return"[GraphicPainter]"}}PaintUtil.Painter=function(i){var n=null,s=!1;"[Graphic]"===i.toString()?(s=!0,n=new e(i)):n="[object CanvasRenderingContext2D]"===i.toString()?new t(i):new t(i.getContext()),this.isGraphicPainter=function(){return s},this.textSize=function(t){return n.textSize(t)},this.context=function(){if(!s)return n.context()},this.canvasWidth=function(){if(!s)return n.canvasWidth()},this.canvasHeight=function(){if(!s)return n.canvasHeight()},this.save=function(){s||n.save()},this.restore=function(){s||n.restore()},this.translate=function(t,e){s||n.translate(t,e)},this.scale=function(t,e){s||n.scale(t,e)},this.rotate=function(t,e,i){s||n.rotate(t,e,i)},this.transform=function(t){s&&n.transform(t)},this.setPen=function(t){n.setPen(t)},this.pen=function(){return n.pen()},this.setBrush=function(t){n.setBrush(t)},this.brush=function(){return n.brush()},this.setFont=function(t){n.setFont(t)},this.font=function(){return n.font()},this.fillRect=function(t,e){n.fillRect(t,e)},this.drawPath=function(t){n.drawPath(t)},this.drawPoint=function(t){s||n.drawPoint(t)},this.drawPoints=function(t){s||n.drawPoints(t)},this.drawLine=function(t,e,i,s){n.drawLine(t,e,i,s)},this.drawPolyline=function(t){s||n.drawPolyline(t)},this.drawPolygon=function(t){s||n.drawPolygon(t)},this.drawRect=function(t,e,i,s){n.drawRect(t,e,i,s)},this.drawVerticalText=function(t,e,i,a){s||n.drawVerticalText(t,e,i,a)},this.drawText=function(t,e,i,s,a){n.drawText(t,e,i,s,a)},this.drawCircle=function(t,e,i){n.drawCircle(t,e,i)},this.drawEllipse=function(t){n.drawEllipse(t)},this.toString=function(){return n.toString()}}}define("utility",function(){}),PaintUtil(),define("painter",function(){});var ScaleDiv=function(t,e,i,n,s){var a=0,r=0,o=[];if(void 0===t||void 0===e);else if(void 0===i&&"object"==typeof t&&"object"==typeof e){var l=t,c=e;a=l.minValue(),r=l.maxValue();for(var u=0;u<NTickTypes;u++)o[u]=c[u]}else if(void 0===n)for(lowerBound=t,upperBound=e,c=i,a=lowerBound,r=upperBound,u=0;u<NTickTypes;u++)o[u]=c[u];else void 0===t&&void 0===e&&void 0===i&&void 0===n&&void 0===s&&(lowerBound=t,upperBound=e,minorTicks=i,mediumTicks=n,majorTicks=s,a=lowerBound,r=upperBound,o[MinorTick]=minorTicks,o[MediumTick]=mediumTicks,o[MajorTick]=majorTicks);this.setInterval=function(t,e){"number"==typeof t&&"number"==typeof e?(lowerBound=t,upperBound=e,a=lowerBound,r=upperBound):"object"==typeof t&&void 0===e&&(a=(l=t).minValue(),r=l.maxValue())},this.interval=function(){return new Interval(a,r)},this.setLowerBound=function(t){a=t},this.lowerBound=function(){return a},this.setUpperBound=function(t){r=t},this.upperBound=function(){return r},this.range=function(){return r-a},this.isEmpty=function(){return a==r},this.isIncreasing=function(){return a<=r},this.contains=function(t){var e=Math.min(a,r),i=Math.max(a,r);return t>=e&&t<=i},this.invert=function(){var t=a;a=r,r=t;for(var e=0;e<NTickTypes;e++)for(var i=o[e],n=i.length,s=n/2,l=0;l<s;l++)t=i[l],i[l]=i[n-1-l],i[n-1-l]=t},this.inverted=function(){var t=new ScaleDiv(a,r);return t.invert(),t},this.bounded=function(t,e){var i=Math.min(t,e),n=Math.max(t,e),s=new ScaleDiv;for(s.setInterval(t,e),tickType=0;tickType<NTickTypes;tickType++){var a=o[tickType],r=[];for(u=0;u<a.size();u++){var l=a[u];l>=i&&l<=n&&r.push(l)}s.setTicks(tickType,r)}return s},this.setTicks=function(t,e){t>=0&&t<NTickTypes&&(o[t]=e)},this.ticks=function(t){return t>=0&&t<NTickTypes?o[t]:[]}};ScaleDiv.prototype.toString=function(){return"[ScaleDiv]"},define("scaleDiv",function(){});class Interval{constructor(t,e,i){var n=0,s=-1,a=IncludeBorders;void 0!==t&&void 0!==e&&(n=t,s=e),void 0!==i&&(a=i),this.setBorderFlags=function(t){a=t},this.borderFlags=function(){return a},this.setMinValue=function(t){n=t},this.setMaxValue=function(t){s=t},this.minValue=function(){return n},this.maxValue=function(){return s}}toString(){return"[Interval]"}setInterval(t,e,i){this.setMinValue(t),this.setMaxValue(e),this.setBorderFlags(i)}isValid(){return 0==(this.borderFlags()&ExcludeBorders)?this.minValue()<=this.maxValue():this.minValue()<this.maxValue()}width(){return this.isValid()?this.maxValue()-this.minValue():0}isNull(){return this.isValid()&&this.minValue()>=this.maxValue()}invalidate(){this.setMinValue(0),this.setMaxValue(-1)}normalized(){return this.minValue()>this.maxValue()?this.inverted():this.minValue()==this.maxValue()&&this.borderFlags()==ExcludeMinimum?this.inverted():this}inverted(){var t=IncludeBorders;return this.borderFlags()&ExcludeMinimum&&(t|=ExcludeMaximum),this.borderFlags()&ExcludeMaximum&&(t|=ExcludeMinimum),new Interval(this.maxValue(),this.minValue(),t)}contains(t){return!!this.isValid()&&(!(t<this.minValue()||t>this.maxValue())&&(!(t==this.minValue()&&this.borderFlags()&ExcludeMinimum)&&!(t==this.maxValue()&&this.borderFlags()&ExcludeMaximum)))}limited(t,e){if(!this.isValid()||t>e)return new Interval;var i=Math.max(this.minValue(),t);i=Math.min(i,e);var n=Math.max(this.maxValue(),t);return n=Math.min(n,e),new Interval(i,n,this.borderFlags())}}define("interval",function(){});var Transform=function(){};Transform.prototype.toString=function(){return"[Transform]"},Transform.prototype.bounded=function(t){return t};var NullTransform=function(){Transform.call(this)};NullTransform.prototype=Object.create(Transform.prototype),NullTransform.prototype.constructor=NullTransform,NullTransform.prototype.toString=function(){return"[NullTransform]"},NullTransform.prototype.transform=function(t){return t},NullTransform.prototype.invTransform=function(t){return t},NullTransform.prototype.copy=function(){return new NullTransform};var LogTransform=function(){Transform.call(this)};LogTransform.prototype=Object.create(Transform.prototype),LogTransform.prototype.constructor=LogTransform,LogTransform.prototype.toString=function(){return"[LogTransform]"},LogTransform.prototype.transform=function(t){return Math.log(t)},LogTransform.prototype.invTransform=function(t){return Math.exp(t)},LogTransform.prototype.bounded=function(t){return t>Number.MAX_VALUE?Number.MAX_VALUE:t<Number.MIN_VALUE?Number.MIN_VALUE:t},LogTransform.prototype.copy=function(){return new LogTransform};var PowerTransform=function(t){Transform.call(this),this.d_exponent=t};PowerTransform.prototype=Object.create(Transform.prototype),PowerTransform.prototype.constructor=PowerTransform,PowerTransform.prototype.toString=function(){return"[PowerTransform]"},PowerTransform.prototype.transform=function(t){return t<0?-Math.pow(-t,1/d_exponent):Math.pow(t,1/d_exponent)},PowerTransform.prototype.invTransform=function(t){return t<0?-Math.pow(-t,d_exponent):Math.pow(t,d_exponent)},PowerTransform.prototype.copy=function(){return new PowerTransform(d_exponent)},define("transform",function(){});class ScaleMap{static invTransform_Rect(t,e,i){var n=t.invTransform(i.left()),s=t.invTransform(i.right()-1),a=e.invTransform(i.top()),r=e.invTransform(i.bottom()-1);return new Misc.Rect(new Misc.Point(n,a),s-n,r-a).normalized()}static transform_Rect(t,e,i){var n=t.transform(i.left()),s=t.transform(i.right()),a=e.transform(i.top()),r=e.transform(i.bottom());return new Misc.Rect(new Misc.Point(n,a),s-n,r-a).normalized()}static invTransform(t,e,i){return new Misc.Point(t.invTransform1(i.x),e.invTransform1(i.y))}static transform(t,e,i){return new Misc.Point(t.transform1(i.x),e.transform1(i.y))}static transformPath(t,e,i,n){for(var s=new Misc.MPath,a=0;a<i.elementCount();a++){var r=i.elementAt(a),o=t.transform(r.x),l=e.transform(r.y);switch(r.type){case MoveToElement:n&&(o=Math.round(o),l=Math.round(l)),s.moveTo(o,l);break;case LineToElement:n&&(o=Math.round(o),l=Math.round(l)),s.lineTo(o,l);break;case CurveToElement:var c=i.elementAt(++a),u=t.transform(c.x),h=e.transform(c.y),d=i.elementAt(++a),p=t.transform(d.x),f=e.transform(d.y);s.cubicTo(o,l,u,h,p,f)}}return s}constructor(){var t=0,e=1,i=0,n=1,s=1,a=0,r=null;this.setTransformation=function(i){i!==r&&(r=i),this.setScaleInterval(t,e)},this.transformation=function(){return r},this.setScaleInterval=function(i,n){t=i,e=n,r&&(t=r.bounded(t),e=r.bounded(e)),this.updateFactor()},this.setPaintInterval=function(t,e){i=t,n=e,this.updateFactor()},this.updateFactor=function(){a=t;var o=e;r&&(a=r.transform(a),o=r.transform(o)),s=1,a!=o&&(s=(n-i)/(o-a))},this.invTransform=function(t){return this.invTransform1(t)},this.transform=function(t){return this.transform1(t)},this.transform1=function(t){return r&&(t=r.transform(t)),i+(t-a)*s},this.invTransform1=function(t){var e=a+(t-i)/s;return r&&(e=r.invTransform(e)),e},this.toString=function(){return'[ScaleMap "'+s+'"]'}}}define("scaleMap",["static","transform"],function(){});class Layout{constructor(t,e){var i=e;if(t){t.parent()[0]===document.body&&t.css("position","absolute");var n=$("<div />").attr({id:"titleDiv"});t.append(n);var s=$("<div />").attr({id:"topScaleDiv"});t.append(s),"auto"!==s.css("top")&&parseFloat(s.css("top"));var a=$("<div />").attr({id:"leftScaleDiv"});t.append(a),"auto"!==a.css("left")&&parseFloat(a.css("left"));var r=$("<div />").attr({id:"centralDiv"});t.append(r),"auto"!==r.css("top")&&parseFloat(r.css("top")),"auto"!==r.css("bottom")&&parseFloat(r.css("bottom")),"auto"!==r.css("right")&&parseFloat(r.css("right")),"auto"!==r.css("left")&&parseFloat(r.css("left")),this.getCentralDiv=function(){return r};var o=$("<div />").attr({id:"rightScaleDiv"});t.append(o),"auto"!==o.css("right")&&parseFloat(o.css("right"));var l=$("<div/>").attr({id:"legendDiv"});t.append(l),"auto"!==l.css("right")&&parseFloat(l.css("right"));var c=$("<div />").attr({id:"bottomScaleDiv"});t.append(c),"auto"!==c.css("bottom")&&parseFloat(c.css("bottom"));var u=$("<div />").attr({id:"footerDiv"});t.append(u),"auto"!==u.css("bottom")&&parseFloat(u.css("bottom")),this.getPlotDiv=function(){return t},this.getLegendDiv=function(){return l},this.getTitleDiv=function(){return n},this.getFooterDiv=function(){return u};var h=[a,o,c,s];this.getScaleDivElement=function(t){return t<0||t>=axisCnt?null:h[t]},this.adjustLayout=function(t,e){var i="width";"footerDiv"!==t[0].id&&"titleDiv"!==t[0].id&&"topScaleDiv"!==t[0].id&&"bottomScaleDiv"!==t[0].id||(i="height"),t.css(i,e)},this.updateLayout=function(){var t,e,o;void 0!==i&&(t="none"==n.css("display"),i.axisEnabled(xTop)?t?d():p():t?f():m(),"none"!==n.css("display")?i.axisEnabled(xTop)?d():f():i.axisEnabled(xTop)?p():m(),e="none"==u.css("display"),i.axisEnabled(xBottom)?e?v():g():e?b():y(),"none"!=u.css("display")?i.axisEnabled(xBottom)?v():b():i.axisEnabled(xBottom)?g():y(),i.legend()&&l.css("width",i.legend().legendDivWidth()),i.axisEnabled(yRight)?i.isLegendEnabled()?S():x():i.isLegendEnabled()?w():P(),i.isLegendEnabled()?i.axisEnabled(yRight)?S():w():i.axisEnabled(yRight)?x():P(),o=parseFloat(a.css("width")),i.axisEnabled(yLeft)?(n.css("left",o),s.css("left",o),u.css("left",o),c.css("left",o),r.css("left",o)):(n.css("left",0),s.css("left",0),u.css("left",0),c.css("left",0),r.css("left",0)))},this.isLegendDivVisible=function(){return"block"===l[0].style.display},this.setPlot=function(t){i=t},this.toString=function(){return"[Layout]"}}function d(){var t=parseFloat(n.css("height")),e=parseFloat(s.css("height"));l.css("top",t),s.css("top",t),r.css("top",t+e),a.css("top",t+e),o.css("top",t+e)}function p(){var t=parseFloat(s.css("height"));l.css("top",0),s.css("top",0),r.css("top",t),a.css("top",t),o.css("top",t)}function f(){var t=parseFloat(n.css("height"));l.css("top",t),r.css("top",t),a.css("top",t),o.css("top",t)}function m(){l.css("top",0),r.css("top",0),a.css("top",0),o.css("top",0)}function v(){var t=parseFloat(u.css("height")),e=parseFloat(c.css("height"));l.css("bottom",t),c.css("bottom",t),r.css("bottom",t+e),a.css("bottom",t+e),o.css("bottom",t+e)}function g(){var t=parseFloat(c.css("height"));l.css("bottom",0),c.css("bottom",0),r.css("bottom",t),a.css("bottom",t),o.css("bottom",t)}function b(){var t=parseFloat(u.css("height"));l.css("bottom",t),r.css("bottom",t),a.css("bottom",t),o.css("bottom",t)}function y(){l.css("bottom",0),r.css("bottom",0),a.css("bottom",0),o.css("bottom",0)}function S(){var t=parseFloat(l.css("width")),e=parseFloat(o.css("width"));n.css("right",t+e+14+3),s.css("right",t+e+14+3),u.css("right",t+e+14+3),c.css("right",t+e+14+3),l.css("right",3),r.css("right",t+e+14+3),o.css("right",t+14+3)}function x(){var t=parseFloat(o.css("width"));n.css("right",t),s.css("right",t),u.css("right",t),c.css("right",t),r.css("right",t),o.css("right",0)}function w(){var t=parseFloat(l.css("width"));r.css("right",t+3+14),n.css("right",t+3+14),s.css("right",t+3+14),u.css("right",t+3+14),c.css("right",t+3+14),l.css("right",3)}function P(){n.css("right",0),s.css("right",0),u.css("right",0),c.css("right",0),r.css("right",0)}}}define("layout",function(){});class AbstractScaleDraw{constructor(){Static.makeAbstract(this,AbstractScaleDraw);var t=Enum.ScaleComponent.Backbone|Enum.ScaleComponent.Ticks|Enum.ScaleComponent.Labels,e=[];e[MinorTick]=4,e[MediumTick]=6,e[MajorTick]=8;var i=new ScaleMap,n=null,s=3,a=-1e4,r=1e4,o=4,l=1;this.data={},this.setNonExponentLimits=function(t,e){a=t,r=e},this.getNonExponentNotationLimits=function(){return{lower:a,upper:r}},this.decimalPlaces=function(){return s},this.setDecimalPlaces=function(t){s=t},this.longestLabel=function(){var t="",e=n.ticks(MajorTick);return e.forEach(function(i,o){0!==o&&o!==e.length-1&&n.contains(i)&&(((i=Static.adjustForDecimalPlaces(i,s))>r||i<a)&&(i=i.toExponential(s)),i.toString().length>t.length&&(t=i.toString()))}),t},this.enableComponent=function(e,i){i?t|=e:t&=~e},this.hasComponent=function(e){return t&e},this.setScaleDiv=function(t){n=t,i.setScaleInterval(n.lowerBound(),n.upperBound())},this.setTransformation=function(t){i.setTransformation(t)},this.scaleMap=function(){return i},this.scaleDiv=function(){return n},this.setPenWidth=function(t){t<=0&&(t=1),t!==l&&(l=t)},this.penWidth=function(){return l},this.draw=function(t){if(this.orientation()===Horizontal?i.setPaintInterval(0,t.canvasWidth()):i.setPaintInterval(t.canvasHeight(),0),this.hasComponent(Enum.ScaleComponent.Labels))for(var s=n.ticks(MajorTick),a=0;a<s.length;a++){var r=s[a];n.contains(r)&&this.drawLabel(t,r)}if(this.hasComponent(Enum.ScaleComponent.Ticks)){t.save(),t.setPen(new Misc.Pen("grey",l));for(var o=MinorTick;o<NTickTypes;o++){var c=n.ticks(o);for(a=0;a<c.length;a++){r=c[a];n.contains(r)&&this.drawTick(t,r,e[o])}}t.restore()}this.hasComponent(Enum.ScaleComponent.Backbone)&&(t.save(),t.setPen(new Misc.Pen("grey",l)),this.drawBackbone(t),t.restore())},this.setSpacing=function(t){t<0&&(t=0),o=t},this.spacing=function(){return o},this.setTickLength=function(t,i){if(!(t<MinorTick||t>MajorTick)){i<0&&(i=0);i>1e3&&(i=1e3),e[t]=i}},this.tickLength=function(t){return t<MinorTick||t>MajorTick?0:e[t]},this.maxTickLength=function(){for(var t=0,i=0;i<NTickTypes;i++)t=Math.max(t,e[i]);return t},this.label=function(t){return Static.mFuzzyCompare(t+1,1)&&(t=0),t.toString()},this.toString=function(){return"[AbstractScaleDraw]"}}}define("abstractScaleDraw",function(){});class ScaleDraw extends AbstractScaleDraw{constructor(){super();var t=BottomScale;this.orientation=function(){return t===TopScale||t===BottomScale?Horizontal:Vertical},this.alignment=function(){return t},this.setAlignment=function(e){t=e},this.getBorderDistHint=function(t,e){},this.toString=function(){return"[ScaleDraw]"},this.drawTick=function(t,e,i){if(!(i<=0)){var n=this.scaleMap().transform(e)+0,s=this.hasComponent(Enum.ScaleComponent.Backbone);switch(this.alignment()){case LeftScale:var a=t.canvasWidth();s&&(a-=2);var r=a-i;t.drawLine(a,n,r,n);break;case RightScale:a=0;s&&(a+=2);r=a+i;t.drawLine(a,n,r,n);break;case BottomScale:var o=0;s&&(o+=2);var l=o+i;t.drawLine(n,o,n,l);break;case TopScale:o=t.canvasHeight();s&&(o-=2);l=o-i;t.drawLine(n,o,n,l)}}},this.drawBackbone=function(t){var e=.5*t.pen().width,i=this.hasComponent(Enum.ScaleComponent.Backbone);switch(this.alignment()){case LeftScale:var n=t.canvasWidth()-e;i&&(n-=2),t.drawLine(n,0,n,t.canvasHeight());break;case RightScale:n=e;i&&(n+=2),t.drawLine(n,0,n,t.canvasHeight());break;case TopScale:var s=t.canvasHeight()-e;i&&(s-=2),t.drawLine(0,s,t.canvasWidth(),s);break;case BottomScale:s=e;i&&(s+=2),t.drawLine(0,s,t.canvasWidth(),s)}},this.labelPosition=function(t,e){t.save();var i=this.scaleMap().transform(e),n=this.spacing();this.hasComponent(Enum.ScaleComponent.Backbone)&&(n+=1),this.hasComponent(Enum.ScaleComponent.Ticks)&&(n+=this.tickLength(MajorTick));var s=0,a=0,r=t.measureText("M").width;switch(this.alignment()){case RightScale:s=n,a=i+.5*r+0;break;case LeftScale:s=t.canvas.width-n,a=i+.5*r+0;break;case BottomScale:s=i+0,a=n+r;break;case TopScale:s=i+0,a=t.canvas.height-n}return t.restore(),new Misc.Point(s,a)},this.drawLabel=function(t,e){e=Static.adjustForDecimalPlaces(e,this.decimalPlaces());var i=this.getNonExponentNotationLimits();(e>i.upper||e<i.lower)&&(e=e.toExponential(this.decimalPlaces()));var n=this.label(e);if(""!==n){var s=this.labelPosition(t.context(),e);if(this.orientation()!=Horizontal||0!==s.x&&s.x!=t.canvasWidth()){var a=t.textSize(n),r=a.height;if(this.orientation()!=Vertical||!(Math.abs(s.y-.5*r-0)<r||Math.abs(s.y-.5*r-t.canvasHeight())<r)){var o="center",l="undefined";if(this.alignment()===LeftScale)o="right",l="undefined";else if(this.alignment()===RightScale)o="left",l="undefined";else{l=t.canvasWidth()/(this.scaleDiv().ticks(MajorTick).length-1)-5;var c=a.width;if(c>l&&(c=l),s.x-c/2<0||s.x+c/2>t.canvasWidth())return}t.drawText(n,s.x,s.y,o,l)}}}}}}function ceilEps(t,e){return t=(t-_eps*e)/e,Math.ceil(t)*e}function floorEps(t,e){return t=(t+_eps*e)/e,Math.floor(t)*e}function divideEps(t,e){return 0===e||0===t?0:(t-_eps*t)/e}define("scaleDraw",["static","abstractScaleDraw"],function(){}),Static.mLog=function(t,e){return Math.log(e)/Math.log(t)},Static.mLogInterval=function(t,e){return new Interval(Static.mLog(t,e.minValue()),Static.mLog(t,e.maxValue()))},Static.mPowInterval=function(t,e){return new Interval(Math.pow(t,e.minValue()),Math.pow(t,e.maxValue()))},Static.mStepSize=function(t,e,i){if(e<=0)return 0;if(e>2)for(var n=e;n>1;n--)for(var s=t/n,a=Math.floor(Math.log(s)/Math.log(i)),r=Math.pow(i,a),o=i;o>1;o/=2){if(Static.mFuzzyCompare(s,o*r))return s;if(3===o&&i%2==0&&Static.mFuzzyCompare(s,2*r))return s}return.5*t},Static.divideInterval=function(t,e,i){if(e<=0)return 0;var n=divideEps(t,e);if(0===n)return 0;for(var s=Static.mLog(i,Math.abs(n)),a=Math.floor(s),r=Math.pow(i,s-a),o=i;o>1&&r<=o/2;)o/=2;var l=o*Math.pow(i,a);return n<0&&(l=-l),l};class ScaleEngine{constructor(t){var e=10,i=0,n=0;void 0!==t&&(e=t);var s=null,a=0;this.lowerMargin=function(){return i},this.upperMargin=function(){return n},this.setMargins=function(t,e){i=Math.max(t,0),n=Math.max(e,0)},this.setTransformation=function(t){t!==s&&(s=t)},this.transformation=function(){var t=null;return s&&(t=s.copy()),t},this.divideInterval=function(t,i){return Static.divideInterval(t,i,e)},this.contains=function(t,e){return!!t.isValid()&&(!(Static.m3FuzzyCompare(e,t.minValue(),t.width())<0)&&!(Static.m3FuzzyCompare(e,t.maxValue(),t.width())>0))},this.strip=function(t,e){if(!e.isValid()||0===t.length)return[];if(this.contains(e,t[0])&&this.contains(e,t[t.length-1]))return t;for(var i=[],n=0;n<t.length;n++)this.contains(e,t[n])&&i.push(t[n]);return i},this.buildInterval=function(t){var e=0===t?.5:Math.abs(.5*t);return Number.MAX_VALUE-e<t?new Interval(Number.MAX_VALUE-e,Number.MAX_VALUE):-Number.MAX_VALUE+e>t?new Interval(-Number.MAX_VALUE,-Number.MAX_VALUE+e):new Interval(t-e,t+e)},this.setBase=function(t){e=Math.max(t,2)},this.base=function(){return e},this.setReference=function(t){a=t},this.reference=function(){return a}}toString(){return"[ScaleEngine]"}}class LinearScaleEngine extends ScaleEngine{constructor(t){super(t),this.autoScale=function(t,e,i){var n=new Interval(e.x1,e.x2);(n=n.normalized()).setMinValue(n.minValue()-this.lowerMargin()),n.setMaxValue(n.maxValue()+this.upperMargin()),0===n.width()&&(n=this.buildInterval(n.minValue())),Static.divideInterval(n.width(),Math.max(t,1),this.base()),e.x1=n.minValue(),e.x2=n.maxValue()},this.divideScale=function(t,e,i,n,s){void 0===s&&(s=0);var a=new Interval(t,e).normalized();if(a.width()<=0)return new ScaleDiv;0===(s=Math.abs(s))&&(i<1&&(i=1),s=Static.divideInterval(a.width(),i,this.base()));var r=new ScaleDiv;if(0!==s){var o=[];this.buildTicks(a,s,n,o),r=new ScaleDiv(a,o)}return t>e&&r.invert(),r},this.buildTicks=function(t,e,i,n){var s=this.align(t,e);if(n[MajorTick]=this.buildMajorTicks(s,e),i>0){var a=[],r=[];this.buildMinorTicks(n[MajorTick],i,e,a,r),n[MinorTick]=a,n[MediumTick]=r}for(var o=0;o<NTickTypes;o++){var l=this.strip(n[o],t);n[o]=[],n[o]=l;for(var c=0;c<n[o].length;c++)0===Static.m3FuzzyCompare(n[o][c],0,e)&&(n[o][c]=0)}},this.buildMajorTicks=function(t,e){var i=Math.round(t.width()/e)+1;i>1e4&&(i=1e4);var n=[];n.push(t.minValue());for(var s=1;s<i-1;s++)n.push(t.minValue()+s*e);return n.push(t.maxValue()),n},this.buildMinorTicks=function(t,e,i,n,s){var a=Static.mStepSize(i,e,this.base());if(0!==a){var r=Math.ceil(Math.abs(i/a))-1,o=-1;r%2&&(o=r/2);for(var l=0;l<t.length;l++)for(var c=t[l],u=0;u<r;u++){var h=c+=a;0===Static.m3FuzzyCompare(c,0,i)&&(h=0),u==o?s.push(h):n.push(h)}}},this.align=function(t,e){var i=t.minValue(),n=t.maxValue();if(-Number.MAX_VALUE+e<=i){var s=floorEps(i,e);0!==Static.m3FuzzyCompare(i,s,e)&&(i=s)}if(Number.MAX_VALUE-e>=n){s=ceilEps(n,e);0!==Static.m3FuzzyCompare(n,s,e)&&(n=s)}return new Interval(i,n)}}toString(){return"[LinearScaleEngine]"}}class LogScaleEngine extends ScaleEngine{constructor(t){super(t),this.setTransformation(new LogTransform),this.autoScale=function(t,e,i){var n=this.base(),s=new Interval(e.x1/Math.pow(n,this.lowerMargin()),e.x2*Math.pow(n,this.upperMargin()));if(s.maxValue()/s.minValue()<n){var a=new LinearScaleEngine;a.setReference(this.reference()),a.setMargins(this.lowerMargin(),this.upperMargin()),a.autoScale(t,e,i);var r=new Interval(e.x1,e.x2);if(r.normalized(),(r=r.limited(1e-100,1e100)).maxValue()/r.minValue()<n)return void(i=i<0?-Static.mLog(n,Math.abs(i)):Static.mLog(n,i))}this.reference()>5e-101&&Math.min(this.reference(),5e99),0==(s=s.limited(1e-100,1e100)).width()&&(s=this.buildInterval(s.minValue())),(i=Static.divideInterval(Static.mLogInterval(n,s).width(),Math.max(t,1)))<1&&(i=1),e.x1=s.minValue(),e.x2=s.maxValue()},this.divideScale=function(t,e,i,n,s){var a=new Interval(t,e);if(a.normalized(),(a=a.limited(1e-100,1e100)).width()<=0)return new ScaleDiv;var r=this.base();if(a.maxValue()/a.minValue()<r){var o=new LinearScaleEngine;return o.setReference(this.reference()),o.setMargins(this.lowerMargin(),this.upperMargin()),0!=s&&(s=s<0?-Math.pow(r,-s):Math.pow(r,s)),o.divideScale(t,e,i,n,s)}0==(s=Math.abs(s))&&(i<1&&(i=1),(s=Static.divideInterval(Static.mLogInterval(r,a).width(),i,this.base()))<1&&(s=1));var l=new ScaleDiv;if(0!=s){var c=[];this.buildTicks(a,s,n,c),l=new ScaleDiv(a,c)}return t>e&&l.invert(),l},this.buildTicks=function(t,e,i,n){var s=this.align(t,e);if(n[MajorTick]=this.buildMajorTicks(s,e),i>0){var a=[],r=[];this.buildMinorTicks(n[MajorTick],i,e,a,r),n[MinorTick]=a,n[MediumTick]=r}for(var o=0;o<NTickTypes;o++){var l=this.strip(n[o],t);n[o]=[],n[o]=l;for(var c=0;c<n[o].length;c++)0===Static.m3FuzzyCompare(n[o][c],0,e)&&(n[o][c]=0)}},this.buildMajorTicks=function(t,e){var i=Static.mLogInterval(this.base(),t).width(),n=Math.round(i/e)+1;n>1e4&&(n=1e4);var s=Math.log(t.minValue()),a=(Math.log(t.maxValue())-s)/(n-1),r=[];r.push(t.minValue());for(var o=1;o<n-1;o++)r.push(Math.exp(s+o*a));return r.push(t.maxValue()),r},this.buildMinorTicks=function(t,e,i,n,s){var a=this.base();if(i<1.1){if(0==(h=this.divideInterval(i,e+1)))return;var r=Math.round(i/h),o=-1;for(r>2&&r%2==0&&(o=r/2),f=0;f<t.length-1;f++){var l=t[f],c=a/r;if(c>=1)for(m=2;m<r;m++)n.push(l*m*c);else for(m=1;m<r;m++){var u=l+m*l*(a-1)/r;m==o?s.push(u):n.push(u)}}}else{var h;if(0==(h=this.divideInterval(i,e)))return;h<1&&(h=1);var d=Math.round(i/h)-1;if(Static.m3FuzzyCompare((d+1)*h,i,i)>0&&(d=0),d<1)return;o=-1;d>2&&d%2&&(o=d/2);for(var p=Math.max(Math.pow(a,h),a),f=0;f<t.length;f++){u=t[f];for(var m=0;m<d;m++)u*=p,m==o?s.push(u):n.push(u)}}},this.align=function(t,e){var i=Static.mLogInterval(this.base(),t),n=floorEps(i.minValue(),e);0==Static.m3FuzzyCompare(t.minValue(),n,e)&&(n=t.minValue());var s=ceilEps(i.maxValue(),e);return 0==Static.m3FuzzyCompare(t.maxValue(),s,e)&&(s=t.maxValue()),Static.mPowInterval(this.base(),new Interval(n,s))}}toString(){return"[LogScaleEngine]"}}function PointMapper(){var t=0,e=new Misc.Rect;this.setBoundingRect=function(t){e=t},this.boundingRect=function(){return e},this.setFlag=function(e,i){i?t|=e:t&=~e},this.testFlag=function(e){return t&e},this.toPolygonF=function(e,i,n,s,a){return t&WeedOutPoints?t&RoundPoints?mToPolylineFiltered(e,i,n,s,a,!0):mToPolylineFiltered(e,i,n,s,a,!1):t&RoundPoints?Static.mToPoints(new Misc.Rect(0,0,-1,-1),e,i,n,s,a,!0):Static.mToPoints(new Misc.Rect(0,0,-1,-1),e,i,n,s,a,!1)},this.toPointsF=function(i,n,s,a,r){return t&WeedOutPoints?t&RoundPoints?e.left()<=e.right()&&e.top()<=e.bottom()?Static.mToPointsFiltered(e,i,n,s,a,r):mToPolylineFiltered(i,n,s,a,r,!0):Static.mToPolylineFiltered(i,n,s,a,r,!1):t&RoundPoints?Static.mToPoints(e,i,n,s,a,r,!0):Static.mToPoints(e,i,n,s,a,r,!1)}}define("scaleEngine",["static"],function(){}),Static.mToPolylineFiltered=function(t,e,i,n,s,a){var r=[],o=i.sample(n);r[0]=new Misc.Point(Math.round(t.transform(o.x)),Math.round(e.transform(o.y)));for(var l=0,c=n+1;c<=s;c++){var u,h=i.sample(c);u=a?new Misc.Point(Math.round(t.transform(h.x)),Math.round(e.transform(h.y))):new Misc.Point(t.transform(h.x),e.transform(h.y)),r[l].x===u.x&&r[l].y===u.y||(r[++l]=u)}return r},Static.mToPoints=function(t,e,i,n,s,a,r){var o=[];if(t.left()<=t.right()&&t.top()<=t.bottom())for(h=s;h<=a;h++){var l=n.sample(h),c=e.transform(l.x),u=i.transform(l.y);c>=t.left()&&c<=t.right()&&u>=t.top()&&u<=t.bottom()&&(r?o.push(new Misc.Point(Math.round(c),Math.round(u))):o.push(new Misc.Point(c,u)),0)}else for(var h=s;h<=a;h++){l=n.sample(h),c=e.transform(l.x)-1,u=i.transform(l.y)-1;r?o.push(new Misc.Point(Math.round(c),Math.round(u))):o.push(new Misc.Point(c,u)),0}return o},PointMapper.prototype.toString=function(){return"[PointMapper]"},define("pointMapper",["static"],function(){});class AxisData{constructor(){this.axisName="",this.isEnabled=!1,this.doAutoScale=!0,this.minValue,this.maxValue,this.stepSize,this.maxMajor,this.maxMinor,this.isValid=!0,this.scaleDiv=null,this.scaleEngine=null,this.scaleWidget=null,this.scaleDomDiv=null,this.canvas=null}toString(){return"[AxisData]"}}class Plot{constructor(t,e){var i;i=t||$("#plotDiv");var n=this,s=[],a=[],r=!1,o="",l="",c=!1,u="",h="",p=!1,f=null,m=new Misc.Font;this.zoomer=null,this.panner=null,this.isSidebarVisible=function(){return r},Static.bind("showSidebar",function(t,e){r=e}),this.setLegendFont=function(t){m=t},this.legendFont=function(){return m},this.autoRefresh=function(){p&&this.replot()},this.setAutoReplot=function(t){p=t},this.autoReplot=function(){return p},this.plotItemStore=function(){return s};var v=new Misc.Font(12),g=new Misc.Font(12),b=new Layout(i,this);this.getLayout=function(){return b},this.axisInterval=function(t){return this.axisValid(t)?a[t].scaleDiv.interval():new Interval},this.setAxisDecimalPlaces=function(t,e){this.axisValid(t)&&(this.axisScaleDraw(t).setDecimalPlaces(e),this.autoRefresh())},this.setNonExponentNotationLimits=function(t,e){for(var i=0;i<axisCnt;++i)this.axisScaleDraw(i).setNonExponentLimits(t,e);this.autoRefresh()},this.axisDecimalPlaces=function(t){return this.axisValid(t)?this.axisScaleDraw(t).decimalPlaces():3};var y=new Widget(b.getCentralDiv()),S=new Widget(b.getTitleDiv()),x=new Widget(b.getFooterDiv());y.setEnabled_1(!0),y.plot=this,this.getCentralWidget=function(){return y},this.getTitleWidget=function(){return S},this.getFooterWidget=function(){return x},this.initAxesData=function(){var t;for(t=0;t<axisCnt;t++)a[t]=new AxisData;for(a[yLeft].axisName="AxisYLeft",a[yRight].axisName="AxisYRight",a[xTop].axisName="AxisXTop",a[xBottom].axisName="AxisXBottom",a[yLeft].scaleWidget=new ScaleWidget(this,b.getScaleDivElement(yLeft),LeftScale),a[yRight].scaleWidget=new ScaleWidget(this,b.getScaleDivElement(yRight),RightScale),a[xTop].scaleWidget=new ScaleWidget(this,b.getScaleDivElement(xTop),TopScale),a[xBottom].scaleWidget=new ScaleWidget(this,b.getScaleDivElement(xBottom),BottomScale),t=0;t<axisCnt;t++){var e=a[t];e.scaleEngine=new LinearScaleEngine,e.scaleWidget.setTransformation(e.scaleEngine.transformation()),e.doAutoScale=!0,e.minValue=0,e.maxValue=1e3,e.stepSize=0,e.maxMinor=5,e.maxMajor=8,e.isValid=!1}a[yLeft].isEnabled=!0,a[yRight].isEnabled=!0,a[xBottom].isEnabled=!0,a[xTop].isEnabled=!0},this.axisMaxMinor=function(t){return this.axisValid(t)?a[t].maxMinor:0},this.axisMaxMajor=function(t){return this.axisValid(t)?a[t].maxMajor:0},this.setAxisMaxMinor=function(t,e){if(this.axisValid(t)){e=Static.qBound(0,e,100);var i=a[t];e!=i.maxMinor&&(i.maxMinor=e,i.isValid=!1,this.autoRefresh())}},this.setAxisMaxMajor=function(t,e){if(this.axisValid(t)){e=Static.qBound(1,e,1e4);var i=a[t];e!=i.maxMajor&&(i.maxMajor=e,i.isValid=!1,this.autoRefresh())}},this.axisValid=function(t){return t>=yLeft&&t<axisCnt},this.setAxisScaleEngine=function(t,e){if(this.axisValid(t)&&null!==e){var i=a[t];i.scaleEngine=e,a[t].scaleWidget.setTransformation(e.transformation()),i.isValid=!1,this.autoRefresh()}},this.legend=function(){return f},this.setLegend=function(t){f!==t&&(f=t).setPlot(this)},this.insertLegend=function(t){(f=t).setLegendDiv(b.getLegendDiv()),f.setPlot(this);for(var e=0;e<s.length;++e)this.insertLegendItem(s[e]);Static.trigger("legendInserted",f)},this.insertLegendItem=function(t,e){null!==f&&null!=t&&(t.testItemAttribute(Legend)&&f.addItem(t,e),f.isEmpty()||c&&f.legendDiv().show())},this.removeLegendItem=function(t){if(null!==f){var e=f.removeItem(t);return f.isEmpty()&&f.legendDiv().hide(),e}},this.updateLegend=function(t){if(null!=t&&t.testItemAttribute(Legend)){var e=this.removeLegendItem(t);this.insertLegendItem(t,e)}},this.axisScaleEngine=function(t){return this.axisValid(t)?a[t].scaleEngine:null},this.setAxisAutoScale=function(t,e){this.axisValid(t)&&a[t].doAutoScale!==e&&(a[t].doAutoScale=e,this.autoRefresh())},this.axisAutoScale=function(t){return!!this.axisValid(t)&&a[t].doAutoScale},this.setAxisScale=function(t,e,i,n){var s=0;if(void 0!==n&&(s=n),this.axisValid(t)){var r=a[t];r.doAutoScale=!1,r.isValid=!1,r.minValue=e,r.maxValue=i,r.stepSize=s,Static.trigger("rescaled"),this.autoRefresh()}},this.enableAxis=function(t,e){this.axisValid(t)&&e!==a[t].isEnabled&&(a[t].isEnabled=e,e?a[t].scaleWidget.show():a[t].scaleWidget.hide(),this.autoRefresh())},this.axisEnabled=function(t){return!!this.axisValid(t)&&a[t].isEnabled},this.setAxisTitle=function(t,e){this.axisValid(t)&&(a[t].scaleWidget.setTitle(e),this.autoRefresh())},this.axisTitle=function(t){return this.axisValid(t)?a[t].scaleWidget.title():""},this.axisScaleDiv=function(t){return a[t].scaleDiv},this.setAxisScaleDiv=function(t,e){this.axisValid(t)&&(d=a[t],d.doAutoScale=!1,d.scaleDiv=e,d.isValid=!0,this.autoRefresh())},this.axisScaleDraw=function(t){return this.axisValid(t)?this.axisWidget(t).scaleDraw():null},this.setAxisLabelFont=function(t,e){this.axisValid(t)&&(this.axisWidget(t).setLabelFont(e),this.autoRefresh())},this.axisLabelFont=function(t){return this.axisValid(t)?this.axisWidget(t).labelFont():null},this.setAxisTitleFont=function(t,e){this.axisValid(t)&&(this.axisWidget(t).setTitleFont(e),this.autoRefresh())},this.axisTitleFont=function(t){return this.axisValid(t)?this.axisWidget(t).titleFont():null},this.initAxesData(),this.isCursorSet=function(){return""!==u},this.cursor=function(t){return u},this.setCursor=function(t){t!=u&&(u=t,b.getCentralDiv().css("cursor",u))},this.setDefaultCursor=function(t){h!=t&&(h=t)},this.unsetCursor=function(){h!=u&&(u=h,b.getCentralDiv[0].style.cursor=u)},this.title=function(){return o},this.hideTitle=function(){""!=o&&(b.getTitleDiv().hide(),b.updateLayout(),this.autoRefresh())},this.showTitle=function(){""!=o&&(b.getTitleDiv().show(),b.updateLayout(),this.autoRefresh())},this.setTitle=function(t){o!==t&&(o=t,0==t.trim(" ").length&&(o=""),""!==o?(b.getTitleDiv().show(),Static.trigger("titleAdded",!0)):(b.getTitleDiv().hide(),Static.trigger("titleAdded",!1)),b.updateLayout(),this.autoRefresh())},this.setTitleFont=function(t){t.th<0||""===t.name||""===t.style||(v=t,b.adjustLayout(b.getTitleDiv(),2*t.th),this.autoRefresh())},this.setTitleFont(new Misc.Font(20,"Arial","normal","bold")),this.titleFont=function(){return v},this.footer=function(){return l},this.hideFooter=function(){""!=l&&(b.getFooterDiv().hide(),b.updateLayout(),this.autoRefresh())},this.showFooter=function(){""!=l&&(b.getFooterDiv().show(),b.updateLayout(),this.autoRefresh())},this.setFooter=function(t){l!==t&&(l=t,0==t.trim(" ").length&&(l=""),""!==l?(b.getFooterDiv().show(),Static.trigger("footerAdded",!0)):(b.getFooterDiv().hide(),Static.trigger("footerAdded",!1)),b.updateLayout(),this.autoRefresh())},this.setFooterFont=function(t){t.th<0||""===t.name||""===t.style||(g=t,b.adjustLayout(b.getFooterDiv(),2*t.th),this.autoRefresh())},this.setFooterFont(new Misc.Font(15,"Arial","normal","bold")),this.footerFont=function(){return g},this.enableLegend=function(t){c=t,f&&!f.isEmpty()&&(t?f.legendDiv().show():f.legendDiv().hide(),this.autoRefresh())},this.isLegendEnabled=function(t){return!!f&&!("none"==f.legendDiv()[0].style.display)},this.invTransform=function(t,e){return this.axisValid(t)?this.canvasMap(t).invTransform(e):0},this.transform=function(t,e){return this.axisValid(t)?this.canvasMap(t).transform(e):0};this.setPlotBackground=function(t){this.getCentralWidget().getElement().css("background-color",t)},this.setPlotBackground("rgb(238, 232, 170)"),this.plotBackground=function(t){return this.getCentralWidget().getElement().css("background-color")},this.setBorderRadius=function(t){this.getCentralWidget().getCanvas().css("border-radius",t)},this.borderRadius=function(t){return m_borderRadius},this.findPlotCurve=function(t){for(var e=this.itemList(Static.Rtti_PlotCurve),i=0;i<e.length;++i)if(e[i].title()===t)return e[i];return null},this.hasVisiblePlotCurve=function(){for(var t=this.itemList(Static.Rtti_PlotCurve),e=0;e<t.length;++e)if(t[e].isVisible())return!0;return!1},this.hasPlotCurve=function(){return this.itemList(Static.Rtti_PlotCurve).length>0},this.drawBackGround=function(){var t=new PaintUtil.Painter(y);t.fillRect(new Misc.Rect(0,0,y.width(),y.height()),""),t=null},this.drawTitle=function(){if(""!==o){var t=new PaintUtil.Painter(S);t.setFont(v),t.drawText(o,S.width()/2,2.6*v.th/2,"center"),t=null}},this.drawFooter=function(){if(""!==l){var t=new PaintUtil.Painter(x);t.setFont(g),t.drawText(l,x.width()/2,2.6*g.th/2,"center"),t=null}},this.itemList=function(t){return void 0===t?s:_.filter(s,function(e){return e.rtti===t})},this.insertItem=function(t){s.push(t)},this.removeItem=function(t){var e=s.indexOf(t);e>-1&&s.splice(e,1)},this.canvasMap=function(t){var e=new ScaleMap;e.setTransformation(this.axisScaleEngine(t).transformation());var i=this.axisScaleDiv(t);e.setScaleInterval(i.lowerBound(),i.upperBound());var n=this.axisWidget(t);if(t==yLeft||t==yRight){var s=n.height();e.setPaintInterval(s,0)}else{var a=n.width();e.setPaintInterval(0,a)}return e},this.axisWidget=function(t){return this.axisValid(t)?a[t].scaleWidget:null},this.updateAxes=function(){for(var t=[new Interval(Number.MAX_VALUE,-Number.MAX_VALUE),new Interval(Number.MAX_VALUE,-Number.MAX_VALUE),new Interval(Number.MAX_VALUE,-Number.MAX_VALUE),new Interval(Number.MAX_VALUE,-Number.MAX_VALUE)],e=0;e<s.length;++e){var i=s[e];if(i.testItemAttribute(AutoScale)&&(i.isVisible()&&(this.axisAutoScale(i.xAxis())||this.axisAutoScale(i.yAxis())))){var r=i.boundingRect();r.width()>=0&&(r.left()<t[i.xAxis()].minValue()&&t[i.xAxis()].setMinValue(r.left()),r.right()>t[i.xAxis()].maxValue()&&t[i.xAxis()].setMaxValue(r.right())),r.height()>=0&&(r.top()<t[i.yAxis()].minValue()&&t[i.yAxis()].setMinValue(r.top()),r.bottom()>t[i.yAxis()].maxValue()&&t[i.yAxis()].setMaxValue(r.bottom()))}}for(var o=0;o<axisCnt;o++){var l=a[o],c=l.minValue,u=l.maxValue,h=l.stepSize;if(l.doAutoScale&&t[o].isValid()){l.isValid=!1;var d={x1:c=t[o].minValue(),x2:u=t[o].maxValue()};l.scaleEngine.autoScale(l.maxMajor,d,h),c=d.x1,u=d.x2}l.isValid||(l.scaleDiv=l.scaleEngine.divideScale(c,u,l.maxMajor,l.maxMinor,h),l.isValid=!0);var p=this.axisWidget(o);p.setScaleDiv(l.scaleDiv);var f={start:void 0,end:void 0};p.getBorderDistHint(f),p.setBorderDist(f.start,f.end)}s.forEach(function(t){t.testItemInterest(ScaleInterest)&&t.updateScaleDiv(n.axisScaleDiv(t.xAxis()),n.axisScaleDiv(t.yAxis()))})},this.attachItem=function(t,e){e?(this.insertItem(t),t.testItemAttribute(Legend)&&this.insertLegendItem(t)):(t.testItemAttribute(Legend)&&this.removeLegendItem(t),this.removeItem(t)),Static.trigger("itemAttached",[t,e]),e||(t=null),this.autoRefresh()},this.replot=function(){var t=this.autoReplot();this.setAutoReplot(!1),this.updateAxes();for(var e=0;e<axisCnt;e++){var i=a[e].scaleWidget;i.scaleDraw().data.plotBorderWidth=parseFloat(this.getLayout().getCentralDiv().css("border-width")),i.draw()}this.drawTitle(),this.drawFooter();for(var n=0;n<s.length;++n)s[n].isVisible()&&s[n].draw(this.axisScaleDraw(s[n].xAxis()).scaleMap(),this.axisScaleDraw(s[n].yAxis()).scaleMap());Static.trigger("replot"),this.setAutoReplot(t)},this.setAutoReplot(!0),b.getTitleDiv().hide(),void 0!==e&&this.setTitle(e),h=b.getCentralDiv().css("cursor"),this.setCursor("crosshair"),this.enableAxis(yRight,!1),this.enableAxis(xTop,!1),b.getFooterDiv().hide(),f?f.legendDiv().hide():b.getLegendDiv().hide(),Static.bind("resize",function(){n.replot()}),this.setAutoReplot(!1),this.toString=function(){return'[Plot "'+o+'"]'},Static.bind("beforePrint",function(){n.replot()})}}define("plot",["static","widget","scaleWidget","utility","miscObjects","painter","scaleDiv","interval","scaleMap","scaleWidget","transform","layout","scaleDraw","scaleEngine","pointMapper"],function(){});class SeriesData{constructor(){this.d_boundingRect=new Misc.Rect,Static.mBoundingRectPoint=function(t){return new Misc.Rect(t.x,t.y,0,0)},Static.mBoundingRect=function(t,e,i){var n,s=new Misc.Rect;if(void 0===e&&(e=0),void 0===i&&(i=t.size()-1),i<e)return s;for(n=e;n<=i;n++){if((a=Static.mBoundingRectPoint(t.sample(n))).width()>=0&&a.height()>=0){s=a,n++;break}}for(;n<=i;n++){var a;(a=Static.mBoundingRectPoint(t.sample(n))).width()>=0&&a.height()>=0&&s.setRect(Math.min(s.left(),a.left()),Math.min(s.top(),a.top()),Math.max(s.right(),a.right())-Math.min(s.left(),a.left()),Math.max(s.bottom(),a.bottom())-Math.min(s.top(),a.top()))}return s},this.setRectOfInterest=function(t){},this.toString=function(){return"[SeriesData]"}}}class ArraySeriesData extends SeriesData{constructor(t){super();var e=[];void 0!==t&&(e=t),this.setSamples=function(t){this.d_boundingRect=new Misc.Rect,e=t},this.samples=function(){return e},this.size=function(){return e.length},this.sample=function(t){return e[t]},this.toString=function(){return"[ArraySeriesData]"}}}class PointSeriesData extends ArraySeriesData{constructor(t){super(t),this.boundingRect=function(){return this.d_boundingRect.width()<0&&(this.d_boundingRect=Static.mBoundingRect(this)),this.d_boundingRect},this.toString=function(){return"[PointSeriesData]"}}}class Point3DSeriesData extends ArraySeriesData{constructor(t){super(t),this.boundingRect=function(){return this.d_boundingRect.width()<0&&(this.d_boundingRect=Static.mBoundingRect(this)),this.d_boundingRect},this.toString=function(){return"[Point3DSeriesData]"}}}class PlotSeriesItem extends PlotItem{constructor(t){super(t);var e=null,i=Vertical;this.setOrientation=function(t){i!=t&&(i=t,this.itemChanged())},this.orientation=function(){return i},this.draw=function(t,e){this.drawSeries(t,e,0,-1)},this.boundingRect=function(){return this.dataRect()},this.updateScaleDiv=function(t,e){var i=new Misc.Rect(new Misc.Point(t.lowerBound(),e.lowerBound()),t.range(),e.range());this.setRectOfInterest(i)},this.data=function(){return e},this.sample=function(t){return e?e.sample(t):null},this.setData=function(t){e!=t&&(e=t)},this.dataSize=function(){return null==e?0:e.size()},this.dataRect=function(){return null==e?new Misc.Rect:e.boundingRect()},this.setRectOfInterest=function(t){e&&e.setRectOfInterest(t)},this.swapData=function(t){var i=e;return e=t,i},this.toString=function(){return"[PlotSeriesItem]"}}}define("seriesData",["static","plotItem"],function(){});class SyntheticPointData extends SeriesData{constructor(t,e){super();var i,n=t,s=e||new Interval,a=new Interval(0,10);this.setSize=function(t){n=t},this.size=function(){return n},this.setInterval=function(t){s=t.normalized()},this.interval=function(){return s},this.setRectOfInterest=function(t){i=t,a=new Interval(t.left(),t.right()).normalized()},this.rectOfInterest=function(){return i},this.boundingRect=function(){return 0==n||!s.isValid()&&!a.isValid()?new Misc.Rect(1,1,-2,-2):Static.mBoundingRect(this)},this.y=function(t){throw'subclass must implement "this.y"'},this.sample=function(t){if(t>=n)return new Misc.Point(0,0);var e=this.x(t),i=this.y(e);return new Misc.Point(e,i)},this.x=function(t){var e=s.isValid()?s:a;if(!e.isValid()||0==n||t>=n)return 0;var i=e.width()/n;return e.minValue()+t*i},this.toString=function(){return"[SyntheticPointData]"}}}define("pointData",["static","seriesData"],function(){});class FunctionData extends SyntheticPointData{constructor(t,e){super(e);var i=t,n=new EvaluateExp(i);this.setFn=function(t){i=t,n.setExpString(i)},this.y=function(t){return n.error?0:n.eval({x:t})}}}define("functionData",["pointData"],function(){});class PlotGrid extends PlotItem{constructor(t){super(t),this.setItemAttribute(AutoScale,!0);var e=!0,i=!0,n=!1,s=!1,a=null,r=null,o="grey",l="lightGrey";this.rtti=Static.Rtti_PlotGrid,this.setMajorPen=function(t){o!==t&&(o=t,this.itemChanged())},this.majorPen=function(){return o},this.setMinorPen=function(t){l!==t&&(l=t,this.itemChanged())},this.minorPen=function(){return l},this.enableX=function(t){e!=t&&(e=t,this.itemChanged(),Static.trigger("itemChanged",[this,t]))},this.xEnabled=function(){return e},this.enableY=function(t){i!=t&&(i=t,this.itemChanged(),Static.trigger("itemChanged",[this,t]))},this.yEnabled=function(){return i},this.enableXMin=function(t){n!=t&&(n=t,this.itemChanged())},this.xMinEnabled=function(){return n},this.enableYMin=function(t){s!=t&&(s=t,this.itemChanged())},this.yMinEnabled=function(){return s},this.setXDiv=function(t){a!==t&&(a=t)},this.xDiv=function(){return a},this.setYDiv=function(t){r!==t&&(r=t)},this.yDiv=function(){return r},this.draw=function(t,a){var r=this.plot(),c=r.axisScaleDiv(this.xAxis()),u=r.axisScaleDiv(this.yAxis()),h=this.getContext();h.strokeStyle=l,e&&n&&(this.drawLines(h,"vertical",t,c.ticks(MinorTick)),this.drawLines(h,"vertical",t,c.ticks(MediumTick))),i&&s&&(this.drawLines(h,"horizontal",a,u.ticks(MinorTick)),this.drawLines(h,"horizontal",a,u.ticks(MediumTick))),h.strokeStyle=o,e&&this.drawLines(h,"vertical",t,c.ticks(MajorTick)),i&&this.drawLines(h,"horizontal",a,u.ticks(MajorTick))},this.drawLines=function(t,e,i,n){for(var s=t.canvas.width-1,a=t.canvas.height-1,r=new PaintUtil.Painter(t),o=r.pen().width,l=0;l<n.length;l++){var c=i.transform(n[l]);"horizontal"===e?r.drawLine(0,c-o,s,c-o):r.drawLine(c-o,0,c-o,a)}r=null},this.updateScaleDiv=function(t,e){this.setXDiv(t),this.setYDiv(e)},this.toString=function(){return"[PlotGrid]"}}}define("plotGrid",["static","plotItem"],function(){});class MyPlot extends Plot{constructor(t,e){super(t,e);var i=this,n=!0;function s(t,e,n){if(!e||0==e.length)return!1;if(i.findPlotCurve(t))return Static.alert(t+" already exist"),!1;var s=new MyCurve(t);n||i.addCurveInit(s),s.setSamples(e),s.setPen(new Misc.Pen(Utility.randomColor())),i.curveAttributeDlg.defaultIconSize=new Misc.Size(s.getLegendIconSize());var a="";return Static.showline&&Static.showsymbol?a="lineAndSymbol":Static.showline?a="line":Static.showsymbol&&(a="symbol"),Utility.setLegendAttribute(s,a,s.getLegendIconSize()),s.attach(i),i.rv.setCurrentCurve(s),i.sidebar.initSidebar(),!0}this.grid=new PlotGrid,Static.curvePropPane=0,Static.plotPropPane=1,Static.infoPropPane=2,this.grid.attach(this),Utility.minorGridLines(this.grid,!0),this.insertLegend(new MLegend),this.enableLegend(!0),this.file=new MFile(this,MyCurve),this.pointEntryDlg=new MPointEntryDlg,this._functionDlg=new MFunctionDlg,this.curveFitDlg=new MCurveFitDlg,this.curveStyleDlg=new MCurveStyleDlg,this.axisDlg=new MAxisDlg,this.curveAttributeDlg=new MCurveLegendAttributeDlg,this.addCurveInit=function(t){t.coeffs=i._functionDlg.coeffs,t.variable=i._functionDlg.variable,t.coeffsVal=function(){for(var t=[],e=i._functionDlg.coeffs||[],n=0;n<e.length;++n)t.push(1);return t}(),t.fn=i._functionDlg.fn,t.unboundedRange=i._functionDlg.unboundedRange,t.lowerX=parseFloat(i._functionDlg.lowerLimit),t.upperX=parseFloat(i._functionDlg.upperLimit),t.numOfSamples=i._functionDlg.numOfPoints},Static.bind("addCurve",function(t,e,i,n){s(e,i,n)}),this._functionDlg.init(function(){var t=i._functionDlg.title,e=i._functionDlg.fn,n=(i._functionDlg.lowerLimit,i._functionDlg.upperLimit,i._functionDlg.numOfPoints),a=i._functionDlg.coeffs;if(i._functionDlg.coeffs.length)for(var r=0;r<a.length;++r)for(;-1!=e.indexOf(a[r]);)e=e.replace(a[r],1);i._functionDlg.unboundedRange?function(t,e,n){if(i.findPlotCurve(t))return Static.alert(t+" already exist"),!1;i.setAxisScale(xBottom,1,10),i.setAxisScale(yLeft,1,10);var s=new MyCurve(t);return i.addCurveInit(s),s.setData(new FunctionData(e,n)),s.setPen(new Misc.Pen(Utility.randomColor())),i.curveAttributeDlg.defaultIconSize=new Misc.Size(s.getLegendIconSize()),Static.showline&&s.setLegendAttribute(LegendShowLine,!0),Static.showsymbol&&s.setLegendAttribute(LegendShowSymbol,!0),s.attach(i),Utility.setAutoScale(i,!0),!0}(t,e,n)&&i._functionDlg.close():s(t,Utility.makeSamples({fx:e,lowerX:parseFloat(i._functionDlg.lowerLimit),upperX:parseFloat(i._functionDlg.upperLimit),numOfSamples:i._functionDlg.numOfPoints,ok_fn:i._functionDlg.ok}))&&i._functionDlg.close()}),this.addRemovePoint=new AddRemovePointPicker(this),this.addRemovePoint.setAddRemoveMousePattern(Enum.MousePatternCode.MouseSelect1,Static.LeftButton,Static.ShiftModifier);var a=new Rulers(this);this.tbar=new MToolBar(this,{zIndex:1003}),this.curveClosestPoint=new CurveClosestPoint(this),this.curveClosestPoint.setMousePattern(Static.LeftButton,Static.AltModifier),this.cs=new CurveShapeItem(this),this.curveShapeEnabledByPlotSettings=function(){return n},this.setCurveShapeEnabledByPlotSettings=function(t){n=t},this.setAxisTitle(xBottom,"Bottom scale"),this.setAxisTitle(xTop,"Top scale"),this.setAxisTitle(yLeft,"Left scale"),this.setAxisTitle(yRight,"Right scale"),this.magnifier=new Magnifier(this),this.pan=new Panner(this),this.pan.setCursor("move"),this.pan.setEnabled(!1),this.zm=new MyPlotZoomer(this),this.leftSidebar=new PlotSideBar(this),this.leftSidebar.setTop(parseInt($("#toolBar1").css("height"))+2);new CurvePropertiesPane(this.leftSidebar.gridItem(0).bodyElement,this,Static.curvePropPane);var r=new PlotPropertiesPane(this.leftSidebar.gridItem(1).bodyElement,this,Static.plotPropPane);this.leftSidebar.showGridItem(1,!0),this.rightSidebar=new InfoSideBar(this),this.rightSidebar.setTop(parseInt($("#toolBar1").css("height"))+2);new InfoPropertiesPane(this.rightSidebar.gridItem(0).bodyElement,this,Static.infoPropPane);this.rightSidebar.showSidebar(!1),this.settings=function(){return r},this.setFooter("Footer");var o=new LegendMenu(this);o.modifyMenu(null,[{pos:1,name:"curve style",img:"images/style.png",title:"Sets the style of the curve.",fun:function(){var t=o.getCurve();t&&i.curveStyleDlg.curveStyleCb(t)}},{pos:2,name:"axis",img:"images/axis.png",title:"Sets the axes associated with the curve.",fun:function(){var t=o.getCurve();t&&i.axisDlg.axisCb(t)}},{pos:3,name:"legend attribute",img:"images/attribute.png",title:"Sets how the curve is represented on the legend.",fun:function(){var t=o.getCurve();t&&i.curveAttributeDlg.curveAttributeCb(t)}},{pos:6,name:"fit",img:"images/fit.png",title:"Defines a curve fitter.",fun:function(){var t=o.getCurve();t&&i.curveFitDlg.curveFitCb(t)}}]),o.setMenuModificationCb(function(){o.getCurve();o.getCurve().fitType?o.modifyMenu(null,{pos:100,name:"fit info...",title:"Displays information associated with curve fitting.",fun:function(){var t=o.getCurve();if(t){var e=i.curveFitDlg.curveFitInfoCb(t);e.length?Static.alert(e):Static.alert('No curve fitting equation found for "'+t.title()+'."')}}}):o.modifyMenu("fit info...",{})}),this.file.setInputElement($("#fileInput")),this.replot(),this.setAutoReplot(!0),Static.bind("visibilityChange",function(t,e,n){e.rtti==Static.Rtti_PlotCurve&&(i.hasVisiblePlotCurve()?i.watchAreaBelowCurve.setEnable(i.tbar.isDropdownItemChecked("Watch",6)):i.watchAreaBelowCurve.setEnable(!1))});var l=i.getLayout().getCentralDiv(),c=[{name:"Hide rulers",img:"images/hide.png",title:"Hide all rulers",fun:function(){i.rv.setVisible(!1)}},{name:"Show rulers",img:"images/show.png",title:"Show any hidden rulers",fun:function(){i.rv.setVisible(!0)}},{name:"Unlock rulers",img:"images/unlock.png",title:"Unlock any locked rulers",fun:function(){i.rv.unlockAllRulers()}},{name:"Remove all curves",title:"Permanently remove all curves",img:"images/scissors.png",fun:function(){i.itemList(Static.Rtti_PlotCurve).forEach(function(t){t.detach()})}}];Static.bind("rulerDeselected",function(){l.contextMenu(c,{triggerOn:"contextmenu",zIndex:1})});var u=!0;Static.bind("gridlinesAccordingToCurve",function(t,e){u=e;var n=a.currentCurve();n&&u&&i.grid.setAxes(n.xAxis(),n.yAxis())}),Static.bind("currentCurveChanged",function(t,e){e&&u&&i.grid.setAxes(e.xAxis(),e.yAxis()),e&&h&&i.zm.setAxis(e.xAxis(),e.yAxis())}),Static.bind("axisChanged",function(t,e,n){n&&u&&i.grid.setAxes(n.xAxis(),n.yAxis()),n&&h&&i.zm.setAxis(n.xAxis(),n.yAxis())});var h=!0;Static.bind("zoomAccordingToCurve",function(t,e){h=e;var n=a.currentCurve();n&&h&&i.zm.setAxis(n.xAxis(),n.yAxis())})}}define("myPlot",["curveClosestPoint","plot","functionData","plotGrid"],function(){});class Curve extends PlotSeriesItem{constructor(t){super(t),Static.LegendNoAttribute=0,Static.LegendShowLine=1,Static.LegendShowSymbol=2,Static.LegendShowBrush=4;var e=Lines,i=0,n=0,s=FilterPoints,a=Static.LegendNoAttribute,r=new Misc.Brush,o=new Misc.Pen,l=null,c=null;function u(t){return t*t}this.rtti=Static.Rtti_PlotCurve,this.setItemInterest(ScaleInterest,!0),this.minXValue=function(){return this.boundingRect().left()},this.maxXValue=function(){return this.boundingRect().right()},this.minYValue=function(){return this.boundingRect().top()},this.maxYValue=function(){return this.boundingRect().bottom()},this.setLegendAttribute=function(t,e){e!=this.testLegendAttribute(t)&&(e?a|=t:a&=~t,Utility.updateLegendIconSize(this),this.plot()&&this.plot().updateLegend(this))},this.testLegendAttribute=function(t){return a&t},this.legendAttributes=function(){return a},this.setSymbol=function(t){t!==c&&(c=t,Utility.updateLegendIconSize(this),this.legendChanged(),this.itemChanged())},this.symbol=function(){return c},this.setBrush=function(t){"string"==typeof t&&(t=new Misc.Brush(t)),r=t,this.legendChanged(),this.itemChanged()},this.brush=function(){return r},this.setPen=function(t){"object"==typeof t&&(o=t,this.legendChanged(),this.itemChanged())},this.pen=function(){return o},this.setPaintAttribute=function(t,e){e?s|=t:s&=~t},this.testPaintAttribute=function(t){return s&t},this.setSamples=function(t){this.setData(new PointSeriesData(t))},this.setCurveAttribute=function(t,e){void 0===e&&(e=!0),(i&t)!=e&&(e?i|=t:i&=~t,this.itemChanged())},this.curveAttributes=function(){return i},this.testCurveAttribute=function(t){return i&t},this.init=function(){this.setItemAttribute(Legend,!0),this.setItemAttribute(AutoScale,!0),this.setData(new PointSeriesData),this.setCurveAttribute(Fitted,!0),this.setZ(20)},this.setStyle=function(t){t!=e&&(e=t,this.legendChanged(),this.itemChanged())},this.style=function(){return e},this.drawSeries=function(t,i,n,s){var a=this.getContext(),l=new PaintUtil.Painter(a),u=this.dataSize();u<=0||(s<0&&(s=u-1),Utility.mVerifyRange(u,n,s)>0&&(l.save(),l.setPen(o),l.setBrush(r),this.drawCurve(l,e,t,i,n,s),l.restore(),c&&c.style()!==NoSymbol&&(l.save(),l.setPen(c.pen()),l.setBrush(c.brush()),this.drawSymbols(a,c,t,i,n,s),l.restore())),l=null)},this.drawSymbols=function(t,e,i,n,s,a){var r=new PointMapper;r.setFlag(WeedOutPoints,this.testPaintAttribute(FilterPoints));for(var o=s;o<=a;o+=500){var l=Math.min(500,a-o+1),c=r.toPointsF(i,n,this.data(),o,o+l-1);c.length>0&&e.drawSymbols(t,c)}},this.setBaseline=function(t){n!=t&&(n=t,this.itemChanged())},this.baseline=function(){return n},this.drawCurve=function(t,e,i,n,s,a){switch(e){case Lines:this.testCurveAttribute(Fitted)&&(s=0,a=this.dataSize()-1),this.drawLines(t,i,n,s,a);break;case Sticks:this.drawSticks(t,i,n,s,a);break;case Steps:this.drawSteps(t,i,n,s,a);break;case Dots:this.drawDots(t,i,n,s,a)}},this.setCurveFitter=function(t){l=t,this.itemChanged()},this.curveFitter=function(){return l},this.closestPoint=function(t,e){let i=this.dataSize();if(null==this.plot()||i<=0)return-1;let n=this.data(),s=this.plot().canvasMap(this.xAxis()),a=this.plot().canvasMap(this.yAxis()),r=-1,o=1e10;for(var l=0;l<i;l++){let e=n.sample(l),i=s.transform(e.x)-t.x,c=a.transform(e.y)-t.y,h=u(i)+u(c);h<o&&(r=l,o=h)}return e&&(e.distance=Math.sqrt(o)),r},this.fillCurve=function(t,e,i,n){r.color!=Static.NoBrush&&(this.closePolyline(e,i,n),n.length<=2||(t.setPen(new Misc.Pen(r.color)),t.drawPolygon(n)))},this.closePolyline=function(t,e,i){if(!(i.length<2)){var s=n;if(this.orientation()==Vertical){e.transformation()&&(s=e.transformation().bounded(s));var a=e.transform(s);i.push(new Misc.Point(i[i.length-1].x,a)),i.push(new Misc.Point(i[0].x,a))}else{t.transformation()&&(s=t.transformation().bounded(s));var r=t.transform(s);i.push(new Misc.Point(r,i[i.length-1].y)),i.push(new Misc.Point(r,i[0].y))}}},this.drawSteps=function(t,e,n,s,a){for(var r=[],o=2*(a-s)+1,l=0;l<o;++l)r.push(new Misc.Point);var c=this.orientation()==Vertical;i&Inverted&&(c=!c);var u,h=this.data();for(l=s,u=0;l<=a;l++,u+=2){var d=h.sample(l),p=e.transform(d.x),f=n.transform(d.y);if(u>0){var m=r[u-2],v=r[u-1];c?(v.x=m.x,v.y=f):(v.x=p,v.y=m.y)}r[u].x=p,r[u].y=f}t.drawPolyline(r),"noBrush"!=this.brush()&&this.fillCurve(t,e,n,r)},this.drawSticks=function(t,e,i,s,a){for(var r=e.transform(n),o=i.transform(n),l=this.orientation(),c=this.data(),u=s;u<=a;u++){var h=c.sample(u),d=e.transform(h.x),p=i.transform(h.y);l==Horizontal?t.drawLine(r,p,d,p):t.drawLine(d,o,d,p)}},this.drawDots=function(t,e,i,n,a){var r=new PointMapper;if(s&FilterPoints&&r.setFlag(WeedOutPoints,!0),s&MinimizeMemory)for(var o=this.data(),l=n;l<=a;l++){var c=o.sample(l),u=e.transform(c.x),h=i.transform(c.y);t.drawPoint(new Misc.Point(u,h))}else{var d=r.toPointsF(e,i,this.data(),n,a);t.drawPoints(d)}},this.legendIcon=function(t,e){if(0===e.width&&0===e.height)return null;var i=new GraphicUtil.Graphic(null,e.width,e.height),n=new PaintUtil.Painter(i);if(0==this.legendAttributes()||this.legendAttributes()&Static.LegendShowBrush){var s=this.brush();if(s.color==Static.NoBrush&&0==this.legendAttributes()&&(this.style()!=NoCurve?s=new Misc.Brush(this.pen().color):this.symbol()&&this.symbol().style()!=NoSymbol&&(s=new Misc.Brush(this.symbol().pen().color))),s.color!=Static.NoBrush){var a=new Misc.Rect(0,0,e.width,e.height);n.fillRect(a,s)}}if(this.legendAttributes()&Static.LegendShowLine&&this.pen().color!=Static.NoPen){var r=this.pen();n.setPen(r);var o=.5*e.height;n.drawLine(0,o,e.width,o)}if(this.legendAttributes()&Static.LegendShowSymbol&&this.symbol()){var l=e.height/2;this.symbol().style()==Ellipse&&(l-=1),n.setPen(this.symbol().pen()),this.symbol().drawGraphicSymbol(n,new Misc.Point(e.width/2,l),e)}return n=null,i},this.removePoint=function(t,e){void 0==e&&(e=!1);var i=this.data().samples();if(1!=i.length||e){for(var n=[],s=0;s<i.length;++s)i[s].isEqual(t)||n.push(i[s]);n.length!==i.length||e?(this.setSamples(n),this.itemChanged(),Static.trigger("pointRemoved",this)):Static.alert("The point selected for removal does not exist.")}else Static.alert("You cannot remove the only point in the curve. Remove the entire curve.")},this.toString=function(){return"[Curve]"},this.init()}drawLines(t,e,i,n,s){if(!(n>s)){var a=this.curveAttributes()&Fitted&&this.curveFitter(),r=this.brush().color!==Static.NoBrush,o=(new PointMapper).toPolygonF(e,i,this.data(),n,s);a&&(o=this.curveFitter().fitCurve(o)),t.drawPolyline(o),r&&this.fillCurve(t,e,i,o)}}}define("plotcurve",["static","seriesData"],function(){});class MyCurve extends Curve{constructor(t){super(t)}}function GraphicUtil(){GraphicUtil.Graphic=function(t,e,i){var n=t,s=e,a=i,r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("width",e),r.setAttribute("height",i),this.parent&&this.parent[0].appendChild(r),this.setParent=function(t){this.parent=t,this.parent[0].appendChild(r)},this.parent=function(){return n},this.setWidth=function(t){s=t},this.width=function(){return s},this.setHeight=function(t){a=t},this.height=function(){return a},this.svg=function(){return r},this.toString=function(){return"[Graphic]"}}}function mDrawXCrossSymbols(t,e,i){var n=i.size(),s=i.pen(),a=(i.brush(),n.width),r=n.height;t.beginPath(),t.strokeStyle=s.color,t.lineWidth=s.width;for(var o=0;o<e.length;o++){var l=e[o].x-.5*a-1,c=e[o].y-.5*r-1;t.moveTo(l,c),t.lineTo(l+a,c+r),t.moveTo(l+a,c),t.lineTo(l,c+r)}t.stroke()}function mDrawLineSymbols(t,e,i,n){var s=n.size(),a=n.pen(),r=(n.brush(),s.width),o=s.height,l=new PaintUtil.Painter(t);l.setPen(a),l.save();for(var c=0;c<i.length;c++){if(e&Horizontal){var u=i[c].x-.5*r-1,h=i[c].y-1;l.drawLine(u,h,u+r,h)}if(e&Vertical){u=i[c].x-1,h=i[c].y-.5*o-1;l.drawLine(u,h,u,h+o)}}l.restore(),l=null}function mDrawPathSymbols(t,e,i){var n=e.length,s=i.size(),a=i.pen(),r=i.brush(),o=s.width,l=s.height,c=new PaintUtil.Painter(t);c.setPen(a),c.setBrush(r);for(var u=0;u<n;u++){var h=e[u].x,d=e[u].y,p=i.m_path.boundingRect();c.save(),c.translate(h,d),c.scale(o/p.width(),l/p.height()),i.m_path.data.rotation&&c.rotate(i.m_path.data.rotation);var f=i.pinPoint();c.translate(-1*f.x,-1*f.y),c.drawPath(i.m_path),c.restore()}c=null}function mDrawDiamondSymbols(t,e,i){var n=new PaintUtil.Painter(t);n.save(),n.setBrush(i.brush()),n.setPen(i.pen());for(var s=i.size(),a=(new Misc.Rect(new Misc.Point,i.size()),e.length),r=0;r<a;r++)n.save(),n.translate(e[r].x-1,e[r].y-1),n.rotate(45),n.drawRect(-.5*s.width,-.5*s.height,s.width,s.height),n.restore();n.restore(),n=null}function mDrawRectSymbols(t,e,i){var n=new PaintUtil.Painter(t);n.save(),n.setBrush(i.brush()),n.setPen(i.pen());for(var s=new Misc.Rect(new Misc.Point,i.size()),a=e.length,r=0;r<a;r++)s.moveCenter(e[r]),n.drawRect(s.left(),s.top(),s.width(),s.height());n.restore(),n=null}function mDrawEllipseSymbols(t,e,i){var n=new PaintUtil.Painter(t);n.save(),n.setBrush(i.brush()),n.setPen(i.pen());for(var s=Math.min(i.size().width,i.size().height)/2,a=e.length,r=0;r<a;r++)n.drawCircle(e[r].x-1,e[r].y-1,s);n.restore(),n=null}function mDrawCrossGraphicSymbol(t,e,i,n){t.setBrush(n.brush()),t.setPen(n.pen());var s=new Misc.Rect(new Misc.Point,n.size());s.moveCenter(e),t.drawLine(s.left()+.5*s.width(),s.top(),s.left()+.5*s.width(),s.bottom()),t.drawLine(s.left(),s.top()+.5*s.height(),s.right(),s.top()+.5*s.height())}function mDrawXCrossGraphicSymbol(t,e,i,n){t.setBrush(n.brush()),t.setPen(n.pen());var s=new Misc.Rect(new Misc.Point,n.size());s.moveCenter(e),t.drawLine(s.left(),s.top(),s.right(),s.bottom()),t.drawLine(s.right(),s.top(),s.left(),s.bottom())}function mDrawRectGraphicSymbol(t,e,i,n){t.setBrush(n.brush());var s=new Misc.Rect(new Misc.Point,n.size());s.moveCenter(e),t.drawRect(s.left(),s.top(),s.width(),s.height())}function mDrawDiamondGraphicSymbol(t,e,i,n){t.setBrush(n.brush());var s=new Misc.Rect(new Misc.Point,.707*n.size().width,.707*n.size().height);s.moveCenter(e),t.drawRect(s.left(),s.top(),s.width(),s.height()),t.transform({rotation:45,rotationX:e.x,rotationY:e.y})}function mDrawEllipseGraphicSymbol(t,e,i,n){t.setBrush(n.brush());var s=Math.min(n.size().width-n.pen().width,n.size().height-n.pen().width)/2;t.drawCircle(e.x,e.y,s)}function mDrawPathGraphicSymbol(t,e,i,n){var s=n.pen(),a=0;s.style!==Static.NoPen&&(a=Math.max(s.width,1));var r=n.path().boundingRect();r=r.adjusted(-a,-a,a,a);var o=n.path().data;o.xOffset=-1*r.left(),o.yOffset=-1*r.top(),o.xCenter=(r.right()-r.left())/2,o.yCenter=(r.bottom()-r.top())/2,t.setBrush(n.brush()),t.setPen(n.pen()),o.scale=Math.min(i.width/r.width(),i.height/r.height()),t.drawPath(n.path())}define("myCurve",["plotcurve"],function(){}),GraphicUtil(),define("graphic",function(){});class Symbol{constructor(t,e,i,n){var s=NoSymbol,a=new Misc.Size(-1,-1),r=new Misc.Brush("gray"),o=new Misc.Pen;this.m_path=0;var l=new Misc.Point(0,0);void 0!==n?(s=t,r=e,o=i,a=n):void 0!==i?(s=t,r=e,o=i):void 0!==e?(s=t,r=e):void 0!==t&&(s=t),this.setPinPoint=function(t){l=t},this.pinPoint=function(t){return l},this.setSize=function(t){t.isValid()&&!t.isEqual(a)&&(a=t)},this.size=function(){return a},this.setStyle=function(t){s!=t&&(s=t)},this.style=function(){return s},this.setPath=function(t){s=Path,this.m_path=t},this.path=function(){return this.m_path},this.setPen=function(t){o=t},this.pen=function(){return o},this.setBrush=function(t){r=t},this.brush=function(){return r},this.brush1=function(){return"noBrush"!==r.color},this.drawSymbols=function(t,e){if(!(e.length<=0)){this.renderSymbols(t,e)}},this.drawGraphicSymbol=function(t,e,i){this.renderGraphicSymbol(t,e,i)},this.drawSymbol=function(t,e){this.drawSymbols(t,[e])},this.renderSymbols=function(t,e){e.length;switch(s){case Ellipse:mDrawEllipseSymbols(t,e,this);break;case MRect:mDrawRectSymbols(t,e,this);break;case Diamond:mDrawDiamondSymbols(t,e,this);break;case Cross:mDrawLineSymbols(t,Horizontal|Vertical,e,this);break;case XCross:mDrawXCrossSymbols(t,e,this);break;case HLine:mDrawLineSymbols(t,Horizontal,e,this);break;case VLine:mDrawLineSymbols(t,Vertical,e,this);break;case Path:mDrawPathSymbols(t,e,this)}},this.renderGraphicSymbol=function(t,e,i){if(s!==Cross||s!==XCross){var n=new Misc.Pen(this.pen());this.brush1()&&(n.width/=2),t.setPen(n)}switch(s){case Ellipse:mDrawEllipseGraphicSymbol(t,e,0,this);break;case MRect:mDrawRectGraphicSymbol(t,e,0,this);break;case Diamond:mDrawDiamondGraphicSymbol(t,e,0,this);break;case Cross:mDrawCrossGraphicSymbol(t,e,0,this);break;case XCross:mDrawXCrossGraphicSymbol(t,e,0,this);break;case HLine:case VLine:break;case Path:mDrawPathGraphicSymbol(t,e,i,this)}},this.boundingRect=function(){var t=new Misc.Rect;switch(s){case Ellipse:case MRect:case Hexagon:var e=0;o.style!=Static.NoPen&&(e=Math.max(o.width,1)),(t=new Misc.Rect(new Misc.Point,a.width+e,a.height+e)).moveCenter(new Misc.Point);break;case XCross:case Diamond:case Triangle:case UTriangle:case DTriangle:case RTriangle:case LTriangle:case Star1:case Star2:e=0;o.style!==Static.NoPen&&(e=Math.max(o.width,1)),(t=new Misc.Rect(new Misc.Point,a.width+e,a.height+e)).moveCenter(new Misc.Point);break;case Path:t=m_path.boundingRect(),console.log(t.width()),t.moveCenter(new Misc.Point);break;default:(t=new Misc.Rect(new Misc.Point,a.width,a.height)).moveCenter(new Misc.Point)}var i=new Misc.Rect;return i.setLeft(Math.floor(t.left())),i.setTop(Math.floor(t.top())),i.setRight(Math.ceil(t.right())),i.setBottom(Math.ceil(t.bottom())),i}}toString(){return"[Symbol]"}}define("symbol",["static","graphic"],function(){});class LegendData{constructor(){var t={},e=!0;function i(e){return void 0!==t[e]}this.title=function(){return this.value(Static.TitleRole)},this.icon=function(){return this.value(Static.IconRole)},this.mode=function(){return this.hasRole(Static.ModeRole)?this.value(Static.ModeRole):Static.ReadOnly},this.setValue=function(i,n){t[i]=n,e=!1},this.isValid=function(){return!e},this.hasRole=function(t){return i(t)},this.value=function(e){return i(e)?t[e]:null},this.toString=function(){return"[LegendData]"}}}class AbstractLegend{constructor(){var t=null,e=!1,i=null,n="",s=0,a=100,r=function(e,i){e.setVisible(!i),t.autoReplot()||t.replot()};"undefined"!=typeof checkChangeFn&&(r=checkChangeFn);var o=[],l=$("<table/>").attr({});this.setLegendDiv=function(t){i||((i=t).append(l),i.css("overflow","auto"))},this.legendDiv=function(){return i},this.setPlot=function(e){t=e,i!==$("#legendDiv")&&e.getLayout().getPlotDiv().append(i)},this.isEmpty=function(){return!(l[0].rows.length>=1)},this.setMaxWidth=function(t){a=t},this.maxWidth=function(){return a},this.legendDivWidth=function(){var e=t.legendFont().textSize(n).width+s+8;return e<this.maxWidth()?e:this.maxWidth()},this.addItem=function(t,i){var a=t.plot().legendFont(),c=t.legendData()[0];if(c.isValid()){var u=c.title(),h=c.icon();h&&h.width()>s&&(s=h.width());var d=$("<tr />"),p=$('<td class="unchecked"></td>'),f=$("<label />");f.css("color",a.fontColor),f.css("font-size",a.th),f.text(" "+u);var m=$("<span/>");h&&h.setParent(m),f.appendTo(m),m.appendTo(p),d.append(p),l.append(d),void 0!==i&&i>-1?(o.splice(i,0,t),Static.setElementIndex(d,i)):o.push(t),p.click(t,function(t){"unchecked"===$(this).attr("class")?($(this).removeClass("unchecked"),$(this).addClass("checked"),e=!0):($(this).removeClass("checked"),$(this).addClass("unchecked"),e=!1),r&&r(t.data,e)}),t.title().length>n.length&&(n=t.title())}},this.removeItem=function(t){var e,n=o.indexOf(t);if(!(n<0))return(e=n)>-1&&o.splice(e,1),l[0].deleteRow(n),parseInt(l.css("height"))<parseInt(i.css("height"))&&i.css("overflow-y","auto"),parseInt(l.css("width"))<parseInt(i.css("width"))&&i.css("overflow-x","auto"),n},this.clearLegend=function(){for(var t=l[0].rows.length,e=0;e<t;++e)l[0].deleteRow(0)},this.rowNumberFromName=function(t){for(var e=l[0].rows,i=0;i<e.length;++i)if(e[i].cells[0].innerText===t)return i;return-1},this.toString=function(){return"[AbstractLegend]"}}renderLegend(t,e,i){return!0}updateLegend(t,e){}}class MLegend extends AbstractLegend{constructor(){super(),this.toString=function(){return"[MLegend]"}}}define("legend",["static"],function(){});class Magnifier extends HObject{constructor(t){super(t);for(var e=null,i=!0,n=1.9,s=Static.NoModifier,a=.95,r=Static.RightButton,o=Static.NoModifier,l=.9,c=107,u=Static.Key_Shift,h=109,d=Static.Key_Shift,p=!1,f=!1,m=!1,v=0,g=[],b=0;b<axisCnt;b++)g[b]=!0;g[1]=!1,g[3]=!1,this.setAxisEnabled=function(t,e){t>=0&&t<axisCnt&&(g[t]=e)},this.isAxisEnabled=function(t){return!(t>=0&&t<axisCnt)||g[t]},void 0!==t&&(t.magnifier=this,e=t,this.setElement(e.getLayout().getCentralDiv())),this.plot=function(){return e},this.setWheelFactor=function(t){n=t},this.wheelFactor=function(){return n},this.setWheelModifiers=function(t){s=t},this.wheelModifiers=function(){return s},this.setMouseFactor=function(t){a=t},this.mouseFactor=function(){return a},this.setMouseButton=function(t,e){r=t,o=e},this.getMouseButton=function(){return{button:r,modifiers:o}},this.setKeyFactor=function(t){l=t},this.keyFactor=function(){return l},this.setZoomInKey=function(t,e){c=t,u=e},this.getZoomInKey=function(){return{key:c,modifiers:u}},this.setZoomOutKey=function(t,e){h=t,d=e},this.getZoomOutKey=function(){return{key:h,modifiers:d}},this.setEnabled=function(t){i=t},this.isEnabled=function(t){return i},this.event=function(t){if(i)switch(t.type){case"mousedown":return null==this.plot()||(t.button!==r||(t.clientX,v=t.clientY,p=!0,!0));case"mouseup":t.button===r&&p&&this.plot()&&(p=!1);break;case"mousemove":if(!p)return;var e=t.clientY-v;if(0!=e){var s=a;e<0&&(s=1/s),this.rescale(s)}t.clientX,v=t.clientY;break;case"keydown":t.keyCode==u&&(f=!0),t.keyCode==d&&(m=!0),t.keyCode==c&&f?this.rescale(l):t.keyCode==h&&m&&this.rescale(1/l);break;case"keyup":t.keyCode==u&&(f=!1),t.keyCode==d&&(m=!1);break;case"mousewheel":if(0!=n){s=Math.pow(n,Math.abs(t.deltaY/15));t.deltaY>0&&(s=1/s),this.rescale(s)}}},this.rescale=function(t){var e=this.plot();if(null!=e&&1!=(t=Math.abs(t))&&0!=t){var i=!1,n=e.autoReplot();e.setAutoReplot(!1);for(var s=0;s<axisCnt;s++){var a=this.plot().axisScaleDiv(s);if(this.isAxisEnabled(s)){var r,o,l,c,u=this.plot().axisScaleEngine(s);u instanceof LogScaleEngine?(r=(Static.mLog(u.base(),a.lowerBound())+Static.mLog(u.base(),a.upperBound()))/2,o=(Static.mLog(u.base(),a.upperBound())-Static.mLog(u.base(),a.lowerBound()))/2*t,l=Math.pow(u.base(),r-o),c=Math.pow(u.base(),r+o)):(l=(r=a.lowerBound()+a.range()/2)-(o=a.range()/2*t),c=r+o),e.setAxisScale(s,l,c),i=!0}}return e.setAutoReplot(n),i&&e.replot(),!1}},this.setEnabled_1(!0),this.toString=function(){return"[Magnifier]"}}}define("magnifier",["static","hObject"],function(){});class PrivateData_2{constructor(){this.zoomRectIndex,this.zoomStack=[],this.maxStackDepth}}class PlotZoomer extends PlotPicker{constructor(t,e,i,n=!0){"number"!=typeof t?super(i=t):super(t,e,i);var s;this.getZoomerData=function(){return s},this.init=function(t){(s=new PrivateData_2).maxStackDepth=-1,this.setTrackerMode(Static.ActiveOnly),this.setRubberBand(Static.RectRubberBand),this.setStateMachine(new PickerDragRectMachine),this.plot().zoomer=this,Static.trigger("zoomerAdded",this),t&&this.plot()&&this.plot().replot(),this.setZoomBase(this.scaleRect())},this.setZoomBase=function(t=!0){if("object"==typeof t){var e=t;if(!(a=this.plot()))return;var i=this.scaleRect(),n=e|i;n=null;n=e||i,s.zoomStack=[],s.zoomStack.push(n),s.zoomRectIndex=0,e.isEqual(i)||(s.zoomStack.push(i),s.zoomRectIndex++),this.rescale()}else{var a;if(null==(a=this.plot()))return;t&&a.replot(),s.zoomStack=[],s.zoomStack.push(this.scaleRect()),s.zoomRectIndex=0,this.rescale()}},this.zoomBase=function(){return s.zoomStack[0]},this.zoomRect=function(){return s.zoomStack[s.zoomRectIndex]},this.setMaxStackDepth=function(t){if(s.maxStackDepth=t,t>=0){var e=s.zoomStack.length-1-t;if(e>0){this.zoom(-e);for(var i=s.zoomStack.length-1;i>s.zoomRectIndex;i--)s.zoomStack.pop()}}},this.maxStackDepth=function(){return s.maxStackDepth},this.zoomStack=function(){return s.zoomStack},this.setZoomStack=function(t,e=-1){if(0!=this.zoomStack.length&&!(s.maxStackDepth>=0&&this.zoomStack.length>s.maxStackDepth)){(e<0||e>this.zoomStack.length)&&(e=t.length-1);var i=this.zoomStack[e]!=this.zoomRect();s.zoomStack=t,s.zoomRectIndex=e,i&&(this.rescale(),Static.trigger("zoomed",this.zoomRect()))}},this.zoomRectIndex=function(){return s.zoomRectIndex},this.moveBy=function(t,e){var i=s.zoomStack[s.zoomRectIndex];moveTo(new Misc.Point(i.left()+t,i.top()+e))},this.moveTo=function(t){var e=t.x,i=t.y;e<this.zoomBase().left()&&(e=this.zoomBase().left()),e>this.zoomBase().right()-this.zoomRect().width()&&(e=this.zoomBase().right()-this.zoomRect().width()),i<this.zoomBase().top()&&(i=this.zoomBase().top()),i>this.zoomBase().bottom()-this.zoomRect().height()&&(i=this.zoomBase().bottom()-this.zoomRect().height()),e==this.zoomRect().left()&&i==this.zoomRect().top()||(s.zoomStack[s.zoomRectIndex].moveTo(e,i),this.rescale())},this.zoom=function(t){if("number"==typeof t){var e=t;if(0==e)s.zoomRectIndex=0;else{var i=s.zoomRectIndex+e;i=Math.max(0,i),i=Math.min(s.zoomStack.length-1,i),s.zoomRectIndex=i}this.rescale(),Static.trigger("zoomed",this.zoomRect())}else{if(s.maxStackDepth>=0&&s.zoomRectIndex>=s.maxStackDepth)return;var n=t.normalized();if(!n.isEqual(s.zoomStack[s.zoomRectIndex])){for(var a=s.zoomStack.length-1;a>s.zoomRectIndex;a--)s.zoomStack.pop();s.zoomStack.push(n),s.zoomRectIndex++,this.rescale(),Static.trigger("zoomed",n)}}},this.rescale=function(){var t=this.plot();if(t){var e=s.zoomStack[s.zoomRectIndex];if(!e.isEqual(this.scaleRect())){var i=t.autoReplot();t.setAutoReplot(!1);var n=e.left(),a=e.right();if(!t.axisScaleDiv(this.xAxis()).isIncreasing()){a=n=a}t.setAxisScale(this.xAxis(),n,a);var r=e.top(),o=e.bottom();if(!t.axisScaleDiv(this.yAxis()).isIncreasing()){o=r=o}t.setAxisScale(this.yAxis(),r,o),t.setAutoReplot(i),t.replot()}}},this.minZoomSize=function(){return new Misc.Size(s.zoomStack[0].width()/1e5,s.zoomStack[0].height()/1e5)},this.accept=function(t){if(t.length<2)return!1;var e=new Misc.Rect(t[0],t[t.length-1]);if((e=e.normalized()).width()<2&&e.height()<2)return!1;var i=e.center();return e.setSize(e.size().expandedTo(new Misc.Size(11,11))),e.moveCenter(i),t.resize(2),t[0]=e.topLeft(),t[1]=e.bottomRight(),!0},i&&this.init(n)}widgetKeyPressEvent(t){this.isActive()||(this.keyMatch(Enum.KeyPatternCode.KeyUndo,t)?this.zoom(-1):this.keyMatch(Enum.KeyPatternCode.KeyRedo,t)?this.zoom(1):this.keyMatch(Enum.KeyPatternCode.KeyHome,t)&&this.zoom(0)),super.widgetKeyPressEvent(t)}widgetMouseReleaseEvent(t){this.mouseMatch(Enum.MousePatternCode.MouseSelect2,t)||(this.mouseMatch(Enum.MousePatternCode.MouseSelect3,t)?this.zoom(-1):this.mouseMatch(Enum.MousePatternCode.MouseSelect6,t)?this.zoom(1):super.widgetMouseReleaseEvent(t))}end(t=!0){if(!(t=super.end(t)))return!1;if(!this.plot())return!1;var e=this.selection();if(e.length<2)return!1;var i=new Misc.Rect(e[0],e[e.length-1]);i=i.normalized();var n=this.invTransform(i).normalized();if(this.minZoomSize().isValid()){var s=n.center();n.setSize(n.size().expandedTo(this.minZoomSize())),n.moveCenter(s)}return this.zoom(n),!0}begin(){var t=this.getZoomerData();if(!(t.maxStackDepth>=0&&t.zoomRectIndex>=t.maxStackDepth)){var e=this.minZoomSize();if(e.isValid()){var i=new Misc.Size(.9999*t.zoomStack[t.zoomRectIndex].width(),.9999*t.zoomStack[t.zoomRectIndex].height());if(e.width>=i.width&&e.height>=i.height)return}super.begin()}}setAxis(t,e){t==super.xAxis()&&e==super.yAxis()||(super.setAxis(t,e),void 0!==this.setZoomBase&&this.setZoomBase(this.scaleRect()))}}define("plotzoomer",["plotpicker"],function(){});class MyPlotZoomer extends PlotZoomer{constructor(t){super(t),this.setEnabled(!1),this.setTrackerMode(Static.AlwaysOff),this.setTrackerPen(new Misc.Pen("blue"))}trackerText(t){var e,i=this.plot();t=this.invTransform(t);var n=0;n=i.axisEnabled(xBottom)?i.axisDecimalPlaces(xBottom):i.axisEnabled(xTop)?i.axisDecimalPlaces(xTop):i.axisDecimalPlaces(xBottom);var s=0;switch(s=i.axisEnabled(yLeft)?i.axisDecimalPlaces(yLeft):i.axisEnabled(yRight)?i.axisDecimalPlaces(yRight):i.axisDecimalPlaces(yLeft),this.rubberBand()){case Static.HLineRubberBand:e=Static.adjustForDecimalPlaces(t.y,s).toString();break;case Static.VLineRubberBand:e=Static.adjustForDecimalPlaces(t.x,n).toString();break;default:e=Static.adjustForDecimalPlaces(t.x,n).toString()+", "+Static.adjustForDecimalPlaces(t.y,s).toString()}return e}}define("myZoomer",["plotzoomer"],function(){});class CurveFitter{constructor(){this.fitCurve=function(t){throw'"fitCurve()" not reimplemented in subclass'}}}class SplineCurveFitter extends CurveFitter{constructor(){super();var t=Enum.FitMode.Auto,e=new Spline,i=100;this.setFitMode=function(t){},this.fitMode=function(){},this.setSpline=function(t){(e=t).reset()},this.spline=function(){return e},this.setSplineSize=function(t){i=Math.max(t,10)},this.splineSize=function(){return i},this.fitCurve=function(n){var s=n.length;if(s<=2)return n;var a=t;if(a==Enum.FitMode.Auto){a=Enum.FitMode.Spline;for(var r=n,o=1;o<s;o++)if(r[o].x<=r[o-1].x){a=Enum.FitMode.ParametricSpline;break}}return a==Enum.FitMode.ParametricSpline?function(t){for(var n=t.length,s=[],a=0;a<i;a++)s.push(new Misc.Point(-1,-1));var r=[],o=[];for(a=0;a<n;a++)r.push(new Misc.Point(-1,-1)),o.push(new Misc.Point(-1,-1));var l=t,c=r,u=o,h=0;for(a=0;a<n;a++){var d=l[a].x,p=l[a].y;if(a>0){var f=Math.sqrt(Static.sqr(d-c[a-1].y)+Static.sqr(p-u[a-1].y));h+=Math.max(f,1)}c[a].x=h,c[a].y=d,u[a].x=h,u[a].y=p}if(e.setPoints(r),!e.isValid())return t;var m=r[n-1].x/(i-1);for(a=0;a<i;a++){var v=a*m;s[a].x=e.value(v)}if(e.setPoints(o),!e.isValid())return t;var g=o[n-1].x/(i-1);for(a=0;a<i;a++)v=a*g,s[a].y=e.value(v);return s}(n):function(t){if(e.setPoints(t),!e.isValid())return t;for(var n=new Array(i),s=t[0].x,a=(t[t.length-1].x-s)/(i-1),r=0;r<i;r++){var o=s+r*a,l=e.value(o);n[r]=new Misc.Point(o,l)}return e.reset(),n}(n)}}}class WC_PrivateData{constructor(){this.tolerance=1,this.chunkSize=0}}class WC_Line{constructor(t=0,e=0){this.from=t,this.to=e}}class WeedingCurveFitter extends CurveFitter{constructor(t){var e;super();var i=function(t){var i=e.tolerance*e.tolerance,n=[],s=t,a=t.length,r=[];for(r.resize(a,!1),n.push(new WC_Line(0,a-1));n.length;){for(var o=n.pop(),l=s[o.to].x-s[o.from].x,c=s[o.to].y-s[o.from].y,u=Math.sqrt(l*l+c*c),h=0!=u?l/u:0,d=0!=u?c/u:0,p=0,f=o.from+1,m=o.from+1;m<o.to;m++){var v,g=s[m].x-s[o.from].x,b=s[m].y-s[o.from].y;if(g*h+b*d<0)v=g*g+b*b;else{var y=s[m].x-s[o.to].x,S=s[m].y-s[o.to].y,x=y*y+S*S,w=y*-h+S*-d;v=w<0?x:Math.abs(x-w*w)}p<v&&(p=v,f=m)}p<=i?(r[o.from]=!0,r[o.to]=!0):(n.push(new WC_Line(o.from,f)),n.push(new WC_Line(f,o.to)))}var P=[];for(m=0;m<a;m++)r[m]&&P.push(s[m]);return P};this.setTolerance=function(t){e.tolerance=Math.max(t,0)},this.tolerance=function(){return e.tolerance},this.setChunkSize=function(t){t>0&&(t=Math.max(t,3)),e.chunkSize=t},this.chunkSize=function(){return e.chunkSize},this.fitCurve=function(t){var n=[];if(0==e.chunkSize)n=i(t);else for(var s=0;s<t.length;s+=e.chunkSize){var a=t.mid(s,e.chunkSize);n=n.concat(i(a))}return n},e=new WC_PrivateData,this.setTolerance(t)}}function Spline(){var t=null,e=[],i=[],n=[],s=Static.SplineType.Natural;this.setSplineType=function(t){s=t},this.splineType=function(){return s},this.setPoints=function(a){var r,o=a.length;return o<=2?(this.reset(),!1):(t=a,e.resize(o-1),i.resize(o-1),n.resize(o-1),(r=s==Static.SplineType.Periodic?this.buildPeriodicSpline(a):this.buildNaturalSpline(a))||this.reset(),r)},this.points=function(){return t},this.reset=function(){e.resize(0),i.resize(0),n.resize(0),t.resize(0)},this.isValid=function(){return e.length>0},this.value=function(s){if(0==e.length)return 0;var a=Static.lookup(s,t),r=s-t[a].x;return((e[a]*r+i[a])*r+n[a])*r+t[a].y},this.coefficientsA=function(){return e},this.coefficientsB=function(){return i},this.coefficientsC=function(){return n},this.buildNaturalSpline=function(t){var s,a=t,r=t.length,o=e,l=i,c=n,u=new Array(r-1);for(s=0;s<r-1;s++)if(u[s]=a[s+1].x-a[s].x,u[s]<=0)return!1;var h=new Array(r-1),d=(a[1].y-a[0].y)/u[0];for(s=1;s<r-1;s++){l[s]=c[s]=u[s],o[s]=2*(u[s-1]+u[s]);var p=(a[s+1].y-a[s].y)/u[s];h[s]=6*(d-p),d=p}for(s=1;s<r-2;s++)c[s]/=o[s],o[s+1]-=l[s]*c[s];var f=new Array(r);for(f[1]=h[1],s=2;s<r-1;s++)f[s]=h[s]-c[s-1]*f[s-1];for(f[r-2]=-f[r-2]/o[r-2],s=r-3;s>0;s--)f[s]=-(f[s]+l[s]*f[s+1])/o[s];for(f[r-1]=f[0]=0,s=0;s<r-1;s++)o[s]=(f[s+1]-f[s])/(6*u[s]),l[s]=.5*f[s],c[s]=(a[s+1].y-a[s].y)/u[s]-(f[s+1]+2*f[s])*u[s]/6;return!0},this.buildPeriodicSpline=function(t){var s,a=t,r=t.length,o=e,l=i,c=n,u=new Array(r-1),h=new Array(r-1),d=new Array(r);for(s=0;s<r-1;s++)if(h[s]=a[s+1].x-a[s].x,h[s]<=0)return!1;var p=r-2,f=h[p],m=(a[0].y-a[p].y)/f;for(s=0;s<=p;s++){l[s]=c[s]=h[s],o[s]=2*(f+h[s]);var v=(a[s+1].y-a[s].y)/h[s];u[s]=6*(m-v),m=v,f=h[s]}o[0]=Math.sqrt(o[0]),c[0]=h[p]/o[0];var g=0;for(s=0;s<p-1;s++)l[s]/=o[s],s>0&&(c[s]=-c[s-1]*l[s-1]/o[s]),o[s+1]=Math.sqrt(o[s+1]-Static.sqr(l[s])),g+=Static.sqr(c[s]);for(l[p-1]=(l[p-1]-c[p-2]*l[p-2])/o[p-1],o[p]=Math.sqrt(o[p]-Static.sqr(l[p-1])-g),d[0]=u[0]/o[0],g=0,s=1;s<p;s++)d[s]=(u[s]-l[s-1]*d[s-1])/o[s],g+=c[s-1]*d[s-1];for(d[p]=(u[p]-l[p-1]*d[p-1]-g)/o[p],d[p]=-d[p]/o[p],d[p-1]=-(d[p-1]+l[p-1]*d[p])/o[p-1],s=p-2;s>=0;s--)d[s]=-(d[s]+l[s]*d[s+1]+c[s]*d[p])/o[s];for(d[r-1]=d[0],s=0;s<r-1;s++)o[s]=(d[s+1]-d[s])/(6*h[s]),l[s]=.5*d[s],c[s]=(a[s+1].y-a[s].y)/h[s]-(d[s+1]+2*d[s])*h[s]/6;return!0}}define("curveFitter",["static"],function(){}),Static.SplineType={},Static.SplineType.Natural=0,Static.SplineType.Periodic=1,Static.lookup=function(t,e){var i,n=e.length;if(t<=e[0].x)i=0;else if(t>=e[n-2].x)i=n-2;else{i=0;for(var s=n-2,a=0;s-i>1;)e[a=i+(s-i>>1)].x>t?s=a:i=a}return i},define("spline",["static"],function(){});class Panner extends HObject{constructor(t){super();var e=this,i=null,n=Static.LeftButton,s=Static.NoModifier,a=(Static.Key_Escape,Static.NoModifier,0),r=0,o=!1,l=!1,c="",u="",h=!1,d=Vertical|Horizontal,p=0,f=0;void 0!==t&&(t.panner=this,i=t),this.plot=function(){return i},this.setMouseButton=function(t,e=Static.NoModifier){n=t,s=e},this.getMouseButton=function(){return{button:n,modifiers:s}},this.setOrientation=function(t){d=t},this.rescaleAndRedraw=function(t,n){for(var s=e.plot().plotItemStore(),a=0;a<s.length;++a){var r=s[a].getCanvas();r.css("left",0),r.css("top",0)}var o=!1,l=i.autoReplot();i.setAutoReplot(!1);for(var c=0;c<axisCnt;c++){var u,h,d=e.plot().canvasMap(c),p=d.transform(e.plot().axisScaleDiv(c).lowerBound()),f=d.transform(e.plot().axisScaleDiv(c).upperBound());c==xBottom||c==xTop?(u=d.invTransform(p-t),h=d.invTransform(f-t)):(u=d.invTransform(p-n),h=d.invTransform(f-n)),i.setAxisScale(c,u,h),o=!0}i.setAutoReplot(l),o&&i.replot()},this.showCursor=function(t){t!=h&&null!=this.plot()&&""!=c&&(h=t,t?(this.plot().isCursorSet()&&(u=this.plot().cursor()),this.plot().setCursor(c)):""!==u?(this.plot().setCursor(u),u=""):this.plot().unsetCursor())},this.setCursor=function(t){c=t},this.cursor=function(){return""!=c?c:null!=this.plot()?this.plot().cursor():""},this.plot()&&this.setEnabled_1(!0),this.setEnabled=function(e){if(o!=e){o=e;var i=t.getCentralWidget();i&&(e?i.installEventFilter(this):i.removeEventFilter(this))}},this.isEnabled=function(t){return o},this.widgetMousePressEvent=function(t){var e=Static.isMobile();return!(e||t.button==n&&Utility.modifiers(t)===s)||(e?(a=t.originalEvent.touches[0].clientX,r=t.originalEvent.touches[0].clientY,l=!0):(a=t.clientX,r=t.clientY,l=!0),this.showCursor(!0),!0)},this.widgetMouseUpEvent=function(t){l&&(l=!1,e.showCursor(!1),0==p&&0==f||(e.rescaleAndRedraw(p,f),p=0,f=0))},this.widgetMouseMoveEvent=function(t){if(l){if(Static.isMobile()){var i=t.originalEvent.changedTouches[0];p=parseInt(i.clientX)-a,f=parseInt(i.clientY)-r}else p=t.clientX-a,f=t.clientY-r;d==Vertical&&(p=0),d==Horizontal&&(f=0),function(){for(var t=e.plot().plotItemStore(),i=0;i<t.length;++i){var n=t[i].getCanvas();n.css("left",p),n.css("top",f)}}()}},Static.trigger("pannerAdded",this),this.setEnabled(!0)}eventFilter(t,e){if(this.isEnabled()){switch(e.type){case"mousedown":case"touchstart":this.widgetMousePressEvent(e);break;case"mousemove":case"touchmove":this.widgetMouseMoveEvent(e);break;case"mouseleave":this.widgetMouseUpEvent(e);break;case"mouseup":case"touchend":this.widgetMouseUpEvent(e)}}}}Panner.prototype.toString=function(){return"[Panner]"},define("panner",["static","hObject"],function(){});class PlotShapeItem extends PlotItem{constructor(){super("Shape");var t=super.boundingRect(),e=new Misc.Pen("black",1,Static.NoPen),i=new Misc.Brush("#006464"),n=new Misc.MPath;this.setItemAttribute(AutoScale,!0),this.setItemAttribute(Legend,!1),this.setZ(8),this.rtti=Static.Rtti_PlotShape,this.getBoundingRect=function(){return t},this.setRect=function(t){var e=new Misc.MPath;e.addRect(t),this.setShape(e)},this.setPolygon=function(t){var e=new Misc.MPath;e.addPolygon(t),this.setShape(e)},this.setShape=function(e){n=e,t=e.isEmpty()?PlotItem.prototype.boundingRect.call(this):n.boundingRect()},this.setBrush=function(t){i=t,this.itemChanged()},this.brush=function(){return i},this.setPen=function(t){e=t,this.itemChanged()},this.pen=function(){return e},this.draw=function(s,a){if(this.clearCanvas(),!n.isEmpty()&&(e.style!=Static.NoPen||i!=Static.NoBrush)){var r=this.getCanvasRect(),o=ScaleMap.invTransform_Rect(s,a,r);if(t.intersects(o)){var l=this.getContext(),c=ScaleMap.transformPath(s,a,n,!1),u=new PaintUtil.Painter(l);u.setBrush(i),u.setPen(e),u.drawPath(c),u=null}}},this.boundingRect=function(){return this.getBoundingRect()},this.toString=function(){return"[PlotShapeItem]"}}}define("plotShapeItem",["static","plotItem"],function(){});class CurveShapeItem extends PlotShapeItem{constructor(t){super();var e=null,i=null,n=void 0,s=void 0,a=!0,r=this;function o(t,e){t&&("v_ruler1"!=t.title()&&"v_ruler2"!=t.title()||("v_ruler1"==t.title()?r.setLowerLimit(e):r.setUpperLimit(e)))}this.setEnabled=function(t){(a=t)&&e&&e.isVisible()?(this.setVisible(!0),this.refresh()):this.setVisible(!1)},this.enabled=function(t){return a},this.setCurve=function(t){t&&e==t||(e=t,this.setLimits(),a&&e&&e.isVisible()&&(this.setVisible(!0),this.refresh()))},this.curve=function(){return e},this.refresh=function(){i=this.isVisible()&&e?function(){var t=[];if("[SyntheticPointData]"==e.data().toString())return t;var i=e.data().samples();if(i&&!(i.length<2)){if(n<i[0].x||s>i[i.length-1].x||n>=s)return null;void 0==n&&(n=i[0].x),void 0==s&&(s=i[i.length-1].x);for(var a,r,o=-1,l=-1,c=(t=[],1);c<i.length;c++)i[c].x>n&&-1==o&&(o=c-1,t.push(i[o])),i[c-1].x<s&&(l=c,-1!=o&&t.push(i[l]));return a=i[o].interpolatedPoint(i[o+1],n),r=i[l-1].interpolatedPoint(i[l],s),t.length&&t[0].x!==a.x&&t.splice(0,1,a),t.length&&t[t.length-1].x!==r.x&&(t.pop(),t.push(r)),t.splice(0,0,new Misc.Point(t[0].x,Number.MIN_VALUE)),t.push(new Misc.Point(t[t.length-1].x,Number.MIN_VALUE)),t}}():null,this.setPolygon(i),e&&i&&(r.setAxes(e.xAxis(),e.yAxis()),e.plot().autoRefresh())},this.setLimits=function(t,e){n=t,s=e,this.refresh()},this.setLowerLimit=function(t){n=t,this.refresh()},this.setUpperLimit=function(t){s=t,this.refresh()},Static.bind("visibilityChange",function(t,i,n){i.rtti==Static.Rtti_PlotCurve&&(e&&i==e&&a&&n?r.setVisible(!0):(r.plot().curveShapeEnabledByPlotSettings()&&r.setEnabled(r.plot().tbar.isDropdownItemChecked("Watch",6)),i==e&&(r.setVisible(!1),r.setLimits())))}),Static.bind("axisChanged",function(t,i,n){n.rtti==Static.Rtti_PlotCurve&&e&&n===e&&r.setLimits()});var l=Number.MAX_VALUE,c=Number.MAX_VALUE;Static.bind("positionChanging",function(t,e,i){if(c!==e||l!==i){var n=e.plot(),s=n.autoReplot();n.setAutoReplot(!1),o(e,i),c=e,l=i,n.setAutoReplot(s),n.autoRefresh()}}),Static.bind("positionChanged",function(t,e,i){if(c!==e||l!==i){var n=e.plot(),s=n.autoReplot();n.setAutoReplot(!1),o(e,i),c=e,l=i,n.setAutoReplot(s),n.autoRefresh()}}),Static.bind("currentCurveChanged",function(t,e){e&&r.setCurve(e)}),Static.bind("curveShapeColorChanged",function(t,e){var i=r.brush();i.color=e,r.setBrush(i);var n=r.pen();n.color=e,r.setPen(n)}),Static.bind("watchEnabled",function(e,i,n){t.settings().shadeWatchArea&&"Area below curve"==i.name()&&r.setEnabled(n)}),Static.bind("shadeWatchArea",function(e,i){t.setCurveShapeEnabledByPlotSettings(i),!i&&t.watchAreaBelowCurve.isEnable()||!i&&!t.watchAreaBelowCurve.isEnable()?r.setEnabled(!1):i&&t.watchAreaBelowCurve.isEnable()&&r.setEnabled(!0)}),Static.bind("itemAttached",function(e,i,n){i.rtti==Static.Rtti_PlotCurve&&(n?r.curve():t.itemList(Static.Rtti_PlotCurve).length&&t.hasVisiblePlotCurve()||r.setCurve(null),Static.trigger("visibilityChange",[i,n]),1==t.itemList(Static.Rtti_PlotCurve).length&&Static.trigger("currentCurveChanged",i))}),Static.bind("curveAdjusted",function(){r.isVisible()&&r.setLimits()}),this.attach(t),this.setEnabled(!1)}}define("curveShapeItem",["plotShapeItem"],function(){});class Watches{constructor(t){var e=[];function i(i,n,s){t.rv.addToWatchList(i),e.push(n),s&&i.setEnable(!1)}this.watchElements=function(){return e},i(new WatchCurveName,{text:"Curve name",tooltip:"Name of the curve that is the subject of watches.",checkboxState:"checked"}),i(new WatchLeftRulerPosition(t.rv),{text:"Left ruler position",tooltip:"Current position of the left ruler.",checkboxState:"checked"}),i(new WatchRightRulerPosition(t.rv),{text:"Right ruler position",tooltip:"Current position of the right ruler.",checkboxState:"checked"}),i(new WatchBottomRulerPosition(t.rv),{text:"Bottom ruler position",tooltip:"Current position of the bottom ruler."},!0),i(new WatchTopRulerPosition(t.rv),{text:"Top ruler position",tooltip:"Current position of the top ruler."},!0),i(new WatchSlope,{text:"Slope at left ruler",tooltip:"Slope (gradient) in the curve at the point where the left ruler intersects the curve."},!0),t.watchAreaBelowCurve=new WatchAreaBelowCurve,i(t.watchAreaBelowCurve,{text:"Area below curve",tooltip:"Area bounded by the curve, right ruler, x-axis and left ruler."},!0),i(new WatchVolumeOfRevolution,{text:"Volume of revolution(X)",tooltip:"Volume generated by a 360 degrees rotation about the x-axis of the area bounded by the curve, right ruler, x-axis and left ruler."},!0)}}define("watches",["basicWatch"],function(){});class AddRemovePointPicker extends PlotPicker{constructor(t){super(xBottom,yLeft,Static.NoRubberBand,Static.AlwaysOn,t);var e=this,i=null,n=!1;this.setStateMachine(new PickerClickPointMachine);var s=new CurveClosestPoint(t,function(t,e){n&&(t.removePoint(e),Static.trigger("curveAdjusted"))});function a(e){if(!n)return;if(!i){(i=new MyCurve(Utility.generateCurveName(t))).attach(t);let e=Utility.randomColor();i.setPen(new Misc.Pen(e));let n=new Symbol(MRect,new Misc.Brush(Static.invert(e)),new Misc.Pen(e),new Misc.Size(8,8));i.setSymbol(n);let s="";Static.showline&&Static.showsymbol?s="lineAndSymbol":Static.showline?s="line":Static.showsymbol&&(s="symbol"),Utility.setLegendAttribute(i,s,i.getLegendIconSize())}let s=i.data().samples();s.containsPoint(e)||s.push(e),s.sort(function(t,e){return t.x-e.x}),i.setSamples(s),t.autoRefresh(),Static.trigger("pointAdded",i),Static.trigger("curveAdjusted")}this.setEnabled(!1),this.activate=function(t){n=t,this.setEnabled(t),s.setEnabled(t)},this.setAddRemoveMousePattern=function(t,e,i=Static.NoModifier){this.setMousePattern(t,e,i),s.setMousePattern(e,i)},Static.bind("currentCurveChanged",function(t,n){i!==n&&(i=n||null)&&e.setAxis(i.xAxis(),i.yAxis())}),Static.bind("pointSelected",function(){n&&e.setEnabled(!1)}),Static.bind("pointNotSelected",function(){n&&e.setEnabled(!0)});var r=new Misc.Point(Number.MAX_VALUE,Number.MAX_VALUE);Static.bind("selected",function(n,s){var o=e.selection()[0];o&&(r.isEqual(o)||(r=o,a(i?ScaleMap.invTransform(t.axisScaleDraw(i.xAxis()).scaleMap(),t.axisScaleDraw(i.yAxis()).scaleMap(),o):ScaleMap.invTransform(t.axisScaleDraw(xBottom).scaleMap(),t.axisScaleDraw(yLeft).scaleMap(),o))))});var o=this.trackerFont();o.fontColor="blue",this.setTrackerFont(o)}trackerText(t){var e,i=this.plot();t=this.invTransform(t);var n=0;n=i.axisEnabled(xBottom)?i.axisDecimalPlaces(xBottom):i.axisEnabled(xTop)?i.axisDecimalPlaces(xTop):i.axisDecimalPlaces(xBottom);var s=0;switch(s=i.axisEnabled(yLeft)?i.axisDecimalPlaces(yLeft):i.axisEnabled(yRight)?i.axisDecimalPlaces(yRight):i.axisDecimalPlaces(yLeft),this.rubberBand()){case Static.HLineRubberBand:e=Static.adjustForDecimalPlaces(t.y,s).toString();break;case Static.VLineRubberBand:e=Static.adjustForDecimalPlaces(t.x,n).toString();break;default:e=Static.adjustForDecimalPlaces(t.x,n).toString()+", "+Static.adjustForDecimalPlaces(t.y,s).toString()}return e}}define("addRemovePointPicker",["plot","curveClosestPoint","plotpicker","plotcurve","symbol"],function(){}),define("app/main",["curveLegendAttributeDlg","functionDlg","curveFitDlg","curveStyleDlg","axisDlg","pointEntryDlg","mtoolBar","upload","file","watch","basicWatch","legendMenu","rulers","infoSidebar","infoPropertiesPane","plotSideBar","curvePropertiesPane","plotPropertiesPane","myPlot","myCurve","pointData","symbol","legend","magnifier","plotGrid","widgetOverlay","myZoomer","curveFitter","spline","panner","contextMenu","plotMarker","curveClosestPoint","curveShapeItem","underscore","widgetOverlay","functionData","watches","addRemovePointPicker"],function(){Static.alert('This application is design to run in "chrome browser". While it may run in other browsers, some features may not behave as expected.',"small");new MyPlot($("#plotDiv"),"Plot")}),requirejs.config({baseUrl:"lib",paths:{app:"../app",underscore:"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min",addRemovePointPicker:"../app/src/addRemovePointPicker",axisDlg:"../app/src/axisDlg",basicWatch:"../app/src/basicWatch",curveClosestPoint:"../app/src/curveClosestPoint",curveFitDlg:"../app/src/curveFitDlg",curveLegendAttributeDlg:"../app/src/curveLegendAttributeDlg",curvePropertiesPane:"../app/src/curvePropertiesPane",curveSettings:"../app/src/curveSettings",curveShapeItem:"../app/src/curveShapeItem",curveStyleDlg:"../app/src/curveStyleDlg",functionData:"../app/src/functionData",functionDlg:"../app/src/functionDlg",infoPropertiesPane:"../app/src/infoPropertiesPane",infoSidebar:"../app/src/infoSidebar",legendMenu:"../app/src/legendMenu",mpicker:"../app/src/mpicker",mtoolBar:"../app/src/mtoolBar",myCurve:"../app/src/myCurve",myPlot:"../app/src/myPlot",myZoomer:"../app/src/myZoomer",pane:"../app/src/pane",plotPropertiesPane:"../app/src/plotPropertiesPane",plotSideBar:"../app/src/plotSideBar",pointEntryDlg:"../app/src/pointEntryDlg",propertiesPane:"../app/src/propertiesPane",ruler:"../app/src/ruler",rulers:"../app/src/rulers",settings:"../app/src/settings",sideBar:"../app/src/sideBar",toolBar:"../app/src/toolBar",watch:"../app/src/watch",watches:"../app/src/watches"},shim:{underscore:{exports:"_"},treetable:{},static:{deps:["miscObjects"]},plot:{deps:["static","widget","scaleWidget","utility","miscObjects","painter","scaleDiv","interval","scaleMap","scaleWidget","transform","layout","scaleDraw","scaleEngine","pointMapper"]},plotItem:{deps:["static"]},scaleMap:{deps:["static","transform"]},canvas:{deps:["static"]},curveFitter:{deps:["static"]},spline:{deps:["static"]},symbol:{deps:["static","graphic"]},seriesData:{deps:["static","plotItem"]},pointMapper:{deps:["static"]},pointData:{deps:["static","seriesData"]},scaleEngine:{deps:["static"]},scaleDraw:{deps:["static","abstractScaleDraw"]},widget:{deps:["static","hObject"]},widgetOverlay:{deps:["static","widget"]},scaleWidget:{deps:["static","widget"]},picker:{deps:["static","widgetOverlay","pickermachine"]},plotpicker:{deps:["static","picker"]},plotzoomer:{deps:["plotpicker"]},plotGrid:{deps:["static","plotItem"]},plotZoneItem:{deps:["static"]},plotSpectroCurve:{deps:["static","colorMap","plotItem","seriesData"]},colorMap:{deps:["static"]},plotcurve:{deps:["static","seriesData"]},panner:{deps:["static","hObject"]},magnifier:{deps:["static","hObject"]},plotShapeItem:{deps:["static","plotItem"]},plotMarker:{deps:["static","plotItem"]},legend:{deps:["static"]},pickermachine:{deps:["static","eventpattern"]},widget:{deps:["static","hObject"]},addRemovePointPicker:{deps:["plot","curveClosestPoint","plotpicker","plotcurve","symbol"]},axisDlg:{deps:[]},basicWatch:{deps:["static","watch"]},curveClosestPoint:{deps:["static","widgetOverlay","plotMarker"]},curveFitDlg:{deps:[]},curveLegendAttributeDlg:{deps:[]},curvePropertiesPane:{deps:["propertiesPane"]},curveSettings:{deps:[]},curveShapeItem:{deps:["plotShapeItem"]},curveStyleDlg:{deps:[]},functionData:{deps:["pointData"]},functionDlg:{deps:[]},infoPropertiesPane:{deps:["pane"]},infoSidebar:{deps:["sideBar"]},legendMenu:{deps:["static","contextMenu"]},mpicker:{deps:["static","plotpicker"]},mtoolBar:{deps:["toolBar","curveSettings"]},myCurve:{deps:["plotcurve"]},myPlot:{deps:["curveClosestPoint","plot","functionData","plotGrid"]},myZoomer:{deps:["plotzoomer"]},pane:{deps:["treetable"]},plotPropertiesPane:{deps:["propertiesPane"]},plotSideBar:{deps:["sideBar"]},pointEntryDlg:{deps:[]},propertiesPane:{deps:["pane"]},ruler:{deps:["static","plotMarker"]},rulers:{deps:["static","mpicker","ruler"]},settings:{deps:[]},sideBar:{deps:[]},toolBar:{deps:[]},watch:{deps:[]},watches:{deps:["basicWatch"]}}}),requirejs(["app/main"]),define("app",function(){});